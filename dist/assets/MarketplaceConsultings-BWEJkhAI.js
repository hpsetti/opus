import{O as S}from"./OpusSelect-BRceMwA4.js";import{L as k}from"./Loader-DR0R9oEF.js";import{_ as T,f as D}from"./RequestQuote-CSWNwCnw.js";import{_ as C,B as V,d as q,r as g,o,c,a as t,n as r,t as d,k as m,F as v,b as p,w as A,p as b,f as x,m as L,l as O}from"./index-BlMJxPGQ.js";import{_ as M}from"./clock-Bt2qCWrf.js";import{_ as B}from"./purchased_resources-Dm7E7KcS.js";const N={name:"Consulting",props:{consulting:{type:Object,required:!0}},components:{BaseButton:V},data(){return{}},computed:{consultingData(){return this.consulting.modified_date?this.consulting.consulting_basic_details_dto:this.consulting},isAvailable(){return!this.isModified||this.isCompleted},isModified(){return this.consulting.modified_date},isCompleted(){return this.consulting.completed_date}},methods:{formatToHumanDate(s){return q(s).format("Do MMM YYYY")},requestQuote(){this.$emit("request-quote",this.consulting)},ScheduleConsulting(){const s=this.consultingData.consulting_name.trim().replace(/[^a-zA-Z0-9- ]/g,"").replace(/\s+/g,"-").toLowerCase();this.$router.push({path:`/schedule-consulting/${s}`,query:{consultingId:this.consultingData.consulting_id}})}}},_=s=>(b("data-v-52a43040"),s=s(),x(),s),I={class:"consulting-wrapper p-0"},j={class:"col-sm-6 col-md-6 p-0 d-flex title-container"},E=_(()=>t("div",{class:"icon-container d-flex"},[t("img",{class:"icon",src:T,alt:"consulting_item"})],-1)),R=_(()=>t("div",{class:"consulting-type"},[t("span",null,"Consulting")],-1)),z={class:"consulting-title ellipsis-text"},Y={key:0,class:"consulting-time d-flex align-items-center mt-5"},P=_(()=>t("img",{src:M},null,-1)),Q={style:{"margin-left":"5px","margin-top":"3px"}},F={key:0,class:"col-xs-6 col-sm-2 col-md-2 p-0 d-flex align-items-center consulting-status"},H={class:"col-xs-12 col-sm-6 col-md-12 d-flex p-0 justify-content-end price-info"},J=_(()=>t("span",{class:"price-label"},"Price",-1)),U={class:"price ml-20"},W={key:1,class:"requested_date"},Z={class:"col-xs-12 col-sm-6 col-md-12 d-flex p-0 justify-content-end actions align-items-center flex-wrap"},G={class:"action"},K={key:0,class:"action"};function X(s,e,a,i,l,n){const h=g("BaseButton");return o(),c("div",I,[t("div",{class:r([[n.isAvailable?"":"purchased"],"consulting-container col-xs-12 p-0 pt-10 d-flex flex-wrap"])},[t("div",j,[E,t("div",{class:r(["details-container",n.isAvailable?"":"w-80"])},[R,t("div",z,[t("span",null,d(n.consultingData.title||n.consultingData.consulting_name),1)]),n.isAvailable?(o(),c("div",Y,[P,t("span",Q,d(n.consultingData.duration_hours+n.consultingData.duration_type),1)])):m("",!0)],2)]),n.isAvailable?m("",!0):(o(),c("div",F,[t("p",{class:r(["consulting-status",a.consulting.consulting_status])},d(a.consulting.consulting_status),3)])),t("div",{class:r([[n.isAvailable?"col-md-6":"col-md-2"],"col-xs-12 col-sm-12 section actions-container p-0 d-flex flex-wrap"])},[t("div",H,[n.isAvailable?(o(),c(v,{key:0},[J,t("span",U,"$"+d(n.consultingData.price)+"+",1)],64)):(o(),c("p",W,d(n.formatToHumanDate(a.consulting.modified_date)||a.consulting.modified_date),1))]),t("div",Z,[t("div",G,[t("span",{class:"view-details cursor-pointer",onClick:e[0]||(e[0]=(...f)=>n.ScheduleConsulting&&n.ScheduleConsulting(...f))},"View Details")]),n.isAvailable?(o(),c("div",K,[p(h,{class:"ml-15",onClick:n.requestQuote},{default:A(()=>[t("span",null,d(n.isCompleted?"Repurchase":"Request quote"),1)]),_:1},8,["onClick"])])):m("",!0)])],2)],2)])}const $=C(N,[["render",X],["__scopeId","data-v-52a43040"]]),ss={props:{userId:{type:[Number,String],required:!0},enrolledTrainings:{type:Array,default:()=>[]},screen:{type:String,default:"consultings"}},data(){return{consultings:[],consultingTabs:{Research:"Research",Analyze:"Analyze",Design:"Design",Evaluate:"Evaluate",Validate:"Validate",Submit:"Submit"},consultingTabCount:{"View all":0,Research:0,Analyze:0,Design:0,Evaluate:0,Validate:0,Submit:0},activeTabName:{name:"View all",length:0},activeConsultingList:[],consultingCategories:[],consultingCategoriesData:[],loaderStatus:!1,sortingType:"name",sortingOrder:"asc"}},components:{Consulting:$,OpusSelect:S,Loader:k},async created(){await this.setupMarketPlaceConsultings()},watch:{activeTabName(){this.setActiveTabConsultings()}},methods:{async setupMarketPlaceConsultings(){this.loaderStatus=!0,this.consultings=await D({userId:this.userId}),this.buildConsultingCategories(),this.setActiveTabConsultings(),this.loaderStatus=!1},setSorting(s){const e={asc:"desc",desc:"asc"};this.sortingType===s?this.sortingOrder=e[this.sortingOrder]:(this.sortingType=s,this.sortingOrder="asc"),this.setActiveTabConsultings()},buildConsultingCategories(){const s={"View all":0},e={"View all":0};if(Object.keys(this.consultingTabs).forEach(i=>{s[i]=[],e[i]=0}),!this.consultings)return;this.consultings.forEach(i=>{const l=i.consulting_type;l&&s[l]&&s[l].push(i)});let a=[];Object.keys(s).forEach(i=>{e[i]=s[i].length,a.push({name:i,length:i==="View all"?this.consultings.length:s[i].length})}),this.consultingCategoriesData=a,a=[],s["View all"]=this.consultings,this.consultingCategories=s,e["View all"]=this.consultings.length,this.consultingTabCount=e},setActiveTabConsultings(){let s=[];s=this.consultingCategories[this.activeTabName.name],s=JSON.parse(JSON.stringify(s)),s.sort((e,a)=>this.compareConsultings(e,a,this.sortingType)),this.sortingOrder==="desc"&&s.reverse(),this.activeConsultingList=s,this.activeTabName.length=this.activeConsultingList.length},compareConsultings(s,e,a="name"){if(!s||!e)return 0;switch(a){case"status":{if(!s.consulting_status||!e.consulting_status)return-1;const i={requested:1,inprogress:2,complete:3};return i[s.consulting_status]<i[e.consulting_status]?-1:1}default:return(s.consulting_name||"").toLowerCase().localeCompare((e.consulting_name||"").toLowerCase())}},navigateToMarketPlace(){this.$router.push("/market-place")},customLabel(s){return`${s.name} (${s.length})`}}},ts=s=>(b("data-v-4a2df1b8"),s=s(),x(),s),es={class:"row mr-0"},ns=ts(()=>t("span",{class:"font-32 fw-400"},"Marketplace",-1)),is={class:"col-xs-12 p-0 pl-20 xs-display-none"},as={class:"col-xs-12 d-flex sorting-container mb-20 mt-10"},ls={class:"col-xs-6 col-sm-6 col-md-6 p-0 xs-flex-column d-flex align-items-center flex-wrap"},os=["src"],cs={key:1,class:"col-xs-12 mt-20 mb-20"},rs=O('<div class="col-xs-12 col-sm-10 col-md-8 d-flex col-gap-10 align-items-start" data-v-4a2df1b8><img src="'+B+'" alt="" data-v-4a2df1b8><div class="col-xs-12 d-flex flex-direction-column row-gap-10" data-v-4a2df1b8><span class="fw-400 purchased-text" data-v-4a2df1b8>You have requested quotes for all consulting services</span><span class="fw-300 font-18" data-v-4a2df1b8>We will notify you of any new services as they become available</span></div></div>',1),us=[rs];function ds(s,e,a,i,l,n){const h=g("opusSelect"),f=g("consulting"),y=g("loader");return o(),c("div",es,[t("div",{class:r(["col-xs-12 pl-0",a.screen!=="consultings"?"marketplace--container":""])},[t("div",{class:r(["col-xs-12 header--container d-flex justify-content-between align-items-center pr-0 xs-flex-column-marketplace",a.screen==="consultings"?"pl-15":"pl-25"])},[ns,p(h,{class:"consulting-select",modelValue:l.activeTabName,"onUpdate:modelValue":e[0]||(e[0]=u=>l.activeTabName=u),options:l.consultingCategoriesData,trackBy:"name","custom-label":n.customLabel},null,8,["modelValue","options","custom-label"])],2),l.activeConsultingList.length?(o(),c(v,{key:0},[t("div",is,[t("div",as,[t("div",ls,[t("span",{class:"text-primary cursor-pointer pr-10",onClick:e[1]||(e[1]=u=>n.setSorting("name"))}," Name "),t("img",{onClick:e[2]||(e[2]=u=>n.setSorting("name")),class:r([{desc:l.sortingOrder==="desc"&&l.sortingType==="name"},"sorting-icon cursor-pointer"]),src:l.sortingType==="name"?"/static/images/icons/caret_up.svg":"/static/images/icons/caret_up_light.svg",alt:""},null,10,os)])])]),(o(!0),c(v,null,L(l.activeConsultingList,(u,w)=>(o(),c("div",{class:"col-xs-12 pl-20 mt-10 pr-0",key:w},[p(f,{consulting:u,onRequestQuote:gs=>s.$emit("request-quote",u)},null,8,["consulting","onRequestQuote"])]))),128))],64)):l.loaderStatus?m("",!0):(o(),c("div",cs,us))],2),p(y,{loadingStatus:l.loaderStatus},null,8,["loadingStatus"])])}const Cs=C(ss,[["render",ds],["__scopeId","data-v-4a2df1b8"]]);export{$ as C,Cs as M};
