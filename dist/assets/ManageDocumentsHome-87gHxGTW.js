import{_ as A,s as R,B as V,b3 as S,$ as v,o as a,c as d,a as e,F as H,m as K,j as w,Y as Q,t as k,v as L,b as r,k as b,w as g,e as c,r as h,p as I,f as U,I as O,S as G,R as X,b4 as $,a1 as q}from"./index-BlMJxPGQ.js";import{O as j,g as z}from"./drlAdmin-BikVWK4U.js";import{L as E}from"./Loader-DR0R9oEF.js";import{b as M,e as ee,f as te,u as se,h as oe,i as le,j as Y,k as ie,l as ce,m as B}from"./documents-CP6oEKge.js";import{O as ae}from"./OpusEditor-Cn6yaL1S.js";import"./event-bus-DYoA24Gz.js";import{O as ne}from"./OpusBreadCrumb-DtnZkk2b.js";import{O as de}from"./OpusTable-CkU-GtnE.js";import{O as re}from"./OpusPagination-DQXieD6a.js";import{O as me,a as ue}from"./OpusFormModal-CvnaFgl_.js";import{_ as pe}from"./plus_icon_blue-MdAOVTYS.js";import{_ as W}from"./doc_preview-KlbfcfdS.js";import"./danger_close_icon-CkTgh2bE.js";import"./lodash-DhCEjwN-.js";import"./OpusCheckbox-DmKgoiup.js";import"./more-horizontal-YxyMY0P_.js";import"./OpusSelect-BRceMwA4.js";import"./cloneDeep-ldw2ZiUo.js";import"./_baseAssignValue-BD6sbZ4C.js";import"./chevron_down_new-ByXOiGKT.js";import"./chevron_left_icon-6Fqv5UkY.js";const _e={components:{Loader:E,Multiselect:R,OpusImageSelect:j,BaseButton:V},data(){return{documentLibraryTypeName:"",documentLibraryTypeIcon:"",updatedDocumentLibraryTypeName:"",selectedDoc:{},selectedFile:null,categoryActionSelect:["Add","Update"],actionSelected:"",documentLibraryTypeList:[],loaderStatus:!1,getLibraryType:null,displayFileName:""}},async created(){await this.getAllDocLibTypeData()},computed:{canSave(){return this.actionSelected==="Add"&&this.documentLibraryTypeName&&this.selectedFile||this.actionSelected==="Update"&&this.selectedFile&&this.getLibraryType}},methods:{uploadFile:S,setSelectedFile(o){this.selectedFile=o},async getCategoryData(){this.loaderStatus=!0,this.documentLibraryTypeName="",this.getLibraryType=null,this.updatedDocumentLibraryTypeName="",await this.getAllDocLibTypeData(),this.loaderStatus=!1},async getAllDocLibTypeData(){this.documentLibraryTypeList=await M()},async getLibraryDetails(o){const s=await ee(o);this.selectedFile=s.data.icon,this.displayFileName=this.selectedFile.split("/").pop()},cancelPermissions(){this.emptyObject(),this.actionSelected="",v("#document-category").modal("hide")},emptyObject(){this.documentLibraryTypeName="",this.selectedFile=null},async addCategory(){if(this.loaderStatus=!0,this.actionSelected==="Add"){const s={icon:`/${await S(this.selectedFile,{container_name:"icons",file_name:`${this.selectedFile.name}`,folder_name:"document-library",permissions:"write",storage_name:"opus-storage-java"})}`,name:this.documentLibraryTypeName,sequence:0},n=await te(s);n?(this.$notify({type:"success",title:"Success",text:n.data}),this.cancelPermissions()):this.$notify({type:"error",title:"Error",text:n.data})}else if(this.actionSelected==="Update"){const o={name:this.updatedDocumentLibraryTypeName,id:this.getLibraryType,icon:this.selectedFile},s=await se(o);s?(this.$notify({type:"success",title:"Success",text:s.data}),this.cancelPermissions()):this.$notify({type:"error",title:"Error",text:s.data})}this.loaderStatus=!1}}},T=o=>(I("data-v-7dde27f4"),o=o(),U(),o),he={id:"document-category",class:"modal fade",role:"dialog"},ye={class:"modal-dialog modal-lg"},fe={class:"modal-content first-modal-content"},De={class:"modal-header modal-bgcolor"},be=T(()=>e("div",{class:"text-h5 blue-1"},"Category",-1)),ve=T(()=>e("hr",null,null,-1)),ge={class:"modal-body"},we={class:"col-xs-12 col-sm-12 add-role mb-10"},Se=T(()=>e("p",{class:"search-label sub-heading"},[c(" Actions "),e("span",{style:{color:"red"}},"*")],-1)),xe=["value"],Le={class:"pl-5"},Te={key:0,class:"col-xs-12 col-sm-12 add-role"},Pe={class:"row mr-bt-5p"},ke=T(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[c(" Document Library Type Name "),e("span",{style:{color:"red"}},"*")],-1)),Fe={class:"col-xs-12 col-sm-6"},Ce={class:"row mr-bt-5p"},Ne=T(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[e("label",{for:"add-doc-icon"},[c("Document Library Type Icon"),e("span",{class:"text-required"}," *")])],-1)),Be={key:1,class:"col-xs-12 col-sm-12 add-role"},Ae={class:"row mr-bt-5p"},Ve=T(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[c(" Select Document Library Type Name "),e("span",{style:{color:"red"}},"*")],-1)),Ie={class:"col-xs-12 col-sm-6"},Ue={class:"row mr-bt-5p"},Oe=T(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"}," New Document Library Type Name ",-1)),je={class:"col-xs-12 col-sm-6"},Ee={class:"row mr-bt-5p"},Me=T(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[e("label",{for:"add-doc-icon"},"Document Library Type Icon")],-1)),qe={class:"pl-30 text-bold"},ze={key:0,class:"col-sm-12 col-xs-12 col-md-12 footer remove_button_padding"},We={class:"d-flex justify-content-end col-gap-15"};function Re(o,s,n,y,t,i){const u=h("OpusImageSelect"),p=h("multiselect"),D=h("BaseButton"),x=h("loader");return a(),d("div",he,[e("div",ye,[e("div",fe,[e("div",De,[e("button",{type:"button",class:"close",onClick:s[0]||(s[0]=(...f)=>i.cancelPermissions&&i.cancelPermissions(...f))}," × "),be,ve]),e("div",ge,[e("div",we,[Se,(a(!0),d(H,null,K(t.categoryActionSelect,(f,P)=>(a(),d("div",{class:"col-xs-12 col-md-4",key:P},[w(e("input",{type:"radio",name:"optradio",value:f,"onUpdate:modelValue":s[1]||(s[1]=l=>t.actionSelected=l),onClick:s[2]||(s[2]=(...l)=>i.getCategoryData&&i.getCategoryData(...l))},null,8,xe),[[Q,t.actionSelected]]),e("label",Le,k(f),1)]))),128))]),t.actionSelected==="Add"?(a(),d("div",Te,[e("div",Pe,[ke,e("div",Fe,[w(e("input",{type:"text",placeholder:"Add New Library Type",class:"form-control",maxlength:"56","onUpdate:modelValue":s[3]||(s[3]=f=>t.documentLibraryTypeName=f)},null,512),[[L,t.documentLibraryTypeName]])])]),e("div",Ce,[Ne,r(u,{class:"col-xs-12 pt-20 pl-15",id:"add-doc-icon",ref:"add-doc-icon",errorTxtProp:"Please select a valid image i.e. svg only",onSelect:i.setSelectedFile,validTypes:"'.svg'",file:{name:null},btnText:"Select"},null,8,["onSelect"])])])):b("",!0),t.actionSelected==="Update"?(a(),d("div",Be,[e("div",Ae,[Ve,e("div",Ie,[r(p,{showLabels:!1,"close-on-select":!0,"allow-empty":!1,class:"multiselect-single-dropdown",searchable:!0,options:t.documentLibraryTypeList.map(f=>f.id),"custom-label":f=>t.documentLibraryTypeList.find(P=>P.id==f).name,modelValue:t.getLibraryType,"onUpdate:modelValue":s[4]||(s[4]=f=>t.getLibraryType=f),onSelect:i.getLibraryDetails,"open-direction":"bottom",placeholder:"Select Library Type"},null,8,["options","custom-label","modelValue","onSelect"])])]),e("div",Ue,[Oe,e("div",je,[w(e("input",{type:"text",placeholder:"Update Library Type ",class:"form-control",maxlength:"56","onUpdate:modelValue":s[5]||(s[5]=f=>t.updatedDocumentLibraryTypeName=f)},null,512),[[L,t.updatedDocumentLibraryTypeName]])])]),e("div",Ee,[Me,e("p",qe,k(t.displayFileName),1)])])):b("",!0)]),t.actionSelected==="Add"||t.actionSelected==="Update"?(a(),d("div",ze,[e("div",We,[r(D,{variant:"secondary",onClick:i.cancelPermissions},{default:g(()=>[c(" Cancel ")]),_:1},8,["onClick"]),r(D,{onClick:i.addCategory,disabled:!i.canSave},{default:g(()=>[c("Save")]),_:1},8,["onClick","disabled"])])])):b("",!0)]),r(x,{loadingStatus:t.loaderStatus},null,8,["loadingStatus"])])])}const He=A(_e,[["render",Re],["__scopeId","data-v-7dde27f4"]]),Ke={name:"DeleteWarning",props:["userId","userDeleteNumbers"],data(){return{}},components:{BaseButton:V},methods:{async publishDelete(){this.$emit("deleteBundle")},cancelOp(){v("#modal_project_delete").modal("hide")}}},Qe=o=>(I("data-v-1fe95661"),o=o(),U(),o),Ye={id:"modal_project_delete",class:"modal",role:"dialog"},Ze={class:"modal-dialog modal-lg"},Je={class:"modal-content"},Ge={class:"modal-body"},Xe={class:"center pb-10"},$e=Qe(()=>e("p",{class:"text-h4 pb-10"}," Are you sure you want to delete this Document/Bundle? ",-1)),et={class:"text-regular-large"},tt={class:"fw-700"},st={class:"d-flex justify-content-center p-0 mt-20 col-gap-50 mb-20"};function ot(o,s,n,y,t,i){const u=h("BaseButton");return a(),d("div",null,[e("div",Ye,[e("div",Ze,[e("div",Je,[e("div",Ge,[e("div",Xe,[$e,e("p",et,[c(" Deleting this will remove it permanently from the database for "),e("span",tt,k(n.userDeleteNumbers),1),c(" users. ")])]),e("div",st,[r(u,{onClick:s[0]||(s[0]=p=>i.cancelOp()),variant:"secondary"},{default:g(()=>[c("Cancel")]),_:1}),r(u,{variant:"error",onClick:s[1]||(s[1]=p=>i.publishDelete())},{default:g(()=>[c("Yes, Delete")]),_:1})])])])])])])}const lt=A(Ke,[["render",ot],["__scopeId","data-v-1fe95661"]]),it={components:{Loader:E,Multiselect:R,OpusEditor:ae,BaseButton:V,OpusImageSelect:j,deleteWarning:lt},data(){return{categoryList:[{id:1,name:"Healthcare professional",key:"Healthcare professional"},{id:2,name:"Clinical",key:"Clinical"},{id:3,name:"Layperson",key:"Layperson"},{id:4,name:"Non-clinical",key:"Non-clinical"}],bundleStatusList:[{id:0,name:"False"},{id:1,name:"True"}],documentList:[{id:0,name:"Excel File"},{id:1,name:"Word document,PDF"},{id:2,name:"Word document,PDF,1-hour Q&A"},{id:3,name:"Word document,PDF,2-hours Q&A"},{id:4,name:"Word document,Excel file,PDF,2-hours Q&A"},{id:5,name:"Adobe Illustrator, PDF"},{id:6,name:"Excel, Adobe Illustrator, PDF"}],bundleList:[{id:0,name:"NULL"},{id:1,name:"Template Bundle"},{id:2,name:"Deliverable Bundle"},{id:3,name:"Product Packages"}],formDetails:{document_name:"",description:"",price:null,is_bundle:!1,isdisplay:!0,category:"",contents:"",duration_in_years:5,icon:"",preview_url:"",sequence:null,document_path:"",document_types:"",document_library_type_id:null,display_plan_type:"",document_id:null,bundle_document_ids:[],bundle_library_type:""},maxlength:{title:256,content:1e4},updateDocumentTypes:[],UpdateAvailableDocuments:[],allDocumentList:[],documentLibraryTypeName:"",documentLibraryTypeIcon:"",selectedDoc:{},selectedFile:null,selectedPreviewFile:null,selectedDownloadFile:null,selectedBundleIcon:null,categoryActionSelect:["Add","Update","Delete"],actionSelected:"Add",documentLibraryTypeList:[],documentLibraryTypeListFiltered:[],loaderStatus:!1,selectedUpdateDocumentType:null,UpdateCategoryNew:"",getBundleList:[],defaultIcon:"",isSelectedPreviewFile:!1,isSelectedDownloadFile:!1,isSelectedFile:!1,isSelectedBundleIcon:!1,userDeleteNumbers:""}},async created(){await this.getAllDocLibTypeData()},watch:{actionSelected(){this.updateDocumentTypes=[]},formDetails:{handler(o){o.price=o.price<=2e4?o.price:""},deep:!0}},computed:{canSave(){return this.actionSelected==="Add"&&this.formDetails.document_name&&this.formDetails.price&&this.formDetails.contents&&this.formDetails.description&&this.selectedDownloadFile||this.actionSelected==="Update"&&this.formDetails.document_name&&this.formDetails.price&&this.formDetails.contents||this.actionSelected==="Delete"&&this.formDetails.document_name}},methods:{async deleteProject(){const o=await oe(this.formDetails.document_id);o.status_code===200?(this.$notify({type:"success",title:"Success",text:o.data}),this.cancelPermissions(),v("#modal_project_delete").modal("hide")):this.$notify({type:"error",title:"Error",text:o.message})},validatePrice(o){o=o||window.event;const s=o.which||o.keyCode;if(s>31&&(s<48||s>57)&&s!==46)o.preventDefault();else return!0;return""},uploadFile:S,setSelectedFile(o){this.selectedFile=o,this.isSelectedFile=!0},setselectedPreviewFile(o){this.selectedPreviewFile=o,this.isSelectedPreviewFile=!0},setselectedBundleIcon(o){this.selectedBundleIcon=o,this.isSelectedBundleIcon=!0},setselectedDownloadFile(o){this.selectedDownloadFile=o,this.isSelectedDownloadFile=!0},async getDocumentDetails(o){this.loaderStatus=!0;const s=await le(o);this.formDetails={...s,is_bundle:`${s.is_bundle}`},this.updateDocumentTypes=this.formDetails.document_type_dtos.map(n=>n.id),this.actionSelected==="Update"&&(this.UpdateAvailableDocuments=this.formDetails.avilable_document.map(n=>n.document_id)),this.actionSelected==="Delete"&&(this.userDeleteNumbers=this.formDetails.number_of_user_purchased),this.selectedFile=this.formDetails.icon,this.selectedPreviewFile=this.formDetails.preview_url,this.selectedDownloadFile=this.formDetails.document_path,this.loaderStatus=!1},async getBundleTypeList(){this.getBundleList=this.bundleList},async getCategoryData(){this.loaderStatus=!0,await this.getAllDocLibTypeData(),this.loaderStatus=!1},async getAllDocLibTypeData(){this.emptyObject();const o=await z();this.documentList=o,this.documentLibraryTypeList=await M(),this.documentLibraryTypeListFiltered=this.documentLibraryTypeList,this.selectedFile=this.documentLibraryTypeList.find(n=>n.id===this.formDetails.display_plan_type),this.allDocumentList=await Y();const s=this.allDocumentList.map(n=>(n.is_bundle===!0&&(n.document_name=`${n.document_name} - (Bundle)`),n));this.allDocumentList=s},async getDropdownDocumentTypesList(){const o=await z();this.updateDocumentTypes=[],this.documentList=o},cancelPermissions(){this.$refs["add-zip-image"]&&this.$refs["add-zip-image"].reset(),this.selectedDownloadFile=null,this.selectedPreviewFile=null,this.selectedBundleIcon=null,this.updateDocumentTypes=[],this.emptyObject(),this.actionSelected="Add",v("#document-type").modal("hide")},emptyObject(){this.formDetails={document_name:"",description:"",price:null,contents:"",icon:"",preview_url:"",document_path:"",display_plan_type:""}},emptyObjectOnlyName(){this.formDetails={document_name:"",description:this.formDetails.description,price:this.formDetails.price,contents:this.formDetails.contents,display_plan_type:this.formDetails.display_plan_type,category:this.formDetails.category,document_type:JSON.parse(this.formDetails.document_type)}},async addCategory(){if(this.loaderStatus=!0,this.actionSelected==="Add"){const o=this.formDetails.document_type;let s=null,n=null;if(this.formDetails.is_bundle==="True"){this.formDetails.is_bundle=!0;const i=await S(this.selectedBundleIcon,{container_name:"icons",file_name:`${this.selectedBundleIcon.name}`,folder_name:"document-library",permissions:"write",storage_name:"opus-storage-java"});this.isSelectedDownloadFile=!1,this.defaultIcon=`/${i}`,n=await S(this.selectedDownloadFile,{container_name:"documents",file_name:`${this.selectedDownloadFile.name}`,folder_name:"bundle",permissions:"write",storage_name:"opus-storage-java"}),this.isSelectedDownloadFile=!1}else{this.formDetails.is_bundle=!1;const i=this.documentLibraryTypeList.find(D=>D.id===this.formDetails.display_plan_type);this.defaultIcon=i.icon;const p=this.documentLibraryTypeList.find(D=>D.id===this.formDetails.display_plan_type).name;s=await S(this.selectedPreviewFile,{container_name:"preview",file_name:`${this.selectedPreviewFile.name}`,folder_name:`documents/${p}`,permissions:"write",storage_name:"opus-storage-java"}),this.isSelectedPreviewFile=!1,n=await S(this.selectedDownloadFile,{container_name:"documents",file_name:`${this.selectedDownloadFile.name}`,folder_name:`${p}`,permissions:"write",storage_name:"opus-storage-java"}),this.isSelectedDownloadFile=!1}const y={document_bundle_request:{bundle_document_ids:this.formDetails.bundle_document_ids},document_library_info_request_dto:{category:this.formDetails.category,contents:this.formDetails.contents,document_library_type_id:this.formDetails.display_plan_type,bundle_library_type:this.formDetails.bundle_library_type,document_path:`/${n}`,document_type:o,duration_in_years:5,icon:this.defaultIcon,is_active:!0,preview_url:`/${s}`},document_type_list:this.formDetails.document_type,market_place_premium_plan_request:{description:this.formDetails.description,display:!0,feature:!1,is_active:!0,bundle:this.formDetails.is_bundle,name:this.formDetails.document_name,bundle_name:this.formDetails.document_name,plan_type_id:2,price:this.formDetails.price,plan_id:this.formDetails.document_id}},t=await ie(y);t.status_code===200?(this.$notify({type:"success",title:"Success",text:t.data}),this.getAllDocLibTypeData(),this.cancelPermissions()):t.status_code===500?(this.$notify({type:"error",title:"Error",text:t.message}),this.emptyObjectOnlyName()):this.$notify({type:"error",title:"Error",text:t.data})}else if(this.actionSelected==="Update"){let o="",s="";const n=this.updateDocumentTypes,t=this.documentLibraryTypeListFiltered.find(D=>D.id===this.formDetails.document_library_type_id).name;this.formDetails.category===null&&(this.formDetails.category=""),this.isSelectedPreviewFile?(o=await S(this.selectedPreviewFile,{container_name:"preview",file_name:`${this.selectedPreviewFile.name}`,folder_name:`documents/${t}`,permissions:"write",storage_name:"opus-storage-java"}),o=`/${o}`):o=this.selectedPreviewFile;const i=n;if(this.isSelectedDownloadFile?(s=await S(this.selectedDownloadFile,{container_name:"documents",file_name:`${this.selectedDownloadFile.name}`,folder_name:`${t}`,permissions:"write",storage_name:"opus-storage-java"}),s=`/${s}`):s=this.selectedDownloadFile,this.formDetails.is_bundle==="true")this.formDetails.is_bundle=!0;else{this.formDetails.is_bundle=!1;const D=this.documentLibraryTypeListFiltered.find(x=>x.id===this.formDetails.document_library_type_id);this.defaultIcon=D.icon}const u={document_bundle_request:{bundle_document_ids:this.UpdateAvailableDocuments},document_library_info_request_dto:{document_id:this.formDetails.document_id,category:this.formDetails.category,contents:this.formDetails.contents,document_library_type_id:this.formDetails.document_library_type_id,document_path:`${s}`,document_type:i,duration_in_years:5,icon:this.defaultIcon,is_active:!0,preview_url:`${o}`,sequence:this.formDetails.sequence},document_type_list:this.updateDocumentTypes,market_place_premium_plan_request:{description:this.formDetails.description,display:!0,feature:!1,is_active:!0,bundle:this.formDetails.is_bundle,name:this.formDetails.document_name,plan_type_id:2,price:this.formDetails.price,plan_id:this.formDetails.document_id}},p=await ce(u);p.status_code===200?(this.$notify({type:"success",title:"Success",text:p.data}),this.cancelPermissions()):this.$notify({type:"error",title:"Error",text:p.message})}else this.actionSelected==="Delete"&&v("#modal_project_delete").modal({backdrop:"static",keyboard:!1});this.emitter.emit("getAllDocumentList"),this.loaderStatus=!1}}},m=o=>(I("data-v-7b02b663"),o=o(),U(),o),ct={id:"document-type",class:"modal fade",role:"dialog"},at={class:"modal-dialog modal-lg"},nt={class:"modal-content first-modal-content"},dt={class:"modal-header modal-bgcolor"},rt={key:0,class:"text-h5 blue-1"},mt={key:1,class:"text-h5 blue-1"},ut=m(()=>e("hr",null,null,-1)),pt={class:"modal-body"},_t={class:"col-xs-12 col-sm-12 add-role mb-10"},ht=m(()=>e("p",{class:"search-label sub-heading"},[c(" Actions "),e("span",{style:{color:"red"}},"*")],-1)),yt=["value"],ft={class:"pl-5"},Dt={key:0,class:"col-xs-12 col-sm-12 add-role"},bt={class:"row mr-bt-5p"},vt=m(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},"Bundle",-1)),gt={class:"col-xs-12"},wt={key:0,class:"row mr-bt-5p"},St=m(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[c(" Bundle Icon "),e("span",{style:{color:"red"}},"*")],-1)),xt={class:"col-xs-12"},Lt={class:"form-group"},Tt={key:1,class:"row mr-bt-5p"},Pt=m(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},"Available Documents",-1)),kt={class:"col-xs-12"},Ft={key:2,class:"row mr-bt-5p"},Ct=m(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[c(" Bundle Library Type "),e("span",{style:{color:"red"}},"*")],-1)),Nt={class:"col-xs-12"},Bt={class:"row mr-bt-5p"},At=m(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[c(" Document Library Type "),e("span",{style:{color:"red"}},"*")],-1)),Vt={class:"col-xs-12"},It={class:"row mr-bt-5p"},Ut={key:0,class:"col-sm-12 col-xs-12 col-md-12 mb-5"},Ot=m(()=>e("span",{style:{color:"red"}},"*",-1)),jt={key:1,class:"col-sm-12 col-xs-12 col-md-12 mb-5"},Et=m(()=>e("span",{style:{color:"red"}},"*",-1)),Mt={class:"col-xs-12 col-sm-6"},qt={class:"row mr-bt-5p"},zt={key:0,class:"col-sm-12 col-xs-12 col-md-12 mb-5"},Wt=m(()=>e("span",{style:{color:"red"}},"*",-1)),Rt={key:1,class:"col-sm-12 col-xs-12 col-md-12 mb-5"},Ht=m(()=>e("span",{style:{color:"red"}},"*",-1)),Kt={class:"col-xs-12"},Qt={class:"row mr-bt-5p"},Yt={key:0,class:"col-sm-12 col-xs-12 col-md-12 mb-5"},Zt=m(()=>e("span",{style:{color:"red"}},"*",-1)),Jt={key:1,class:"col-sm-12 col-xs-12 col-md-12 mb-5"},Gt=m(()=>e("span",{style:{color:"red"}},"*",-1)),Xt={class:"col-xs-12"},$t=["maxlength"],es={class:"row mr-bt-5p"},ts={key:0,class:"col-sm-8 mb-5"},ss={key:1,class:"col-sm-8 mb-5"},os={class:"col-xs-8"},ls={class:"row mr-bt-5p"},is=m(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[c(" Document Type "),e("span",{style:{color:"red"}},"*")],-1)),cs={class:"col-xs-12"},as={key:3,class:"row mr-bt-5p"},ns=m(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[c(" Document Preview URL "),e("span",{style:{color:"red"}},"*")],-1)),ds={class:"col-xs-12"},rs={class:"form-group"},ms={class:"row mr-bt-5p"},us=m(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[c(" Document Path "),e("span",{style:{color:"red"}},"*")],-1)),ps={class:"col-xs-12"},_s={class:"form-group"},hs={class:"row mr-bt-5p"},ys=m(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[c(" Price "),e("span",{style:{color:"red"}},"*")],-1)),fs={class:"col-xs-12 col-sm-6"},Ds={key:1,class:"col-xs-12 col-sm-12 add-role"},bs={class:"row mr-bt-5p"},vs=m(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[c(" Document Name "),e("span",{style:{color:"red"}},"*")],-1)),gs={class:"col-xs-12"},ws={class:"row mr-bt-5p"},Ss={key:0,class:"col-sm-12 col-xs-12 col-md-12 mb-5"},xs=m(()=>e("span",{style:{color:"red"}},"*",-1)),Ls={key:1,class:"col-sm-12 col-xs-12 col-md-12 mb-5"},Ts=m(()=>e("span",{style:{color:"red"}},"*",-1)),Ps={class:"col-xs-12 col-sm-6"},ks=["placeholder"],Fs={key:0,class:"row mr-bt-5p"},Cs=m(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[c(" Bundle Icon "),e("span",{style:{color:"red"}},"*")],-1)),Ns={class:"col-xs-12"},Bs={class:"form-group"},As={key:1,class:"row mr-bt-5p"},Vs=m(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},"Available Documents",-1)),Is={class:"col-xs-12"},Us={class:"row mr-bt-5p"},Os=m(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[c(" Document Library Type "),e("span",{style:{color:"red"}},"*")],-1)),js={class:"col-xs-12"},Es={class:"row mr-bt-5p"},Ms={key:0,class:"col-sm-8 mb-5"},qs={key:1,class:"col-sm-8 mb-5"},zs={class:"col-xs-8"},Ws={class:"row mr-bt-5p"},Rs={key:0,class:"col-sm-12 col-xs-12 col-md-12 mb-5"},Hs=m(()=>e("span",{style:{color:"red"}},"*",-1)),Ks={key:1,class:"col-sm-12 col-xs-12 col-md-12 mb-5"},Qs=m(()=>e("span",{style:{color:"red"}},"*",-1)),Ys={class:"col-xs-12"},Zs={class:"row mr-bt-5p"},Js={key:0,class:"col-sm-12 col-xs-12 col-md-12 mb-5"},Gs=m(()=>e("span",{style:{color:"red"}},"*",-1)),Xs={key:1,class:"col-sm-12 col-xs-12 col-md-12 mb-5"},$s=m(()=>e("span",{style:{color:"red"}},"*",-1)),eo={class:"col-xs-12"},to=["maxlength"],so={class:"row mr-bt-5p"},oo=m(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[c(" Document Type "),e("span",{style:{color:"red"}},"*")],-1)),lo={class:"col-xs-12"},io={key:2,class:"row mr-bt-5p"},co=m(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[c(" Document Preview URL "),e("span",{style:{color:"red"}},"*")],-1)),ao={class:"col-xs-12"},no={class:"form-group"},ro={class:"row mr-bt-5p"},mo=m(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[c(" Document Path "),e("span",{style:{color:"red"}},"*")],-1)),uo={class:"col-xs-12"},po={class:"form-group"},_o={class:"row mr-bt-5p"},ho=m(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[c(" Price "),e("span",{style:{color:"red"}},"*")],-1)),yo={class:"col-xs-12 col-sm-6"},fo={key:2,class:"col-xs-12 col-sm-12 add-role"},Do={class:"row mr-bt-5p"},bo=m(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[c(" Document Name "),e("span",{style:{color:"red"}},"*")],-1)),vo={class:"col-xs-12"},go={key:0,class:"col-sm-12 col-xs-12 col-md-12 footer remove_button_padding"},wo={class:"d-flex justify-content-end col-gap-15"};function So(o,s,n,y,t,i){const u=h("multiselect"),p=h("OpusImageSelect"),D=h("OpusEditor"),x=h("BaseButton"),f=h("loader"),P=h("delete-warning");return a(),d("div",ct,[e("div",at,[e("div",nt,[e("div",dt,[e("button",{type:"button",class:"close",onClick:s[0]||(s[0]=(...l)=>i.cancelPermissions&&i.cancelPermissions(...l))}," × "),t.actionSelected?(a(),d("div",mt,k(t.actionSelected)+" Document",1)):(a(),d("div",rt," New Document"+k(t.actionSelected),1)),ut]),e("div",pt,[e("div",_t,[ht,(a(!0),d(H,null,K(t.categoryActionSelect,(l,_)=>(a(),d("div",{class:"col-xs-12 col-md-4",key:_},[w(e("input",{type:"radio",name:"optradio",value:l,"onUpdate:modelValue":s[1]||(s[1]=C=>t.actionSelected=C),onClick:s[2]||(s[2]=(...C)=>i.getCategoryData&&i.getCategoryData(...C))},null,8,yt),[[Q,t.actionSelected]]),e("label",ft,k(l),1)]))),128))]),t.actionSelected==="Add"?(a(),d("div",Dt,[e("div",bt,[vt,e("div",gt,[r(u,{showLabels:!1,"close-on-select":!0,"allow-empty":!1,class:"multiselect-single-dropdown",searchable:!0,options:t.bundleStatusList.map(l=>l.name),"custom-label":l=>t.bundleStatusList.find(_=>_.name==l).name,modelValue:t.formDetails.is_bundle,"onUpdate:modelValue":s[3]||(s[3]=l=>t.formDetails.is_bundle=l),onSelect:i.getBundleTypeList,"open-direction":"bottom",placeholder:"Select Document Library Type"},null,8,["options","custom-label","modelValue","onSelect"])])]),t.formDetails.is_bundle==="True"?(a(),d("div",wt,[St,e("div",xt,[e("div",Lt,[r(p,{id:"add-bundle-image",class:"col-xs-12 pt-20 pl-15",errorTxtProp:"Please select a valid image i.e. svg only",onSelect:i.setselectedBundleIcon,validTypes:"'.svg'",file:{name:null},btnText:"Select"},null,8,["onSelect"])])])])):b("",!0),t.formDetails.is_bundle==="True"?(a(),d("div",Tt,[Pt,e("div",kt,[r(u,{showLabels:!1,"close-on-select":!1,"allow-empty":!1,class:"multiselect-single-dropdown",searchable:!0,options:t.allDocumentList.map(l=>l.document_id),"custom-label":l=>t.allDocumentList.find(_=>_.document_id==l).document_name,modelValue:t.formDetails.bundle_document_ids,"onUpdate:modelValue":s[4]||(s[4]=l=>t.formDetails.bundle_document_ids=l),multiple:!0,"open-direction":"bottom",placeholder:"Select list of Documents to add in the bundle"},null,8,["options","custom-label","modelValue"])])])):b("",!0),t.formDetails.is_bundle==="True"?(a(),d("div",Ft,[Ct,e("div",Nt,[w(e("input",{type:"text",placeholder:"Add New Document Library Type",class:"form-control",maxlength:"256","onUpdate:modelValue":s[5]||(s[5]=l=>t.formDetails.bundle_library_type=l)},null,512),[[L,t.formDetails.bundle_library_type]])])])):b("",!0),e("div",Bt,[At,e("div",Vt,[r(u,{showLabels:!1,"close-on-select":!0,"allow-empty":!1,class:"multiselect-single-dropdown",searchable:!0,options:t.documentLibraryTypeList.map(l=>l.id),"custom-label":l=>t.documentLibraryTypeList.find(_=>_.id==l).name,modelValue:t.formDetails.display_plan_type,"onUpdate:modelValue":s[6]||(s[6]=l=>t.formDetails.display_plan_type=l),"open-direction":"bottom",placeholder:"Select Document Library Type"},null,8,["options","custom-label","modelValue"])])]),e("div",It,[t.formDetails.is_bundle==="True"?(a(),d("div",Ut,[c(" Bundle Name "),Ot])):(a(),d("div",jt,[c(" Document Name "),Et])),e("div",Mt,[w(e("input",{type:"text",placeholder:"Add New Document Name",class:"form-control",maxlength:"128","onUpdate:modelValue":s[7]||(s[7]=l=>t.formDetails.document_name=l)},null,512),[[L,t.formDetails.document_name]])])]),e("div",qt,[t.formDetails.is_bundle==="True"?(a(),d("div",zt,[c(" Bundle Description "),Wt])):(a(),d("div",Rt,[c(" Document Description "),Ht])),e("div",Kt,[r(D,{modelValue:t.formDetails.description,"onUpdate:modelValue":s[8]||(s[8]=l=>t.formDetails.description=l),id:"add-rec-content",placeholder:"Add Document Description",maxlength:t.maxlength.content,required:""},null,8,["modelValue","maxlength"])])]),e("div",Qt,[t.formDetails.is_bundle==="True"?(a(),d("div",Yt,[c(" Bundle Contents "),Zt])):(a(),d("div",Jt,[c(" Document Contents "),Gt])),e("div",Xt,[w(e("input",{type:"text",placeholder:"Add Document contents with , separator",class:"form-control",maxlength:t.maxlength.content,"onUpdate:modelValue":s[9]||(s[9]=l=>t.formDetails.contents=l)},null,8,$t),[[L,t.formDetails.contents]])])]),e("div",es,[t.formDetails.is_bundle==="True"?(a(),d("div",ts,"Bundle Category Type")):(a(),d("div",ss,"Document Category Type")),e("div",os,[r(u,{showLabels:!1,"close-on-select":!0,"allow-empty":!0,class:"multiselect-single-dropdown",searchable:!0,options:t.categoryList.map(l=>l.name),"custom-label":l=>t.categoryList.find(_=>_.name==l).name,modelValue:t.formDetails.category,"onUpdate:modelValue":s[10]||(s[10]=l=>t.formDetails.category=l),"open-direction":"bottom",placeholder:"Select Document Category Type"},null,8,["options","custom-label","modelValue"])])]),e("div",ls,[is,e("div",cs,[r(u,{showLabels:!1,"close-on-select":!1,multiple:!0,"allow-empty":!0,class:"multiselect-single-dropdown",searchable:!0,options:t.documentList.map(l=>l.id),"custom-label":l=>t.documentList.find(_=>_.id==l).name,modelValue:t.formDetails.document_type,"onUpdate:modelValue":s[11]||(s[11]=l=>t.formDetails.document_type=l),"open-direction":"bottom",placeholder:"Select Word document, PDF etc..."},null,8,["options","custom-label","modelValue"])])]),t.formDetails.is_bundle==="False"?(a(),d("div",as,[ns,e("div",ds,[e("div",rs,[r(p,{id:"add-preview-image",class:"col-xs-12 pt-20 pl-15",errorTxtProp:"Please select a valid image i.e. PDF only",onSelect:i.setselectedPreviewFile,validTypes:"'.pdf'",file:{name:null},btnText:"Select"},null,8,["onSelect"])])])])):b("",!0),e("div",ms,[us,e("div",ps,[e("div",_s,[r(p,{id:"add-zip-image",ref:"add-zip-image",class:"col-xs-12 pt-20 pl-15",errorTxtProp:"Please select a valid image i.e. ZIP only",onSelect:i.setselectedDownloadFile,validTypes:"'.zip'",file:{name:null},btnText:"Select"},null,8,["onSelect"])])])]),e("div",hs,[ys,e("div",fs,[w(e("input",{type:"number",placeholder:"Price (max: $20000)",class:"form-control",maxlength:"56","onUpdate:modelValue":s[12]||(s[12]=l=>t.formDetails.price=l),onKeypress:s[13]||(s[13]=(...l)=>i.validatePrice&&i.validatePrice(...l))},null,544),[[L,t.formDetails.price]])])])])):b("",!0),t.actionSelected==="Update"?(a(),d("div",Ds,[e("div",bs,[vs,e("div",gs,[r(u,{showLabels:!1,"close-on-select":!0,"allow-empty":!1,class:"multiselect-single-dropdown",searchable:!0,options:t.allDocumentList.map(l=>l.document_id),"custom-label":l=>t.allDocumentList.find(_=>_.document_id==l).document_name,modelValue:t.formDetails.document_id,"onUpdate:modelValue":s[14]||(s[14]=l=>t.formDetails.document_id=l),onSelect:i.getDocumentDetails,"open-direction":"bottom",placeholder:"Select a Document Name"},null,8,["options","custom-label","modelValue","onSelect"])])]),e("div",ws,[t.formDetails.is_bundle==="true"?(a(),d("div",Ss,[c(" Update Bundle Name "),xs])):(a(),d("div",Ls,[c(" Update Document Name "),Ts])),e("div",Ps,[w(e("input",{type:"text",placeholder:t.formDetails.is_bundle?"Update Bundle Name":"Update Document Name",class:"form-control",maxlength:"128","onUpdate:modelValue":s[15]||(s[15]=l=>t.formDetails.document_name=l)},null,8,ks),[[L,t.formDetails.document_name]])])]),t.formDetails.is_bundle&&t.formDetails.is_bundle==="true"?(a(),d("div",Fs,[Cs,e("div",Ns,[e("div",Bs,[r(p,{id:"add-bundle-image",class:"col-xs-12 pt-20 pl-15",errorTxtProp:"Please select a valid image i.e. svg only",onSelect:i.setselectedBundleIcon,validTypes:"'.svg'",file:{name:t.formDetails.icon?t.formDetails.icon:null},btnText:"Select"},null,8,["onSelect","file"])])])])):b("",!0),t.formDetails.is_bundle==="true"?(a(),d("div",As,[Vs,e("div",Is,[r(u,{showLabels:!1,"close-on-select":!1,"allow-empty":!1,class:"multiselect-single-dropdown",searchable:!0,options:t.allDocumentList.map(l=>l.document_id),"custom-label":l=>t.allDocumentList.find(_=>_.document_id==l).document_name,modelValue:t.UpdateAvailableDocuments,"onUpdate:modelValue":s[16]||(s[16]=l=>t.UpdateAvailableDocuments=l),multiple:!0,"open-direction":"bottom",placeholder:"Select list of Documents to add in the bundle"},null,8,["options","custom-label","modelValue"])])])):b("",!0),e("div",Us,[Os,e("div",js,[r(u,{showLabels:!1,"close-on-select":!0,"allow-empty":!1,class:"multiselect-single-dropdown",searchable:!0,options:t.documentLibraryTypeListFiltered.map(l=>l.id),"custom-label":l=>t.documentLibraryTypeListFiltered.find(_=>_.id==l).name,modelValue:t.formDetails.document_library_type_id,"onUpdate:modelValue":s[17]||(s[17]=l=>t.formDetails.document_library_type_id=l),"open-direction":"bottom",placeholder:"Select Document Library Type"},null,8,["options","custom-label","modelValue"])])]),e("div",Es,[t.formDetails.is_bundle==="true"?(a(),d("div",Ms,"Bundle Category Type")):(a(),d("div",qs,"Document Category Type")),e("div",zs,[r(u,{showLabels:!1,"close-on-select":!0,"allow-empty":!0,class:"multiselect-single-dropdown",searchable:!0,options:t.categoryList.map(l=>l.name),"custom-label":l=>t.categoryList.find(_=>_.name==l).name,modelValue:t.formDetails.category,"onUpdate:modelValue":s[18]||(s[18]=l=>t.formDetails.category=l),"open-direction":"bottom",placeholder:"Select Document Category Type"},null,8,["options","custom-label","modelValue"])])]),e("div",Ws,[t.formDetails.is_bundle==="true"?(a(),d("div",Rs,[c(" Bundle Description "),Hs])):(a(),d("div",Ks,[c(" Document Description "),Qs])),e("div",Ys,[r(D,{modelValue:t.formDetails.description,"onUpdate:modelValue":s[19]||(s[19]=l=>t.formDetails.description=l),id:"add-rec-content",placeholder:"Add Document Description",maxlength:t.maxlength.content,required:""},null,8,["modelValue","maxlength"])])]),e("div",Zs,[t.formDetails.is_bundle==="true"?(a(),d("div",Js,[c(" Bundle Contents "),Gs])):(a(),d("div",Xs,[c(" Document Contents "),$s])),e("div",eo,[w(e("input",{type:"text",placeholder:"Add Document contents with , separator",class:"form-control",maxlength:t.maxlength.content,"onUpdate:modelValue":s[20]||(s[20]=l=>t.formDetails.contents=l)},null,8,to),[[L,t.formDetails.contents]])])]),e("div",so,[oo,e("div",lo,[r(u,{showLabels:!1,"close-on-select":!1,"allow-empty":!0,multiple:!0,class:"multiselect-single-dropdown",searchable:!0,options:t.documentList.map(l=>l.id),"custom-label":l=>t.documentList.find(_=>_.id==l).name,modelValue:t.updateDocumentTypes,"onUpdate:modelValue":s[21]||(s[21]=l=>t.updateDocumentTypes=l),"open-direction":"bottom",placeholder:"Select Word document, PDF etc..."},null,8,["options","custom-label","modelValue"])])]),t.formDetails.is_bundle==="false"?(a(),d("div",io,[co,e("div",ao,[e("div",no,[r(p,{id:"add-preview-image",class:"col-xs-12 pt-20 pl-15",errorTxtProp:"Please select a valid image i.e. PDF only",onSelect:i.setselectedPreviewFile,validTypes:"'.pdf'",file:{name:null},btnText:"Select"},null,8,["onSelect"])])])])):b("",!0),e("div",ro,[mo,e("div",uo,[e("div",po,[r(p,{id:"add-zip-image",ref:"add-zip-image",class:"col-xs-12 pt-20 pl-15",errorTxtProp:"Please select a valid image i.e. ZIP only",onSelect:i.setselectedDownloadFile,validTypes:"'.zip'",file:{name:t.formDetails.document_path?t.formDetails.document_path.split("/").pop():""},btnText:"Select"},null,8,["onSelect","file"])])])]),e("div",_o,[ho,e("div",yo,[w(e("input",{type:"number",placeholder:"Price (max: $20000)",class:"form-control",maxlength:"56","onUpdate:modelValue":s[22]||(s[22]=l=>t.formDetails.price=l),onKeypress:s[23]||(s[23]=(...l)=>i.validatePrice&&i.validatePrice(...l))},null,544),[[L,t.formDetails.price]])])])])):b("",!0),t.actionSelected==="Delete"?(a(),d("div",fo,[e("div",Do,[bo,e("div",vo,[r(u,{showLabels:!1,"close-on-select":!0,"allow-empty":!1,class:"multiselect-single-dropdown",searchable:!0,options:t.allDocumentList.map(l=>l.document_id),"custom-label":l=>t.allDocumentList.find(_=>_.document_id==l).document_name,modelValue:t.formDetails.document_id,"onUpdate:modelValue":s[24]||(s[24]=l=>t.formDetails.document_id=l),onSelect:i.getDocumentDetails,"open-direction":"bottom",placeholder:"Select a Document Name"},null,8,["options","custom-label","modelValue","onSelect"])])])])):b("",!0)]),t.actionSelected==="Add"||t.actionSelected==="Update"||t.actionSelected==="Delete"?(a(),d("div",go,[e("div",wo,[r(x,{variant:"secondary",onClick:i.cancelPermissions},{default:g(()=>[c(" Cancel ")]),_:1},8,["onClick"]),t.actionSelected==="Add"?(a(),O(x,{key:0,onClick:i.addCategory,disabled:!i.canSave},{default:g(()=>[c("Save")]),_:1},8,["onClick","disabled"])):t.actionSelected==="Update"?(a(),O(x,{key:1,onClick:i.addCategory,disabled:!i.canSave},{default:g(()=>[c("Update")]),_:1},8,["onClick","disabled"])):(a(),O(x,{key:2,variant:"error",onClick:i.addCategory,disabled:!i.canSave},{default:g(()=>[c("Delete")]),_:1},8,["onClick","disabled"]))])])):b("",!0)]),r(f,{loadingStatus:t.loaderStatus},null,8,["loadingStatus"]),r(P,{onDeleteBundle:i.deleteProject,userDeleteNumbers:t.userDeleteNumbers},null,8,["onDeleteBundle","userDeleteNumbers"])])])}const xo=A(it,[["render",So],["__scopeId","data-v-7b02b663"]]),Lo={name:"ManageDocuments",components:{OpusTable:de,OpusBreadCrumb:ne,OpusPagination:re,OpusFormModal:me,OpusImageSelect:j,OpusDialog:ue,BaseButton:V,AddDocumentCategory:He,AddDocument:xo,Loader:E},async created(){this.loaderStatus=!0,this.types=await M(),this.emitter.on("getAllDocumentList",()=>{this.getDocs()}),this.getDocs(),this.loaderStatus=!1},data(){return{loaderStatus:!1,types:[],items:[],fields:[{key:"id",label:"ID",sortable:!0},{key:"name",label:"Name",sortable:!0},{key:"price",label:"Price",sortable:!0}],menuOptions:[{key:"replace-doc",icon:"/static/images/icons/edit_icon_new.svg",name:"Edit",fn:this.openDocModal}],perPage:10,currentPage:1,totalPages:0,totalItems:0,inSearch:!0,clearDialog:{path:{title:"Are you sure you want to clear the actual document?",fn:this.clearDoc},preview:{title:"Are you sure you want to clear the preview document?",fn:this.clearPreviewDoc}},updateDialog:{path:{title:"Select a file for document",fn:this.updateDoc},preview:{title:"Select a file for preview document",fn:this.updatePreviewDoc}},clearDialogSelection:"path",updateDialogSelection:"path",selectedDoc:{},selectedFile:null}},methods:{errorNotification:G,successNotification:X,addCategory(){this.type="new_role",this.header="Category",v("#document-category").modal({backdrop:"static",keyboard:!1})},addBundle(){this.header="Bundle",v("#bundle-type").modal({backdrop:"static",keyboard:!1})},addDocument(){this.type="new_role",this.header="Category",v("#document-type").modal({backdrop:"static",keyboard:!1})},async getDocs(){const o=await Y();this.items=o.map(s=>this.getDoc(s))},getDoc(o){const s=this.types.find(n=>n.id===o.document_library_type_id);return{id:o.document_id,name:o.document_name,type:s?s.name:"",category:o.category,path:o.document_path,preview:o.preview_url,price:o.price}},navigateToLaunchPad(){this.$router.push("/launchpad")},async updateDoc(){this.closeDocModal(),this.loaderStatus=!0;const o=this.selectedDoc,n=(o.path?o.path.substring(1,o.path.length):"").split("/"),y=n[0],t=n.length?n.slice(1,n.length-1).join("/"):"",i=await S(this.selectedFile,{container_name:y,file_name:`${this.selectedFile.name}`,folder_name:t,permissions:"write",storage_name:"opus-storage-java"}),u={document_id:o.id,document_path:`/${i}`,preview_url:o.preview},p=await B(u);p&&p.status_code===200?(await this.getDocs(),this.successNotification("Successfully updated document")):this.errorNotification("Error updating document"),this.loaderStatus=!1},async updatePreviewDoc(){this.loaderStatus=!0,this.closeDocModal();const o=this.selectedDoc,n=(o.preview?o.preview.substring(1,o.preview.length):"").split("/"),y=n[0],t=n.length?n.slice(1,n.length-1).join("/"):"",i=await S(this.selectedFile,{container_name:y,file_name:`${this.selectedFile.name}`,folder_name:t,permissions:"write",storage_name:"opus-storage-java"}),u={document_id:o.id,document_path:o.path,preview_url:`/${i}`},p=await B(u);p&&p.status_code===200?(await this.getDocs(),this.successNotification("Successfully updated preview document")):this.errorNotification("Error updating preview document"),this.loaderStatus=!1},async clearDoc(){this.closeClearDocModal();const o=this.selectedDoc.path.lastIndexOf("/"),s=this.selectedDoc.path.substring(0,o),n={document_id:this.selectedDoc.id,document_path:`${s}/`,preview_url:this.selectedDoc.preview};this.loaderStatus=!0;const y=await B(n);y&&y.status_code===200?(await this.getDocs(),this.successNotification("Successfully cleared document")):this.errorNotification("Error clearing document"),this.loaderStatus=!1},async clearPreviewDoc(){this.closeClearDocModal();const o=this.selectedDoc.preview.lastIndexOf("/"),s=this.selectedDoc.preview.substring(0,o),n={document_id:this.selectedDoc.id,document_path:this.selectedDoc.path,preview_url:`${s}/`};this.loaderStatus=!0;const y=await B(n);this.loaderStatus=!1,y&&y.status_code===200?(await this.getDocs(),this.successNotification("Successfully cleared preview document")):this.errorNotification("Error clearing preview document"),this.loaderStatus=!1},async downloadDoc(o,s){this.loaderStatus=!0;const y=await $(o,{container_name:s,permissions:"read",storage_name:"opus-storage-java"});y&&y.error?this.errorNotification(y.error.errorMessage):this.successNotification("Successfully downloaded document"),this.loaderStatus=!1},isEmptyDoc(o){return o.path?o.path.split("/").pop()==="":!0},isEmptyPreviewDoc(o){return o.preview?o.preview.split("/").pop()==="":!0},setSelectedFile(o){this.selectedFile=o},openDocModal(o){this.selectedDoc=o,this.updateDialogSelection="path",v("#replace-doc").modal({backdrop:"static",keyboard:!1})},openPreviewDocModal(o){this.selectedDoc=o,this.updateDialogSelection="preview",v("#replace-doc").modal({backdrop:"static",keyboard:!1})},closeDocModal(){v("#replace-doc").modal("hide")},openClearDocModal(o){this.selectedDoc=o,this.clearDialogSelection="path",v("#clear-doc").modal({backdrop:"static",keyboard:!1})},openClearPreviewDocModal(o){this.selectedDoc=o,this.clearDialogSelection="preview",v("#clear-doc").modal({backdrop:"static",keyboard:!1})},closeClearDocModal(){v("#clear-doc").modal("hide")}}},F=o=>(I("data-v-66ea3a61"),o=o(),U(),o),To={class:"content-wrappper"},Po={class:"row m-0"},ko=F(()=>e("div",{class:"ml-20 text-h3"},"Manage Documents",-1)),Fo={class:"d-flex justify-content-end col-gap-15 row-gap-10 flex-wrap pr-20"},Co=F(()=>e("img",{src:pe,alt:"Add Subcategory",class:"preview-svg"},null,-1)),No=F(()=>e("span",null,"Documents",-1)),Bo={class:"text-subtitle-2 text-secondary mt-10 mb-10 ml-20"},Ao=F(()=>e("span",null,"No documents found!",-1)),Vo=["onClick"],Io=["onClick"],Uo={class:"docs-pagination"},Oo={class:"opus-form"},jo={class:"form-group"},Eo=F(()=>e("label",{for:"replace-doc-modal-id"},"Document ID",-1)),Mo=["value"],qo={class:"form-group"},zo=F(()=>e("label",{for:"replace-doc-modal-name"},"Document Name",-1)),Wo=["value"],Ro={class:"form-group"},Ho=F(()=>e("label",{for:"replace-doc-file"},[c("File"),e("span",{class:"text-required"}," *")],-1));function Ko(o,s,n,y,t,i){const u=h("OpusBreadCrumb"),p=h("BaseButton"),D=h("OpusTable"),x=h("OpusPagination"),f=h("OpusDialog"),P=h("OpusImageSelect"),l=h("OpusFormModal"),_=h("AddDocumentCategory"),C=h("AddDocument"),Z=h("loader");return a(),d("div",To,[e("div",Po,[e("div",null,[r(u,{class:"mb-10",variant:"sm",onClick:i.navigateToLaunchPad},{default:g(()=>[c("Launchpad")]),_:1},8,["onClick"]),ko]),e("div",Fo,[r(p,{variant:"secondary","has-icon":"",onClick:i.addDocument},{default:g(()=>[Co,No]),_:1},8,["onClick"])]),e("div",Bo,k(t.items.length)+" Documents ",1),r(D,{id:"manage-docs",class:"docs-table",items:t.items,fields:t.fields,currentPage:t.currentPage,perPage:t.inSearch?t.perPage:0},{empty:g(()=>[Ao]),"cell(path)":g(N=>[w(e("img",{src:W,onClick:J=>i.downloadDoc(N.item.path,"documents")},null,8,Vo),[[q,!i.isEmptyDoc(N.item)]])]),"cell(preview)":g(N=>[w(e("img",{src:W,onClick:J=>i.downloadDoc(N.item.preview,"preview")},null,8,Io),[[q,!i.isEmptyPreviewDoc(N.item)]])]),_:1},8,["items","fields","currentPage","perPage"]),e("div",Uo,[r(x,{total:t.items.length,perPage:t.perPage,currentPage:t.currentPage},null,8,["total","perPage","currentPage"])]),r(f,{id:"clear-doc",header:"Clear Document",title:t.clearDialog[t.clearDialogSelection].title,desc:t.selectedDoc?t.selectedDoc.name:"",note:"Clearing will delete the record from the database permanently",okText:"Yes, Clear",okVariant:"error",cancelText:"OK, Cancel",onOk:t.clearDialog[t.clearDialogSelection].fn},null,8,["title","desc","onOk"]),r(l,{id:"replace-doc",title:t.updateDialog[t.updateDialogSelection].title,okText:"Upload",onOk:t.updateDialog[t.updateDialogSelection].fn},{default:g(()=>[e("form",Oo,[e("div",jo,[Eo,e("input",{type:"text",class:"form-control",id:"replace-doc-modal-id",disabled:"",value:t.selectedDoc?t.selectedDoc.id:""},null,8,Mo)]),e("div",qo,[zo,e("input",{type:"text",class:"form-control",id:"replace-doc-modal-name",disabled:"",value:t.selectedDoc?t.selectedDoc.name:""},null,8,Wo)]),e("div",Ro,[Ho,r(P,{id:"replace-doc-file",ref:"replace-doc-file",onSelect:i.setSelectedFile,validTypes:"'.doc, .zip, .docx, .pdf, .xls'",file:{name:t.selectedDoc&&t.selectedDoc.path?t.selectedDoc.path.split("/").pop():""},btnText:"Select"},null,8,["onSelect","file"])])])]),_:1},8,["title","onOk"]),r(_),r(C),r(Z,{loadingStatus:t.loaderStatus},null,8,["loadingStatus"])])])}const _l=A(Lo,[["render",Ko],["__scopeId","data-v-66ea3a61"]]);export{_l as default};
