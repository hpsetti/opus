import{_ as x,o as l,c as a,a as t,t as c,n as I,B as M,W as E,X as N,d as p,$ as k,e as g,O as V,k as h,b as u,F as y,m as w,j as F,Y as U,I as Y,w as b,r as v,p as O,f as R}from"./index-BlMJxPGQ.js";import{c as j}from"./constants-DZfa7LnM.js";import{T as H,a as W,b as q}from"./complianceWire-CYgeEq9M.js";import{L as A}from"./Loader-DR0R9oEF.js";import{a as B}from"./cart-QHhiBhPv.js";import{b as z,u as X}from"./instructorLedTraining-DE_vpi5U.js";import"./event-bus-DYoA24Gz.js";import{_ as G}from"./info-modal-training-icon-Dm7yAfS1.js";import{_ as J,a as K,b as P}from"./calendar-pSu8Ckpl.js";import{s as Q}from"./shared-uD02DoJF.js";import{A as Z}from"./AddRemoveCartPopup-CqkASo7c.js";import{_ as $}from"./chevron_left_icon-6Fqv5UkY.js";import{_ as ee}from"./trash-D7-advNl.js";const te={name:"CourseSelectionCard",props:{type:{type:String,required:!0,validator:e=>["live","prerec","bundle"].includes(e)},price:{type:Number,required:!0},selected:{type:Boolean,default:!1},hasShadow:{type:Boolean,default:!1}},data(){return{content:{live:{title:"Instructor-Led Training",path:"/static/images/icons/ilt/live.svg",desc:"Includes access to one live instructor-led training course at your selected time"},prerec:{title:"Pre-recorded Course",path:"/static/images/icons/ilt/pre-recorded.svg",desc:"Includes access to a pre-recorded selected course for 60 days"},bundle:{title:"Bundle",path:"/static/images/icons/ilt/live.svg",desc:"Includes access to 1 live instructor-led training course as well as a selected course"}}}}},se=["src"],oe={class:"text-subtitle-3 blue-1"},ie={class:"text-body-light black-2 mt-20 margin-bottom-auto text-center"},le={class:"text-button-label-2 blue-1"};function ae(e,o,r,f,s,i){return l(),a("div",{class:I(["selection-card d-flex flex-direction-column align-items-center",{selected:r.selected,"has-shadow":r.hasShadow}]),onClick:o[0]||(o[0]=_=>e.$emit("selected",r.type))},[t("img",{class:"icon-container",src:s.content[r.type].path,alt:"Course Selection Card Header Image"},null,8,se),t("div",oe,c(s.content[r.type].title),1),t("div",ie,c(s.content[r.type].desc),1),t("div",le,c(`$${r.price}`),1)],2)}const re=x(te,[["render",ae]]),ce={props:["listView","timeSlotsList","userId","operations"],data(){return{courseDetails:{},loaderStatus:!1,selectedSlotId:null,availableTimeSlots:[],options:["live","prerec","bundle"],steps:{type:{title:"Select your course method",desc:"Select a course method from the available list below. Once you complete the course selection flow and click on Add to cart, you will be redirected to the marketplace to complete your purchase",btnTitle:"Next",back:!1},time:{title:"Select your live course time",desc:"Select a course time from the available list below.",btnTitle:"Select time",back:!0},review:{title:"Review your selection",desc:"Review your course method and ensure that all details are correct.",footer:{live:"If any issues or scheduling conflicts arise, feel free to contact our team anytime. You can also change the date and time of your course after purchasing by visiting the course details page.",prerec:"Note: Purchasing this course will allow you to watch the full recording until 60 days.",bundle:"If any issues or scheduling conflicts arise, feel free to contact our team anytime. You can also change the date and time of your course after purchasing by visiting the course details page. <br> Note: Purchasing this course will allow you to watch the full recording until 60 days."},btnTitle:"Add to cart",back:!0}},step:"type",selectedOption:null,review:{"Course method":null,Date:"N/A",Time:"N/A",Location:null,Price:null}}},components:{Loader:A,BaseButton:M,CourseSelectionCard:re},computed:{isNextEnabled(){return!!(this.step==="type"&&this.selectedOption||this.step==="time"&&this.selectedSlotId||this.step==="review")}},watch:{operations:{handler(e){e.type==="select"?this.setCourseDetails():e.type==="edit"&&this.setSelectedDetails()},deep:!0},timeSlotsList(e){e&&(this.availableTimeSlots=e)}},methods:{getSlotDate:E,getSlotTimeRange:N,setSelected(e){this.selectedOption=e},formatToLocalDate(e){return e?p.utc(`${e.slot_start_time}`).local().format("ddd, MMM D, YYYY"):""},formatToLocalTime(e){if(e){const o=p.utc(`${e.slot_start_time}`).local().format("h:mm A"),r=p.utc(`${e.slot_end_time}`).local().format("h:mm A");return`${o} - ${r}`}return""},async getTimeSlotsList(){this.loaderStatus=!0;const e=await z(this.courseDetails.course_id);this.availableTimeSlots=(e==null?void 0:e.length)>4?e.slice(0,4):e,this.loaderStatus=!1},setSelectedDetails(){const{courseDetails:e,selectedSlotId:o,timeSlotsList:r}=this.operations;this.courseDetails={...e},this.availableTimeSlots=[...r],this.selectedSlotId=o},setCourseDetails(){const{courseDetails:e,listView:o,timeSlotsList:r}=this.operations;this.courseDetails={...e},o&&e?this.getTimeSlotsList():this.availableTimeSlots=[...r]},closeModal(){this.selectedSlotId=null,this.selectedOption=null,this.step="type",this.listView&&(this.availableTimeSlots=[]),k("#training-selection-modal").modal("hide")},updateStep(e=!1){if(e){if(this.step==="time"){this.step="type",this.clearTimeSelection();return}this.step==="review"&&this.selectedOption==="prerec"?this.step="type":this.step="time"}else{if(this.step==="time"){this.step="review",this.populateReview();return}this.selectedOption==="prerec"&&this.step==="type"?(this.step="review",this.populateReview()):this.step="time",this.step==="review"&&this.addCartOrUpdateSlot()}},clearTimeSelection(){this.selectedSlotId=null},populateReview(){const e=this.availableTimeSlots.find(o=>o.slot_id===this.selectedSlotId);this.selectedOption==="prerec"?(this.review["Course method"]="Pre-recorded Course",this.review.Date="N/A",this.review.Time="N/A",this.review.Location="Video file link - OPUS Training Library",this.review.Price="$399"):this.selectedOption==="live"?(this.review["Course method"]="Instructor-Led Training",this.review.Date=this.getSlotDate(e),this.review.Time=this.getSlotTimeRange(e),this.review.Location="Online - Microsoft Teams Meeting",this.review.Price="$399"):this.selectedOption==="bundle"&&(this.review["Course method"]="Bundle: Instructor-Led Training and Pre-recorded Course",this.review.Date=this.getSlotDate(e),this.review.Time=this.getSlotTimeRange(e),this.review.Location="Online - Microsoft Teams Meeting <br> Video file link - OPUS Trainings Library",this.review.Price="$499")},async addCartOrUpdateSlot(){if(this.operations.type==="select"){const e={user_id:this.userId,plan_id:this.courseDetails.plan_id,ilt_slot_id:this.selectedSlotId};this.loaderStatus=!0;const o=await B(e);if(this.loaderStatus=!1,o.data&&o.data.status_code===200){this.closeModal();const r={type:"add",body:""};this.$emit("setCartInfo",{cartInfo:r,item:this.courseDetails}),this.emitter.emit("cart-items-updated")}}else if(this.operations.type==="edit"){this.loaderStatus=!0;const e={cart_id:this.courseDetails.cart_status.cart_id,course_id:this.courseDetails.course_id,new_slot_id:this.selectedSlotId,user_id:this.userId},o=await X(e);this.loaderStatus=!1,this.$emit("refreshAllInfo",o)}}}},L=e=>(O("data-v-7e639ea4"),e=e(),R(),e),ne={id:"training-selection-modal",class:"modal",role:"dialog"},de={class:"modal-dialog modal-lg request-modal"},ue={class:"modal-content col-xs-12 p-20"},me={key:0,class:"modal-header"},he={class:"col-xs-12 p-0 text-start header"},_e=L(()=>t("img",{src:G,class:"lms-training-icon"},null,-1)),pe={class:"modal-body"},ve={class:"text-h5 blue-1"},fe={class:"text-regular-small black-5 mb-20 card-left-spacing"},ge={key:0,class:"d-flex justify-content-center col-gap-35"},be={key:1,class:"card-left-spacing"},Se={class:"radio"},ye=["value"],we=L(()=>t("div",{class:"radio__radio"},null,-1)),Ce={class:"pl-20"},De={key:0,class:"col-xs-12 no-data-text text-center font-18 fw-700"},Te={key:2,class:"card-left-spacing"},ke={class:"course-review mb-15"},xe={class:"text-button-label black-3 col-xs-3 p-0"},Ie=["innerHTML"],Le=["innerHTML"],Me=L(()=>t("hr",null,null,-1)),Oe={class:"footer col-xs-12 p-0 flex-wrapper"};function Re(e,o,r,f,s,i){const _=v("CourseSelectionCard"),S=v("BaseButton"),C=v("loader");return l(),a("div",ne,[t("div",de,[t("div",ue,[s.courseDetails?(l(),a("div",me,[t("div",he,[_e,g(" "+c(s.courseDetails.title)+" ",1),t("img",{src:V,class:"close-icon",onClick:o[0]||(o[0]=(...d)=>i.closeModal&&i.closeModal(...d))})])])):h("",!0),t("div",pe,[t("div",ve,[s.steps[s.step].back?(l(),a("img",{key:0,onClick:o[1]||(o[1]=d=>i.updateStep(!0)),class:"preview-svg cursor-pointer",src:J,alt:""})):h("",!0),t("span",null,c(s.steps[s.step].title),1)]),t("div",fe,[t("span",null,c(s.steps[s.step].desc),1)]),s.step==="type"?(l(),a("div",ge,[u(_,{type:"live",price:399,"has-shadow":"",selected:s.selectedOption==="live",onSelected:i.setSelected},null,8,["selected","onSelected"]),u(_,{type:"prerec",price:199,"has-shadow":"",selected:s.selectedOption==="prerec",onSelected:i.setSelected},null,8,["selected","onSelected"]),u(_,{type:"bundle",price:499,"has-shadow":"",selected:s.selectedOption==="bundle",onSelected:i.setSelected},null,8,["selected","onSelected"])])):s.step==="time"?(l(),a("div",be,[(l(!0),a(y,null,w(s.availableTimeSlots,(d,D)=>(l(),a("div",{class:"row col-xs-12",key:D},[t("div",{class:I(["col-xs-12 p-0 slot-card mb-15",{"selected-slot":s.selectedSlotId===d.slot_id}])},[t("label",Se,[F(t("input",{type:"radio",class:"radio__input",value:d.slot_id,"onUpdate:modelValue":o[2]||(o[2]=n=>s.selectedSlotId=n)},null,8,ye),[[U,s.selectedSlotId]]),we,t("div",Ce,[t("div",null,c(i.getSlotDate(d)),1),t("div",null,c(i.getSlotTimeRange(d)),1)])])],2)]))),128)),!s.availableTimeSlots.length&&!this.loaderStatus?(l(),a("div",De," More dates coming soon ")):h("",!0)])):(l(),a("div",Te,[t("div",ke,[(l(!0),a(y,null,w(Object.keys(s.review),d=>(l(),a("div",{key:d,class:"row m-0 mb-20"},[t("div",xe,c(`${d}:`),1),t("div",{class:"text-button-label blue-1 col-xs-9 p-0",innerHTML:s.review[d]},null,8,Ie)]))),128))]),s.steps[s.step].footer?(l(),a("div",{key:0,class:"text-body-light black-2",innerHTML:s.steps[s.step].footer[s.selectedOption]},null,8,Le)):h("",!0)]))]),Me,t("div",Oe,[s.steps[s.step].back?(l(),Y(S,{key:0,onClick:o[3]||(o[3]=d=>i.updateStep(!0)),variant:"secondary",class:"margin-right-auto"},{default:b(()=>[g(" Back ")]),_:1})):h("",!0),u(S,{onClick:i.closeModal,variant:"secondary"},{default:b(()=>[g(" Cancel ")]),_:1},8,["onClick"]),u(S,{class:"br-20 ml-20",disabled:!i.isNextEnabled,onClick:o[4]||(o[4]=d=>i.updateStep(!1))},{default:b(()=>[g(c(s.steps[this.step].btnTitle),1)]),_:1},8,["disabled"])]),u(C,{loadingStatus:s.loaderStatus},null,8,["loadingStatus"])])])])}const Ae=x(ce,[["render",Re],["__scopeId","data-v-7e639ea4"]]),Be={props:["userId"],mixins:[Q],components:{Loader:A,BaseButton:M,AddRemoveCartPopup:Z,TrainingSignUpModal:H,TrainingSelectionModal:Ae},data(){return{cartInfo:{},loaderStatus:!1,courseId:null,cartStatus:{},operations:{type:"select",listView:!1,courseDetails:null,timeSlotsList:null,selectedSlotId:null},courseDetails:{},timeSlotsList:[]}},computed:{hasEnrolled(){return this.courseDetails.course_status==="Enrolled"}},async created(){await this.fetchCourseDetails(),this.cartStatus=j,this.courseId=this.courseDetails.course_id},methods:{async fetchCourseDetails(){await this.getCourseDetails()},dateConvert(e){const o=p.utc(`${e.slot_start_time}`).format("MMM DD"),r=p.utc(`${e.slot_end_time}`).format("MMM DD"),f=p.utc(`${e.slot_end_time}`).format("YYYY");return`${o}-${r}, ${f}`},timeConvert(e){const o=p.utc(`${e.slot_start_time}`).format("hh A"),r=p.utc(`${e.slot_end_time}`).format("hh A");return`${o} to ${r} ET`},getDateList(e){return this.dateConvert(e)},gettimeList(e){return this.timeConvert(e)},getTimeSlotFromTraining(e){return e.booked_time_slot?this.timeConvert(e.booked_time_slot):e.all_available_time_slots?this.timeConvert(e.all_available_time_slots):"More dates coming soon"},getDateSlotFromTraining(e){return e.booked_time_slot?this.dateConvert(e.booked_time_slot):e.all_available_time_slots?this.timeConvert(e.all_available_time_slots):"More dates coming soon"},async refreshInfo(e){k("#compliance-signup-modal").modal("hide"),this.courseDetails=e,await this.getCourseDetails()},async addToBookmark(){this.loaderStatus=!0;const e=await W(this.courseId);this.loaderStatus=!1,e.status_code===200?this.$notify({type:"success",title:"Success",text:`${e.data}`}):this.$notify({type:"error",title:"Error",text:`${e.message}`})},openContactUs(e=""){this.$router.push({name:"ContactUs",params:{referrer:e}})},getImageUrl(e){return e?`https://opusjavaprodstorage.blob.core.windows.net${e}`:null},async addRemoveCart(){const{purchase_status:e}=this.courseDetails.cart_status||{};if(e==="ADD_TO_CART")this.operations={...this.operations,timeSlotsList:this.timeSlotsList,type:"select",courseDetails:this.courseDetails},k("#compliance-signup-modal").modal({backdrop:"static",keyboard:!1});else if(e==="ADD_TO_CART"&&this.courseDetails.training_type==="Pre-recorded course"){this.loaderStatus=!0;const o={user_id:this.userId,plan_id:this.planId},r=await B(o);if(this.loaderStatus=!1,r.data&&r.data.status_code===200){const f={type:"add",body:""};this.$emit("setCartInfo",{cartInfo:f,item:this.courseDetails}),this.emitter.emit("cart-items-updated"),await this.fetchCourseDetails()}}else if(e==="REMOVE_FROM_CART"){const o={type:"remove",body:"Are you sure you want to remove this item?"};this.setCartInfo({cartInfo:o,item:this.courseDetails},"ilt",!1)}},async getCourseDetails(){this.loaderStatus=!0;const e=await q(this.planId,this.userId);[this.courseDetails]=e;const o=this.courseDetails.all_available_time_slots;this.timeSlotsList=o.length>4?o.slice(0,4):o,this.loaderStatus=!1},navigateToTrainingPage(){this.$router.push("/compliancewire-marketplace")}}},m=e=>(O("data-v-4d1d1e48"),e=e(),R(),e),Pe={class:"content-wrappper p-20"},Ee={class:"col-xs-12"},Ne={class:"row fixed-nav-bar"},Ve={class:"col-xs-12 p-0 font-18"},Fe={class:"col-xs-12 col-sm-8 p-0"},Ue=m(()=>t("img",{class:"back-img",src:$,alt:""},null,-1)),Ye=[Ue],je={class:"col-xs-6 col-sm-8 col-md-9 mb-40"},He={class:"schedule-title col-xs-12 p-0"},We={class:"title_desc col-xs-12 mb-20 fw-300"},qe={class:"about col-xs-12 p-0"},ze=m(()=>t("div",{class:"about-title col-xs-12 p-0 mb-20"}," About this course ",-1)),Xe={class:"about-content col-xs-12 mb-20"},Ge={class:"about col-xs-12 p-0"},Je=m(()=>t("div",{class:"about-title col-xs-12 p-0 mb-20"}," Course topics ",-1)),Ke={key:0,class:"about-content col-xs-12 mb-20"},Qe={class:"about-list mb-20"},Ze={class:"about-content col-xs-12 mb-20"},$e={key:0,class:"col-xs-6 col-sm-4 col-md-3 course-info"},et={class:"webinar-img-size"},tt=["src"],st={class:"webinar-title mt-10"},ot={class:"col-xs-12 p-0"},it=m(()=>t("div",{class:"text-body-2 text-secondary mt-10"},[t("img",{src:K,class:"preview-svg"}),t("span",{class:"ml-5"},"Online training course")],-1)),lt=m(()=>t("hr",{class:"m-0 black-4 mt-10 mb-10"},null,-1)),at={key:0},rt={key:0,class:"col-xs-12 p-0"},ct=m(()=>t("span",{class:"ml-30"},[t("img",{class:"preview-svg",src:P,alt:""})],-1)),nt={class:""},dt={class:"fw-300 font-14"},ut={class:"fw-300 font-14"},mt={key:1,class:"col-xs-12 p-0 no-data-text text-center mb-10 fw-700"},ht={key:1},_t={class:""},pt={class:"col-xs-12 p-0 mb-15 d-flex align-items-center"},vt=m(()=>t("span",{class:"ml-30"},[t("img",{class:"preview-svg",src:P,alt:""})],-1)),ft={class:""},gt={class:"fw-300 font-14"},bt={class:"fw-300 font-14"},St={key:0,class:"col-xs-12 mt-20 p-0"},yt={key:0,src:ee,class:"course-action-icon",alt:""},wt={class:"col-xs-12 p-0"},Ct=m(()=>t("div",{class:"text-subtitle-2 text-secondary"},"Save for later?",-1)),Dt=m(()=>t("hr",{class:"m-0 black-4 mt-10 mb-10"},null,-1)),Tt={key:0},kt=m(()=>t("span",{class:"col-xs-12 text-regular-small text-secondary mb-10"},"Bookmark this course to receive an email the next time it's offered.",-1)),xt={class:"col-xs-12 mt-10 p-0"},It={key:1},Lt=m(()=>t("span",{class:"col-xs-12 text-regular-small text-secondary mb-10"},"Contact us for more information.",-1)),Mt={class:"col-xs-12 mt-10 p-0"};function Ot(e,o,r,f,s,i){const _=v("BaseButton"),S=v("training-sign-up-modal"),C=v("TrainingSelectionModal"),d=v("add-remove-cart-popup"),D=v("loader");return l(),a("div",Pe,[t("div",Ee,[t("div",Ne,[t("div",Ve,[t("div",Fe,[t("div",{class:"col-xs-1 width-auto p-0 cursor-pointer",onClick:o[0]||(o[0]=(...n)=>i.navigateToTrainingPage&&i.navigateToTrainingPage(...n))},Ye),t("div",{class:"col-xs-11 p-0 cursor-pointer ml-10 text-subtitle-2 blue-1",onClick:o[1]||(o[1]=(...n)=>i.navigateToTrainingPage&&i.navigateToTrainingPage(...n))}," ComplianceWire® Catalog ")])])])]),t("div",je,[t("div",He,c(s.courseDetails.title),1),t("div",We,c(s.courseDetails.description),1),t("div",qe,[ze,t("div",Xe,c(s.courseDetails.aboutheader),1)]),t("div",Ge,[Je,s.courseDetails.course_topics?(l(),a("div",Ke,[t("ul",Qe,[(l(!0),a(y,null,w(s.courseDetails.course_topics,(n,T)=>(l(),a("li",{class:"",key:T},c(n),1))),128))])])):h("",!0),t("div",Ze,c(s.courseDetails.about_footer),1)])]),Object.keys(s.courseDetails).length?(l(),a("div",$e,[t("div",et,[t("img",{class:"",src:i.getImageUrl(s.courseDetails.large_icon_url),alt:""},null,8,tt)]),t("div",st,c(s.courseDetails.title),1),t("div",ot,[t("div",null,[t("div",null,[it,lt,s.courseDetails.booked_time_slot?(l(),a("div",ht,[t("div",_t,[t("div",pt,[vt,t("div",ft,[t("div",gt,c(i.getDateSlotFromTraining(s.courseDetails)),1),t("div",bt,c(i.getTimeSlotFromTraining(s.courseDetails)),1)])])])])):(l(),a("div",at,[s.timeSlotsList.length>0?(l(),a("div",rt,[(l(!0),a(y,null,w(s.timeSlotsList,(n,T)=>(l(),a("div",{class:"col-xs-12 p-0 mb-15 d-flex align-items-center",key:T},[ct,t("div",nt,[t("div",dt,c(i.getDateList(n)),1),t("div",ut,c(i.gettimeList(n)),1)])]))),128))])):(l(),a("div",mt," More dates coming soon "))]))]),s.courseDetails.course_status!=="Enrolled"?(l(),a("div",St,[u(_,{class:I(["mb-15 full-width",{primary:s.courseDetails.cart_status.purchase_status==="ADD_TO_CART",secondary:s.courseDetails.cart_status.purchase_status==="REMOVE_FROM_CART"}]),onClick:i.addRemoveCart,"has-icon":""},{default:b(()=>[s.courseDetails.cart_status.purchase_status==="REMOVE_FROM_CART"?(l(),a("img",yt)):h("",!0),g(" "+c(s.cartStatus[s.courseDetails.cart_status.purchase_status]),1)]),_:1},8,["class","onClick"])])):h("",!0)])]),t("div",wt,[Ct,Dt,i.hasEnrolled?(l(),a("div",It,[Lt,t("div",Mt,[u(_,{onClick:i.openContactUs,variant:"secondary",class:"full-width"},{default:b(()=>[g(" Contact us ")]),_:1},8,["onClick"])])])):(l(),a("div",Tt,[kt,t("div",xt,[u(_,{onClick:i.addToBookmark,variant:"secondary",class:"full-width"},{default:b(()=>[g(" Bookmark ")]),_:1},8,["onClick"])])]))])])):h("",!0),u(S,{operations:s.operations,courseDetails:s.courseDetails,userId:r.userId,timeSlotsList:s.timeSlotsList,onRefreshAllInfo:i.refreshInfo,onSetCartInfo:o[2]||(o[2]=n=>e.setCartInfo(n,"ilt"))},null,8,["operations","courseDetails","userId","timeSlotsList","onRefreshAllInfo"]),u(C,{operations:s.operations,courseDetails:s.courseDetails,userId:r.userId,timeSlotsList:s.timeSlotsList,onRefreshAllInfo:i.refreshInfo,onSetCartInfo:o[3]||(o[3]=n=>e.setCartInfo(n,"ilt"))},null,8,["operations","courseDetails","userId","timeSlotsList","onRefreshAllInfo"]),u(d,{onCloseAddRemoveCart:o[4]||(o[4]=n=>e.closeAddRemoveCart(!0)),cartInfo:s.cartInfo,onRemoveFromCart:o[5]||(o[5]=n=>e.removeFromCart("ilt"))},null,8,["cartInfo"]),u(D,{loadingStatus:s.loaderStatus},null,8,["loadingStatus"])])}const qt=x(Be,[["render",Ot],["__scopeId","data-v-4d1d1e48"]]);export{qt as default};
