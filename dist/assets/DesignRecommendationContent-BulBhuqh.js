import{_ as N,B as V,d as H,N as w,$ as O,c as n,a as e,e as g,k as u,b as y,w as U,F as x,m as v,n as d,j as C,v as k,b2 as D,I as q,r as f,o as r,i as I,t as b,q as Y,p as J,f as K}from"./index-BlMJxPGQ.js";import{R as z,b as _,c as G,d as Q,e as W}from"./tools_freeversion_lock-Bg4t4mT5.js";import{L as X}from"./Loader-DR0R9oEF.js";import{d as P,g as Z,b as T,c as $,e as F}from"./designRecommendationLibrary-Bji3wddo.js";import{c as ee}from"./marketPlaceResources-hux66PHi.js";import{P as te}from"./Pagination-BZVaeVs8.js";import{m as se}from"./marketPlaceTools-GTlmHJkh.js";import{p as R}from"./marketo-zx_g1DXt.js";import{_ as oe}from"./chevron_left_white-D3IwzB1n.js";import{_ as S}from"./search_icon-C65g3Q5L.js";import{_ as ae}from"./danger_close_icon-CkTgh2bE.js";import"./DocumentsMoreInfo-CaOFYwEb.js";import"./moment-Cl4UOzQZ.js";import"./constants-DZfa7LnM.js";import"./cart-QHhiBhPv.js";import"./event-bus-DYoA24Gz.js";import"./tool_available-BYBTocPu.js";import"./trash-D7-advNl.js";import"./goto_arrow-zLb6UYwr.js";import"./close_icon_white-5NpTKSBQ.js";import"./chevron_right-Bv87NFTl.js";import"./cloneDeep-ldw2ZiUo.js";import"./_baseAssignValue-BD6sbZ4C.js";import"./OpusSelect-BRceMwA4.js";import"./OpusCheckbox-DmKgoiup.js";import"./chevron_down_new-ByXOiGKT.js";import"./AddRemoveCartPopup-CqkASo7c.js";import"./documentsMixin-Bh1uCigM.js";import"./documents-CP6oEKge.js";const ie={props:["userId"],data(){return{loaderStatus:!1,selectAllFiles:!1,selectedFiles:[],rootCauseInfo:{},rootCauseFilters:{},selectedFilterId:[],rootCauseModalInfo:{},enteredTag:"",totalPages:1,total:0,perPage:20,fromRecords:1,currentPage:1,maxVisiblePages:4,rootCauseTags:[],copiedData:[],finalData:[],response:{},toolsData:{},isPurchased:0,isEmpty:!1,rcaIndex:-1,totalCurrentRecords:"",closeRecommendationId:{},isActive:!1,hasExpand:!0,placeholder:"Search",searchText:""}},components:{Loader:X,RootCauseInfoModal:z,Pagination:te,marketPlaceTools:se,BaseButton:V},computed:{isAllExpanded(){return Object.keys(this.closeRecommendationId)?Object.values(this.closeRecommendationId).every(t=>t):!1}},async created(){if(await Promise.all([this.getdrlFilters(),this.getList()]),this.$route.query.id){const t=[...this.$route.query.id];await this.getPopularSearches(t)}},watch:{enteredTag(t,s){this.selectedFilterId=this.selectedFilterId.filter(h=>!s.includes(h));const i=[...this.selectedFilterId,...this.enteredTag];this.selectedFilterId=[...new Set(i)]},selectAllFiles(){this.selectAllFiles?this.selectedFiles=this.rootCauseInfo.map(t=>t.id):this.selectedFiles=[]}},methods:{makeBarExpand(){this.isActive=!this.isActive,this.clear()},clear(){this.searchText=""},async search(){this.searchText!==""&&this.searchRootCause(this.searchText),this.setSelectionsAsEmpty(),this.isEmpty=!1,this.selectedFilterId=[],this.rootCauseInfo=[],this.enteredTag=[]},async searchRootCause(t){const s={pagination:{current_page:this.fromRecords,result_per_page:this.perPage},search:t};this.loaderStatus=!0;const i=await P(s);this.rootCauseInfo=i.result_data,i&&(this.total=i.total_records_count,this.totalRecordsCount=this.total>this.totalRecordsCount?this.total:this.totalRecordsCount,this.totalPages=Math.ceil(this.total/this.perPage)),this.loaderStatus=!1},async getPopularSearches(t){this.selectedFilterId=t,await this.getDRLData(t)},closeRecommendation(t){this.closeRecommendationId={...this.closeRecommendationId,[t]:!this.closeRecommendationId[t]}},expandAllTitles(){const t={};this.rootCauseInfo.forEach(s=>{t[s.id]=!0}),this.closeRecommendationId={...t}},collapseAllTitles(){const t={};this.rootCauseInfo.forEach(s=>{t[s.id]=!1}),this.closeRecommendationId={...t}},getImageUrl(t){return t?`https://opusjavaprodstorage.blob.core.windows.net/${t}`:null},navigateToTools(){this.$router.go(-1)},EmitNextRootCause(){this.rcaIndex+=1,this.rcaIndex===this.rootCauseInfo.length&&(this.rcaIndex=0),this.rootCauseModalInfo=this.rootCauseInfo[this.rcaIndex]},EmitPreviousRootCause(){this.rcaIndex-=1,this.rcaIndex===-1&&(this.rcaIndex=this.rootCauseInfo.length-1),this.rootCauseModalInfo=this.rootCauseInfo[this.rcaIndex]},async getList(){this.loaderStatus=!0;const[t,s]=await Promise.all([Z(+this.userId),ee(1,this.userId)]);this.toolsData=s,this.isPurchased=t[0].enrolled,this.loaderStatus=!1},async selectedFilesRca(){this.loaderStatus=!0,this.finalData=[],this.copiedData=[],this.response=await T(this.selectedFiles);for(let t=0;t<this.response.length;t+=1){const s=`${this.response[t].title}
`,i=`${this.response[t].commentary}

`;this.copiedData.push(s),this.copiedData.push(i),this.finalData=[...this.copiedData].join("")}if(this.finalData.length>0){this.$copyText(this.finalData).then(()=>{this.$notify({type:"success",title:"Success",text:"Copied successfully!"})},()=>{this.$notify({type:"error",title:"Error",text:"Copy failed!"})});const t={email:JSON.parse(localStorage.getItem("userData")).email,Last_Interest:"Human Factors Research & Design",page_urlextended:window.location.href,page_urlreferral_extended:document.referrer,form_control:"Copy",form_control_details:"Root Causes"};R(t)}else this.$notify({type:"error",title:"Error",text:"Select atleast one root cause to copy!"});this.loaderStatus=!1},async downloadRootCause(){this.loaderStatus=!0,this.finalData=[],this.copiedData=[];const t=await T(this.selectedFiles);for(let i=0;i<t.length;i+=1){const h=new _.Paragraph({text:`${t[i].title.trim()}`,style:"default-paragraph"}),o=new _.Paragraph({text:`${t[i].commentary}`,style:"default-paragraph"}),l=new _.Paragraph("");this.copiedData.push(h),this.copiedData.push(o),this.copiedData.push(l)}this.finalData=[...this.copiedData];const s=H().format("MMDDYYYY");if(this.finalData.length>0){const i=new _.Document({styles:{paragraphStyles:[{id:"default-paragraph",name:"Default Paragraph",run:{font:"Calibri"}}]},sections:[{properties:{},children:[...this.finalData]}]});this.selectedFiles.length>1?_.Packer.toBlob(i).then(o=>{w.saveAs(o,`RCA_${s}.docx`)}):_.Packer.toBlob(i).then(o=>{w.saveAs(o,`${t[0].title}_${s}.docx`)});const h={email:JSON.parse(localStorage.getItem("userData")).email,Last_Interest:"Human Factors Research & Design",page_urlextended:window.location.href,page_urlreferral_extended:document.referrer,form_control:"Download",form_control_details:"Root Causes"};R(h)}else this.$notify({type:"error",title:"Error",text:"Select atleast one root cause to download!"});this.loaderStatus=!1},async getdrlFilters(){const t=await $(),s=t.filters;this.rootCauseFilters=s.filter(i=>i.active===!0),this.rootCauseTags=t.tags},async pagechanged(t){t&&(this.currentPage=t),this.fromRecords=this.currentPage,this.setSelectionsAsEmpty(),await this.getDRLDataPagination(this.selectedFilterId)},async pushTags(t){const s=this.rootCauseTags.filter(i=>i.id===t);this.rootCauseFilterTags=s},addListFilters(t){this.selectedFilterId.push(t)},openInfoModal(t,s){this.rootCauseModalInfo=t,this.rcaIndex=s,O("#root-cause-info").modal("show")},getFormData(){const t={pagination:{current_page:this.fromRecords,result_per_page:this.perPage},sub_category_ids:this.selectedFilterId};return this.searchText=this.searchText?t.search=this.searchText.trim():"",this.filterObj=Object.keys(this.filterObj).length!==0?t.filter=this.filterObj:{},t},async getDRLData(t){this.setSelectionsAsEmpty(),this.currentPage=1;const s={pagination:{current_page:1,result_per_page:this.perPage},sub_category_ids:t};this.loaderStatus=!0;const i=await F(s),h=i.data.result_data.filter(l=>l.active===!0);this.isPurchased?(this.rootCauseInfo=h,this.rootCauseInfo.length>0?this.isEmpty=!1:this.isEmpty=!0,i&&(this.total=i.data.total_records_count,this.totalRecordsCount=this.total>this.totalRecordsCount?this.total:this.totalRecordsCount,this.totalPages=Math.ceil(this.total/this.perPage))):this.rootCauseInfo=h.slice(0,5),this.collapseAllTitles();const o={email:JSON.parse(localStorage.getItem("userData")).email,Last_Interest:"Human Factors Research & Design",page_urlextended:window.location.href,page_urlreferral_extended:document.referrer,form_control:"Tools",form_control_details:"Design Recommendation Library"};R(o),this.loaderStatus=!1},async getDRLDataPagination(t){if(this.searchText){const s={pagination:{current_page:this.fromRecords,result_per_page:this.perPage},search:this.searchText},i=await P(s);this.rootCauseInfo=i.result_data,i&&(this.total=i.total_records_count,this.totalRecordsCount=this.total>this.totalRecordsCount?this.total:this.totalRecordsCount,this.totalPages=Math.ceil(this.total/this.perPage))}else{const s={pagination:{current_page:this.fromRecords,result_per_page:this.perPage},sub_category_ids:t};this.loaderStatus=!0;const i=await F(s);this.rootCauseInfo=i.data.result_data,i&&(this.total=i.data.total_records_count,this.totalRecordsCount=this.total>this.totalRecordsCount?this.total:this.totalRecordsCount,this.totalPages=Math.ceil(this.total/this.perPage))}this.isAllExpanded=!1,this.collapseAllTitles(),this.loaderStatus=!1},resetFilters(){this.setSelectionsAsEmpty(),this.isEmpty=!1,this.selectedFilterId=[],this.rootCauseInfo=[],this.enteredTag=[]},setSelectionsAsEmpty(){this.selectAllFiles=!1,this.selectedFiles=[]}}},c=t=>(J("data-v-cb81a297"),t=t(),K(),t),le={class:"content-wrappper"},re={class:"drl-welcome-banner mr-0"},ne={class:"col-xs-12 p-0"},ce={class:"col-xs-12 d-flex align-items-center mb-10 p-0"},de={class:"welcome-common-header pl-25 fw-300"},he={key:0,class:"free-button"},pe={class:""},ue={class:"col-sm-4 col-md-3 filters-main p-0 view-filters-main"},me={class:"pt-20 filters-select-card pl-10 pb-10"},_e=c(()=>e("div",{class:"flex pl-10"},[e("p",{class:"step-common step-style"},[e("span",{class:"number"},"1")]),e("p",{class:"filter-text pr-10"},"Select Filters")],-1)),ge={class:"d-flex flex-wrap justify-content-center col-gap-15 pt-10 pb-10"},fe={class:"panel-group",id:"accordion0",role:"tablist","aria-multiselectable":"true"},ye={key:0,class:"panel-heading",role:"tab",id:"headingTwo"},be=["href","aria-controls"],xe={class:"main-list-header"},ve={key:1,class:"panel-heading",role:"tab",id:"headingTwo"},Ce={class:"panel-title"},Ie=["href","aria-controls"],Re={class:"main-list-header"},we=["id"],ke={class:""},De={class:"select-box"},Pe={class:"checkbox"},Te=["value","disabled"],Fe=c(()=>e("span",{class:"cr"},[e("i",{class:"cr-icon glyphicon glyphicon-ok"})],-1)),Se={class:"pl-20 sub-category-name"},Ee={class:"pt-20 results-select-card pl-10 pb-10"},Ae={class:"d-flex justify-content-between align-items-center"},Le={class:"flex pl-10"},Me={key:0,class:"step-common step-no-style"},Be={key:1,class:"step-common step-style"},je=c(()=>e("p",{class:"filter-text pr-10"},"View Results",-1)),Ne={key:0,class:"mr-10 custom-width"},Ve=["placeholder"],He={key:1,class:"search-container-expand pl-10 pr-10 cursor-pointer"},Oe=["placeholder"],Ue={class:"col-xs-12 mt-20 table-wrapper"},qe={class:"table"},Ye={class:"recommendation-intro d-flex justify-content-between"},Je=c(()=>e("p",{class:"root-heading"},"Recommendation",-1)),Ke={key:0,class:"panel-group"},ze={class:"panel panel-default",style:{"border-bottom":"1px solid rgba(11, 60, 97, 0.1) !important"}},Ge={class:"panel-heading"},Qe=["href","onClick"],We={key:0,class:"recommendation-before-collapse d-flex w-90"},Xe={class:"panel-body panel-basis-40 margin-nve-10"},Ze={key:0,class:"text-regular-large black-2 drl-custom-ul"},$e=["innerHTML"],et={key:1,class:"text-regular-large black-2 drl-custom-ul"},tt=["innerHTML"],st={class:"panel-basis-60 margin-nve-10"},ot=["src"],at={key:1,class:"recommendation-before-collapse d-flex w-90"},it={class:"panel-body panel-basis-40 margin-nve-10"},lt={class:"text-regular-large black-2 drl-custom-ul"},rt=["innerHTML"],nt={class:"panel-basis-60 margin-nve-10"},ct=["src"],dt=c(()=>e("img",{class:"new_member_img",src:G},null,-1)),ht=c(()=>e("h3",{class:"select-filter-text text-color"},[g(" Select and apply filters to "),e("br"),g(" view matching design recommendations ")],-1)),pt=c(()=>e("p",{class:"text-color ft-18"}," Select additional filters to view more results ",-1)),ut=[dt,ht,pt],mt=c(()=>e("img",{class:"new_member_img",src:Q},null,-1)),_t=c(()=>e("h3",{class:"select-filter-text text-color"}," Sorry, no results found ",-1)),gt=c(()=>e("p",{class:"text-color ft-18"}," Try again by adjusting your filters for different results ",-1)),ft=[mt,_t,gt],yt={key:0,class:"pagination-wrapper"},bt={key:1,class:"col-xs-12 mt-20 center tool-freeversion-image"},xt=c(()=>e("img",{class:"new_member_img",src:W},null,-1)),vt=c(()=>e("h3",{class:"tool-free-text"},[g(" To access all results and use all filters, purchase"),e("br"),g(" Design Recommendation Library ")],-1));function Ct(t,s,i,h,o,l){const E=f("BaseButton"),A=f("pagination"),L=f("market-place-tools"),M=f("root-cause-info-modal"),B=f("loader");return r(),n("div",le,[e("div",re,[e("div",ne,[e("div",ce,[e("img",{onClick:s[0]||(s[0]=(...a)=>l.navigateToTools&&l.navigateToTools(...a)),class:"cursor-pointer",src:oe,alt:""}),e("div",de,[g(" Design Recommendation Library"),o.isPurchased?u("",!0):(r(),n("span",he,"Free version"))])])])]),e("div",pe,[e("div",ue,[e("div",me,[_e,e("div",ge,[e("button",{class:"btn btn-light reset-text",onClick:s[1]||(s[1]=(...a)=>l.resetFilters&&l.resetFilters(...a))}," Reset all "),y(E,{disabled:!o.selectedFilterId.length,onClick:s[2]||(s[2]=a=>l.getDRLData(o.selectedFilterId))},{default:U(()=>[g("Apply")]),_:1},8,["disabled"])])]),e("div",null,[e("div",fe,[(r(!0),n(x,null,v(o.rootCauseFilters,(a,p)=>(r(),n("div",{class:"panel panel-default",key:p},[o.isPurchased?(r(),n("div",ve,[e("h4",Ce,[e("a",{class:"collapsed",role:"button","data-toggle":"collapse","data-parent":"#accordion",href:"#collapse"+p,"aria-controls":"#collapse"+a,onClick:s[4]||(s[4]=I(()=>{},["prevent"]))},[e("span",Re,b(a.filter_name),1)],8,Ie)])])):(r(),n("div",ye,[e("h4",{class:d(["panel-title",p===0?"not-disable-filters":"disable-filters"])},[e("a",{class:"collapsed",role:"button","data-toggle":"collapse","data-parent":"#accordion",href:"#collapse"+p,"aria-controls":"#collapse"+a,onClick:s[3]||(s[3]=I(()=>{},["prevent"]))},[e("span",xe,b(a.filter_name),1)],8,be)],2)])),e("div",{id:"collapse"+p,class:"panel-collapse collapse",role:"tabpanel","aria-labelledby":"headingTwo"},[(r(!0),n(x,null,v(a.sub_categories,m=>(r(),n("div",{class:"pt-10",key:m.id},[e("div",ke,[e("div",{class:d(["pl-40 flex",!o.isPurchased&&!["Software","Hardware & On-Device Markings"].includes(m.sub_category_name)?"disable-filters":"not-disable-filters"])},[e("div",De,[e("div",Pe,[e("label",null,[C(e("input",{type:"checkbox",value:m.id,"onUpdate:modelValue":s[5]||(s[5]=j=>o.selectedFilterId=j),disabled:!o.isPurchased&&!["Software","Hardware & On-Device Markings"].includes(m.sub_category_name)},null,8,Te),[[Y,o.selectedFilterId]]),Fe])])]),e("p",Se,b(m.sub_category_name),1)],2)])]))),128))],8,we)]))),128))])])]),e("div",{class:d(["col-sm-8 col-md-9 p-0",{"view-results-main":o.rootCauseInfo.length>0}])},[e("div",Ee,[e("div",Ae,[e("div",Le,[o.rootCauseInfo.length?(r(),n("span",Be,"2")):(r(),n("span",Me,"2")),je]),o.isPurchased?(r(),n("div",Ne,[e("div",null,[o.hasExpand?(r(),n("div",{key:0,class:d(["cursor-pointer",o.isActive?"search-container-expand":"search-container"])},[e("img",{class:"image-search",src:S,alt:"Search",onClick:s[6]||(s[6]=(...a)=>l.makeBarExpand&&l.makeBarExpand(...a))}),o.isActive?C((r(),n("input",{key:0,type:"text",class:"search-bar p-10",placeholder:o.placeholder,"onUpdate:modelValue":s[7]||(s[7]=a=>o.searchText=a),onKeydown:s[8]||(s[8]=D((...a)=>l.search&&l.search(...a),["enter"]))},null,40,Ve)),[[k,o.searchText]]):u("",!0)],2)):(r(),n("div",He,[e("img",{class:"image-search",src:S,onClick:s[9]||(s[9]=(...a)=>l.search&&l.search(...a)),alt:"Search"}),C(e("input",{type:"text",class:"search-bar p-10",placeholder:o.placeholder,"onUpdate:modelValue":s[10]||(s[10]=a=>o.searchText=a),onKeydown:s[11]||(s[11]=D((...a)=>l.search&&l.search(...a),["enter"]))},null,40,Oe),[[k,o.searchText]]),o.searchText?(r(),n("img",{key:0,onClick:s[12]||(s[12]=(...a)=>l.clear&&l.clear(...a)),src:ae,alt:"Clear search query"})):u("",!0)]))])])):u("",!0)])]),e("div",Ue,[e("div",qe,[e("div",Ye,[Je,l.isAllExpanded?(r(),n("p",{key:1,class:d(["text-subtitle-1 blue-3 float-right",[o.rootCauseInfo.length>0?"cursor-pointer":"no-action"]]),onClick:s[14]||(s[14]=(...a)=>l.collapseAllTitles&&l.collapseAllTitles(...a))}," Collapse all ",2)):(r(),n("p",{key:0,class:d(["text-subtitle-1 blue-3 float-right",[o.rootCauseInfo.length>0?"cursor-pointer":"no-action"]]),onClick:s[13]||(s[13]=(...a)=>l.expandAllTitles&&l.expandAllTitles(...a))}," Expand all ",2))]),o.rootCauseInfo.length>0?(r(),n("div",Ke,[(r(!0),n(x,null,v(o.rootCauseInfo,(a,p)=>(r(),n("div",{class:d(["panel-group",!o.isPurchased&&p>=5?"disable-filters":"not-disable-filters"]),id:"accordionrec",key:p},[e("div",ze,[e("div",Ge,[e("div",{class:"panel-heading recommentation-arrow-container p-relative pb-0","aria-expanded":"false","data-toggle":"collapse","data-parent":"#accordionrec",href:"#collapserecco"+p,onClick:I(m=>l.closeRecommendation(a.id),["prevent"])},[e("p",{class:d(["text-button-label blue-1 pr-20",o.closeRecommendationId[a.id]?"desc":"asc"])},b(a.recommendation_title),3),o.closeRecommendationId[a.id]?(r(),n("div",at,[e("div",it,[e("div",lt,[e("p",{innerHTML:a.recommendation_content},null,8,rt)])]),e("div",nt,[e("img",{class:"image-full",src:l.getImageUrl(a.recommendation_image_path)},null,8,ct)])])):(r(),n("div",We,[e("div",Xe,[a.recommendation_content.length>250?(r(),n("p",Ze,[e("span",{innerHTML:a.recommendation_content.substr(0,90)+"..."},null,8,$e)])):(r(),n("p",et,[e("span",{innerHTML:a.recommendation_content},null,8,tt)]))]),e("div",st,[e("img",{class:"image-croped",src:l.getImageUrl(a.recommendation_image_path)},null,8,ot)])]))],8,Qe)])])],2))),128))])):(r(),n("div",{key:1,class:d(["col-xs-12 mt-20 no-data center",o.isEmpty?"display-none":"display-block"])},ut,2)),o.rootCauseInfo.length===0?(r(),n("div",{key:2,class:d(["col-xs-12 mt-20 no-data center",o.isEmpty?"display-block":"display-none"])},ft,2)):u("",!0)]),o.rootCauseInfo.length>0?(r(),n("div",yt,[o.total?(r(),q(A,{key:0,totalPages:o.totalPages,maxVisibleButtons:o.maxVisiblePages,total:o.total,perPage:o.perPage,currentPage:o.currentPage,onPagechanged:l.pagechanged},null,8,["totalPages","maxVisibleButtons","total","perPage","currentPage","onPagechanged"])):u("",!0)])):u("",!0),!o.isPurchased&&o.rootCauseInfo.length>0?(r(),n("div",bt,[xt,vt,y(L,{loader:o.loaderStatus,userId:i.userId,toolName:"Design Recommendation Library"},null,8,["loader","userId"])])):u("",!0)])],2)]),y(M,{rootCauseModalInfo:o.rootCauseModalInfo,index:o.rcaIndex,onEmitNextRootCause:l.EmitNextRootCause,onEmitPreviousRootCause:l.EmitPreviousRootCause,totalCurrentRecords:o.rootCauseInfo.length},null,8,["rootCauseModalInfo","index","onEmitNextRootCause","onEmitPreviousRootCause","totalCurrentRecords"]),y(B,{loadingStatus:o.loaderStatus},null,8,["loadingStatus"])])}const Zt=N(ie,[["render",Ct],["__scopeId","data-v-cb81a297"]]);export{Zt as default};
