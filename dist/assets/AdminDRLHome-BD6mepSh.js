import{_ as D,s as E,B as U,$ as p,b3 as I,r as m,o as d,c as r,a as e,O as T,j as w,v as N,b as i,w as f,e as u,p as k,f as L,t as x,Z as J,n as V,F as q,m as O,I as M,k as _,Y as G}from"./index-BlMJxPGQ.js";import{o as Q,_ as X}from"./edit_icon_new-D9iwJqyt.js";import{L as B}from"./Loader-DR0R9oEF.js";import"./event-bus-DYoA24Gz.js";import{O as H,a as j,b as F,c as Y,u as ee,d as te,e as se,f as oe,U as le,D as ae,h as ie,i as ne,j as de,k as ce}from"./drlAdmin-BikVWK4U.js";import{c as P}from"./cloneDeep-ldw2ZiUo.js";import{O as z}from"./OpusEditor-Cn6yaL1S.js";import{P as re}from"./Pagination-BZVaeVs8.js";import{_ as me}from"./more-horizontal-YxyMY0P_.js";import{_ as ue}from"./delete_icon-WtjTFUCM.js";import{_ as ge}from"./back_arrow-DlGi0Dam.js";import{_ as W}from"./plus_icon_blue-MdAOVTYS.js";import"./danger_close_icon-CkTgh2bE.js";import"./_baseAssignValue-BD6sbZ4C.js";import"./chevron_right-Bv87NFTl.js";const he={components:{Multiselect:E,Loader:B,BaseButton:U,OpusEditor:z,OpusImageSelect:H},props:["editDetails"],data(){return{allCategoryList:[],tagsList:[],loaderStatus:!1,selectedAddCategory:null,categoryName:null,getSubCategoryById:null,UpdateNewCategoryNew:null,getAllSubCategories:[],formDetails:{active:!0,id:null,recommendation_image_path:"",recommendation_content:"",recommendation_title:"",subcategory_ids:[]},selectedFile:null,errorTxt:"",maxlength:{title:256,content:1e4}}},async created(){this.emitter.on("getAllSubCategories",async()=>{await this.getSubCategories()}),await this.getSubCategories(),p("#edit-rec").on("shown.bs.modal",()=>{this.formDetails=P(this.editDetails)})},watch:{editDetails:{handler(o){o&&(this.formDetails=P(o))},immediate:!0}},computed:{canSave(){return this.formDetails.recommendation_title&&this.formDetails.recommendation_title.length<=this.maxlength.title&&this.formDetails.recommendation_content&&this.formDetails.recommendation_content.length<=this.maxlength.content&&(this.selectedFile!==null||this.formDetails.recommendation_image_path!=="")&&this.errorTxt===""&&this.formDetails.subcategory_ids.length>0}},methods:{uploadFile:I,getSubCategoryNames(o){const t=this.getAllSubCategories.find(g=>g.id===o);return t?t.sub_category_name:""},async getSubCategories(){this.getAllSubCategories=await j(),this.getAllSubCategories=this.getAllSubCategories.filter(o=>o.active===!0)},async getAllCategoryData(){const o=await F();this.allCategoryList=o.filter(t=>t.active===!0)},async getSubCategoriesById(o){this.loaderStatus=!0,this.UpdateNewCategoryNew="",this.getSubCategoryById=await Y(o),this.loaderStatus=!1},closeAddNewContentPopUp(){this.setDefaultValues(),p("#edit-rec").modal("hide")},setDefaultValues(){this.formDetails={id:null,recommendation_content:"",recommendation_title:"",recommendation_image_path:"",category_id:"",subcategory_ids:[]},this.$refs["edit-rec-image"].reset(),p("#edit-rec").modal("hide"),this.selectedFile=null},async editRecommendation(){if(this.loaderStatus=!0,this.selectedFile){const g=await I(this.selectedFile,{container_name:"tools",file_name:`${this.selectedFile.name}`,folder_name:"DRL",permissions:"write",storage_name:"opus-storage-java"});this.formDetails.recommendation_image_path=g}this.formDetails.active=!0,this.formDetails.date_modified==="null"&&(this.formDetails.date_modified="");const o=P(this.formDetails),t=await ee(o);t?(t.data==="Recommendation title already exist"?(this.$notify({type:"warning",title:"Warning",text:t.data}),this.categoryName=""):(this.$notify({type:"success",title:"Success",text:t.data}),this.setDefaultValues()),this.emitter.emit("getRecommendations")):t===void 0?this.$notify({type:"error",title:"Error",text:"Please enter all fields"}):this.$notify({type:"error",title:"Error",text:t.data}),this.loaderStatus=!1},setSelectedFile(o){this.selectedFile=o}}},b=o=>(k("data-v-b61d1100"),o=o(),L(),o),_e={id:"edit-rec",class:"modal fade",role:"dialog"},pe={class:"modal-dialog modal-lg"},ye={class:"modal-content p-10"},fe={class:"modal-header"},Ce={class:"col-xs-12 p-0 flex-between"},be=b(()=>e("div",{class:"top-header"},"Edit Recommendation",-1)),Se=b(()=>e("hr",{class:"mr-15 ml-15 my-0"},null,-1)),ve={class:"modal-body"},we={class:"row mb-20"},xe={class:"col-xs-12 mb-10"},De=b(()=>e("label",null,"Title",-1)),Ae=b(()=>e("span",{class:"text-required"}," *",-1)),Ne={class:"form-group"},Ue=["maxlength"],ke={class:"col-xs-12 mb-10"},Le=b(()=>e("label",null,"Recommendation Content",-1)),$e=b(()=>e("span",{class:"text-required"}," *",-1)),Re={class:"col-xs-12 p-0"},Be={class:"col-xs-12 mb-10"},Ve=b(()=>e("label",null,"Image",-1)),Pe=b(()=>e("span",{class:"text-required"}," *",-1)),Ie={class:"form-group"},Ee={class:"col-xs-12 mt-20 select"},Fe=b(()=>e("label",null,"Sub Categories",-1)),Me=b(()=>e("span",{class:"text-required"}," *",-1)),Te=b(()=>e("hr",null,null,-1)),qe={class:"d-flex justify-content-end col-gap-20"};function Oe(o,t,g,A,s,a){const h=m("OpusEditor"),y=m("OpusImageSelect"),C=m("multiselect"),l=m("BaseButton"),n=m("loader");return d(),r("div",_e,[e("div",pe,[e("div",ye,[e("div",fe,[e("div",Ce,[be,e("div",null,[e("img",{src:T,alt:"",class:"cursor-pointer",onClick:t[0]||(t[0]=(...c)=>a.closeAddNewContentPopUp&&a.closeAddNewContentPopUp(...c))})])])]),Se,e("div",ve,[e("div",we,[e("div",xe,[De,Ae,e("div",Ne,[w(e("input",{"onUpdate:modelValue":t[1]||(t[1]=c=>s.formDetails.recommendation_title=c),type:"text",class:"form-control common-input",maxlength:s.maxlength.title},null,8,Ue),[[N,s.formDetails.recommendation_title]])])]),e("div",ke,[Le,$e,e("div",Re,[i(h,{id:"edit-rec-content",modelValue:s.formDetails.recommendation_content,"onUpdate:modelValue":t[2]||(t[2]=c=>s.formDetails.recommendation_content=c),placeholder:"Add Recommendation content",maxlength:s.maxlength.content,required:""},null,8,["modelValue","maxlength"])])]),e("div",Be,[Ve,Pe,e("div",Ie,[i(y,{id:"edit-rec-image",ref:"edit-rec-image",onSelect:a.setSelectedFile,file:{name:s.formDetails.recommendation_image_path?s.formDetails.recommendation_image_path.split("/").pop():""},btnText:"Upload image"},null,8,["onSelect","file"])])]),e("div",Ee,[Fe,Me,i(C,{showLabels:!1,"close-on-select":!0,"allow-empty":!0,class:"multiselect-single-dropdown multiple",searchable:!0,multiple:!0,options:s.getAllSubCategories.map(c=>c.id),"custom-label":a.getSubCategoryNames,modelValue:s.formDetails.subcategory_ids,"onUpdate:modelValue":t[3]||(t[3]=c=>s.formDetails.subcategory_ids=c),"open-direction":"top",placeholder:"Select Sub Category"},null,8,["options","custom-label","modelValue"])])]),Te,e("div",qe,[i(l,{variant:"secondary",onClick:a.closeAddNewContentPopUp},{default:f(()=>[u("Cancel")]),_:1},8,["onClick"]),i(l,{onClick:a.editRecommendation,disabled:!a.canSave},{default:f(()=>[u("Save")]),_:1},8,["onClick","disabled"])])])])]),i(n,{loadingStatus:s.loaderStatus},null,8,["loadingStatus"])])}const je=D(he,[["render",Oe],["__scopeId","data-v-b61d1100"]]),We={props:["rec"],components:{BaseButton:U}},K=o=>(k("data-v-121acb9b"),o=o(),L(),o),Ke={id:"delete_drl",class:"modal",role:"dialog"},Ge={class:"modal-dialog"},He={class:"modal-content"},Ye=K(()=>e("div",{class:"modal-header"},[e("div",{class:"d-flex justify-content-between float-right"},[e("img",{"data-dismiss":"modal",class:"cursor-pointer",src:T,alt:""})])],-1)),ze={class:"modal-body"},Ze={class:"center center-block w-80"},Je=K(()=>e("span",{class:"text-h4 pr-20 pl-20"},"Are you sure you want to delete this design recommendation?",-1)),Qe={class:"text-subtitle-1 pt-20 pb-20"},Xe=K(()=>e("p",{class:"text-regular-large pt-20"}," Deleting will remove this permanently from the database. ",-1)),et={class:"d-flex justify-content-center p-0 mt-20 col-gap-10 mb-20"};function tt(o,t,g,A,s,a){const h=m("BaseButton");return d(),r("div",null,[e("div",Ke,[e("div",Ge,[e("div",He,[Ye,e("div",ze,[e("div",Ze,[Je,e("div",Qe,x(g.rec.recommendation_title),1),Xe]),e("div",et,[i(h,{"data-dismiss":"modal",variant:"secondary"},{default:f(()=>[u("Cancel")]),_:1}),i(h,{variant:"error",onClick:t[0]||(t[0]=y=>o.$emit("delete"))},{default:f(()=>[u("Yes, Delete")]),_:1})])])])])])])}const st=D(We,[["render",tt],["__scopeId","data-v-121acb9b"]]),ot={components:{Loader:B,EditDRLModal:je,DeleteDRLModal:st,Pagination:re},async created(){this.emitter.on("getRecommendations",async()=>{await this.getRecommendationsData()}),await this.getRecommendationsData(),this.setSortBy("recommendation_title")},data(){return{recommendations:[],changeClass:!1,selectedItem:{},editDetails:null,filteredList:[],loaderStatus:!1,totalPages:1,total:0,perPage:20,currentPage:1,maxVisiblePages:4,sortingType:"name",sortingOrder:"asc",sortIcon:"asc",sortOptions:{recommendation_title:1,date_created:-1,date_modified:-1}}},methods:{getDateFormat:J,async pagechanged(o){o&&(this.currentPage=o),await this.getRecommendationsData()},async getRecommendationsData(){const o={pagination:{current_page:this.currentPage,result_per_page:this.perPage}};this.loaderStatus=!0;const t=await te(o);t&&(this.filteredList=t.result_data,this.total=t.total_records_count,this.totalRecordsCount=this.total>this.totalRecordsCount?this.total:this.totalRecordsCount,this.totalPages=Math.ceil(this.total/this.perPage)),this.loaderStatus=!1},deleteDRL(o){this.selectedItem=o,p("#delete_drl").modal({backdrop:"static",keyboard:!1})},async deleteRecommendation(o){this.loaderStatus=!0;const t=await se(o);t.message==="success"?this.$notify({type:"success",title:"Success",text:t.data}):this.$notify({type:"error",title:"Error",text:t.data}),p("#delete_drl").modal("hide"),await this.getRecommendationsData(),this.filteredList.length===0&&this.currentPage>1&&(this.currentPage-=1,await this.getRecommendationsData()),this.loaderStatus=!1},openEditPopup(o){this.editDetails=o,this.openAddNewContentPopup()},openAddNewContentPopup(){p("#edit-rec").modal({backdrop:"static",keyboard:!1})},menuDropdown(o){this.changeClass=!1,o.screenY>window.innerHeight-150?this.changeClass=!0:this.changeClass=!1},getSortKey(o){let t="";return t+=this.sortOptions[o]>0?"asc":"desc",t+=this.sortingType===o?" active":" ",t},setSortBy(o){this.sortingType=o,this.sortOptions[o]*=-1;const t=this.sortOptions[o]>0?"desc":"asc";this.sortIcon=t,this.filteredList=Q(this.filteredList,o,t)}}},$=o=>(k("data-v-f4b2da3c"),o=o(),L(),o),lt={class:"col-md-12 col-lg-12 col-sm-12 pl-20 pr-20 xs-pr-0 mt-20"},at={class:"text-subtitle-2"},it={key:0,class:"pagination-wrapper pt-20"},nt={class:"projects-table"},dt={class:"pl-15"},ct={class:"table-data-fixed-width"},rt={class:"table-data-fixed-width"},mt={class:"d-flex align-items-center justify-content-between"},ut={class:"dropdown pr-20 pl-20"},gt=$(()=>e("img",{src:me,"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},null,-1)),ht={class:"dropdown-menu dropdown-menu-right pb-10 pt-10"},_t=["onClick"],pt=$(()=>e("img",{src:X,class:"preview-svg"},null,-1)),yt=$(()=>e("span",{class:"ml-10 project-menu-action"},"Edit",-1)),ft=[pt,yt],Ct=["onClick"],bt=$(()=>e("img",{src:ue,class:"preview-svg"},null,-1)),St=$(()=>e("span",{class:"ml-10 project-menu-action delete"},"Delete",-1)),vt=[bt,St],wt={key:1,class:"norecords_wrapper"},xt=$(()=>e("div",{class:"mt-50 no-records-found"},"No recommendations found!",-1)),Dt=[xt];function At(o,t,g,A,s,a){const h=m("Pagination"),y=m("EditDRLModal"),C=m("DeleteDRLModal"),l=m("loader");return d(),r("div",lt,[e("span",at,x(s.filteredList.length)+" items",1),s.filteredList.length>0?(d(),r("div",it,[e("table",nt,[e("thead",null,[e("tr",null,[e("th",{class:"pl-15",onClick:t[0]||(t[0]=n=>a.setSortBy("recommendation_title"))},[u(" Title "),e("span",{class:V(["sort-key",a.getSortKey("recommendation_title")])},null,2)]),e("th",{onClick:t[1]||(t[1]=n=>a.setSortBy("date_created"))},[u(" Added Date "),e("span",{class:V(["sort-key",a.getSortKey("date_created")])},null,2)]),e("th",{onClick:t[2]||(t[2]=n=>a.setSortBy("date_modified"))},[u(" Last modified "),e("span",{class:V(["sort-key",a.getSortKey("date_modified")])},null,2)])])]),e("tbody",null,[(d(!0),r(q,null,O(s.filteredList,n=>(d(),r("tr",{key:n.id},[e("td",dt,x(n.recommendation_title),1),e("td",ct,x(a.getDateFormat(n.date_created)),1),e("td",rt,[e("div",mt,[u(x(a.getDateFormat(n.date_modified)||" ")+" ",1),e("div",ut,[gt,e("div",ht,[e("div",{class:"project-menu-action-container p-15",onClick:c=>a.openEditPopup(n)},ft,8,_t),e("div",{class:"project-menu-action-container p-15",onClick:c=>a.deleteDRL(n)},vt,8,Ct)])])])])]))),128))])]),s.total?(d(),M(h,{key:0,totalPages:s.totalPages,maxVisibleButtons:s.maxVisiblePages,total:s.total,perPage:s.perPage,currentPage:s.currentPage,onPagechanged:a.pagechanged},null,8,["totalPages","maxVisibleButtons","total","perPage","currentPage","onPagechanged"])):_("",!0)])):_("",!0),s.filteredList.length===0?(d(),r("div",wt,Dt)):_("",!0),i(y,{editDetails:s.editDetails},null,8,["editDetails"]),i(C,{rec:s.selectedItem,onDelete:t[3]||(t[3]=n=>a.deleteRecommendation(s.selectedItem.id))},null,8,["rec"]),i(l,{loadingStatus:s.loaderStatus},null,8,["loadingStatus"])])}const Nt=D(ot,[["render",At],["__scopeId","data-v-f4b2da3c"]]),Ut={components:{Loader:B,Multiselect:E,BaseButton:U},data(){return{categoryName:"",categoryActionSelect:["Add","Update","Delete"],actionSelected:"",allCategoryList:[],loaderStatus:!1,selectedUpdateCategory:null,selectedDeleteCategory:null,UpdateCategoryNew:""}},async created(){await this.getAllCategoryData()},computed:{canSave(){return this.actionSelected==="Add"&&this.categoryName!==""||this.actionSelected==="Update"&&this.UpdateCategoryNew&&this.selectedUpdateCategory||this.actionSelected==="Delete"&&this.selectedDeleteCategory}},methods:{async getCategoryData(){this.loaderStatus=!0,this.categoryName="",this.selectedUpdateCategory=null,this.UpdateCategoryNew="",this.selectedDeleteCategory=null,await this.getAllCategoryData(),this.loaderStatus=!1},async getAllCategoryData(){const o=await F();this.allCategoryList=o.filter(t=>t.active===!0)},cancelPermissions(){this.categoryName="",this.selectedUpdateCategory=null,this.UpdateCategoryNew="",this.selectedDeleteCategory=null,this.actionSelected="",p("#drl-cat").modal("hide")},async addCategory(){if(this.loaderStatus=!0,this.actionSelected==="Add"){const o={category_name:this.categoryName},t=await oe(o);t?t.data==="Category name already exist"?(this.$notify({type:"warning",title:"Warning",text:t.data}),this.categoryName=""):(this.$notify({type:"success",title:"Success",text:t.data}),this.categoryName="",this.actionSelected="",p("#drl-cat").modal("hide"),this.emitter.emit("getAllCategories")):t===void 0?this.$notify({type:"error",title:"Error",text:"Category name should not be null"}):this.$notify({type:"error",title:"Error",text:t.data})}else if(this.actionSelected==="Update"){const o={category_name:this.UpdateCategoryNew,category_id:this.selectedUpdateCategory},t=await le(o);t?t.data==="Category name already Exist"?(this.$notify({type:"warning",title:"Warning",text:t.data}),this.UpdateCategoryNew=""):(this.$notify({type:"success",title:"Success",text:t.data}),this.selectedUpdateCategory=null,this.UpdateCategoryNew="",this.actionSelected="",p("#drl-cat").modal("hide"),this.emitter.emit("getAllCategories")):t===void 0?this.$notify({type:"error",title:"error",text:"Category name should not be null"}):this.$notify({type:"error",title:"Error",text:t.data})}else if(this.actionSelected==="Delete"){const o=this.selectedDeleteCategory,t=await ae(o);t?(this.$notify({type:"success",title:"Success",text:t.data}),this.selectedDeleteCategory=null,this.actionSelected="",p("#drl-cat").modal("hide"),this.emitter.emit("getAllCategories")):t===void 0?this.$notify({type:"error",title:"error",text:"Category name should not be null"}):this.$notify({type:"error",title:"Error",text:t.data}),this.emitter.emit("getAllSubCategories")}this.loaderStatus=!1}}},R=o=>(k("data-v-dcb04049"),o=o(),L(),o),kt={id:"drl-cat",class:"modal fade",role:"dialog"},Lt={class:"modal-dialog"},$t={class:"modal-content first-modal-content"},Rt={class:"modal-header modal-bgcolor"},Bt=R(()=>e("div",{class:"text-h5 blue-1"},"Category",-1)),Vt=R(()=>e("hr",null,null,-1)),Pt={class:"modal-body"},It={class:"col-xs-12 col-sm-12 add-role mb-10"},Et=R(()=>e("p",{class:"search-label sub-heading"},[u(" Actions "),e("span",{style:{color:"red"}},"*")],-1)),Ft=["value"],Mt={class:"pl-5"},Tt={key:0,class:"col-xs-12 col-sm-12 add-role"},qt={class:"row mr-bt-5p"},Ot=R(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[u(" Category Name "),e("span",{style:{color:"red"}},"*")],-1)),jt={class:"col-xs-12 col-sm-6"},Wt={key:1,class:"col-xs-12 col-sm-12 add-role"},Kt={class:"row mr-bt-5p"},Gt=R(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[u(" Category Name "),e("span",{style:{color:"red"}},"*")],-1)),Ht={class:"col-xs-12 col-sm-6"},Yt={key:2,class:"col-xs-12 col-sm-12 add-role"},zt={class:"row mr-bt-5p"},Zt=R(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[u(" Category Name "),e("span",{style:{color:"red"}},"*")],-1)),Jt={class:"col-xs-12 col-sm-6"},Qt={key:0,class:"col-sm-12 col-xs-12 col-md-12 footer remove_button_padding"},Xt={class:"d-flex justify-content-end col-gap-15"};function es(o,t,g,A,s,a){const h=m("multiselect"),y=m("BaseButton"),C=m("loader");return d(),r("div",kt,[e("div",Lt,[e("div",$t,[e("div",Rt,[e("button",{type:"button",class:"close",onClick:t[0]||(t[0]=(...l)=>a.cancelPermissions&&a.cancelPermissions(...l))}," × "),Bt,Vt]),e("div",Pt,[e("div",It,[Et,(d(!0),r(q,null,O(s.categoryActionSelect,(l,n)=>(d(),r("div",{class:"col-xs-12 col-md-4",key:n},[w(e("input",{type:"radio",name:"optradio",value:l,"onUpdate:modelValue":t[1]||(t[1]=c=>s.actionSelected=c),onClick:t[2]||(t[2]=(...c)=>a.getCategoryData&&a.getCategoryData(...c))},null,8,Ft),[[G,s.actionSelected]]),e("label",Mt,x(l),1)]))),128))]),s.actionSelected==="Add"?(d(),r("div",Tt,[e("div",qt,[Ot,e("div",jt,[w(e("input",{type:"text",placeholder:"Add New Category",class:"form-control",maxlength:"56","onUpdate:modelValue":t[3]||(t[3]=l=>s.categoryName=l)},null,512),[[N,s.categoryName]])])])])):_("",!0),s.actionSelected==="Update"?(d(),r("div",Wt,[e("div",Kt,[Gt,e("div",Ht,[i(h,{showLabels:!1,"close-on-select":!0,"allow-empty":!1,class:"multiselect-single-dropdown",searchable:!0,options:s.allCategoryList.map(l=>l.id),"custom-label":l=>s.allCategoryList.find(n=>n.id==l).category_name,modelValue:s.selectedUpdateCategory,"onUpdate:modelValue":t[4]||(t[4]=l=>s.selectedUpdateCategory=l),"open-direction":"bottom",placeholder:"Select Category"},null,8,["options","custom-label","modelValue"]),s.selectedUpdateCategory?w((d(),r("input",{key:0,type:"text",placeholder:"Update Category",class:"form-control mt-10",maxlength:"56","onUpdate:modelValue":t[5]||(t[5]=l=>s.UpdateCategoryNew=l)},null,512)),[[N,s.UpdateCategoryNew]]):_("",!0)])])])):_("",!0),s.actionSelected==="Delete"?(d(),r("div",Yt,[e("div",zt,[Zt,e("div",Jt,[i(h,{showLabels:!1,"close-on-select":!0,"allow-empty":!1,class:"multiselect-single-dropdown",searchable:!0,options:s.allCategoryList.map(l=>l.id),"custom-label":l=>s.allCategoryList.find(n=>n.id==l).category_name,modelValue:s.selectedDeleteCategory,"onUpdate:modelValue":t[6]||(t[6]=l=>s.selectedDeleteCategory=l),"open-direction":"bottom",placeholder:"Select Category",value:"Select Category"},null,8,["options","custom-label","modelValue"])])])])):_("",!0)]),s.actionSelected==="Add"||s.actionSelected==="Update"||s.actionSelected==="Delete"?(d(),r("div",Qt,[e("div",Xt,[i(y,{variant:"secondary",onClick:a.cancelPermissions},{default:f(()=>[u(" Cancel ")]),_:1},8,["onClick"]),i(y,{onClick:a.addCategory,disabled:!a.canSave},{default:f(()=>[u("Save")]),_:1},8,["onClick","disabled"])])])):_("",!0)]),i(C,{loadingStatus:s.loaderStatus},null,8,["loadingStatus"])])])}const ts=D(Ut,[["render",es],["__scopeId","data-v-dcb04049"]]),ss={components:{Loader:B,Multiselect:E,BaseButton:U},data(){return{categoryName:"",categoryActionSelect:["Add","Update","Delete"],serviceSelected:{},actionSelected:"",allCategoryList:[],loaderStatus:!1,selectedAddCategory:null,selectedUpdateCategory:null,selectedDeleteCategory:null,selectedDeleteSubCategory:null,getSelectedSubCategory:null,UpdateNewCategoryNew:null,updateSubcategory:null,getSubCategoryById:null}},async created(){this.emitter.on("getAllCategories",async()=>{this.getAllCategoryData()}),await this.getAllCategoryData()},methods:{clearAllFields(){this.loaderStatus=!0,this.selectedAddCategory=null,this.categoryName="",this.selectedUpdateCategory=null,this.UpdateNewCategoryNew=null,this.updateSubcategory="",this.selectedDeleteCategory=null,this.selectedDeleteSubCategory=null,this.loaderStatus=!1},async getAllCategoryData(){this.loaderStatus=!0;const o=await F();this.allCategoryList=o.filter(t=>t.active===!0),this.loaderStatus=!1},async getSubCategoriesById(o){this.loaderStatus=!0,this.getSubCategoryById=await Y(o),this.getSubCategoryById=this.getSubCategoryById.filter(t=>t.active===!0),this.loaderStatus=!1},async getSubCategoriesList(){this.loaderStatus=!0;const o=await j();this.getSelectedSubCategory=o.filter(t=>t.id===this.selectedDeleteCategory),this.loaderStatus=!1},async addCategory(){if(this.loaderStatus=!0,this.actionSelected==="Add"){const o={category_id:this.selectedAddCategory,sub_category_name:this.categoryName},t=await ie(o);t?t.data==="Subcategory name already exist"?(this.$notify({type:"warning",title:"Warning",text:t.data}),this.categoryName=""):(this.$notify({type:"success",title:"Success",text:t.data}),this.selectedAddCategory=null,this.categoryName="",this.actionSelected="",p("#drl-subcat").modal("hide"),this.emitter.emit("getAllSubCategories")):t===void 0?this.$notify({type:"error",title:"Error",text:"Category/Sub Category name should not be null"}):this.$notify({type:"error",title:"Error",text:t.data})}else if(this.actionSelected==="Update"){const o={sub_category_name:this.updateSubcategory,id:this.UpdateNewCategoryNew},t=await ne(o);t?t.data==="Sub Category name already exist"?(this.$notify({type:"warning",title:"Warning",text:t.data}),this.categoryName=""):(this.$notify({type:"success",title:"Success",text:t.data}),this.selectedUpdateCategory=null,this.UpdateNewCategoryNew=null,this.updateSubcategory="",this.actionSelected="",p("#drl-subcat").modal("hide"),this.emitter.emit("getAllSubCategories")):t===void 0?this.$notify({type:"error",title:"Error",text:"Category/Sub Category name should not be null"}):this.$notify({type:"error",title:"Error",text:t.data})}else if(this.actionSelected==="Delete"){const o=this.selectedDeleteSubCategory,t=await de(o);t?(this.$notify({type:"success",title:"Success",text:t.data}),this.selectedDeleteCategory=null,this.selectedDeleteSubCategory=null,this.actionSelected="",p("#drl-subcat").modal("hide"),this.emitter.emit("getAllSubCategories")):t===void 0?this.$notify({type:"error",title:"Error",text:"Category/Sub Category name should not be null"}):this.$notify({type:"error",title:"Error",text:t.data})}this.loaderStatus=!1},cancelPermissions(){this.actionSelected="",this.clearAllFields(),p("#drl-subcat").modal("hide")}}},v=o=>(k("data-v-4fc378fc"),o=o(),L(),o),os={id:"drl-subcat",class:"modal fade",role:"dialog"},ls={class:"modal-dialog"},as={class:"modal-content first-modal-content"},is={class:"modal-header modal-bgcolor"},ns=v(()=>e("div",{class:"text-h5 blue-1"},"Subcategory",-1)),ds=v(()=>e("hr",null,null,-1)),cs={class:"modal-body"},rs={class:"col-xs-12 col-sm-12 add-role mb-10"},ms=v(()=>e("p",{class:"search-label sub-heading"},[u(" Actions "),e("span",{class:"text-required"}," *")],-1)),us=["value"],gs={class:"pl-5"},hs={key:0,class:"col-xs-12 col-sm-12 add-role"},_s={class:"row mr-bt-5p"},ps=v(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[u(" Category Name "),e("span",{class:"text-required"}," *")],-1)),ys={class:"col-xs-12 col-sm-6"},fs={key:0,class:"col-sm-12 col-xs-12 col-md-12 mb-5"},Cs=v(()=>e("span",{class:"text-required"}," *",-1)),bs={class:"col-xs-12 col-sm-6"},Ss={key:1,class:"col-xs-12 col-sm-12 add-role"},vs={class:"row mr-bt-5p"},ws=v(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[u(" Category Name "),e("span",{class:"text-required"}," *")],-1)),xs={class:"col-xs-12 col-sm-6"},Ds={key:0,class:"col-sm-12 col-xs-12 col-md-12 mb-5"},As=v(()=>e("span",{class:"text-required"}," *",-1)),Ns={class:"col-xs-12 col-sm-6"},Us={key:2,class:"col-xs-12 col-sm-12 add-role"},ks={class:"row mr-bt-5p"},Ls=v(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[u(" Category Name "),e("span",{class:"text-required"}," *")],-1)),$s={class:"col-xs-12 col-sm-6"},Rs={key:0,class:"col-sm-12 col-xs-12 col-md-12 mb-5"},Bs=v(()=>e("span",{class:"text-required"}," *",-1)),Vs={class:"col-xs-12 col-sm-6"},Ps={key:0,class:"col-sm-12 col-xs-12 col-md-12 footer remove_button_padding"},Is={class:"d-flex justify-content-end col-gap-15"};function Es(o,t,g,A,s,a){const h=m("multiselect"),y=m("BaseButton"),C=m("loader");return d(),r("div",os,[e("div",ls,[e("div",as,[e("div",is,[e("button",{type:"button",class:"close",onClick:t[0]||(t[0]=(...l)=>a.cancelPermissions&&a.cancelPermissions(...l))}," × "),ns,ds]),e("div",cs,[e("div",rs,[ms,(d(!0),r(q,null,O(s.categoryActionSelect,(l,n)=>(d(),r("div",{class:"col-xs-12 col-md-4",key:n},[w(e("input",{type:"radio",name:"optradio",value:l,"onUpdate:modelValue":t[1]||(t[1]=c=>s.actionSelected=c),onClick:t[2]||(t[2]=(...c)=>a.clearAllFields&&a.clearAllFields(...c))},null,8,us),[[G,s.actionSelected]]),e("label",gs,x(l),1)]))),128))]),s.actionSelected==="Add"?(d(),r("div",hs,[e("div",_s,[ps,e("div",ys,[i(h,{showLabels:!1,"close-on-select":!0,"allow-empty":!1,class:"multiselect-single-dropdown",searchable:!0,options:s.allCategoryList.map(l=>l.id),"custom-label":l=>s.allCategoryList.find(n=>n.id==l).category_name,modelValue:s.selectedAddCategory,"onUpdate:modelValue":t[3]||(t[3]=l=>s.selectedAddCategory=l),"open-direction":"bottom",placeholder:"Select Category"},null,8,["options","custom-label","modelValue"])]),s.selectedAddCategory?(d(),r("div",fs,[u(" Sub Category Name "),Cs])):_("",!0),e("div",bs,[s.selectedAddCategory?w((d(),r("input",{key:0,type:"text",placeholder:"Add New Sub Category",class:"form-control",maxlength:"56","onUpdate:modelValue":t[4]||(t[4]=l=>s.categoryName=l)},null,512)),[[N,s.categoryName]]):_("",!0)])])])):_("",!0),s.actionSelected==="Update"?(d(),r("div",Ss,[e("div",vs,[ws,e("div",xs,[i(h,{showLabels:!1,"close-on-select":!0,"allow-empty":!1,class:"multiselect-single-dropdown",searchable:!0,options:s.allCategoryList.map(l=>l.id),"custom-label":l=>s.allCategoryList.find(n=>n.id==l).category_name,modelValue:s.selectedUpdateCategory,"onUpdate:modelValue":t[5]||(t[5]=l=>s.selectedUpdateCategory=l),placeholder:"Select Category","open-direction":"bottom",onSelect:a.getSubCategoriesById},null,8,["options","custom-label","modelValue","onSelect"])]),s.selectedUpdateCategory?(d(),r("div",Ds,[u(" Sub Category Name "),As])):_("",!0),e("div",Ns,[s.selectedUpdateCategory?(d(),M(h,{key:0,showLabels:!1,"close-on-select":!0,"allow-empty":!1,class:"multiselect-single-dropdown",searchable:!0,options:s.getSubCategoryById.map(l=>l.id),"custom-label":l=>s.getSubCategoryById.find(n=>n.id==l).sub_category_name,modelValue:s.UpdateNewCategoryNew,"onUpdate:modelValue":t[6]||(t[6]=l=>s.UpdateNewCategoryNew=l),"open-direction":"bottom",placeholder:"Select Sub Category"},null,8,["options","custom-label","modelValue"])):_("",!0),s.UpdateNewCategoryNew?w((d(),r("input",{key:1,type:"text",placeholder:"Update Sub Category",maxlength:"56",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=l=>s.updateSubcategory=l)},null,512)),[[N,s.updateSubcategory]]):_("",!0)])])])):_("",!0),s.actionSelected==="Delete"?(d(),r("div",Us,[e("div",ks,[Ls,e("div",$s,[i(h,{showLabels:!1,"close-on-select":!0,"allow-empty":!1,class:"multiselect-single-dropdown",searchable:!0,options:s.allCategoryList.map(l=>l.id),"custom-label":l=>s.allCategoryList.find(n=>n.id==l).category_name,modelValue:s.selectedDeleteCategory,"onUpdate:modelValue":t[8]||(t[8]=l=>s.selectedDeleteCategory=l),"open-direction":"bottom",placeholder:"Select Category",onSelect:a.getSubCategoriesById},null,8,["options","custom-label","modelValue","onSelect"])]),s.selectedDeleteCategory?(d(),r("div",Rs,[u(" Sub Category Name "),Bs])):_("",!0),e("div",Vs,[s.selectedDeleteCategory?(d(),M(h,{key:0,showLabels:!1,"close-on-select":!0,"allow-empty":!1,class:"multiselect-single-dropdown",searchable:!0,options:s.getSubCategoryById.map(l=>l.id),"custom-label":l=>s.getSubCategoryById.find(n=>n.id==l).sub_category_name,modelValue:s.selectedDeleteSubCategory,"onUpdate:modelValue":t[9]||(t[9]=l=>s.selectedDeleteSubCategory=l),"open-direction":"bottom",placeholder:"Select Sub Category"},null,8,["options","custom-label","modelValue"])):_("",!0)])])])):_("",!0)]),s.actionSelected==="Add"||s.actionSelected==="Update"||s.actionSelected==="Delete"?(d(),r("div",Ps,[e("div",Is,[i(y,{variant:"secondary",onClick:a.cancelPermissions},{default:f(()=>[u(" Cancel ")]),_:1},8,["onClick"]),i(y,{onClick:a.addCategory},{default:f(()=>[u("Save")]),_:1},8,["onClick"])])])):_("",!0)]),i(C,{loadingStatus:s.loaderStatus},null,8,["loadingStatus"])])])}const Fs=D(ss,[["render",Es],["__scopeId","data-v-4fc378fc"]]),Ms={components:{Multiselect:E,Loader:B,BaseButton:U,OpusEditor:z,OpusImageSelect:H},props:{allCategoryList:{type:Array,default:()=>[]},getAvailableTags:{type:Array,default:()=>[]}},data(){return{categoriesList:[],countriesList:[],tagsList:[],loaderStatus:!1,selectedAddCategory:null,categoryName:null,getSubCategoryById:null,UpdateNewCategoryNew:[],getAllSubCategories:[],subCategoriesPayload:[],formDetails:{active:!0,id:0,subcategory_ids:[],recommendation_content:"",recommendation_title:"",recommendation_image_path:""},uploadedFileDetails:null,fileName:"",fileTypeError:"",formDetailsCopy:null,isFileUploaded:!1,previewCode:null,selectedFile:null,maxlength:{title:256,content:1e4}}},async created(){this.emitter.on("getAllSubCategories",async()=>{await this.getSubCategories()}),await this.getSubCategories()},computed:{canUpload(){return this.formDetails.recommendation_title&&this.formDetails.recommendation_title.length<=this.maxlength.title&&this.formDetails.recommendation_content&&this.formDetails.recommendation_content.length<=this.maxlength.content&&this.selectedFile!==null&&this.UpdateNewCategoryNew.length>0}},methods:{uploadFile:I,getSubCategoryNames(o){const t=this.getAllSubCategories.find(g=>g.id===o);return t?t.sub_category_name:""},async getSubCategories(){this.getAllSubCategories=await j(),this.getAllSubCategories=this.getAllSubCategories.filter(o=>o.active===!0)},closeAddNewContentPopUp(){this.setDefaultValues(),p("#add-new-rec").modal("hide")},setDefaultValues(){this.UpdateNewCategoryNew=[],this.tagsList=[],this.formDetails={active:!0,id:0,subcategory_ids:[],recommendation_content:"",recommendation_title:"",recommendation_image_path:""},this.$refs["add-rec-image"].reset(),this.selectedFile=null},async saveRecommendation(){this.loaderStatus=!0,this.formDetails.subcategory_ids=this.UpdateNewCategoryNew;const o=await I(this.selectedFile,{container_name:"tools",file_name:`${this.selectedFile.name}`,folder_name:"DRL",permissions:"write",storage_name:"opus-storage-java"});this.formDetails.recommendation_image_path=o;const t=P(this.formDetails),g=await ce(t);g?g.data==="Recommendation title already exist"?(this.$notify({type:"warning",title:"Warning",text:g.data}),this.categoryName=""):(this.$notify({type:"success",title:"Success",text:g.data}),this.setDefaultValues(),p("#add-new-rec").modal("hide")):g===void 0?this.$notify({type:"error",title:"Error",text:"Please enter all fields"}):this.$notify({type:"error",title:"Error",text:g.data}),this.emitter.emit("getRecommendations"),this.loaderStatus=!1},setSelectedFile(o){this.selectedFile=o}}},S=o=>(k("data-v-9bb822d0"),o=o(),L(),o),Ts={id:"add-new-rec",class:"modal fade",role:"dialog"},qs={class:"modal-dialog modal-lg"},Os={class:"modal-content p-10"},js={class:"modal-header"},Ws={class:"col-xs-12 p-0 flex-between"},Ks=S(()=>e("div",{class:"top-header"},"Add Recommendation",-1)),Gs=S(()=>e("hr",{class:"mr-15 ml-15 my-0"},null,-1)),Hs={class:"modal-body"},Ys={class:"row mb-20"},zs={class:"col-xs-12 mb-10"},Zs=S(()=>e("label",null,"Title",-1)),Js=S(()=>e("span",{class:"text-required"}," *",-1)),Qs={class:"form-group"},Xs=["maxlength"],eo={class:"col-xs-12 mb-10"},to=S(()=>e("label",null,"Recommendation Content",-1)),so=S(()=>e("span",{class:"text-required"}," *",-1)),oo={class:"col-xs-12 p-0"},lo={class:"col-xs-12 mb-20"},ao=S(()=>e("label",null,"Image",-1)),io=S(()=>e("span",{class:"text-required"}," *",-1)),no={class:"form-group"},co={class:"col-xs-12"},ro=S(()=>e("label",null,"Sub Category Name",-1)),mo=S(()=>e("span",{class:"text-required"}," *",-1)),uo=S(()=>e("hr",null,null,-1)),go={class:"d-flex justify-content-end col-gap-10"};function ho(o,t,g,A,s,a){const h=m("OpusEditor"),y=m("OpusImageSelect"),C=m("multiselect"),l=m("BaseButton"),n=m("loader");return d(),r("div",Ts,[e("div",qs,[e("div",Os,[e("div",js,[e("div",Ws,[Ks,e("div",null,[e("img",{src:T,alt:"",class:"cursor-pointer",onClick:t[0]||(t[0]=(...c)=>a.closeAddNewContentPopUp&&a.closeAddNewContentPopUp(...c))})])])]),Gs,e("div",Hs,[e("div",Ys,[e("div",zs,[Zs,Js,e("div",Qs,[w(e("input",{"onUpdate:modelValue":t[1]||(t[1]=c=>s.formDetails.recommendation_title=c),type:"text",class:"form-control common-input",maxlength:s.maxlength.title,placeholder:"Add recommendation title"},null,8,Xs),[[N,s.formDetails.recommendation_title]])])]),e("div",eo,[to,so,e("div",oo,[i(h,{id:"add-rec-content",modelValue:s.formDetails.recommendation_content,"onUpdate:modelValue":t[2]||(t[2]=c=>s.formDetails.recommendation_content=c),modelModifiers:{trim:!0},placeholder:"Add Recommendation content",maxlength:s.maxlength.content,required:""},null,8,["modelValue","maxlength"])])]),e("div",lo,[ao,io,e("div",no,[i(y,{id:"add-rec-image",ref:"add-rec-image",onSelect:a.setSelectedFile,btnText:"Upload image",file:{name:null}},null,8,["onSelect"])])]),e("div",co,[ro,mo,i(C,{showLabels:!1,"close-on-select":!0,"allow-empty":!0,class:V([[s.UpdateNewCategoryNew.length?"has-values":"no-values"],"multiselect-single-dropdown multiple"]),searchable:!0,multiple:!0,options:s.getAllSubCategories.map(c=>c.id),"custom-label":a.getSubCategoryNames,modelValue:s.UpdateNewCategoryNew,"onUpdate:modelValue":t[3]||(t[3]=c=>s.UpdateNewCategoryNew=c),"open-direction":"top",placeholder:"Select Sub Category"},null,8,["class","options","custom-label","modelValue"])])]),uo,e("div",go,[i(l,{variant:"secondary",onClick:a.closeAddNewContentPopUp},{default:f(()=>[u("Cancel")]),_:1},8,["onClick"]),i(l,{disabled:!a.canUpload,onClick:a.saveRecommendation},{default:f(()=>[u("Save")]),_:1},8,["disabled","onClick"])])])])]),i(n,{loadingStatus:s.loaderStatus},null,8,["loadingStatus"])])}const _o=D(Ms,[["render",ho],["__scopeId","data-v-9bb822d0"]]),po={name:"AdminDRLHome",components:{DRLGrid:Nt,DRLCategoryModal:ts,DRLSubCategoryModal:Fs,AddDRLModal:_o,BaseButton:U},data(){return{allCategoryList:[],getAvailableTags:[]}},async created(){this.emitter.on("getAllSubCategories",async()=>{await this.getAllCategoriesData()}),await this.getAllCategoriesData()},methods:{async getAllCategoriesData(){const o=await F();this.allCategoryList=o.filter(t=>t.active===!0)},addCategory(){this.type="new_role",this.header="Category",p("#drl-cat").modal({backdrop:"static",keyboard:!1})},addSubCategory(){this.type="new_role",this.header="Sub Category",p("#drl-subcat").modal({backdrop:"static",keyboard:!1})},addRecommendation(){p("#add-new-rec").modal({backdrop:"static",keyboard:!1})},navigateToLaunchPad(){this.$router.push("/launchpad")}}},yo={class:"content-wrappper"},fo={class:"row m-0"},Co={class:"mt-20 pr-20 pl-20"},bo={class:"col-xs-12 mb-10 d-flex align-items-center col-gap-10 mb-20 p-0"},So=e("div",{class:"text-h3"},"Design Recommendation Library",-1),vo={class:"d-flex justify-content-end col-gap-15 row-gap-10 flex-wrap"},wo=e("img",{src:W,alt:"Add Category",class:"preview-svg"},null,-1),xo=e("span",null,"Categories",-1),Do=e("img",{src:W,alt:"Add Subcategory",class:"preview-svg"},null,-1),Ao=e("span",null,"Sub categories",-1),No=e("img",{src:W,alt:"Add Recommendation",class:"preview-svg"},null,-1),Uo=e("span",null,"Add recommendation",-1);function ko(o,t,g,A,s,a){const h=m("router-link"),y=m("BaseButton"),C=m("DRLGrid"),l=m("DRLCategoryModal"),n=m("DRLSubCategoryModal"),c=m("AddDRLModal");return d(),r("div",null,[e("div",yo,[e("div",fo,[e("div",Co,[e("div",bo,[e("img",{onClick:t[0]||(t[0]=(...Z)=>a.navigateToLaunchPad&&a.navigateToLaunchPad(...Z)),class:"back-img cursor-pointer",src:ge,alt:""}),i(h,{class:"text-subtitle-2 blue-1",to:"/launchpad"},{default:f(()=>[u("Launchpad")]),_:1})]),So,e("div",vo,[i(y,{variant:"secondary","has-icon":"",onClick:a.addCategory},{default:f(()=>[wo,xo]),_:1},8,["onClick"]),i(y,{variant:"secondary","has-icon":"",onClick:a.addSubCategory},{default:f(()=>[Do,Ao]),_:1},8,["onClick"]),i(y,{variant:"secondary","has-icon":"",onClick:a.addRecommendation},{default:f(()=>[No,Uo]),_:1},8,["onClick"])])]),i(C)]),i(l),i(n),i(c,{allCategoryList:s.allCategoryList,getAvailableTags:s.getAvailableTags},null,8,["allCategoryList","getAvailableTags"])])])}const Ko=D(po,[["render",ko]]);export{Ko as default};
