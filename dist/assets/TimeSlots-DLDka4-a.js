import{_ as C,o as r,c as n,a as e,b as i,r as m,p as y,f as L,s as I,d as o,$ as T,w as F,n as p,e as b,F as w,m as Y,k as M,t as h}from"./index-BlMJxPGQ.js";import{i as B}from"./index.es-Cl9EeDOg.js";import{O as E}from"./OpusBreadCrumb-DtnZkk2b.js";import{L as D}from"./Loader-DR0R9oEF.js";import{e as V,f as A,h as N,i as H}from"./instructorLedTraining-DE_vpi5U.js";const U={props:["selectedSlotId"],data(){return{loaderStatus:!1}},components:{Loader:D},methods:{async deleteSelectedSlot(){this.loaderStatus=!0;const t=await V(this.selectedSlotId);this.loaderStatus=!1,t.status_code===200?(this.$notify({type:"success",title:"Success",text:`${t.data}`}),this.$emit("closeDeleteSlot")):this.$notify({type:"error",title:"Error",text:"Delete Failed!"})}}},f=t=>(y("data-v-1632b98d"),t=t(),L(),t),O={class:"col-xs-12 p-0"},P={id:"delete-slot-modal",class:"modal",role:"dialog"},W={class:"modal-dialog modal-md request-modal"},Z={class:"modal-content col-xs-12 p-20"},j=f(()=>e("div",{class:"modal-header"},[e("div",{class:"col-xs-12 p-0 text-center header"},"Delete Slot")],-1)),q=f(()=>e("div",{class:"modal-body text-center col-xs-12 text-start"}," Are You sure you want to delete the slot? ",-1)),z={class:"footer flex-wrapper col-xs-12"},G=f(()=>e("button",{type:"button",class:"btn emergo-white-button cancel-btn footer-btn","data-dismiss":"modal"}," Cancel ",-1));function J(t,a,g,v,s,d){const c=m("loader");return r(),n("div",O,[e("div",P,[e("div",W,[e("div",Z,[j,q,e("div",z,[G,e("button",{class:"btn emergo-red-button br-20 ml-20 footer-btn",onClick:a[0]||(a[0]=(...u)=>d.deleteSelectedSlot&&d.deleteSelectedSlot(...u))}," Delete ")]),i(c,{loadingStatus:s.loaderStatus},null,8,["loadingStatus"])])])])])}const K=C(U,[["render",J],["__scopeId","data-v-1632b98d"]]),Q={data(){return{loaderStatus:!1,selectedCounrseId:null,courseListWithIds:{},startTime:"",endTime:"",timeSlotsList:[],iltCoursesList:[],UTCFormat:"YYYY-MM-DD HH:mm",dateCheckFormat:"YYYY-MM-DD",timeCheckFormat:"YYYY-MM-DD HH:mm",defaultEndTime:"",defaultStartTime:"",selectedSlotId:null}},components:{Multiselect:I,DatePicker:B,Loader:D,ConfirmSlotDeleteModal:K,OpusBreadCrumb:E},async created(){this.loaderStatus=!0,await this.getCoursesList(),this.loaderStatus=!1},computed:{disableEndDate(){return!this.startTime}},methods:{navigateToLaunchPad(){this.$router.push("/launchpad")},formatDateToLocalStandard(t){return t&&o.utc(`${t}`).local().format("YY-MM-DD hh:mm A")},async getCoursesList(){this.iltCoursesList=await A(),this.courseListWithIds=this.iltCoursesList.reduce((t,a)=>(t[a.course_id]=a.title,t),{})},async getSlotsList(t){this.loaderStatus=!0,this.timeSlotsList=await N(t),this.loaderStatus=!1},notBeforeStartDate(t){return o(t).format(this.dateCheckFormat)<o(this.startTime).format(this.dateCheckFormat)},notBeforeStartTime(t){return o(t).format(this.timeCheckFormat)<=o(this.startTime).format(this.timeCheckFormat)},notBeforeTimeAfterEndTime(t){return this.endTime?o(t).format(this.timeCheckFormat)<=o().format(this.timeCheckFormat)||o(t).format(this.timeCheckFormat)>=o(this.endTime).format(this.timeCheckFormat):o(t).format(this.timeCheckFormat)<=o().format(this.timeCheckFormat)},notBeforeTodayAfterEndDate(t){return this.endTime?o(t).format(this.dateCheckFormat)<o().format(this.dateCheckFormat)||o(t).format(this.dateCheckFormat)>o(this.endTime).format(this.dateCheckFormat):o(t).format(this.dateCheckFormat)<o().format(this.dateCheckFormat)},selectedStartDate(){this.startTime?this.defaultEndTime=o(o(this.startTime).format(this.UTCFormat)).valueOf()+1e3*61:this.startTime||(this.endTime="",this.defaultStartTime=this.createDefaultStartTime())},createDefaultStartTime(){return o(o().format(this.UTCFormat)).valueOf()+1e3*60},async addNewTimeSlot(){this.loaderStatus=!0;const t={course_id:this.selectedCounrseId,start_time:o(o(this.startTime).toLocaleString()).utc().format("YYYY-MM-DDTHH:mm:ss.SSS[Z]"),end_time:o(o(this.endTime).toLocaleString()).utc().format("YYYY-MM-DDTHH:mm:ss.SSS[Z]")},a=await H(t);this.loaderStatus=!1,a.status_code===200?(this.startTime="",this.endTime="",this.$notify({type:"success",title:"Success",text:`${a.data}`}),this.getSlotsList(this.selectedCounrseId)):this.$notify({type:"error",title:"Error",text:`${a.message}`})},deleteSlot(t){this.selectedSlotId=t,T("#delete-slot-modal").modal({backdrop:"static",keyboard:!1})},closeDeleteSlotModal(){T("#delete-slot-modal").modal("hide"),this.getSlotsList(this.selectedCounrseId)}}},R={class:"content-wrappper"},X={class:"h-100"},$=e("div",{class:"ml-20 text-h3"},"Time Slots",-1),ee={class:"col-xs-12 mt-10 p-0 ml-10"},te={class:"col-xs-12 col-md-4"},se=e("label",null,"Training name",-1),oe={class:"col-xs-12 col-sm-5 col-md-3"},le=e("label",null,"Start Date And Time",-1),ae={class:"col-xs-12 col-sm-5 col-md-3"},de=e("label",null,"End Date And Time",-1),ie={class:"col-xs-12 col-sm-2 mt-25 xs-text-right"},re=["disabled"],ne=e("span",{class:"sm-hide"},"New Slot",-1),me={class:"col-xs-12 mt-20 table-wrapper"},ce={class:"table table-striped"},ue=e("thead",null,[e("tr",null,[e("th",null,"Training Name"),e("th",null,"Start Time"),e("th",null,"End Time"),e("th",null,"Action")])],-1),he=["onClick","disabled"],fe={key:0,class:"col-xs-12 mt-20 text-center no-data-text font-22 fw-700"},_e={key:1,class:"col-xs-12 text-center no-data-text font-22 fw-700"};function Se(t,a,g,v,s,d){const c=m("OpusBreadCrumb"),u=m("multiselect"),_=m("date-picker"),x=m("confirm-slot-delete-modal"),k=m("loader");return r(),n("div",R,[e("div",X,[i(c,{class:"mb-10",variant:"sm",onClick:d.navigateToLaunchPad},{default:F(()=>[b("Launchpad")]),_:1},8,["onClick"]),$,e("div",ee,[e("div",te,[se,i(u,{showLabels:!1,"close-on-select":!0,"allow-empty":!1,searchable:!1,class:"multiselect-single-dropdown",modelValue:s.selectedCounrseId,"onUpdate:modelValue":a[0]||(a[0]=l=>s.selectedCounrseId=l),placeholder:"Select course","show-labels":!1,options:s.iltCoursesList.map(l=>l.course_id),"custom-label":l=>s.iltCoursesList.find(S=>S.course_id===l).title,onSelect:d.getSlotsList},null,8,["modelValue","options","custom-label","onSelect"])]),e("div",oe,[le,i(_,{modelValue:s.startTime,"onUpdate:modelValue":a[1]||(a[1]=l=>s.startTime=l),type:"datetime",lang:"en","value-type":"format",format:s.UTCFormat,placeholder:"Select start Date And time","disabled-date":d.notBeforeTodayAfterEndDate,"disabled-time":d.notBeforeTimeAfterEndTime,"default-value":s.defaultStartTime,editable:!1,onChange:a[2]||(a[2]=l=>d.selectedStartDate())},null,8,["modelValue","format","disabled-date","disabled-time","default-value"])]),e("div",ae,[de,i(_,{modelValue:s.endTime,"onUpdate:modelValue":a[3]||(a[3]=l=>s.endTime=l),type:"datetime",editable:!1,lang:"en","value-type":"format",format:s.UTCFormat,disabled:d.disableEndDate,"disabled-date":d.notBeforeStartDate,"disabled-time":d.notBeforeStartTime,"default-value":s.defaultEndTime,placeholder:"Select End Date And Time"},null,8,["modelValue","format","disabled","disabled-date","disabled-time","default-value"])]),e("div",ie,[e("button",{onClick:a[4]||(a[4]=(...l)=>d.addNewTimeSlot&&d.addNewTimeSlot(...l)),class:p(["emergo-green-button text-nowrap",{"gray-cover":!s.startTime||!s.endTime||!s.selectedCounrseId}]),disabled:!s.startTime||!s.endTime||!s.selectedCounrseId},[b(" Add "),ne],10,re)])]),e("div",me,[e("table",ce,[ue,e("tbody",null,[(r(!0),n(w,null,Y(s.timeSlotsList,l=>(r(),n("tr",{key:l.slot_id},[e("td",null,h(s.courseListWithIds[s.selectedCounrseId]),1),e("td",null,h(d.formatDateToLocalStandard(l.slot_start_time)||l.slot_start_time),1),e("td",null,h(d.formatDateToLocalStandard(l.slot_end_time)||l.slot_end_time),1),e("td",null,[e("button",{onClick:S=>d.deleteSlot(l.slot_id),class:p(["danger-btn font-500",[l.deletable?"deletable":"not-deletable"]]),disabled:!l.deletable}," Delete ",10,he)])]))),128))])])]),s.selectedCounrseId?s.selectedCounrseId&&!s.timeSlotsList.length&&!s.loaderStatus?(r(),n("div",_e," No Slots available for selected training ")):M("",!0):(r(),n("div",fe," Please select a course to view the available slots "))]),i(x,{selectedSlotId:s.selectedSlotId,onCloseDeleteSlot:d.closeDeleteSlotModal},null,8,["selectedSlotId","onCloseDeleteSlot"]),i(k,{loadingStatus:s.loaderStatus},null,8,["loadingStatus"])])}const ge=C(Q,[["render",Se]]);export{ge as default};
