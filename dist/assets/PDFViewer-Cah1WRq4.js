import{z as B,ar as K,_ as S,r as y,aL as k,j as x,o as _,c as T,F as Q,m as ee,I as U,w as H,a as P,ai as te,aj as E,aM as ne,aN as re,b as N,aO as ie,p as oe,f as se}from"./index-BlMJxPGQ.js";import{d as ae,t as ce}from"./debounce-DQE7iwz8.js";const M=window.devicePixelRatio||1,W=.98;var ue=ae,le=K,de="Expected a function";function he(e,r,t){var c=!0,u=!0;if(typeof e!="function")throw new TypeError(de);return le(t)&&(c="leading"in t?!!t.leading:c,u="trailing"in t?!!t.trailing:u),ue(e,r,{leading:c,maxWait:r,trailing:u})}var ge=he;const fe=B(ge);function pe(e,r){const t=r.value;r.modifiers.immediate&&t();const c=fe(t,300);e.addEventListener("scroll",c,!0)}const me={inserted:pe};(function(){if(typeof window!="object")return;if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});return}var e=window.document;function r(n){this.time=n.time,this.target=n.target,this.rootBounds=n.rootBounds,this.boundingClientRect=n.boundingClientRect,this.intersectionRect=n.intersectionRect||g(),this.isIntersecting=!!n.intersectionRect;var i=this.boundingClientRect,s=i.width*i.height,l=this.intersectionRect,d=l.width*l.height;s?this.intersectionRatio=Number((d/s).toFixed(4)):this.intersectionRatio=this.isIntersecting?1:0}function t(n,i){var s=i||{};if(typeof n!="function")throw new Error("callback must be a function");if(s.root&&s.root.nodeType!=1)throw new Error("root must be an Element");this._checkForIntersections=u(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=n,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(s.rootMargin),this.thresholds=this._initThresholds(s.threshold),this.root=s.root||null,this.rootMargin=this._rootMarginValues.map(function(l){return l.value+l.unit}).join(" ")}t.prototype.THROTTLE_TIMEOUT=100,t.prototype.POLL_INTERVAL=null,t.prototype.USE_MUTATION_OBSERVER=!0,t.prototype.observe=function(n){var i=this._observationTargets.some(function(s){return s.element==n});if(!i){if(!(n&&n.nodeType==1))throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:n,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},t.prototype.unobserve=function(n){this._observationTargets=this._observationTargets.filter(function(i){return i.element!=n}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},t.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},t.prototype.takeRecords=function(){var n=this._queuedEntries.slice();return this._queuedEntries=[],n},t.prototype._initThresholds=function(n){var i=n||[0];return Array.isArray(i)||(i=[i]),i.sort().filter(function(s,l,d){if(typeof s!="number"||isNaN(s)||s<0||s>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return s!==d[l-1]})},t.prototype._parseRootMargin=function(n){var i=n||"0px",s=i.split(/\s+/).map(function(l){var d=/^(-?\d*\.?\d+)(px|%)$/.exec(l);if(!d)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(d[1]),unit:d[2]}});return s[1]=s[1]||s[0],s[2]=s[2]||s[0],s[3]=s[3]||s[1],s},t.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(h(window,"resize",this._checkForIntersections,!0),h(e,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in window&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},t.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,f(window,"resize",this._checkForIntersections,!0),f(e,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},t.prototype._checkForIntersections=function(){var n=this._rootIsInDom(),i=n?this._getRootRect():g();this._observationTargets.forEach(function(s){var l=s.element,d=b(l),p=this._rootContainsTarget(l),m=s.entry,C=n&&p&&this._computeTargetAndRootIntersection(l,i),w=s.entry=new r({time:c(),target:l,boundingClientRect:d,rootBounds:i,intersectionRect:C});m?n&&p?this._hasCrossedThreshold(m,w)&&this._queuedEntries.push(w):m&&m.isIntersecting&&this._queuedEntries.push(w):this._queuedEntries.push(w)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},t.prototype._computeTargetAndRootIntersection=function(n,i){if(window.getComputedStyle(n).display!="none"){for(var s=b(n),l=s,d=a(n),p=!1;!p;){var m=null,C=d.nodeType==1?window.getComputedStyle(d):{};if(C.display=="none")return;if(d==this.root||d==e?(p=!0,m=i):d!=e.body&&d!=e.documentElement&&C.overflow!="visible"&&(m=b(d)),m&&(l=v(m,l),!l))break;d=a(d)}return l}},t.prototype._getRootRect=function(){var n;if(this.root)n=b(this.root);else{var i=e.documentElement,s=e.body;n={top:0,left:0,right:i.clientWidth||s.clientWidth,width:i.clientWidth||s.clientWidth,bottom:i.clientHeight||s.clientHeight,height:i.clientHeight||s.clientHeight}}return this._expandRectByRootMargin(n)},t.prototype._expandRectByRootMargin=function(n){var i=this._rootMarginValues.map(function(l,d){return l.unit=="px"?l.value:l.value*(d%2?n.width:n.height)/100}),s={top:n.top-i[0],right:n.right+i[1],bottom:n.bottom+i[2],left:n.left-i[3]};return s.width=s.right-s.left,s.height=s.bottom-s.top,s},t.prototype._hasCrossedThreshold=function(n,i){var s=n&&n.isIntersecting?n.intersectionRatio||0:-1,l=i.isIntersecting?i.intersectionRatio||0:-1;if(s!==l)for(var d=0;d<this.thresholds.length;d++){var p=this.thresholds[d];if(p==s||p==l||p<s!=p<l)return!0}},t.prototype._rootIsInDom=function(){return!this.root||o(e,this.root)},t.prototype._rootContainsTarget=function(n){return o(this.root||e,n)},t.prototype._registerInstance=function(){},t.prototype._unregisterInstance=function(){};function c(){return window.performance&&performance.now&&performance.now()}function u(n,i){var s=null;return function(){s||(s=setTimeout(function(){n(),s=null},i))}}function h(n,i,s,l){typeof n.addEventListener=="function"?n.addEventListener(i,s,l||!1):typeof n.attachEvent=="function"&&n.attachEvent("on"+i,s)}function f(n,i,s,l){typeof n.removeEventListener=="function"?n.removeEventListener(i,s,l||!1):typeof n.detatchEvent=="function"&&n.detatchEvent("on"+i,s)}function v(n,i){var s=Math.max(n.top,i.top),l=Math.min(n.bottom,i.bottom),d=Math.max(n.left,i.left),p=Math.min(n.right,i.right),m=p-d,C=l-s;return m>=0&&C>=0&&{top:s,bottom:l,left:d,right:p,width:m,height:C}}function b(n){var i;try{i=n.getBoundingClientRect()}catch{}return i?(i.width&&i.height||(i={top:i.top,right:i.right,bottom:i.bottom,left:i.left,width:i.right-i.left,height:i.bottom-i.top}),i):g()}function g(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function o(n,i){for(var s=i;s;){if(s==n)return!0;s=a(s)}return!1}function a(n){var i=n.parentNode;return i&&i.nodeType==11&&i.host?i.host:i&&i.assignedSlot?i.assignedSlot.parentNode:i}window.IntersectionObserver=t,window.IntersectionObserverEntry=r})();var A={exports:{}},D,q;function ve(){if(q)return D;q=1;var e=1e3,r=e*60,t=r*60,c=t*24,u=c*7,h=c*365.25;D=function(o,a){a=a||{};var n=typeof o;if(n==="string"&&o.length>0)return f(o);if(n==="number"&&isFinite(o))return a.long?b(o):v(o);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(o))};function f(o){if(o=String(o),!(o.length>100)){var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(o);if(a){var n=parseFloat(a[1]),i=(a[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return n*h;case"weeks":case"week":case"w":return n*u;case"days":case"day":case"d":return n*c;case"hours":case"hour":case"hrs":case"hr":case"h":return n*t;case"minutes":case"minute":case"mins":case"min":case"m":return n*r;case"seconds":case"second":case"secs":case"sec":case"s":return n*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function v(o){var a=Math.abs(o);return a>=c?Math.round(o/c)+"d":a>=t?Math.round(o/t)+"h":a>=r?Math.round(o/r)+"m":a>=e?Math.round(o/e)+"s":o+"ms"}function b(o){var a=Math.abs(o);return a>=c?g(o,a,c,"day"):a>=t?g(o,a,t,"hour"):a>=r?g(o,a,r,"minute"):a>=e?g(o,a,e,"second"):o+" ms"}function g(o,a,n,i){var s=a>=n*1.5;return Math.round(o/n)+" "+i+(s?"s":"")}return D}function be(e){t.debug=t,t.default=t,t.coerce=b,t.disable=h,t.enable=u,t.enabled=f,t.humanize=ve(),t.destroy=g,Object.keys(e).forEach(o=>{t[o]=e[o]}),t.names=[],t.skips=[],t.formatters={};function r(o){let a=0;for(let n=0;n<o.length;n++)a=(a<<5)-a+o.charCodeAt(n),a|=0;return t.colors[Math.abs(a)%t.colors.length]}t.selectColor=r;function t(o){let a,n=null,i,s;function l(...d){if(!l.enabled)return;const p=l,m=Number(new Date),C=m-(a||m);p.diff=C,p.prev=a,p.curr=m,a=m,d[0]=t.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");let w=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,(O,Z)=>{if(O==="%%")return"%";w++;const j=t.formatters[Z];if(typeof j=="function"){const Y=d[w];O=j.call(p,Y),d.splice(w,1),w--}return O}),t.formatArgs.call(p,d),(p.log||t.log).apply(p,d)}return l.namespace=o,l.useColors=t.useColors(),l.color=t.selectColor(o),l.extend=c,l.destroy=t.destroy,Object.defineProperty(l,"enabled",{enumerable:!0,configurable:!1,get:()=>n!==null?n:(i!==t.namespaces&&(i=t.namespaces,s=t.enabled(o)),s),set:d=>{n=d}}),typeof t.init=="function"&&t.init(l),l}function c(o,a){const n=t(this.namespace+(typeof a>"u"?":":a)+o);return n.log=this.log,n}function u(o){t.save(o),t.namespaces=o,t.names=[],t.skips=[];let a;const n=(typeof o=="string"?o:"").split(/[\s,]+/),i=n.length;for(a=0;a<i;a++)n[a]&&(o=n[a].replace(/\*/g,".*?"),o[0]==="-"?t.skips.push(new RegExp("^"+o.slice(1)+"$")):t.names.push(new RegExp("^"+o+"$")))}function h(){const o=[...t.names.map(v),...t.skips.map(v).map(a=>"-"+a)].join(",");return t.enable(""),o}function f(o){if(o[o.length-1]==="*")return!0;let a,n;for(a=0,n=t.skips.length;a<n;a++)if(t.skips[a].test(o))return!1;for(a=0,n=t.names.length;a<n;a++)if(t.names[a].test(o))return!0;return!1}function v(o){return o.toString().substring(2,o.toString().length-2).replace(/\.\*\?$/,"*")}function b(o){return o instanceof Error?o.stack||o.message:o}function g(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}var Ce=be;(function(e,r){var t={};r.formatArgs=u,r.save=h,r.load=f,r.useColors=c,r.storage=v(),r.destroy=(()=>{let g=!1;return()=>{g||(g=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function c(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function u(g){if(g[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+g[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const o="color: "+this.color;g.splice(1,0,o,"color: inherit");let a=0,n=0;g[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(a++,i==="%c"&&(n=a))}),g.splice(n,0,o)}r.log=console.debug||console.log||(()=>{});function h(g){try{g?r.storage.setItem("debug",g):r.storage.removeItem("debug")}catch{}}function f(){let g;try{g=r.storage.getItem("debug")}catch{}return!g&&typeof process<"u"&&"env"in process&&(g=t.DEBUG),g}function v(){try{return localStorage}catch{}}e.exports=Ce(r);const{formatters:b}=e.exports;b.j=function(g){try{return JSON.stringify(g)}catch(o){return"[UnexpectedJSONParseError]: "+o.message}}})(A,A.exports);var we=A.exports;const L=B(we),R=L("app:directives/visible"),F=new WeakMap;function V(e,r){R("Disconnecting observer",r),e&&e.disconnect()}function _e(e,r,t,c){const u=new IntersectionObserver(h=>{h[0].isIntersecting&&(c(),t.once&&V(u,e))});return r.context.$nextTick(()=>u.observe(e)),u}function G(e,{value:r,modifiers:t},c){if(R("Binding element",e),typeof window.IntersectionObserver>"u")R("IntersectionObserver API is not available in your browser.");else{const u=_e(e,c,t,()=>{R("Element is visible",e);const h=r;typeof h=="function"&&h()});F.set(e,{observer:u})}}function Pe(e,{value:r,oldValue:t},c){if(r===t)return;const{observer:u}=F.get(e);V(u,e),G(e,{value:r},c)}function Fe(e){if(F.has(e)){const{observer:r}=F.get(e);V(r,e),F.delete(e)}}const X={bind:G,update:Pe,unbind:Fe},ye={name:"ScrollingPage",props:{page:{type:Object,required:!0},focusedPage:{type:Number,default:void 0},scrollTop:{type:Number,default:0},clientHeight:{type:Number,default:0},enablePageJump:{type:Boolean,default:!1}},data(){return{elementTop:0,elementHeight:0}},computed:{isPageFocused(){return this.page.pageNumber===this.focusedPage},isElementFocused(){const{elementTop:e,bottom:r,elementHeight:t,scrollTop:c,clientHeight:u}=this;if(!t)return!1;const h=t/2,f=u/2,v=t>=f?f:h,b=c+v;return e<b&&r>=b},bottom(){return this.elementTop+this.elementHeight},scrollBottom(){return this.scrollTop+this.clientHeight}},methods:{jumpToPage(){!this.enablePageJump||this.isElementFocused||!this.isPageFocused||this.$emit("page-jump",this.elementTop)},updateElementBounds(){const{offsetTop:e,offsetHeight:r}=this.$el;this.elementTop=e,this.elementHeight=r}},watch:{scrollTop:"updateElementBounds",clientHeight:"updateElementBounds",isPageFocused:"jumpToPage"},created(){this.$on("update-visibility",this.updateElementBounds)},mounted(){this.updateElementBounds()},render(){const{isPageFocused:e,isElementFocused:r}=this;return this.$scopedSlots.default({isPageFocused:e,isElementFocused:r})}},Ee={components:{ScrollingPage:ye},directives:{visible:X,scroll:me},props:{pages:{required:!0},enablePageJump:{type:Boolean,default:!1},currentPage:{type:Number,default:1},isParentVisible:{default:!0}},data(){return{focusedPage:void 0,scrollTop:0,clientHeight:0}},computed:{pagesLength(){return this.pages.length}},methods:{fetchPages(e){this.$emit("pages-fetch",e)},onPageJump(e){this.$emit("page-jump",e)},updateScrollBounds(){const{scrollTop:e,clientHeight:r}=this.$el;this.scrollTop=e,this.clientHeight=r}},watch:{isParentVisible:"updateScrollBounds",pagesLength(e,r){r===0&&this.$emit("pages-reset"),this.$nextTick(()=>{this.focusedPage=this.currentPage})},currentPage(e){e>this.pages.length?this.fetchPages(e):this.focusedPage=e}}},Ie={class:"scrolling-document"},Re={class:"scrolling-page","slot-scope":"{ isPageFocused, isElementFocused }"},Te={class:"observer"};function Se(e,r,t,c,u,h){const f=y("ScrollingPage"),v=k("visible"),b=k("scroll");return x((_(),T("div",Ie,[(_(!0),T(Q,null,ee(t.pages,g=>(_(),U(f,E({key:g.pageNumber,ref_for:!0},{page:g,clientHeight:u.clientHeight,scrollTop:u.scrollTop,focusedPage:u.focusedPage,enablePageJump:t.enablePageJump},{onPageJump:h.onPageJump}),{default:H(()=>[P("div",Re,[te(e.$slots,"default",E({ref_for:!0},{page:g,isPageFocused:e.isPageFocused,isElementFocused:e.isElementFocused}))])]),_:2},1040,["onPageJump"]))),128)),x(P("div",Te,null,512),[[v,h.fetchPages]])])),[[b,h.updateScrollBounds,void 0,{immediate:!0}]])}const Oe=S(Ee,[["render",Se]]),De=L("app:components/PDFPage"),$e={name:"PDFPage",props:{page:{type:Object,required:!0},scale:{type:Number,required:!0},optimalScale:{type:Number,required:!0},isPageFocused:{type:Boolean,default:!1},isElementFocused:{type:Boolean,default:!1}},directives:{visible:X},computed:{actualSizeViewport(){return this.viewport.clone({scale:this.scale})},canvasStyle(){const{width:e,height:r}=this.actualSizeViewport,[t,c]=[e,r].map(u=>Math.ceil(u/M));return`width: ${t}px; height: ${c}px;`},canvasAttrs(){let{width:e,height:r}=this.viewport;[e,r]=[e,r].map(c=>Math.ceil(c));const t=this.canvasStyle;return{width:e,height:r,style:t,class:"pdf-page box-shadow"}},pageNumber(){return this.page.pageNumber}},methods:{focusPage(){this.isPageFocused||this.$emit("page-focus",this.pageNumber)},drawPage(){if(this.renderTask)return;const{viewport:e}=this,t={canvasContext:this.$el.getContext("2d"),viewport:e};this.renderTask=this.page.render(t),this.renderTask.then(()=>{this.$emit("page-rendered",{page:this.page,text:`Rendered page ${this.pageNumber}`})}).catch(c=>{this.destroyRenderTask(),this.$emit("page-errored",{response:c,page:this.page,text:`Failed to render page ${this.pageNumber}`})})},updateVisibility(){this.$parent.$emit("update-visibility")},destroyPage(e){e&&e._destroy(),this.destroyRenderTask()},destroyRenderTask(){this.renderTask&&(this.renderTask.cancel(),delete this.renderTask)}},watch:{scale:"updateVisibility",page(e,r){this.destroyPage(r)},isElementFocused(e){e&&this.focusPage()}},created(){this.viewport=this.page.getViewport(this.optimalScale)},mounted(){De(`Page ${this.pageNumber} mounted`)},beforeDestroy(){this.destroyPage(this.page)}};function ke(e,r,t,c,u,h){const f=k("visible");return x((_(),T("canvas",ne(re(h.canvasAttrs)),null,16)),[[f,h.drawPage,void 0,{once:!0}]])}const xe=S($e,[["render",ke]]),Ne={name:"PDFDocument",components:{ScrollingDocument:Oe,PDFPage:xe},props:{pages:{required:!0},pageCount:{type:Number,default:0},scale:{type:Number,default:1},optimalScale:{type:Number},fit:{type:String},currentPage:{type:Number,default:1},isPreviewEnabled:{default:!1}},computed:{defaultViewport(){if(!this.pages.length)return{width:0,height:0};const[e]=this.pages;return e.getViewport(1)},isPortrait(){const{width:e,height:r}=this.defaultViewport;return e<=r}},methods:{pageWidthScale(){const{defaultViewport:e,$el:r}=this;return e.width?r.clientWidth*M*W/e.width:0},pageHeightScale(){const{defaultViewport:e,$el:r}=this;return e.height?r.clientHeight*M*W/e.height:0},fitWidth(){const e=this.pageWidthScale();this.updateScale(e,{isOptimal:!this.optimalScale})},fitHeight(){const e=this.isPortrait?this.pageHeightScale():this.pageWidthScale();this.updateScale(e)},fitAuto(){const e=Math.min(this.pageWidthScale(),this.pageHeightScale());this.updateScale(e)},updateScale(e,{isOptimal:r=!1}={}){e&&this.$emit("scale-change",{scale:e,isOptimal:r})},onPageJump(e){this.$el.scrollTop=e},onPagesFetch(e){this.$parent.$emit("pages-fetch",e)},onPageFocused(e){this.$parent.$emit("page-focus",e)},onPageRendered(e){this.$parent.$emit("page-rendered",e)},onPageErrored(e){this.$parent.$emit("page-errored",e)}},watch:{fit(e){switch(e){case"width":this.fitWidth();break;case"auto":this.fitAuto();break}},pageCount:"fitWidth",isPreviewEnabled:"fitWidth"}};function Me(e,r,t,c,u,h){const f=y("PDFPage"),v=y("ScrollingDocument");return _(),U(v,E({class:"pdfDocument"},{pages:t.pages,pageCount:t.pageCount,currentPage:t.currentPage},{"enable-page-jump":!0,onPageJump:h.onPageJump,onPagesFetch:h.onPagesFetch,onPagesReset:h.fitWidth}),{default:H(()=>[N(f,E({"slot-scope":"{ page, isPageFocused, isElementFocused }"},{scale:t.scale,optimalScale:t.optimalScale,page:e.page,isPageFocused:e.isPageFocused,isElementFocused:e.isElementFocused},{onPageRendered:h.onPageRendered,onPageErrored:h.onPageErrored,onPageFocus:h.onPageFocused}),null,16,["onPageRendered","onPageErrored","onPageFocus"])]),_:1},16,["onPageJump","onPagesFetch","onPagesReset"])}const Ae=S(Ne,[["render",Me]]);var Be=Math.ceil,He=Math.max;function Le(e,r,t,c){for(var u=-1,h=He(Be((r-e)/(t||1)),0),f=Array(h);h--;)f[c?h:++u]=e,e+=t;return f}var Ve=Le,je=ce,J=1/0,We=17976931348623157e292;function qe(e){if(!e)return e===0?e:0;if(e=je(e),e===J||e===-J){var r=e<0?-1:1;return r*We}return e===e?e:0}var Je=qe,ze=Ve,Ue=ie,$=Je;function Ge(e){return function(r,t,c){return c&&typeof c!="number"&&Ue(r,t,c)&&(t=c=void 0),r=$(r),t===void 0?(t=r,r=0):t=$(t),c=c===void 0?r<t?1:-1:$(c),ze(r,t,c,e)}}var Xe=Ge,Ze=Xe,Ye=Ze(),Ke=Ye;const Qe=B(Ke),I=L("app:components/PDFData");function et(e,r,t){const c=Qe(r,t+1).map(u=>e.getPage(u));return Promise.all(c)}const tt=10;function z(){return{pages:[],cursor:0}}const nt={name:"PDFData",props:{url:{type:String,required:!0}},data(){return Object.assign(z(),{pdf:void 0})},watch:{pdf(e,r){e&&(r&&Object.assign(this,z()),this.$emit("page-count",this.pageCount),this.fetchPages())}},computed:{pageCount(){return this.pdf?this.pdf.numPages:0}},methods:{fetchPages(e=0){if(!this.pdf||this.pageCount>0&&this.pages.length===this.pageCount)return;const r=this.pages.length;if(this.cursor>r)return;const t=r+1,c=Math.min(Math.max(e,r+tt),this.pageCount);this.cursor=c,I(`Fetching pages ${t} to ${c}`),et(this.pdf,t,c).then(u=>(this.pages.splice(r,0,...u),this.pages)).catch(u=>{this.$emit("document-errored",{text:"Failed to retrieve pages",response:u}),I("Failed to retrieve pages",u)})},onPageRendered({text:e,page:r}){I(e,r)},onPageErrored({text:e,response:r,page:t}){I("Error!",e,r,t)}},created(){this.$on("page-rendered",this.onPageRendered),this.$on("page-errored",this.onPageErrored),this.$on("pages-fetch",this.fetchPages)},render(e){return e("div",[this.$scopedSlots.document({pages:this.pages})])}};function rt(e,r){const t=r?10**r:1;return Math.floor(e*t)/t}const it={name:"PDFViewer",components:{PDFDocument:Ae,PDFData:nt},props:{url:String},data(){return{scale:void 0,optimalScale:void 0,fit:void 0,currentPage:1,pageCount:void 0,isPreviewEnabled:!1}},methods:{zoomOut(){this.scale=parseFloat(this.scale>this.optimalScale?(this.scale-1).toFixed(2):this.scale)},zoomIn(){this.scale=parseFloat(this.scale<5?this.scale+1:this.scale)},pageDown(){this.currentPage=parseInt(this.currentPage>1?this.currentPage-1:this.currentPage,10)},pageUp(){this.currentPage=parseInt(this.pageCount>this.currentPage?this.currentPage+1:this.currentPage,10)},onDocumentRendered(){this.$emit("document-errored",this.url)},onDocumentErrored(e){this.$emit("document-errored",e)},updateScale({scale:e,isOptimal:r=!1}){const t=rt(e,2);r&&(this.optimalScale=t),this.scale=t},updateFit(e){this.fit=e},updatePageCount(e){this.pageCount=e},updateCurrentPage(e){this.currentPage=e},togglePreview(){this.isPreviewEnabled=!this.isPreviewEnabled}},watch:{url(){this.currentPage=1}},mounted(){document.body.classList.add("overflow-hidden")}},ot=e=>(oe("data-v-7606b1f7"),e=e(),se(),e),st=ot(()=>P("div",{class:"row toolbar_wrapper"},[P("div",{class:"col-md-2 col-lg-2 col-sm-3 col-xs-4"}),P("div",{class:"col-md-8 txt-alg-ctr col-lg-8 col-sm-7 col-xs-8 mt-10"})],-1)),at={class:"pdf-viewer"};function ct(e,r,t,c,u,h){const f=y("PDFDocument"),v=y("PDFData");return _(),T("div",null,[st,P("div",at,[N(v,{class:"pdf-viewer__main",url:t.url,onPageCount:h.updatePageCount,onPageFocus:h.updateCurrentPage,onDocumentRendered:h.onDocumentRendered,onDocumentErrored:h.onDocumentErrored},{default:H(()=>[N(f,E({class:["pdf-viewer__document",{"preview-enabled":u.isPreviewEnabled}],slot:"document","slot-scope":"{ pages }"},{pages:e.pages,scale:u.scale,optimalScale:u.optimalScale,fit:u.fit,currentPage:u.currentPage,pageCount:u.pageCount,isPreviewEnabled:u.isPreviewEnabled},{onScaleChange:h.updateScale}),null,16,["class","onScaleChange"])]),_:1},8,["url","onPageCount","onPageFocus","onDocumentRendered","onDocumentErrored"])])])}const ht=S(it,[["render",ct],["__scopeId","data-v-7606b1f7"]]);export{ht as P};
