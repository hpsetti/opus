import{g as S,_ as P,s as M,B as L,$ as U,o as c,c as n,a as t,t as y,F as I,m as T,j as b,Y as N,v as D,k as v,b as d,w as p,e as r,I as B,r as m,p as j,f as J,a1 as w}from"./index-BlMJxPGQ.js";import{O as F}from"./OpusTable-CkU-GtnE.js";import{L as O}from"./Loader-DR0R9oEF.js";import{O as G}from"./OpusPagination-DQXieD6a.js";import"./event-bus-DYoA24Gz.js";import{_ as H}from"./back_arrow-DlGi0Dam.js";import{_ as R}from"./plus_icon_blue-MdAOVTYS.js";import{_ as C}from"./doc_preview-KlbfcfdS.js";import"./lodash-DhCEjwN-.js";import"./OpusCheckbox-DmKgoiup.js";import"./more-horizontal-YxyMY0P_.js";import"./OpusSelect-BRceMwA4.js";import"./cloneDeep-ldw2ZiUo.js";import"./_baseAssignValue-BD6sbZ4C.js";import"./chevron_down_new-ByXOiGKT.js";import"./chevron_left_icon-6Fqv5UkY.js";async function x(){let s;return await S.get("https://backend.opus.emergobyul.com/services/admin/blockOpusEmail").then(e=>{e.status===200&&e.data&&(s=e.data.data)}).catch(e=>{console.log("Java Get Blocked Emails Error",e)}),s}async function Y(s){let e;return await S.post("https://backend.opus.emergobyul.com/services/admin/blockOpusEmail",s).then(a=>{a.status===200&&a.data&&(e=a.data)}).catch(a=>{e=a.response.data,console.log("Java Post add HFE Insight Error",a)}),e}async function q(s){let e;return await S.put("https://backend.opus.emergobyul.com/services/admin/blockOpusEmail",s).then(a=>{a.status===200&&a.data&&(e=a.data)}).catch(a=>{console.log("Java Update blocked Emails Error",a)}),e}async function z(s){let e=[];return await S.delete(`https://backend.opus.emergobyul.com/services/admin/blockOpusEmail/${s}`).then(a=>{a.status===200&&a.data&&(e=a.data)}).catch(a=>{console.log("Java Delete blocked Emails Error",a)}),e}const K={components:{Loader:O,Multiselect:M,BaseButton:L},data(){return{loaderStatus:!1,formDetails:{email:"",blocked_id:""},maxlength:{title:256,content:1e4},allBlockedEmailList:[],categoryActionSelect:["Block","Update","UnBlock"],actionSelected:"Block"}},computed:{canSave(){return this.actionSelected==="Block"&&this.formDetails.email||this.actionSelected==="Update"&&this.formDetails.email||this.actionSelected==="UnBlock"&&this.formDetails.blocked_id}},methods:{async getEmailList(){this.loaderStatus=!0,this.items=await x(),this.loaderStatus=!1},async getBlockedEmailData(){this.allBlockedEmailList=await x()},cancelPermissions(){this.emptyObject(),this.actionSelected="Block",U("#block-email-popup").modal("hide")},emptyObject(){this.formDetails={email:""}},async addCategory(){if(this.loaderStatus=!0,this.actionSelected==="Block"){const s={email:this.formDetails.email},e=await Y(s);e.status_code===200?(this.$notify({type:"success",title:"Success",text:e.data}),this.cancelPermissions()):e.status_code===500?(this.$notify({type:"error",title:"Error",text:e.message}),this.formDetails.email=""):this.$notify({type:"error",title:"Error",text:e.data})}else if(this.actionSelected==="Update"){const s={email:this.formDetails.email,id:this.formDetails.blocked_id},e=await q(s);e.status_code===200?(this.$notify({type:"success",title:"Success",text:e.data}),this.cancelPermissions()):this.$notify({type:"error",title:"Error",text:e.message})}else if(this.actionSelected==="UnBlock"){const s=await z(this.formDetails.blocked_id);s.status_code===200?(this.$notify({type:"success",title:"Success",text:s.data}),this.cancelPermissions()):this.$notify({type:"error",title:"Error",text:s.message})}this.emitter.emit("getAllBlockedEmailList"),this.loaderStatus=!1}}},f=s=>(j("data-v-bf309f3f"),s=s(),J(),s),Q={id:"block-email-popup",class:"modal fade",role:"dialog"},W={class:"modal-dialog modal-lg"},X={class:"modal-content first-modal-content"},Z={class:"modal-header modal-bgcolor"},$={key:0,class:"text-h5 blue-1"},ee={key:1,class:"text-h5 blue-1"},te=f(()=>t("hr",null,null,-1)),oe={class:"modal-body"},se={class:"col-xs-12 col-sm-12 add-role mb-10"},le=f(()=>t("p",{class:"search-label sub-heading"},[r(" Actions "),t("span",{style:{color:"red"}},"*")],-1)),ae=["value"],ie={class:"pl-5"},ce={key:0,class:"col-xs-12 col-sm-12 add-role"},ne={class:"row mr-bt-5p"},de=f(()=>t("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[r(" Competitor Email Domain "),t("span",{style:{color:"red"}},"*")],-1)),re={class:"col-xs-12 col-sm-6"},me={key:1,class:"col-xs-12 col-sm-12 add-role"},pe={class:"row mr-bt-5p"},ue=f(()=>t("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[r(" Competitor Email Domain "),t("span",{style:{color:"red"}},"*")],-1)),_e={class:"col-xs-12"},he={class:"row mr-bt-5p"},fe=f(()=>t("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[r(" Update Email Domain Name "),t("span",{style:{color:"red"}},"*")],-1)),ke={class:"col-xs-12 col-sm-6"},be={key:2,class:"col-xs-12 col-sm-12 add-role"},ge={class:"row mr-bt-5p"},ve=f(()=>t("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[r(" Competitor Email Domain "),t("span",{style:{color:"red"}},"*")],-1)),ye={class:"col-xs-12"},Se={key:0,class:"col-sm-12 col-xs-12 col-md-12 footer remove_button_padding"},Ee={class:"d-flex justify-content-end col-gap-15"};function Be(s,e,a,V,o,i){const g=m("multiselect"),h=m("BaseButton"),E=m("loader");return c(),n("div",Q,[t("div",W,[t("div",X,[t("div",Z,[t("button",{type:"button",class:"close",onClick:e[0]||(e[0]=(...l)=>i.cancelPermissions&&i.cancelPermissions(...l))}," Ã— "),o.actionSelected?(c(),n("div",ee,y(o.actionSelected)+" Email Domain",1)):(c(),n("div",$," New Email"+y(o.actionSelected),1)),te]),t("div",oe,[t("div",se,[le,(c(!0),n(I,null,T(o.categoryActionSelect,(l,u)=>(c(),n("div",{class:"col-xs-12 col-md-4",key:u},[b(t("input",{type:"radio",name:"optradio",value:l,"onUpdate:modelValue":e[1]||(e[1]=k=>o.actionSelected=k),onClick:e[2]||(e[2]=(...k)=>i.getBlockedEmailData&&i.getBlockedEmailData(...k))},null,8,ae),[[N,o.actionSelected]]),t("label",ie,y(l),1)]))),128))]),o.actionSelected==="Block"?(c(),n("div",ce,[t("div",ne,[de,t("div",re,[b(t("input",{type:"text",placeholder:"boldinsight.com, corehf.com, dscience.com etc.",class:"form-control",maxlength:"128","onUpdate:modelValue":e[3]||(e[3]=l=>o.formDetails.email=l)},null,512),[[D,o.formDetails.email]])])])])):v("",!0),o.actionSelected==="Update"?(c(),n("div",me,[t("div",pe,[ue,t("div",_e,[d(g,{showLabels:!1,"close-on-select":!0,"allow-empty":!1,class:"multiselect-single-dropdown",searchable:!0,options:o.allBlockedEmailList.map(l=>l.id),"custom-label":l=>o.allBlockedEmailList.find(u=>u.id==l).email,modelValue:o.formDetails.blocked_id,"onUpdate:modelValue":e[4]||(e[4]=l=>o.formDetails.blocked_id=l),"open-direction":"bottom",placeholder:"Select a Email Domain"},null,8,["options","custom-label","modelValue"])])]),t("div",he,[fe,t("div",ke,[b(t("input",{type:"text",placeholder:"boldinsight.com, corehf.com, dscience.com etc.",class:"form-control",maxlength:"128","onUpdate:modelValue":e[5]||(e[5]=l=>o.formDetails.email=l)},null,512),[[D,o.formDetails.email]])])])])):v("",!0),o.actionSelected==="UnBlock"?(c(),n("div",be,[t("div",ge,[ve,t("div",ye,[d(g,{showLabels:!1,"close-on-select":!0,"allow-empty":!1,class:"multiselect-single-dropdown",searchable:!0,options:o.allBlockedEmailList.map(l=>l.id),"custom-label":l=>o.allBlockedEmailList.find(u=>u.id==l).email,modelValue:o.formDetails.blocked_id,"onUpdate:modelValue":e[6]||(e[6]=l=>o.formDetails.blocked_id=l),"open-direction":"bottom",placeholder:"Select a Email Domain"},null,8,["options","custom-label","modelValue"])])])])):v("",!0)]),o.actionSelected==="Block"||o.actionSelected==="Update"||o.actionSelected==="UnBlock"?(c(),n("div",Se,[t("div",Ee,[d(h,{variant:"secondary",onClick:i.cancelPermissions},{default:p(()=>[r(" Cancel ")]),_:1},8,["onClick"]),o.actionSelected==="Block"?(c(),B(h,{key:0,onClick:i.addCategory,disabled:!i.canSave},{default:p(()=>[r("Save")]),_:1},8,["onClick","disabled"])):o.actionSelected==="Update"?(c(),B(h,{key:1,onClick:i.addCategory,disabled:!i.canSave},{default:p(()=>[r("Update")]),_:1},8,["onClick","disabled"])):(c(),B(h,{key:2,variant:"error",onClick:i.addCategory,disabled:!i.canSave},{default:p(()=>[r("UnBlock")]),_:1},8,["onClick","disabled"]))])])):v("",!0)]),d(E,{loadingStatus:o.loaderStatus},null,8,["loadingStatus"])])])}const xe=P(K,[["render",Be],["__scopeId","data-v-bf309f3f"]]),De={name:"AdminEmailBlock",components:{OpusTable:F,OpusPagination:G,Loader:O,BaseButton:L,AddEmail:xe},async created(){this.loaderStatus=!0,this.emitter.on("getAllBlockedEmailList",()=>{this.getBlockedList()}),this.getBlockedList(),this.loaderStatus=!1},data(){return{loaderStatus:!1,items:[],fields:[{key:"id",label:"ID",sortable:!0},{key:"email",label:"Email",sortable:!0},{key:"active",label:"Status",sortable:!0}],menuOptions:[{key:"replace-doc",icon:"/static/images/icons/edit_icon_new.svg",name:"Edit",fn:this.openDocModal}],perPage:10,currentPage:1,totalPages:0,totalItems:0}},methods:{async getBlockedList(){this.items=await x()},navigateToLaunchPad(){this.$router.push("/launchpad")},blockEmail(){this.type="new_role",this.header="Category",U("#block-email-popup").modal({backdrop:"static",keyboard:!1})}}},we={class:"content-wrappper"},Ce={class:"row m-0"},Pe={class:"mt-20 pr-20 pl-20"},Le={class:"col-xs-12 mb-10 d-flex align-items-center col-gap-10 mb-20 p-0"},Ue=t("div",{class:"text-h3"},"Blocked Emails Domains",-1),Oe={class:"d-flex justify-content-end col-gap-15 row-gap-10 flex-wrap pr-20"},Ve=t("img",{src:R,alt:"Add Subcategory",class:"preview-svg"},null,-1),Ae=t("span",null,"Email Domains",-1),Me={class:"text-subtitle-2 text-secondary mt-10 mb-10 ml-20"},Ie=t("span",null,"No Mails found!",-1),Te=["onClick"],Ne=["onClick"],je={class:"docs-pagination pt-20"};function Je(s,e,a,V,o,i){const g=m("router-link"),h=m("BaseButton"),E=m("OpusTable"),l=m("OpusPagination"),u=m("AddEmail"),k=m("loader");return c(),n("div",we,[t("div",Ce,[t("div",Pe,[t("div",Le,[t("img",{onClick:e[0]||(e[0]=(..._)=>i.navigateToLaunchPad&&i.navigateToLaunchPad(..._)),class:"back-img cursor-pointer",src:H,alt:""}),d(g,{class:"text-subtitle-2 blue-1",to:"/launchpad"},{default:p(()=>[r("Launchpad")]),_:1})]),Ue]),t("div",Oe,[d(h,{variant:"secondary","has-icon":"",onClick:i.blockEmail},{default:p(()=>[Ve,Ae]),_:1},8,["onClick"])]),t("div",Me,y(o.items.length)+" Mail Domains ",1),d(E,{id:"manage-docs",class:"docs-table",items:o.items,fields:o.fields,currentPage:o.currentPage,perPage:o.perPage},{empty:p(()=>[Ie]),"cell(path)":p(_=>[b(t("img",{src:C,onClick:A=>s.downloadDoc(_.item.path,"documents")},null,8,Te),[[w,!s.isEmptyDoc(_.item)]])]),"cell(preview)":p(_=>[b(t("img",{src:C,onClick:A=>s.downloadDoc(_.item.preview,"preview")},null,8,Ne),[[w,!s.isEmptyPreviewDoc(_.item)]])]),_:1},8,["items","fields","currentPage","perPage"]),t("div",je,[d(l,{total:o.items.length,perPage:o.perPage,currentPage:o.currentPage},null,8,["total","perPage","currentPage"])]),d(u),d(k,{loadingStatus:o.loaderStatus},null,8,["loadingStatus"])])])}const st=P(De,[["render",Je]]);export{st as default};
