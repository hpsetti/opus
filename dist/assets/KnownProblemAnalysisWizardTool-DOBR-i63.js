import{g as C,_ as w,B as S,o as p,c as m,a as e,O as K,b as l,w as u,e as _,r as h,p as k,f as P,$ as y,d as x,a0 as T,n as g,t as v,k as q,l as A}from"./index-BlMJxPGQ.js";import{i as B}from"./index.es-Cl9EeDOg.js";import{O as N}from"./OpusSelect-BRceMwA4.js";import{L as Y}from"./Loader-DR0R9oEF.js";import{b as R}from"./base64toBlob-DvJk0jOb.js";import{_ as M}from"./chevron_left_white-D3IwzB1n.js";import{_ as O,a as j}from"./document_white-DjZrF9BV.js";import{_ as F}from"./header_about-DsAyeUKZ.js";import{_ as E}from"./download_icon_white-BHO_3GTH.js";import"./cloneDeep-ldw2ZiUo.js";import"./_baseAssignValue-BD6sbZ4C.js";import"./OpusCheckbox-DmKgoiup.js";import"./chevron_down_new-ByXOiGKT.js";var U={};async function z(){let s;return await C.get("/static/json/KPA/KnownProblemAnalysis.json").then(a=>{a.status===200&&a.data&&(s=a.data)}).catch(a=>{console.log("Opus KPA Tool Options Error",a)}),s}async function D(s,a){let i;return await C.post(`${U.VUE_APP_JAVA_API_URL}/kpa/device/events?reportOption=${a}`,s).then(n=>{n.status===200&&n.data&&(i=n.data)}).catch(n=>{console.log("Opus KPA Tool Options Error",n)}),i}const W={data(){return{loaderStatus:!1}},components:{Loader:Y,BaseButton:S},async created(){},methods:{closeClearallPopup(){this.$emit("closeClearallPopup")},clearSearch(){this.$emit("clearSearch"),this.$emit("closeClearallPopup")}}},L=s=>(k("data-v-ec4507ad"),s=s(),P(),s),H={id:"clear-all-popup",class:"modal",role:"dialog"},J={class:"modal-dialog modal-md request-modal"},G={class:"modal-content col-xs-12"},Q={class:"modal-header"},X={class:"d-flex justify-content-end col-gap-30"},Z={class:"modal-body col-xs-12",ref:"formWrapper"},$=L(()=>e("div",{class:"text-h4 mb-10 text-center"}," Do you want to clear your search? ",-1)),ee=L(()=>e("div",{class:"text-regular-large text-center mt-20"}," In clearing your search, you will lose any results and must restart the search process. ",-1)),te={class:"mt-20 text-center"};function se(s,a,i,n,t,o){const f=h("BaseButton"),b=h("loader");return p(),m("div",H,[e("div",J,[e("div",G,[e("div",Q,[e("div",X,[e("img",{onClick:a[0]||(a[0]=(...r)=>o.closeClearallPopup&&o.closeClearallPopup(...r)),class:"cursor-pointer align-self-flex-start",src:K,alt:""})])]),e("div",Z,[$,ee,e("div",te,[l(f,{variant:"secondary",onClick:o.closeClearallPopup},{default:u(()=>[_("Cancel")]),_:1},8,["onClick"]),l(f,{class:"button ml-15 primary sm",onClick:o.clearSearch},{default:u(()=>[_("Yes, clear search")]),_:1},8,["onClick"])])],512),l(b,{loadingStatus:t.loaderStatus},null,8,["loadingStatus"])])])])}const ae=w(W,[["render",se],["__scopeId","data-v-ec4507ad"]]),oe={name:"KnownProblemAnalysisWizard",components:{OpusSelect:N,DatePicker:B,BaseButton:S,Loader:Y,clearAllPopup:ae},data(){return{startDate:null,secondDate:null,tabs:[],activeItemList:{},loaderStatus:!1,isKpaReady:!1,isDownloadAvailable:!1,fileStatusText:""}},async created(){const s=await z();this.tabs=s,[this.activeItemList]=this.tabs},methods:{navigateToTools(){this.$router.go(-1)},customLabel(s){return`${s.itemName}`},customFirstDate(){return this.startDate},customSecondDate(){return this.secondDate},setListForSelectedTab(){return this.activeItemList},closeClearallPopup(){y("#clear-all-popup").modal("hide")},clearAll(){y("#clear-all-popup").modal({backdrop:"static",keyboard:!1})},resetValues(){this.loaderStatus=!0,this.startDate=null,this.secondDate=null,[this.activeItemList]=this.tabs,this.isKpaReady=!1,this.loaderStatus=!1},disabledBefore(s){return s<=new Date(this.startDate)},async downloadResults(){this.loaderStatus=!0;const s={current_page:1,from:x(this.startDate).format("YYYY-MM-DD"),product_code:this.activeItemList.itemName,result_per_page:1e3,to:x(this.secondDate).format("YYYY-MM-DD")},i=await D(s,1);if(i.status_code===200&&i.data.kpa_device_events){const n=R(i.data.kpa_device_events.attachment,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");T.saveAs(n,`KPA_${this.startDate}-${this.secondDate}.xlsx`),this.$notify({type:"success",title:"Success",text:`${this.activeItemList.itemName} file has been downloaded`})}else i.status_code===200&&!i.data.data_available&&(this.fileStatusText="No result found",this.$notify({type:"error",title:"Error",text:`File not found for ${this.activeItemList.itemName}`}),this.loaderStatus=!1);this.loaderStatus=!1},async searchResults(){this.loaderStatus=!0;const s={current_page:1,from:x(this.startDate).format("YYYY-MM-DD"),product_code:this.activeItemList.itemName,result_per_page:1e3,to:x(this.secondDate).format("YYYY-MM-DD")},i=await D(s,0);i.status_code===200&&(this.isKpaReady=!0,i.data.kpa_device_events.total_events>0?this.isDownloadAvailable=!0:this.isDownloadAvailable=!1),this.loaderStatus=!1}},watch:{activeItemList(){this.setListForSelectedTab()}}},c=s=>(k("data-v-d37cf3eb"),s=s(),P(),s),le={class:"content-wrappper"},ie={class:"row welcome-banner mr-0"},ce={class:"col-xs-12 p-0"},ne={class:"col-xs-12 col-sm-8 col-md-8 col-lg-9 p-0"},de={class:"col-xs-12 d-flex align-items-center mb-10 p-0"},re=c(()=>e("div",{class:"welcome-common-header pl-25 fw-300"}," Known Problem Analysis Wizard ",-1)),ue=c(()=>e("div",{class:"col-xs-12 pl-0 col-md-10 col-lg-8 font-14 pl-40"}," Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquet et nisl cras lectus neque vitae tristique. Volutpat a elementum, interdum neque interdum massa. Nulla ipsum aliquam, semper integer maecenas adipiscing ultricies. Faucibus quis nascetur nulla scelerisque sed. ",-1)),pe=A('<div class="col-xs-12 col-sm-4 col-md-4 col-lg-3 p-0 xs-pl-40 md-pl-40 action-options" data-v-d37cf3eb><div class="col-xs-12 mb-15 d-flex align-items-center p-0 cursor-pointer" data-v-d37cf3eb><img src="'+O+'" alt="" data-v-d37cf3eb><span class="pl-15" data-v-d37cf3eb>How to perform KPA?</span></div><div class="col-xs-12 mb-15 d-flex align-items-center p-0 cursor-pointer" data-v-d37cf3eb><img src="'+j+'" alt="" data-v-d37cf3eb><span class="pl-15" data-v-d37cf3eb>View example KPA</span></div></div>',1),me=A('<div class="col-xs-8 options-card-container" data-v-d37cf3eb><div class="d-flex justify-content-start align-center" data-v-d37cf3eb><div class="qno-container" data-v-d37cf3eb><div class="qno step-style text-subtitle-2" data-v-d37cf3eb>1</div></div><div class="question d-flex align-center justify-content-between" data-v-d37cf3eb><div class="title text-h4" data-v-d37cf3eb>Select Product code</div><div class="inline-flex" data-v-d37cf3eb><img class="img-size" src="'+F+'" alt data-v-d37cf3eb></div></div></div></div>',1),_e={class:"col-xs-8 dropdown-container"},he={class:"col-xs-8 options-card-container"},ve={class:"d-flex justify-content-start align-center"},fe={class:"qno-container"},be=c(()=>e("div",{class:"question"},[e("div",{class:"title text-h4"},"Select Dates"),e("h5",null,"Select the date range report received by FDA")],-1)),xe={class:"col-xs-8 mb-10 date-picker-container d-flex align-center"},ye=c(()=>e("h5",null,"Start date",-1)),ge={class:"form-group"},De={class:"pl-30"},Ce=c(()=>e("h5",null,"End date",-1)),we={class:"form-group"},Se={key:0,class:"col-xs-8 options-card-container"},ke={class:"d-flex justify-content-start align-center"},Pe={class:"qno-container"},Ae={key:0,class:"question align-center justify-content-between opus-bg-green-1 p-20"},Ye={class:"row"},Le=c(()=>e("div",{class:"col-xs-8 title text-h4 pb-20"}," Your KPA Result is ready! ",-1)),Ie={class:"col-xs-4 d-flex"},Ve=c(()=>e("img",{src:E,alt:""},null,-1)),Ke=c(()=>e("span",{class:"pl-10"},"Download",-1)),Te={class:"p-20"},qe={class:"text-primary mt-30 text-button-label white-space d-contents"},Be=c(()=>e("p",{class:"text-primary text-regular-small"}," The KPA result can be visible by clicking on “View” within OPUS. The KPA result can also be exported as an excel file for offline usage by clicking on ‘Download”. ",-1)),Ne={key:1,class:"question align-center justify-content-between orange-bg-3 p-20"},Re={class:"row"},Me=c(()=>e("div",{class:"col-xs-9 title text-h4 pb-20"}," Sorry, no results found. ",-1)),Oe={class:"col-xs-3"},je={class:"p-20"},Fe={class:"text-primary mt-30 text-button-label white-space d-contents"},Ee=c(()=>e("p",{class:"text-primary text-regular-small mt-10"}," Clear your search inputs and try again. ",-1)),Ue={key:1,class:"col-xs-8 pb-40 d-flex align-center justify-content-end"},ze=c(()=>e("hr",null,null,-1)),We={key:2,class:"col-xs-12 pb-40 align-center justify-content-end"},He={class:"col-xs-8 pt-20"},Je=c(()=>e("hr",null,null,-1));function Ge(s,a,i,n,t,o){const f=h("opus-select"),b=h("date-picker"),r=h("BaseButton"),I=h("clearAllPopup"),V=h("loader");return p(),m("div",le,[e("div",ie,[e("div",ce,[e("div",ne,[e("div",de,[e("img",{onClick:a[0]||(a[0]=(...d)=>o.navigateToTools&&o.navigateToTools(...d)),class:"cursor-pointer",src:M,alt:""}),re]),ue]),pe])]),me,e("div",_e,[l(f,{style:{width:"100%"},modelValue:t.activeItemList,"onUpdate:modelValue":a[1]||(a[1]=d=>t.activeItemList=d),options:t.tabs,trackBy:"id","custom-label":o.customLabel,placeholder:"Select Role"},null,8,["modelValue","options","custom-label"])]),e("div",he,[e("div",ve,[e("div",fe,[e("div",{class:g(["qno text-subtitle-2",this.activeItemList.itemName!=="Select Product Code"?"step-style":""])}," 2 ",2)]),be])]),e("div",xe,[e("div",null,[ye,e("div",ge,[l(b,{type:"date",lang:"en",modelValue:t.startDate,"onUpdate:modelValue":a[2]||(a[2]=d=>t.startDate=d),valueType:"format",format:"DD-MMM-YYYY",placeholder:"xx/xx/xxxx",onChange:a[3]||(a[3]=d=>o.customFirstDate()),disabled:this.activeItemList.itemName==="Select Product Code"},null,8,["modelValue","disabled"])])]),e("div",De,[Ce,e("div",we,[l(b,{type:"date",lang:"en",modelValue:t.secondDate,"onUpdate:modelValue":a[4]||(a[4]=d=>t.secondDate=d),valueType:"format",format:"DD-MMM-YYYY",placeholder:"xx/xx/xxxx",onChange:a[5]||(a[5]=d=>o.customSecondDate()),"disabled-date":o.disabledBefore,disabled:!t.startDate},null,8,["modelValue","disabled-date","disabled"])])])]),t.isKpaReady?(p(),m("div",Se,[e("div",ke,[e("div",Pe,[e("div",{class:g(["qno text-subtitle-2",this.isKpaReady?"step-style":""])}," 3 ",2)]),t.isDownloadAvailable?(p(),m("div",Ae,[e("div",null,[e("div",Ye,[Le,e("div",Ie,[l(r,{variant:"secondary",disabled:!t.isDownloadAvailable,onClick:o.resetValues},{default:u(()=>[_("View")]),_:1},8,["disabled","onClick"]),l(r,{class:"button ml-15 primary sm",disabled:!t.isDownloadAvailable,onClick:o.downloadResults,"has-icon":""},{default:u(()=>[Ve,Ke]),_:1},8,["disabled","onClick"])]),e("div",Te,[e("p",qe," Product Code: "+v(t.activeItemList.itemName)+" / Date Range: "+v(t.startDate)+" - "+v(t.secondDate),1),Be])])])])):(p(),m("div",Ne,[e("div",null,[e("div",Re,[Me,e("div",Oe,[l(r,{variant:"secondary",onClick:o.clearAll},{default:u(()=>[_("Clear all")]),_:1},8,["onClick"])]),e("div",je,[e("p",Fe," Product Code: "+v(t.activeItemList.itemName)+" / Date Range: "+v(t.startDate)+" - "+v(t.secondDate),1),Ee])])])]))])])):q("",!0),t.isKpaReady?(p(),m("div",We,[e("div",He,[Je,l(r,{variant:"secondary",class:"float-r",disabled:!t.startDate||!t.secondDate,onClick:o.clearAll},{default:u(()=>[_("Clear all")]),_:1},8,["disabled","onClick"])])])):(p(),m("div",Ue,[ze,l(r,{variant:"secondary",disabled:!t.startDate||!t.secondDate,onClick:o.clearAll},{default:u(()=>[_("Clear all")]),_:1},8,["disabled","onClick"]),l(r,{class:"button ml-15 primary sm",disabled:!t.startDate||!t.secondDate,onClick:o.searchResults},{default:u(()=>[_("Search")]),_:1},8,["disabled","onClick"])])),l(I,{onCloseClearallPopup:o.closeClearallPopup,onClearSearch:o.resetValues},null,8,["onCloseClearallPopup","onClearSearch"]),l(V,{loadingStatus:t.loaderStatus},null,8,["loadingStatus"])])}const dt=w(oe,[["render",Ge],["__scopeId","data-v-d37cf3eb"]]);export{dt as default};
