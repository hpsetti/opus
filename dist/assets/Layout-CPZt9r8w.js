import{_ as x,B as L,d as S,r as m,o as r,c as n,a as t,t as y,k as h,F as R,m as j,n as g,b as p,w,e as b,p as C,f as P,$ as f,u as ze,x as J,j as M,v as F,y as re,g as O,z as Je,A as qe,C as We,D as Se,E as de,G as ue,H as Ie,I,J as Ge,K as Ke,L as ye,M as Qe,N as Ze,O as X,l as q,Q as ne,R as Xe,S as et,q as tt,i as st,T as it,h as Ce,U as ot}from"./index-BlMJxPGQ.js";import{E as V}from"./event-bus-DYoA24Gz.js";import{g as at}from"./lmsTraining-BNcLeb-5.js";import{g as rt,a as lt}from"./instructorLedTraining-DE_vpi5U.js";import{_ as nt}from"./vue-html2pdf.esm-Cvk6D9-2.js";import{C as ct,g as dt,_ as Pe}from"./Certificate-B4mLgPZP.js";import{_ as ut}from"./download_icon_white-BHO_3GTH.js";import{L as E}from"./Loader-DR0R9oEF.js";import{b as mt}from"./passwords-hrBXkaP1.js";import{i as ht,a as pt,b as _t,c as gt,d as we}from"./validator-Bi5jra31.js";import{_ as me}from"./eye-logo-CD6ulyGQ.js";import{o as ft,_ as vt}from"./edit_icon_new-D9iwJqyt.js";import{O as bt}from"./OpusPopoverToolTip-B6LSKCTN.js";import{u as yt,a as wt,g as kt,r as xt,b as St,p as It,c as Ct,d as Pt,e as Tt,f as $t}from"./team-mtXrSBak.js";import{c as z}from"./cloneDeep-ldw2ZiUo.js";import{O as Te}from"./OpusSelect-BRceMwA4.js";import{_ as he}from"./back_arrow-DlGi0Dam.js";import{g as Lt,b as Dt,d as Mt,a as Et}from"./register-DZodNpzf.js";import{O as $e}from"./OpusTabs-CHfUVHKr.js";import{O as At}from"./OpusPagination-DQXieD6a.js";import{_ as Ut}from"./more-horizontal-YxyMY0P_.js";import{_ as Nt}from"./delete_icon-WtjTFUCM.js";import{O as Ot}from"./OpusTable-CkU-GtnE.js";import{b as Bt}from"./base64toBlob-DvJk0jOb.js";import{_ as Ft}from"./download_icon-MGGxcfQl.js";import{_ as Rt}from"./chevron_right-Bv87NFTl.js";import{p as pe}from"./marketo-zx_g1DXt.js";import{g as Le,a as jt,b as le}from"./login-C20UV7hD.js";import{_ as Ht}from"./header_about-DsAyeUKZ.js";import{g as Vt,_ as Yt}from"./notification-DPkRlSkz.js";import{g as zt}from"./notification-3XJ3CcaQ.js";import{u as Jt,g as qt}from"./dashboard-BHheVWGX.js";import{O as De}from"./OpusCheckbox-DmKgoiup.js";import{O as Me}from"./OpusLink-DUZipdBq.js";import{g as _e,a as Wt,b as Gt,c as Kt}from"./cart-QHhiBhPv.js";import{_ as ce}from"./basket-GdfS_fz3.js";import{h as Qt}from"./moment-Cl4UOzQZ.js";import{A as Zt}from"./AddRemoveCartPopup-CqkASo7c.js";import{_ as Xt}from"./tool_available-BYBTocPu.js";import{_ as es}from"./goto_arrow-zLb6UYwr.js";import{g as ts}from"./countriesList-D77CXr4h.js";import"./index-CWzxsAm4.js";import"./_baseAssignValue-BD6sbZ4C.js";import"./chevron_down_new-ByXOiGKT.js";import"./chevron_left_icon-6Fqv5UkY.js";import"./lodash-DhCEjwN-.js";const ss={name:"ViewAllProgressVerticalCommon",props:["viewAllProgressList","selectedCardType","latestActivity"],components:{BaseButton:L,VueHtml2pdf:nt,Certificate:ct},data(){return{statusMap:{"Not Started":"Enrolled",Incomplete:"In progress"},userInfo:{},coursesCompleted:0,certificateDateIssued:"",userName:"",certificateDetails:{},certificateDownloadBtn:[]}},created(){if(localStorage.getItem("userData")){const e=JSON.parse(localStorage.getItem("userData"));this.userInfo.first_name=e.first_name,this.userInfo.last_name=e.last_name,this.userInfo.id=e.id,this.userName=`${this.userInfo.first_name} ${this.userInfo.last_name}`}},methods:{formatToDateFormat(e){return e?S.utc(`${e}`).local().format("MM/DD/YYYY"):"N/A"},getImageUrl(e){return e?`https://opusjavaprodstorage.blob.core.windows.net${e}`:null},async getCertificateDetails(){this.loaderStatus=!0;try{const e=await dt(this.userInfo.id);this.certificateDetails=e.data,this.generatePdf(),this.loaderStatus=!1}catch{const s="certificate api not resolved";return this.loaderStatus=!1,s}return""},async generatePdf(){this.loaderStatus=!0,this.certificateDateIssued=S([this.certificateDetails.date_issued[0],this.certificateDetails.date_issued[1]-1,this.certificateDetails.date_issued[2]]).format("DD-MMM-Y"),await this.$refs.certificatepdf.generatePdf(),this.loaderStatus=!1},getFileName(){return`OPUS_${this.latestActivity.title}_Certificate_${this.userInfo.first_name.slice(0,10)}_${this.userInfo.last_name.slice(0,10)}${S().format("MMDDYYYY")}`}},computed:{getCourseProgress(){return this.viewAllProgressList.forEach(e=>{e.course_status==="Complete"&&(this.coursesCompleted+=1)}),this.coursesCompleted}}},K=e=>(C("data-v-151a67a6"),e=e(),P(),e),is={id:"view-all-progress-vertical-common",class:"viewAllProgressVerticalCommon"},os={class:"course-dialog course-md"},as={class:"course-content col-xs-12 pl-20 pb-20"},rs={class:"course-header"},ls={class:"col-xs-12 p-0 text-start header flex-between text-h4"},ns={class:"course-body col-xs-12"},cs={key:0,class:"col-xs-12 p-0 mb-15 no-data-text text-center font-18"},ds=K(()=>t("div",{class:"col-xs-12 p-0 progress-header text-subtitle-2 mb-10"},"Your progress",-1)),us={class:"col-xs-12 p-0 flex-align-center flex-column"},ms={key:0,class:"wrapper flex-column"},hs=["src"],ps={class:"pl-10 font-14 font-300 title-name"},_s={key:1,class:"col-xs-12 p-0 mb-15 no-data-text text-center font-18"},gs={key:0,class:"certificate-text--container"},fs=K(()=>t("h3",{class:"fw-300 mb-5 mt-5"},"Congrats!",-1)),vs={class:"mb-15 sort-label"},bs={class:"certificate-download-btn--container"},ys=K(()=>t("img",{src:ut,class:"preview-svg"},null,-1)),ws={class:"top-frame"},ks=K(()=>t("span",{class:"top-top"},null,-1)),xs={class:"bottom-frame"},Ss=K(()=>t("span",{class:"bottom-bottom"},null,-1));function Is(e,s,o,l,i,a){const c=m("BaseButton"),_=m("Certificate"),d=m("VueHtml2pdf");return r(),n("div",is,[t("div",os,[t("div",as,[t("div",rs,[t("div",ls,[t("span",null,y(o.selectedCardType==="eLearning"?"eLearning":"Instructor Led")+" Courses",1)])]),t("div",ns,[o.latestActivity?h("",!0):(r(),n("div",cs," You don't have any upcoming courses ")),ds,t("div",us,[o.viewAllProgressList.length>0?(r(),n("ul",ms,[(r(!0),n(R,null,j(o.viewAllProgressList,(v,u)=>(r(),n("li",{class:g(["col-xs-12 p-0",{enrolled:u!==o.viewAllProgressList.length-1&&o.viewAllProgressList[u+1].course_status==="Enrolled"}]),key:v.id},[t("img",{class:"stepper img-size",src:a.getImageUrl(v.status_icon_path),alt:""},null,8,hs),t("div",ps,y(v.title),1)],2))),128))])):(r(),n("div",_s," No Progress to Show ")),t("div",{class:g(o.latestActivity.training_type==="Certificate"&&o.latestActivity.course_status==="Complete"?"certificate-footer--container emergo-lightgreen-bg mt-20 pl-25 pb-15":"")},[o.latestActivity.training_type==="Certificate"&&o.latestActivity.course_status==="Complete"?(r(),n("div",gs,[fs,t("p",vs," You have earned a certificate in "+y(o.latestActivity.title),1)])):h("",!0),t("div",bs,[p(c,{class:"emergo-green-button",onClick:a.getCertificateDetails,disabled:o.latestActivity.training_type!=="Certificate"||o.latestActivity.course_status!=="Complete"},{default:w(()=>[ys,b("Download certificate ")]),_:1},8,["onClick","disabled"]),p(d,{"show-layout":!1,"float-layout":!1,"enable-download":!0,"preview-modal":!1,filename:a.getFileName(),"pdf-quality":2,"manual-pagination":!0,"pdf-format":"a3","pdf-orientation":"landscape","pdf-content-width":"570px",ref:"certificatepdf",class:"certificate-pdf"},{default:w(()=>[t("div",{class:g(["certificate-content",i.userName.length>=67?"xl-certificate-content":""]),slot:"pdf-content"},[t("div",ws,[ks,t("span",{class:g(["top-left",i.userName.length>=67?"xl-top-left":""])},null,2)]),p(_,{certificateName:"HFE for Medical Technology",recipientName:i.userName,dateIssued:i.certificateDateIssued,"certificate-details":i.certificateDetails,certificateNumber:i.certificateDetails.certificate_number,class:"certificate-main"},null,8,["recipientName","dateIssued","certificate-details","certificateNumber"]),t("div",xs,[Ss,t("span",{class:g(["bottom-right",i.userName.length>=67?"xl-bottom-right":""])},null,2)])],2)]),_:1},8,["filename"])])],2)])])])])])}const Cs=x(ss,[["render",Is],["__scopeId","data-v-151a67a6"]]),Ps="/static/images/icons/profile/profile.svg",Ts="/static/images/icons/profile/virtual-tour.svg",Ee="/static/images/icons/side-bar/training.svg",$s="/static/images/icons/profile/settings.svg",Ls="/static/images/icons/profile/logout.svg",Ds={props:["activeTab","roleId"],data(){return{active_tab:"profile",dashboardCustomizable:null}},watch:{activeTab(){this.active_tab=this.activeTab}},methods:{settings(e){this.$emit("menuClicked",e)}}},U=e=>(C("data-v-343b7088"),e=e(),P(),e),Ms={id:"profile_main",class:"black-2 text-regular-large"},Es={class:"menu-top"},As={class:"menu_ul"},Us=U(()=>t("img",{class:"menu_icon",src:Ps},null,-1)),Ns=U(()=>t("span",null,"Profile",-1)),Os=[Us,Ns],Bs=U(()=>t("img",{class:"menu_icon",src:Ts},null,-1)),Fs=U(()=>t("span",null,"Virtual Tour",-1)),Rs=[Bs,Fs],js=U(()=>t("img",{class:"menu_icon",src:Ee},null,-1)),Hs=U(()=>t("span",null,"Trainings",-1)),Vs=[js,Hs],Ys=U(()=>t("img",{class:"menu_icon",src:$s,alt:"settings-icon"},null,-1)),zs=U(()=>t("span",null,"Account Settings",-1)),Js=[Ys,zs],qs={key:4,class:"sub_menu_wrapper"},Ws={class:"sub_menu"},Gs=U(()=>t("span",null,"Team",-1)),Ks=[Gs],Qs={key:5,class:"sub_menu_wrapper"},Zs={class:"sub_menu"},Xs=U(()=>t("span",null,"Purchase History",-1)),ei=[Xs],ti={class:"menu-bottom"},si={class:"menu_ul"},ii=U(()=>t("img",{class:"menu_icon",src:Ls},null,-1)),oi=U(()=>t("span",null,"Log out",-1)),ai=[ii,oi];function ri(e,s,o,l,i,a){return r(),n("div",Ms,[t("div",Es,[t("ul",As,[o.roleId!=10?(r(),n("li",{key:0,onClick:s[0]||(s[0]=c=>a.settings("profile")),class:g({active_page:i.active_tab=="profile"})},Os,2)):h("",!0),o.roleId!==13?(r(),n("li",{key:1,onClick:s[1]||(s[1]=c=>a.settings("tour")),class:g({active_page:i.active_tab=="tour"})},Rs,2)):h("",!0),o.roleId!==13?(r(),n("li",{key:2,onClick:s[2]||(s[2]=c=>a.settings("trainings")),class:g({active_page:i.active_tab=="trainings"})},Vs,2)):h("",!0),o.roleId!==13?(r(),n("li",{key:3,onClick:s[3]||(s[3]=c=>a.settings("team")),class:g({active_page:i.active_tab=="team"})},Js,2)):h("",!0),o.roleId!==13?(r(),n("li",qs,[t("ul",Ws,[t("li",{onClick:s[4]||(s[4]=c=>a.settings("team")),class:g({active_page:i.active_tab=="team"})},Ks,2)])])):h("",!0),o.roleId!==13?(r(),n("li",Qs,[t("ul",Zs,[t("li",{onClick:s[5]||(s[5]=c=>a.settings("Purchase History")),class:g({active_page:i.active_tab=="Purchase History"})},ei,2)])])):h("",!0)])]),t("div",ti,[t("ul",si,[t("li",{onClick:s[6]||(s[6]=c=>a.settings("logout")),class:g({active_page:i.active_tab=="logout"})},ai,2)])])])}const li=x(Ds,[["render",ri],["__scopeId","data-v-343b7088"]]),ni={components:{Loader:E,BaseButton:L},props:["closeSubPage"],data(){return{errors:[],loaderStatus:!1,loggedInInitialsFlag:!1,imageData:"",imageExists:!1,loggedInUser:{},passwordFlag:!1,password:{current:"",newPassword:"",reTypeNewPassword:""},disableButtonForProfile:!0,changePasswordNavHold:!1,closeBasePopup:"default",changePasswordError:[],verification:[{message:"Have at least one capital letter",valid:!1},{message:"Have at least one lowercase letter",valid:!1},{message:"Have at least one number",valid:!1},{message:"Have at least one special character",valid:!1}],maxCharLength:50,maxPasswordCharLength:65,titleMaxCharLength:5,visiblePasswords:{currentPassword:!1,newPassword:!1,confirmPassword:!1},isCurrentPasswordMatchesPattern:!0}},created(){this.passwordFlag||this.loadProfile()},watch:{closeSubPage(e){e==="close"&&this.unsetPasswordFlag()}},computed:{disableButtonForChangePassword(){return!(this.passwordFlag&&this.password.current!==""&&this.password.newPassword!==""&&this.password.reTypeNewPassword!==""&&this.password.newPassword===this.password.reTypeNewPassword)}},methods:{resolveUserDataLength(e){const s={title:this.titleMaxCharLength};this.loggedInUser[e]&&(this.loggedInUser[e]=this.loggedInUser[e].substring(0,s[e]||this.maxCharLength)),this.checkUpdatedFields()},handleCurrentPasswordChange(){this.password.current&&(this.password.current=this.password.current.substr(0,this.maxPasswordCharLength))},validate(){this.counter=0,this.password.newPassword&&(this.password.newPassword=this.password.newPassword.substr(0,this.maxPasswordCharLength)),this.password.reTypeNewPassword&&(this.password.reTypeNewPassword=this.password.reTypeNewPassword.substr(0,this.maxPasswordCharLength)),this.password.newPassword&&(this.verification[0].valid=ht(this.password.newPassword),this.verification[1].valid=pt(this.password.newPassword),this.verification[2].valid=_t(this.password.newPassword),this.verification[3].valid=gt(this.password.newPassword)),this.counter=we(this.password.newPassword),this.isPasswordLength=!1,this.password.newPassword.length>=10&&(this.isPasswordLength=!0),this.PasswordError="Your password must be at least 10 characters and meet any 3 of these 4 criteria: 1 capital letter (A-Z), 1 lowercase letter ( a-z), 1 number (1-9), and one special character (!@#$.,+=( )_%^&*)",this.isPasswordLength&&this.counter>=3&&(this.password.reTypeNewPassword&&this.password.newPassword!==this.password.reTypeNewPassword?this.PasswordError="The confirm password doesn't match the new password above":this.PasswordError=!1)},async confirmChanges(){f("#confirmPopup").modal("toggle"),await this.updateProfile()},cancelConfirmPopUp(){this.disableButtonForProfile=!0,f("#confirmPopup").modal("toggle"),this.changePasswordNavHold?this.setPasswordFlag():(this.$emit("closedConfirmPopup",this.closeBasePopup),this.closeBasePopup="default")},toggleConfirmPopUp(e="default"){this.closeBasePopup=e,f("#confirmPopup").modal("toggle")},checkUpdatedFields(){this.loggedInUser.first_name&&this.loggedInUser.last_name?this.disableButtonForProfile=!1:this.disableButtonForProfile=!0},redirectChangePassword(){this.disableButtonForProfile?this.setPasswordFlag():(this.changePasswordNavHold=!0,this.toggleConfirmPopUp())},async updatePassword(){if(this.validateCurrentPassword())this.isCurrentPasswordMatchesPattern=!0;else{this.isCurrentPasswordMatchesPattern=!1;return}this.loaderStatus=!0;const e={current_password:this.password.current,new_password:this.password.newPassword},s=await mt(e);s?s&&!s.status?this.changePasswordError=s.message:(this.changePasswordError=[],this.$notify({type:"success",title:"Success",text:"Password updated successfully!"}),this.passwordFlag=!1,this.unsetPasswordFlag()):this.$notify({type:"error",title:"Error",text:"Updating password failed!"}),this.loaderStatus=!1},setPasswordFlag(){this.changePasswordNavHold=!1,this.passwordFlag=!0,this.$emit("emitBreadCrumb","Change Password"),this.visiblePasswords={currentPassword:!1,newPassword:!1,confirmPassword:!1}},unsetPasswordFlag(){this.password={current:"",newPassword:"",reTypeNewPassword:""},this.passwordFlag=!1,this.changePasswordError=[],this.$emit("emitBreadCrumb",!1),this.loadProfile()},removePhotoUseInitials(){this.loggedInInitialsFlag=!0,this.imageData="",this.checkUpdatedFields(),this.imageExists===!1&&!this.disableButtonForProfile&&(this.disableButtonForProfile=!0)},async updateProfile(){this.loaderStatus=!0;const e={first_name:this.loggedInUser.first_name,last_name:this.loggedInUser.last_name,company:this.loggedInUser.company,email:this.loggedInUser.email,id:this.loggedInUser.id,allow_support_access:!0};this.loggedInUser.title&&(e.title=this.loggedInUser.title),this.imageData&&(e.user_image=this.imageData),await ze(e)?(this.$notify({type:"success",title:"Success",text:"Profile updated successfully!"}),this.updateProfileInmemory()):this.$notify({type:"error",title:"Error",text:"Please try again later!"}),this.disableButtonForProfile=!0,this.loaderStatus=!1},updateProfileInmemory(){if(localStorage.getItem("userData")){const e=JSON.parse(localStorage.getItem("userData"));e.first_name=this.loggedInUser.first_name,e.last_name=this.loggedInUser.last_name,e.title=this.loggedInUser.title,e.company=this.loggedInUser.company,e.email=this.loggedInUser.email,e.id=this.loggedInUser.id,e.allow_support_access=!0,e.user_image=this.imageData,localStorage.setItem("userData",JSON.stringify(e))}this.emitter.emit("updateProfile",!0)},previewImage(e){const s=e.target,o=this,l=this.$refs.fileImage;if(s.files&&s.files[0]){const i=new FileReader;i.onload=a=>{o.imageData=a.target.result,o.loggedInInitialsFlag=!1,l.value=null},i.readAsDataURL(s.files[0])}this.checkUpdatedFields()},async loadProfile(){this.loaderStatus=!0,this.loggedInUser={};const e=localStorage.getItem("userData")?JSON.parse(localStorage.getItem("userData")):await J();this.loaderStatus=!1,this.loggedInUser=e,this.imageData=e.user_image,this.imageExists=!0,localStorage.setItem("userData",JSON.stringify(e)),this.imageData===""||this.imageData==null?(this.loggedInInitialsFlag=!0,this.imageExists=!1):this.loggedInInitialsFlag=!1,this.emitter.emit("updateProfile",!0)},getInitials(e,s){return`${e?e.charAt(0).toUpperCase():""}${s?s.charAt(0).toUpperCase():""}`},togglePasswordVisibility(e){this.visiblePasswords[e]=!this.visiblePasswords[e]},validateCurrentPassword(){const e=this.password.current;let s=!1;return e&&e.length>=10&&we(e)>2&&(s=!0),s}}},D=e=>(C("data-v-c2d6da34"),e=e(),P(),e),ci=D(()=>t("div",{class:"col-sm-12 col-xs-12 col-md-12"},null,-1)),di={key:0},ui={id:"profile-body",class:"col-sm-12 col-md-12 col-xs-12"},mi={id:"profile-icon",class:"col-sm-5 pt-15"},hi={class:"col-sm-12 col-xs-5 xs-pd-lt-0"},pi={key:0,class:"profile-pic-edit profile-pic-title-edit"},_i=["src"],gi={class:"col-sm-12 col-xs-7 pt-20"},fi={class:"col-xs-12 pd-0"},vi={class:"col-xs-12 pt-20"},bi=["disabled"],yi={key:0,id:"profile-details",class:"col-sm-7 col-md-7 col-xs-12 pt-10"},wi={class:"row"},ki=D(()=>t("div",{class:"col-sm-12 col-xs-12 text-body-light black-2"},[b(" First Name "),t("span",{class:"required"},"*")],-1)),xi={class:"col-sm-12 col-xs-12 mb-20 xs-mr-bt-0"},Si=D(()=>t("div",{class:"col-sm-12 col-xs-12 text-body-light black-2"},[b(" Last Name "),t("span",{class:"required"},"*")],-1)),Ii={class:"col-sm-12 col-xs-12 mb-20 xs-mr-bt-0"},Ci=["maxlength"],Pi=D(()=>t("div",{class:"col-sm-12 col-xs-12 text-body-light black-2"},"Title",-1)),Ti={class:"col-sm-12 col-xs-12 mb-20 xs-mr-bt-0"},$i=["maxlength"],Li=D(()=>t("div",{class:"col-sm-12 col-xs-12 text-body-light black-2"},"Company",-1)),Di={class:"col-sm-12 col-xs-12 mb-20 xs-mr-bt-0"},Mi=D(()=>t("div",{class:"col-sm-12 col-xs-12 text-body-light black-2"},"Email",-1)),Ei={class:"col-sm-12 col-xs-12 mb-20 xs-mr-bt-0"},Ai=["title"],Ui={class:"row"},Ni=D(()=>t("div",{class:"col-sm-12 col-xs-12 text-regular-large mt-15"},"Security",-1)),Oi=D(()=>t("div",{class:"col-sm-12 col-xs-12"},[t("hr")],-1)),Bi={class:"col-xs-12 col-sm-12 col-md-12"},Fi={class:"row"},Ri={class:"col-sm-4 col-xs-8 mt-20"},ji={class:"footer col-xs-12 col-sm-12"},Hi={class:"d-flex col-gap-15 justify-content-end"},Vi={key:1,id:"change-password"},Yi={id:"body",class:"col-sm-6 col-md-6 col-xs-12 changepassword_wrapper"},zi={class:"row"},Ji={class:"col-xs-12 col-sm-12"},qi=D(()=>t("div",{class:"col-xs-12 col-sm-12"},"Current password",-1)),Wi={class:"col-xs-12 col-sm-12 mb-20 password-form-container"},Gi=["type"],Ki=D(()=>t("img",{src:me,alt:"eye-image",id:"toggleCurrentPassword"},null,-1)),Qi=[Ki],Zi={class:"col-xs-12 col-sm-12"},Xi=D(()=>t("div",{class:"col-xs-12 col-sm-12"},"New password",-1)),eo={class:"col-xs-12 col-sm-12 mb-20 password-form-container"},to=["type"],so=D(()=>t("img",{src:me,alt:"eye-image",id:"toggleNewPassword"},null,-1)),io=[so],oo={class:"col-xs-12 col-sm-12"},ao=D(()=>t("div",{class:"col-xs-12 col-sm-12"},"Confirm password",-1)),ro={class:"col-xs-12 col-sm-12 mb-20 password-form-container"},lo=["type"],no=D(()=>t("img",{src:me,alt:"eye-image",id:"toggleConfirmPassword"},null,-1)),co=[no],uo={key:0,class:"col-xs-12 col-sm-12 validation-message pl-30 pr-0"},mo={key:1,class:"col-xs-12 col-sm-12 validation-message pl-30 pr-0"},ho={key:2,class:"col-xs-12 col-sm-12"},po={class:"col-xs-12 col-sm-12 validation-message"},_o={class:"footer col-xs-12 col-sm-12"},go={class:"d-flex col-gap-15 justify-content-end"},fo={id:"confirmPopup",class:"modal fade",role:"dialog"},vo={class:"modal-dialog profile-confirm-poup"},bo={class:"modal-content"},yo=D(()=>t("div",{class:"modal-header confirmpopup-bgcolor"},[t("button",{type:"button",class:"close","data-toggle":"modal","data-target":"#confirmPopup"},"×")],-1)),wo=D(()=>t("div",{class:"modal-body confirm-body"}," Would you like to save your changes before leaving the page? ",-1)),ko={class:"modal-footer confirmpopup-bgcolor"},xo={class:"col-md-6 col-sm-6 col-xs-12 profile-footer-save"},So={class:"col-md-6 col-sm-6 col-xs-12"};function Io(e,s,o,l,i,a){const c=m("BaseButton"),_=m("loader");return r(),n("div",null,[ci,i.passwordFlag?(r(),n("div",Vi,[t("div",Yi,[t("div",zi,[t("div",Ji,[qi,t("div",Wi,[M(t("input",{type:i.visiblePasswords.currentPassword?"text":"password",class:"form-control",placeholder:"Current password","onUpdate:modelValue":s[11]||(s[11]=d=>i.password.current=d),onInput:s[12]||(s[12]=(...d)=>a.handleCurrentPasswordChange&&a.handleCurrentPasswordChange(...d))},null,40,Gi),[[re,i.password.current]]),t("span",{class:"visibility-toggle",onClick:s[13]||(s[13]=d=>a.togglePasswordVisibility("currentPassword"))},Qi)])]),t("div",Zi,[Xi,t("div",eo,[M(t("input",{type:i.visiblePasswords.newPassword?"text":"password",class:"form-control",placeholder:"New password","onUpdate:modelValue":s[14]||(s[14]=d=>i.password.newPassword=d),onInput:s[15]||(s[15]=(...d)=>a.validate&&a.validate(...d))},null,40,to),[[re,i.password.newPassword,void 0,{trim:!0}]]),t("span",{class:"visibility-toggle",onClick:s[16]||(s[16]=d=>a.togglePasswordVisibility("newPassword"))},io)])]),t("div",oo,[ao,t("div",ro,[M(t("input",{type:i.visiblePasswords.confirmPassword?"text":"password",class:"form-control",placeholder:"Confirm password","onUpdate:modelValue":s[17]||(s[17]=d=>i.password.reTypeNewPassword=d),onInput:s[18]||(s[18]=(...d)=>a.validate&&a.validate(...d))},null,40,lo),[[re,i.password.reTypeNewPassword,void 0,{trim:!0}]]),t("span",{class:"visibility-toggle",onClick:s[19]||(s[19]=d=>a.togglePasswordVisibility("confirmPassword"))},co)])]),i.isCurrentPasswordMatchesPattern?h("",!0):(r(),n("div",uo," Current Password Mismatch ")),i.password.newPassword&&e.PasswordError?(r(),n("div",mo,y(e.PasswordError),1)):h("",!0),i.changePasswordError.length?(r(),n("div",ho,[t("div",po,y(i.changePasswordError),1)])):h("",!0)])]),t("div",_o,[t("div",go,[p(c,{class:"secondary",onClick:a.unsetPasswordFlag},{default:w(()=>[b(" Cancel ")]),_:1},8,["onClick"]),p(c,{class:"primary",onClick:a.updatePassword,disabled:a.disableButtonForChangePassword||i.loaderStatus},{default:w(()=>[b(" Save Changes ")]),_:1},8,["onClick","disabled"])])])])):(r(),n("div",di,[t("div",ui,[t("div",mi,[t("div",hi,[i.loggedInInitialsFlag?(r(),n("div",pi,y(a.getInitials(i.loggedInUser.first_name,i.loggedInUser.last_name)),1)):h("",!0),i.loggedInInitialsFlag?h("",!0):(r(),n("img",{key:1,class:"profile-pic-edit",src:i.imageData},null,8,_i))]),t("div",gi,[t("div",fi,[p(c,{variant:"secondary"},{default:w(()=>[b("Change Photo "),t("input",{type:"file",ref:"fileImage",onChange:s[0]||(s[0]=(...d)=>a.previewImage&&a.previewImage(...d)),accept:"image/*",class:"file-upload-hide cursor-pointer"},null,544)]),_:1})]),t("div",vi,[t("button",{class:"cursor-pointer text-subtitle-1 blue-3",disabled:i.loggedInInitialsFlag,onClick:s[1]||(s[1]=(...d)=>a.removePhotoUseInitials&&a.removePhotoUseInitials(...d))}," Remove Photo ",8,bi)])])]),Object.keys(i.loggedInUser).length?(r(),n("div",yi,[t("div",wi,[ki,t("div",xi,[M(t("input",{type:"text",class:"form-control",maxlength:"65",onInput:s[2]||(s[2]=(...d)=>a.checkUpdatedFields&&a.checkUpdatedFields(...d)),"onUpdate:modelValue":s[3]||(s[3]=d=>i.loggedInUser.first_name=d)},null,544),[[F,i.loggedInUser.first_name]])]),Si,t("div",Ii,[M(t("input",{maxlength:i.maxCharLength,"onUpdate:modelValue":s[4]||(s[4]=d=>i.loggedInUser.last_name=d),type:"text",class:"form-control",onInput:s[5]||(s[5]=d=>a.resolveUserDataLength("last_name"))},null,40,Ci),[[F,i.loggedInUser.last_name]])]),Pi,t("div",Ti,[M(t("input",{type:"text",class:"form-control",maxlength:i.titleMaxCharLength,onInput:s[6]||(s[6]=d=>a.resolveUserDataLength("title")),"onUpdate:modelValue":s[7]||(s[7]=d=>i.loggedInUser.title=d)},null,40,$i),[[F,i.loggedInUser.title]])]),Li,t("div",Di,[M(t("input",{type:"text",class:"form-control",disabled:"disabled","onUpdate:modelValue":s[8]||(s[8]=d=>i.loggedInUser.company=d)},null,512),[[F,i.loggedInUser.company]])]),Mi,t("div",Ei,[M(t("input",{title:i.loggedInUser.email,type:"text",class:"form-control",disabled:"disabled","onUpdate:modelValue":s[9]||(s[9]=d=>i.loggedInUser.email=d)},null,8,Ai),[[F,i.loggedInUser.email]])])])])):h("",!0),t("div",Ui,[Ni,Oi,t("div",Bi,[t("div",Fi,[t("div",Ri,[p(c,{variant:"secondary",onClick:a.redirectChangePassword},{default:w(()=>[b("Change Password")]),_:1},8,["onClick"])])])])])]),t("div",ji,[t("div",Hi,[p(c,{variant:"secondary",onClick:s[10]||(s[10]=d=>e.$emit("closepopup","closeBasePopup"))},{default:w(()=>[b("Cancel")]),_:1}),p(c,{variant:"primary",onClick:a.updateProfile,disabled:i.disableButtonForProfile||i.loaderStatus},{default:w(()=>[b("Save Changes")]),_:1},8,["onClick","disabled"])])]),p(_,{loadingStatus:i.loaderStatus},null,8,["loadingStatus"])])),p(_,{loadingStatus:i.loaderStatus},null,8,["loadingStatus"]),t("div",fo,[t("div",vo,[t("div",bo,[yo,wo,t("div",ko,[t("div",xo,[p(c,{variant:"primary",onClick:a.confirmChanges},{default:w(()=>[b(" Save Changes ")]),_:1},8,["onClick"])]),t("div",So,[p(c,{variant:"secondary",onClick:a.cancelConfirmPopUp},{default:w(()=>[b(" Discard Changes ")]),_:1},8,["onClick"])])])])])])])}const Co=x(ni,[["render",Io],["__scopeId","data-v-c2d6da34"]]),Po="/static/images/icons/virtual_tour_white_icon.svg",To={components:{BaseButton:L},data(){return{}},methods:{openTour(){this.$emit("closepopup"),this.emitter.emit("displayTour")}}},ee=e=>(C("data-v-85f6b470"),e=e(),P(),e),$o=ee(()=>t("div",{class:"col-sm-12 col-xs-12 col-md-12"},null,-1)),Lo={class:"col-sm-12 col-md-12 col-xs-12"},Do=ee(()=>t("div",{class:"virtual-tour-content mb-20"}," Walk through each feature using our guided tour ",-1)),Mo=ee(()=>t("img",{class:"preview-svg",src:Po,alt:"Start a virtual tour"},null,-1)),Eo=ee(()=>t("span",null,"Start Tour",-1));function Ao(e,s,o,l,i,a){const c=m("BaseButton");return r(),n("div",null,[$o,t("div",Lo,[Do,p(c,{onClick:a.openTour},{default:w(()=>[Mo,Eo]),_:1},8,["onClick"])])])}const Uo=x(To,[["render",Ao],["__scopeId","data-v-85f6b470"]]);async function No(e,s){let o=!1;return await O.get(`https://backend.opus.emergobyul.com/services/dashboard/customization/available?accountId=${e}&roleId=${s}`).then(l=>{l.data.data&&(o=l.data.data)}).catch(l=>{console.log("is Dashboard customization available api error",l)}),o}async function Ae(e,s){let o=!1;return await O.get(`https://backend.opus.emergobyul.com/services/dashboard/customization/default?accountId=${e}&userId=${s}`).then(l=>{l.data.data&&(o=l.data.data)}).catch(l=>{console.log("isDefaultDashboard api error",l)}),o}async function Ue(e){const s="https://backend.opus.emergobyul.com/services/dashboard/customization/default";let o;return await O.put(s,e).then(l=>{o=l.data}).catch(l=>{console.log("put defaultPreferences java api error",l)}),o}var Oo=qe;function Bo(e,s){return Oo(e,s)}var Fo=Bo;const Ro=Je(Fo),jo={props:["member","roles","distributors","getTeamMembers","cancelAddTeam"],components:{Loader:E,BaseButton:L,OpusSelect:Te},data(){return{loaderStatus:!1,Permissions:"",servicesList:[],serviceId:"",userServiceList:[],usersPermission:{},roleId:null,distributorId:null}},async created(){await this.getPermissionsList(),this.roleId=this.roles.find(e=>e.id===this.member.role_id),this.distributorId=this.member.assigned_distributor_id,this.emitter.on("resetTeams",()=>{this.cancelEditTeam()})},computed:{disableButtonForAddTeam(){if(this.roleId===6&&!this.distributorId)return!0;if(this.member.role_id!==this.roleId)return!1;if(this.member.role_id===this.roleId){if(this.distributorId!==this.member.assigned_distributor_id)return!1;let e=!0;for(let s=0;s<this.userServiceList.length;s+=1){const o=this.usersPermission.services.find(l=>l.id===this.userServiceList[s].id);if(!Ro(this.userServiceList[s],o)){e=!1;break}}return e}return!0}},watch:{roleId(){this.roleId===6&&this.roleId===this.member.role_id?this.distributorId=this.member.assigned_distributor_id:this.distributorId=null}},beforeDestroy(){V.$off("resetTeams")},methods:{revertOldPermissions(e,s){if(!s){let o;this.roleId===this.member.role_id?o=this.usersPermission.services.find(l=>l.id===e):o=this.servicesList.find(l=>l.id===e),this.userServiceList.forEach((l,i)=>{l.id===e&&(this.userServiceList[i].modules=o.modules)})}},disablePermissionCheck(e){return this.servicesList.find(s=>s.id===e).access},async updateTeamMember(){if(!this.disableButtonForAddTeam){this.loaderStatus=!0;const e={assigned_role_id:this.roleId.id,user_role_id:this.member.id,rbac_permission_inst:this.userServiceList};this.roleId===6&&(e.assigned_distributor_id=this.distributorId);const s=await yt(e);if(this.loaderStatus=!1,s&&s.status){this.loaderStatus=!0;const o=await Ae(this.member.account_id,this.member.user_id),l={account_id:this.member.account_id,dashboard_notification_type_id:1,user_id:this.member.user_id};o||await Ue(l),this.loaderStatus=!1,this.$notify({type:"success",title:"Success",text:"Team member updated successfully!"}),this.$emit("getTeamMembers"),this.cancelEditTeam()}else this.$notify({type:"error",title:"Error",text:s.message?s.message:"Unable to update Team member!"})}},updateUserPermission(e,s){this.userServiceList.forEach((o,l)=>{o.id===s&&this.$set(this.userServiceList,l,e)})},cancelEditTeam(){this.$emit("cancelAddTeam")},async getPermissionsList(){await this.getRoleBasedTemplate(this.member.role_id),this.loaderStatus=!0;const e=await We(this.member.user_id,this.member.account_id,this.member.role_id);this.loaderStatus=!1,e&&e.services?(this.usersPermission=e,this.userServiceList=z(this.usersPermission.services)):this.$notify({type:"error",title:"Error",text:"Unable to get user permissions!"})},getInitials(e,s){return`${e?e.charAt(0).toUpperCase():""}${s?s.charAt(0).toUpperCase():""}`},async getRoleBasedTemplate(e){await this.getSubscribedPlans(),this.loaderStatus=!0;const s=await Se(e);this.loaderStatus=!1,s&&s.services?(s.services.forEach((o,l)=>{o.serviceId&&!this.addedServiceIds.includes(o.serviceId)&&(s.services[l].access=!1)}),this.servicesList=z(s.services),this.roleId===this.member.role_id?this.userServiceList=z(this.usersPermission.services):this.userServiceList=z(this.servicesList)):(this.$notify({type:"error",title:"Error",text:"Unable to get default permissions for the role!"}),this.servicesList=[],this.userServiceList=[])},async getSubscribedPlans(){this.loaderStatus=!0,this.addedServiceIds=[];const e=await de(localStorage.getItem("accountId")),s=JSON.parse(localStorage.getItem("mappingServices"))?JSON.parse(localStorage.getItem("mappingServices")):await ue();this.loaderStatus=!1,e.forEach(o=>{const l=s.find(i=>i.plan_id===o.id);l&&(this.addedServiceIds=[...new Set(this.addedServiceIds.concat(l.service_id))])})}}},Y=e=>(C("data-v-83dbc857"),e=e(),P(),e),Ho=Y(()=>t("div",{class:"col-sm-12 col-xs-12 col-md-12"},[t("hr")],-1)),Vo={class:"col-sm-12 col-xs-12 box-wrapper"},Yo={id:"team-icon",class:"col-sm-6"},zo={class:"col-sm-10 img-blk"},Jo={key:0,class:"profile-pic-edit profile-pic-title-edit"},qo=["src"],Wo={id:"team-details",class:"col-sm-6 col-md-6 col-xs-12"},Go={class:"row"},Ko=Y(()=>t("img",{class:"back-img cursor-pointer",src:he,alt:""},null,-1)),Qo=Y(()=>t("div",{class:"text-subtitle-2 blue-1 cursor-pointer"},"Back",-1)),Zo=[Ko,Qo],Xo=Y(()=>t("div",{class:"row mr-bt-5p"},[t("div",{class:"col-xs-12 text-body-light"},"Edit role of the member")],-1)),ea={class:"row mr-bt-5p"},ta=Y(()=>t("div",{class:"col-sm-12 col-xs-12 col-md-12"},"First Name",-1)),sa={class:"col-sm-12 col-xs-12 col-md-10"},ia=["value"],oa={class:"row mr-bt-5p"},aa=Y(()=>t("div",{class:"col-sm-12 col-xs-12 col-md-12"},"Last Name",-1)),ra={class:"col-sm-12 col-xs-12 col-md-10"},la=["value"],na={class:"row mr-bt-5p"},ca=Y(()=>t("div",{class:"col-sm-12 col-xs-12 col-md-12"},"Email",-1)),da={class:"col-sm-12 col-xs-12 col-md-10"},ua=["value"],ma={class:"row mr-bt-5p"},ha=Y(()=>t("div",{class:"col-sm-12 col-xs-12 col-md-12"},"Role",-1)),pa={class:"col-sm-12 col-xs-12 col-md-10"},_a={class:"custom-dropdown mt-4"},ga={class:"col-sm-12 col-xs-12 col-md-12 footer remove_button_padding"},fa={class:"d-flex col-gap-15 justify-content-end flex-wrap"};function va(e,s,o,l,i,a){const c=m("OpusSelect"),_=m("BaseButton"),d=m("loader");return r(),n("div",null,[Ho,t("div",Vo,[t("div",Yo,[t("div",zo,[o.member.profile_pic?h("",!0):(r(),n("div",Jo,y(a.getInitials(o.member.first_name,o.member.last_name)),1)),o.member.profile_pic?(r(),n("img",{key:1,class:"profile-pic-edit",src:o.member.profile_pic},null,8,qo)):h("",!0)])]),t("div",Wo,[t("div",Go,[t("div",{class:"col-xs-12 mb-10 d-flex align-items-center col-gap-10 mb-20 p-0",onClick:s[0]||(s[0]=(...v)=>a.cancelEditTeam&&a.cancelEditTeam(...v))},Zo)]),Xo,t("div",ea,[ta,t("div",sa,[t("input",{type:"text",placeholder:"Name",value:o.member.first_name,class:"form-control",disabled:""},null,8,ia)])]),t("div",oa,[aa,t("div",ra,[t("input",{type:"text",placeholder:"Name",value:o.member.last_name,class:"form-control",disabled:""},null,8,la)])]),t("div",na,[ca,t("div",da,[t("input",{type:"text",placeholder:"Email",value:o.member.email,class:"form-control",disabled:""},null,8,ua)])]),t("div",ma,[ha,t("div",pa,[t("div",_a,[p(c,{id:"teamListSelect",options:o.roles,modelValue:i.roleId,"onUpdate:modelValue":s[1]||(s[1]=v=>i.roleId=v),label:"name","track-by":"id",onChange:s[2]||(s[2]=v=>a.getRoleBasedTemplate(i.roleId.id)),placeholder:"Select Role"},null,8,["options","modelValue"])])])])])]),t("div",ga,[t("div",fa,[p(_,{variant:"secondary",onClick:a.cancelEditTeam},{default:w(()=>[b("Cancel")]),_:1},8,["onClick"]),p(_,{variant:"primary",onClick:s[3]||(s[3]=v=>a.updateTeamMember()),disabled:a.disableButtonForAddTeam||i.loaderStatus},{default:w(()=>[b("Save Changes")]),_:1},8,["disabled"])])]),p(d,{loadingStatus:i.loaderStatus},null,8,["loadingStatus"])])}const ba=x(jo,[["render",va],["__scopeId","data-v-83dbc857"]]);async function ya(e){let s=[];return await O.get(`https://backend.opus.emergobyul.com/services/addon/account/${e}`).then(o=>{o.data&&(s=o.data.data)}).catch(o=>{console.log("get addons java api error",o)}),s}async function wa(e){let s="";return await O.post("https://backend.opus.emergobyul.com/services/plan/add",e).then(o=>{o.data&&(s=o.data)}).catch(o=>{console.log("post plan java api error",o)}),s}const ka="/static/images/icons/blank_image.svg";S.extend(Ie);const xa={props:["roles","roleId"],data(){return{displayErrormsg:!1,displayErrorText:"",team:{first_name:"",last_name:"",email:"",role:"",alpha_three_code:"",assigned_distributor_id:null},addMemberError:"",isFreeDomain:!1,loaderStatus:!1,servicesList:[],serviceId:null,memberName:"",userServiceList:[],addedServiceIds:[],blockedEmailDomains:[],countriesList:[],isEmailBlocked:!1}},components:{OpusSelect:Te,BaseButton:L,Loader:E},async created(){this.loaderStatus=!0,await this.loadCountries(),await this.getEmailStatus(),this.isEmailBlocked&&await this.fetchBlockedEmailDomains(),this.emitter.on("resetTeams",()=>{this.cancelAddTeam()}),this.isAccountAdmin||(this.team.role=this.roles.find(e=>e.id===12)),this.loaderStatus=!1},methods:{async loadCountries(){this.countriesList=await Lt()},async getEmailStatus(){const e=await Dt();this.isEmailBlocked=e.block_email},disablePermissionCheck(e){return this.servicesList.find(s=>s.id===e).access},updateUserPermission(e,s){this.userServiceList.forEach((o,l)=>{o.id===s&&(this.userServiceList[l]=e)})},revertOldPermissions(e,s){if(!s){const o=this.servicesList.find(l=>l.id===e);this.userServiceList.forEach((l,i)=>{l.id===e&&(this.userServiceList[i].access=s,this.userServiceList[i].modules=o.modules)})}},emailVal(){const e=/^([a-zA-Z0-9_\-\+\.]+)@([a-zA-Z-0-9-]+)((\.([a-zA-Z0-9-]){2,63}){1,3})$/;this.displayErrormsg=!1,this.team.email&&!this.team.email.match(e)&&(this.displayErrormsg=!0,this.displayErrorText="Invalid email."),this.checkEmailIsValid()},checkEmailIsValid(){if(this.team.email.includes("@")&&this.isEmailBlocked){const e=this.team.email.split("@"),s=e[e.length-1].toLowerCase(),o=this.blockedEmailDomains.map(l=>l.toLowerCase());this.isFreeDomain=Mt.includes(s)||o.includes(s),this.isFreeDomain&&(this.displayErrormsg=!0,this.displayErrorText="To combat fraudulent account creation, we have restricted certain domain email addresses from creating new accounts.")}},async fetchBlockedEmailDomains(){const e=await Et();this.blockedEmailDomains=e.map(s=>s.email)},async validateTeamUpgrade(){this.loaderStatus=!0;const e=await ya(JSON.parse(localStorage.getItem("userData")).account_id);this.recordAddonService=e.find(s=>s.units==="RECORDS"),this.teamAddonService=e.find(s=>s.units==="USERS"),this.loaderStatus=!1,this.teamAddonService&&(this.teamAddonService.total_limit>=this.teamAddonService.default_limit&&this.teamAddonService.is_active&&S().utc().format("YYYY-MM-DD HH:mm:ss")<this.teamAddonService.valid_until&&S().utc().format("YYYY-MM-DD HH:mm:ss")>=this.teamAddonService.valid_from?this.max_team_members=this.teamAddonService.total_limit:this.teamAddonService.total_limit>=this.teamAddonService.default_limit&&this.teamAddonService.is_active&&S().utc().format("YYYY-MM-DD HH:mm:ss")>this.teamAddonService.valid_until&&S().utc().format("YYYY-MM-DD HH:mm:ss")>=this.teamAddonService.valid_from&&(this.max_team_members=this.teamAddonService.default_limit),this.current_members=this.teamAddonService.current_utilization)},async addTeamMember(){this.loaderStatus=!0,this.addMemberError="";const e={first_name:this.team.first_name,last_name:this.team.last_name,memberEmailId:this.team.email,roleAssigned:this.team.role.id,alpha_three_code:this.team.alpha_three_code,rbac_permission_inst:this.userServiceList};this.team.assigned_distributor_id&&(e.assigned_distributor_id=this.team.assigned_distributor_id);const s=await wt(e);return this.loaderStatus=!1,s?s.error?(this.addMemberError=s.error,this.$notify({type:"error",title:"Error",text:"Adding Member Failed!"})):s.status==="Failure"?this.$notify({type:"error",title:"Error",text:s.message}):(this.$notify({type:"success",title:"Success",text:"Member added successfully!"}),this.clearAddTeam(),this.$emit("inviteSent")):this.$notify({type:"error",title:"Error",text:"Adding Member Failed!"}),null},clearAddTeam(){this.displayErrormsg=!1,this.team={first_name:"",last_name:"",email:"",role:"",assigned_distributor_id:null},this.addTeamFlag=!1,this.teamPermissionsFlag=!1,this.memberName="",this.serviceId=null,this.userServiceList=[]},cancelAddTeam(){this.clearAddTeam(),this.$emit("cancelAddTeam")},async getRoleBasedTemplate(e){await this.getSubscribedPlans(),this.loaderStatus=!0;const s=await Se(e);this.loaderStatus=!1,s?(s.services.forEach((o,l)=>{o.serviceId&&!this.addedServiceIds.includes(o.serviceId)&&(s.services[l].access=!1)}),this.servicesList=z(s.services),this.userServiceList=z(this.servicesList)):this.$notify({type:"error",title:"Error",text:"Unable to get default permissions for the role!"})},removeAssignedDistributorId(){this.team.assigned_distributor_id=null},async getSubscribedPlans(){this.loaderStatus=!0,this.addedServiceIds=[];const e=await de(localStorage.getItem("accountId")),s=JSON.parse(localStorage.getItem("mappingServices"))?JSON.parse(localStorage.getItem("mappingServices")):await ue();this.loaderStatus=!1,e.forEach(o=>{const l=s.find(i=>i.plan_id===o.id);l&&(this.addedServiceIds=[...new Set(this.addedServiceIds.concat(l.service_id))])})}},beforeDestroy(){V.$off("resetTeams")},computed:{isAccountAdmin(){return this.roleId===1||this.roleId===5},canSave(){return this.team.first_name&&this.team.last_name&&this.team.email&&!this.displayErrormsg&&this.team.role&&this.team.alpha_three_code},disableButtonForAddTeam(){return!(this.team.last_name&&this.team.first_name&&this.team.email&&this.displayErrormsg!==!0&&this.team.role&&this.team.role.id===6||this.team.last_name&&this.team.first_name&&this.team.email&&this.displayErrormsg!==!0&&this.team.role&&this.team.role.id!==6)}}},B=e=>(C("data-v-2f37ca99"),e=e(),P(),e),Sa=B(()=>t("div",{class:"col-sm-12 col-xs-12 col-md-12"},[t("hr")],-1)),Ia={class:"col-sm-12 col-xs-12 team-wrapper"},Ca=B(()=>t("div",{id:"team-icon",class:"col-sm-4"},[t("div",{class:"col-sm-10",style:{"padding-top":"10px","text-align":"center"}},[t("img",{class:"new_member_img",src:ka})])],-1)),Pa={id:"team-details",class:"col-sm-8 col-md-8 col-xs-12"},Ta={class:"row"},$a=B(()=>t("img",{class:"back-img cursor-pointer",src:he,alt:""},null,-1)),La=B(()=>t("div",{class:"text-subtitle-2 blue-1 cursor-pointer"},"Back",-1)),Da=[$a,La],Ma=B(()=>t("div",{class:"row mr-bt-5p"},[t("div",{class:"col-xs-12 text-body-light"}," Add your recipients’ name and email below ")],-1)),Ea={class:"row mr-bt-5p"},Aa=B(()=>t("div",{class:"col-sm-12 col-xs-12 col-md-12"},"First Name",-1)),Ua={class:"col-sm-12 col-xs-12 col-md-10"},Na={class:"row mr-bt-5p"},Oa=B(()=>t("div",{class:"col-sm-12 col-xs-12 col-md-12"},"Last Name",-1)),Ba={class:"col-sm-12 col-xs-12 col-md-10"},Fa={class:"row mr-bt-5p"},Ra=B(()=>t("div",{class:"col-sm-12 col-xs-12 col-md-12"},"Email",-1)),ja={class:"col-sm-12 col-xs-12 col-md-10"},Ha={key:0,class:"validation-message",style:{"padding-left":"2px","font-size":"14px",float:"left"}},Va={class:"row mr-bt-5p"},Ya=B(()=>t("div",{class:"col-sm-12 col-xs-12 col-md-12"},"Country",-1)),za={class:"col-sm-12 col-xs-12 col-md-10 custom-dropdown"},Ja={class:"row mr-bt-5p"},qa=B(()=>t("div",{class:"col-sm-12 col-xs-12 col-md-12"},"Role",-1)),Wa={class:"col-sm-12 col-xs-12 col-md-10 custom-dropdown"},Ga={key:0,class:"error-msg-holder custom-error"},Ka={class:"error-message-response"},Qa=B(()=>t("br",null,null,-1)),Za={class:"col-sm-12 col-xs-12 col-md-12 footer mb-30 pr-30 remove_button_padding"},Xa={class:"d-flex col-gap-15 justify-content-end flex-wrap"};function er(e,s,o,l,i,a){const c=m("OpusSelect"),_=m("BaseButton"),d=m("loader");return r(),n("div",null,[Sa,t("div",Ia,[Ca,t("div",Pa,[t("div",Ta,[t("div",{class:"col-xs-12 mb-10 d-flex align-items-center col-gap-10 mb-20 p-0",onClick:s[0]||(s[0]=(...v)=>a.cancelAddTeam&&a.cancelAddTeam(...v))},Da)]),Ma,t("div",Ea,[Aa,t("div",Ua,[M(t("input",{type:"text",placeholder:"First Name",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=v=>i.team.first_name=v),maxlength:"65"},null,512),[[F,i.team.first_name]])])]),t("div",Na,[Oa,t("div",Ba,[M(t("input",{type:"text",placeholder:"Last Name",class:"form-control","onUpdate:modelValue":s[2]||(s[2]=v=>i.team.last_name=v),maxlength:"50"},null,512),[[F,i.team.last_name]])])]),t("div",Fa,[Ra,t("div",ja,[M(t("input",{type:"text",placeholder:"Email",class:"form-control","onUpdate:modelValue":s[3]||(s[3]=v=>i.team.email=v),maxlength:"65",onInput:s[4]||(s[4]=(...v)=>a.emailVal&&a.emailVal(...v))},null,544),[[F,i.team.email]]),this.addMemberError.length?(r(),n("div",Ha,y(this.addMemberError),1)):h("",!0)])]),t("div",Va,[Ya,t("div",za,[p(c,{id:"teamListSelect",options:i.countriesList.map(v=>v.alpha_three_code),"custom-label":v=>i.countriesList.find(u=>u.alpha_three_code===v).country_name,label:"name",modelValue:i.team.alpha_three_code,"onUpdate:modelValue":s[5]||(s[5]=v=>i.team.alpha_three_code=v),searchable:!0,placeholder:"Select a country"},null,8,["options","custom-label","modelValue"])])]),t("div",Ja,[qa,t("div",Wa,[o.roles?(r(),I(c,{key:0,id:"teamListSelect",disabled:!a.isAccountAdmin,options:o.roles,label:"name","track-by":"id",modelValue:i.team.role,"onUpdate:modelValue":s[6]||(s[6]=v=>i.team.role=v),placeholder:"Select Role"},null,8,["disabled","options","modelValue"])):h("",!0)])]),i.displayErrormsg?(r(),n("div",Ga,[t("span",Ka,y(i.displayErrorText),1),Qa])):h("",!0)])]),t("div",Za,[t("div",Xa,[p(_,{variant:"secondary",size:"lg",onClick:a.cancelAddTeam},{default:w(()=>[b("Cancel")]),_:1},8,["onClick"]),p(_,{variant:"primary",size:"lg",onClick:a.addTeamMember,disabled:!a.canSave},{default:w(()=>[b("Send Invite")]),_:1},8,["onClick","disabled"])])]),p(d,{loadingStatus:i.loaderStatus},null,8,["loadingStatus"])])}const tr=x(xa,[["render",er],["__scopeId","data-v-2f37ca99"]]),ge="/static/images/promotions/refer_5.svg",sr={components:{BaseButton:L},methods:{goBack(){this.$emit("showScreen","team")},addNew(){this.$emit("addNew")}}},W=e=>(C("data-v-e8ed3261"),e=e(),P(),e),ir=W(()=>t("div",{class:"col-xs-12 p-0"},[t("hr",{class:"m-0"})],-1)),or={class:"refer-offer col-sm-12 col-xs-12 col-md-12 p-0"},ar=W(()=>t("img",{class:"cursor-pointer ml-20",src:he,alt:""},null,-1)),rr=W(()=>t("span",{class:"blue-1 cursor-pointer text-subtitle-2"},"Back",-1)),lr=[ar,rr],nr={class:"offer pb-20"},cr=W(()=>t("img",{src:ge},null,-1)),dr=W(()=>t("div",{class:"text-h5 title"}," For a limited time, add five team members and receive a free OPUS eLearning training* ",-1)),ur=W(()=>t("div",{class:"text-regular-large desc"}," *Your free OPUS eLearning training will be added to your account once all five invited team members activate their OPUS account. ",-1));function mr(e,s,o,l,i,a){const c=m("BaseButton");return r(),n("div",null,[ir,t("div",or,[t("div",{class:"d-flex align-items-center col-gap-15 mb-20 mt-20",onClick:s[0]||(s[0]=(..._)=>a.goBack&&a.goBack(..._))},lr),t("div",nr,[cr,dr,ur,p(c,{variant:"secondary",onClick:a.addNew},{default:w(()=>[b("Add new member(s)")]),_:1},8,["onClick"])])])])}const hr=x(sr,[["render",mr],["__scopeId","data-v-e8ed3261"]]),pr={components:{BaseButton:L},methods:{goToAccountSettings(){this.$emit("getTeamMembers")}}},Q=e=>(C("data-v-e4a66d51"),e=e(),P(),e),_r={id:"invites-sent"},gr={class:"col-sm-12 col-xs-12 col-md-12 p-0"},fr=Q(()=>t("hr",{class:"m-0"},null,-1)),vr={class:"offer"},br=Q(()=>t("img",{src:ge},null,-1)),yr=Q(()=>t("div",{class:"text-h5 title"},"Invite sent!",-1)),wr=Q(()=>t("div",{class:"text-regular-large mb-10 text-left"}," As soon as your invited members create and activate their OPUS accounts, you’ll receive a free OPUS elearning training loaded into your training library. Please allow for up to 48 hours before your training shows up in your library. ",-1)),kr=Q(()=>t("br",null,null,-1)),xr={class:"text-regular-large desc text-left"},Sr={class:"footer text-end mb-20 pr-20"};function Ir(e,s,o,l,i,a){const c=m("BaseButton");return r(),n("div",_r,[t("div",gr,[fr,t("div",vr,[br,yr,wr,kr,t("div",xr,[b(" You can check on the status of each invited member by going to the "),t("span",{class:"blue-1 cursor-pointer text-bold",onClick:s[0]||(s[0]=(..._)=>a.goToAccountSettings&&a.goToAccountSettings(..._))},"Team"),b(" page under Account Settings. ")])])]),t("div",Sr,[p(c,{onClick:a.goToAccountSettings},{default:w(()=>[b("OK")]),_:1},8,["onClick"])])])}const Cr=x(pr,[["render",Ir],["__scopeId","data-v-e4a66d51"]]),Pr="/static/images/icons/info_icon.svg",Tr="/static/images/icons/info_icon_active.svg",$r={components:{Loader:E,EditTeamMember:ba,AddTeamMember:tr,BaseButton:L,OfferHome:hr,InvitesSent:Cr,OpusPagination:At,OpusTabs:$e,OpusPopoverToolTip:bt},props:["roleId","closeSubPage","resetTeams"],data(){return{disableDistributorUpdate:!0,errors:[],showMenu:!1,loaderStatus:!1,selectAll:!1,addMemberError:"",roles:[],teamMembersList:"",filterMembers:[],paginatedTeamMembers:[],fields:[{key:"name",label:"Member",sortable:!0},{key:"email",label:"Email",sortable:!0},{key:"role",label:"Role",sortable:!0},{key:"status",label:"Confirmation Status",sortable:!0},{key:"status",label:"Account Status",sortable:!0}],menuOptions:[{key:"edit",name:"Edit",icon:"/static/images/icons/edit_icon_new.svg",fn:this.openRbacPage},{key:"delete",name:"Delete",icon:"/static/images/icons/delete_icon.svg",fn:this.showRemoveTeam}],team:{name:"",email:"",role:"",assigned_distributor_id:null},screen:{team:!0,offerHome:!1,addTeam:!1,editTeam:!1,inviteSent:!1},updateRoleList:[],selectedRolesList:[],searchValue:"",selectedTeamMembers:[],restTeamMembers:[],infoActive:!1,activeTab:"role",removeloaderStatus:!1,xshide:[],max_team_members:0,current_members:0,recordAddonService:null,teamAddonService:null,selectedMember:"",servicesList:[],Permissions:"",loggedInUser:null,showOfferScreen:!1,invitesSent:!1,perPage:5,currentPage:1,sortingType:"name",sortingOrder:"asc",sortIcon:"asc",popoverToggle:!1,sortOptions:{name:1,email:-1,role:-1,status:-1},upper:5,low:0}},computed:{teamMembersName(){const e=[];if(this.selectedTeamMembers.length)for(let s=0;s<this.selectedTeamMembers.length;s+=1){const o=this.teamMembersList.find(l=>l.user_id===this.selectedTeamMembers[s]);o&&e.push(`${o.first_name} ${o.last_name}`)}return e},allMemberIds(){const e=[];return this.filterMembers.forEach(s=>{e.push(parseInt(s.user_id,10))}),e},totalPages(){return Math.ceil(this.filterMembers.length/this.perPage)},isAccountAdmin(){return this.roleId===1||this.roleId===5}},watch:{closeSubPage(e){e==="close"&&this.cancelAddTeam()},filterMembers(e){this.restTeamMembers=e.filter(s=>s.user_id!==this.loggedInUser.id)}},async created(){this.roleId===1&&(this.showMenu=!0),this.loggedInUser=localStorage.getItem("userData")?JSON.parse(localStorage.getItem("userData")):await J(),this.loaderStatus=!0,await Promise.all([this.getRoles(),this.listOfAllRoles(),this.getTeamMembers()]),this.paginateTeamMembers(),this.showScreen("team"),this.loaderStatus=!1},methods:{popoverControl(e){this.popoverToggle=e},paginateTeamMembers(){this.paginatedTeamMembers=this.filterMembers.map(e=>({id:e.user_id,account_id:e.account_id,name:`${e.first_name} ${e.last_name}`,email:e.email,role:this.returnRoleName(e.role_id),status:e.is_confirmed?"Active":"Pending",account_status:e.is_account_user_status_active?"Active":"InActive"}))},onPageChanged(e){this.currentPage=e,this.upper=this.currentPage*5,this.low=this.upper-5},setSelectAll(){this.selectAll?this.selectedTeamMembers=this.restTeamMembers.map(e=>e.user_id):this.selectedTeamMembers=[]},singleSelect(){this.selectAll=this.selectedTeamMembers.length===this.restTeamMembers.length},cancelAddTeam(){this.showScreen("team"),this.$emit("emitBreadCrumb",!1)},openRbacPage(e){this.selectedMember=this.filterMembers.find(s=>s.user_id===e.id),this.showScreen("editTeam"),this.$emit("emitBreadCrumb","Member")},upgradeTeams(){f("#UpgradeModal").modal({backdrop:"static",keyboard:!1})},resetSearch(){this.searchValue="",this.filterTeamMembers()},dropDownEvent(e){this.$set(this.xshide,e,!this.xshide[e])},validateRemoveAuthority(e){if(this.roleId===9){if(e!==1&&e!==5&&e!==6)return!0}else return!0;return!1},updatedRole(e){this.selectedRolesList[e.member.id].id=e.selectedId,this.updateRole(e.member)},emitedDistributor(e){this.updateRoleDistributor(e.id,e.dist_id),this.checkChanges()},async filterTeamMembers(){const e=this.searchValue.trim();if(this.filterMembers=[],!e.length){this.filterMembers=this.teamMembersList;return}this.filterMembers=this.teamMembersList.filter(s=>this.searchString(e,s)),this.validateCheckedValue()},validateCheckedValue(){const e=[];for(let s=0;s<=this.selectedTeamMembers.length;s+=1)this.validateFilterMemberVal(this.selectedTeamMembers[s])&&e.push(this.selectedTeamMembers[s]);this.selectedTeamMembers=e},validateFilterMemberVal(e){let s=!1;for(let o=0;o<this.filterMembers.length;o+=1)if(this.filterMembers[o].user_id===e){s=!0;break}return s},searchString(e,s){return!!(s.first_name.toLowerCase().indexOf(e.toLowerCase())!==-1||s.email.toLowerCase().indexOf(e.toLowerCase())!==-1||s.last_name.toLowerCase().indexOf(e.toLowerCase())!==-1||this.returnRoleName(s.assigned_role_id).search(new RegExp(e,"i"))!==-1||this.validateDistributer(s,e))},returnRoleName(e){const s=this.roles.find(o=>o.id===e);return s?s.name:""},updateRole(e){const{id:s}=e,o=this.selectedRolesList[s].id,l=e.assigned_distributor_id;let i=!1;for(let a=0;a<this.updateRoleList.length;a+=1)if(this.updateRoleList[a].user_id===s){this.updateRoleList[a].assigned_role_id=o,o===6&&(this.updateRoleList[a].assigned_distributor_id=l),i=!0;break}if(!i){const a={user_id:s,assigned_role_id:o};o&&o===6&&(a.assigned_distributor_id=l),this.updateRoleList.push(a)}this.checkChanges()},updateRoleDistributor(e,s){let o=!1;for(let l=0;l<this.updateRoleList.length;l+=1)if(this.updateRoleList[l].user_id===e){this.updateRoleList[l].assigned_distributor_id=s,o=!0;break}o||this.updateRoleList.push({user_id:e,assigned_role_id:6,assigned_distributor_id:s})},getInitials(e,s){return`${e?e.charAt(0).toUpperCase():""}${s?s.charAt(0).toUpperCase():""}`},async addTeamMemberSection(){this.loaderStatus=!0,this.selectedTeamMembers=[],this.updateRoleList=[],this.team={first_name:"",last_name:"",email:"",role:"",assigned_distributor_id:null,user_type_id:1},this.addMemberError="",this.searchValue="",this.filterTeamMembers(),this.showAddTeam(),this.selectedTeamMembers=[],this.selectAll=!1,this.loaderStatus=!1},showAddTeam(){this.showScreen("addTeam"),this.$emit("emitBreadCrumb","New Member")},showInviteSent(){this.showScreen("inviteSent"),this.$emit("emitBreadCrumb",!1)},async listOfAllRoles(){this.listAllRoles=await Ge()},async getRoles(){this.roles=await Ke()},async refreshTeamMembers(){this.loaderStatus=!0,await this.getTeamMembers(),this.paginateTeamMembers(),this.showScreen("team"),this.loaderStatus=!1},async getTeamMembers(){const e=localStorage.getItem("userData")?JSON.parse(localStorage.getItem("userData")):await J();this.teamMembersList=await kt(e.account_type_id===2||e.account_type_id===4?1:0),this.filterMembers=this.teamMembersList,this.selectedRolesList=[],this.xshide=[],this.teamMembersList.forEach(s=>{this.selectedRolesList[s.id]={id:s.role_id,name:this.returnRoleName(s.role_id)},this.xshide[s.id]=!0})},showRemoveTeam(e){this.selectedMember=this.filterMembers.find(s=>s.user_id===e.id),f("#confirmPopup").modal({backdrop:"static",keyboard:!1})},async removeTeamMember(e){this.removeloaderStatus=!0;const s={userIds:[e.user_id]},o=await xt(s);this.removeloaderStatus=!1,f("#confirmPopup").modal("toggle"),o.status?(this.loaderStatus=!0,this.selectedTeamMembers.forEach(async l=>{const i=await Ae(JSON.parse(localStorage.getItem("userData")).account_id,l),a={account_id:JSON.parse(localStorage.getItem("userData")).account_id,user_id:l,dashboard_notification_type_id:3};i||await Ue(a)}),this.$notify({type:"success",title:"Success",text:"Member removed successfully!"}),await this.getTeamMembers(),this.filterTeamMembers(),this.paginateTeamMembers(),this.selectedTeamMember=null,this.selectAll=!1,this.loaderStatus=!1):this.$notify({type:"error",title:"Error",text:"Member couldn't be removed"})},checkChanges(){let e=0;this.updateRoleList.forEach(s=>{s.assigned_role_id===6&&s.assigned_distributor_id===null&&(e+=1)}),this.disableDistributorUpdate=!0,e===0&&this.updateRoleList.length>0&&(this.disableDistributorUpdate=!1)},showScreen(e){Object.keys(this.screen).forEach(s=>{this.screen[s]=s===e})},openOffer(){this.showScreen("offerHome")},getSortKey(e){let s="";return s+=this.sortOptions[e]>0?"asc":"desc",s+=this.sortingType===e?" active":" ",s},setSortBy(e){this.sortingType=e,this.sortOptions[e]*=-1;const s=this.sortOptions[e]>0?"desc":"asc";this.sortIcon=s,this.paginatedTeamMembers=ft(this.paginatedTeamMembers,[e],[s])}}},N=e=>(C("data-v-a9c5163f"),e=e(),P(),e),Lr={key:0,class:"team-content"},Dr={class:"row m-0"},Mr={class:"col-sm-12 col-xs-12 col-md-12 p-0"},Er={class:"offer d-flex justify-content-between"},Ar={class:"ml-30"},Ur=N(()=>t("div",{class:"title blue-1 mb-10"},"Get a free OPUS training",-1)),Nr=N(()=>t("div",{class:"text-subtitle-1 blue-1 mb-10"}," Add 5 new team members and receive a free eLearning ",-1)),Or=N(()=>t("img",{src:ge},null,-1)),Br={class:"mt-20"},Fr={class:"d-flex justify-content-end col-gap-15 pr-20"},Rr={class:"mt-10 d-flex align-items-center justify-content-between"},jr={class:"text-subtitle-2 ml-30"},Hr={class:"pr-20"},Vr={class:"info-tabs"},Yr=["innerHTML"],zr=["innerHTML"],Jr={key:0,class:"info-img",src:Pr,slot:"reference"},qr={key:1,class:"info-img",src:Tr,slot:"reference"},Wr={key:0,class:"opus-table-container"},Gr={class:"opus-table"},Kr={class:"pl-15"},Qr={key:0,class:"fixed-small"},Zr={class:"d-flex align-items-center justify-content-between"},Xr={class:"dropdown pr-20 pl-20"},el=N(()=>t("img",{src:Ut,"data-toggle":"dropdown"},null,-1)),tl={class:"dropdown-menu dropdown-menu-right pb-10 pt-10"},sl=["onClick"],il=N(()=>t("img",{src:vt,class:"preview-svg"},null,-1)),ol=N(()=>t("span",{class:"ml-10 text-body-light blue-1"},"Edit",-1)),al=[il,ol],rl=["onClick"],ll=N(()=>t("img",{src:Nt,class:"preview-svg"},null,-1)),nl=N(()=>t("span",{class:"ml-10 text-body-light red-1 delete"},"Delete",-1)),cl=[ll,nl],dl={key:1,class:"text-center"},ul=N(()=>t("div",{class:"mt-50 text-subtitle-1"},"No accounts found!",-1)),ml=[ul],hl={class:"team-pagination"},pl={id:"confirmPopup",class:"modal fade",role:"dialog"},_l={class:"modal-dialog modal-md"},gl={class:"modal-content"},fl=N(()=>t("div",{class:"modal-header confirmpopup-bgcolor"},[t("button",{type:"button",class:"close","data-toggle":"modal","data-target":"#confirmPopup"}," × "),t("h4",{class:"modal-title"},"Confirm")],-1)),vl={class:"modal-body confirm-body"},bl=N(()=>t("p",{class:"text-button-label"}," Are you sure you want to remove your team member? ",-1)),yl={class:"text-center mt-20 mb-20 text-regular-large"},wl={class:"modal-footer confirmpopup-bgcolor"},kl=N(()=>t("button",{type:"button",class:"btn search-button btn-width-confirm","data-toggle":"modal","data-target":"#confirmPopup"}," No ",-1));function xl(e,s,o,l,i,a){const c=m("BaseButton"),_=m("OpusTabs"),d=m("OpusPopoverToolTip"),v=m("OpusPagination"),u=m("add-team-member"),k=m("edit-team-member"),H=m("loader"),Z=m("OfferHome"),Ye=m("InvitesSent");return r(),n("div",null,[i.screen.team?(r(),n("div",Lr,[t("div",Dr,[t("div",Mr,[t("div",Er,[t("div",Ar,[Ur,Nr,p(c,{onClick:s[0]||(s[0]=T=>a.showScreen("offerHome"))},{default:w(()=>[b("Learn more")]),_:1})]),Or])])]),t("div",Br,[t("div",Fr,[p(c,{variant:"secondary",onClick:a.addTeamMemberSection},{default:w(()=>[b(" Add new member ")]),_:1},8,["onClick"])]),t("div",Rr,[t("div",jr,y(i.filterMembers.length)+" members ",1),t("div",Hr,[p(d,{width:"350",position:"left",onPopoverToggle:a.popoverControl,triggerClick:!0,class:"team-popover"},{content:w(()=>[t("div",Vr,[p(_,{tabs:[{name:"Role Definitions",key:"role"}],modelValue:i.activeTab,"onUpdate:modelValue":s[1]||(s[1]=T=>i.activeTab=T)},null,8,["modelValue"]),(r(!0),n(R,null,j(i.roles,(T,ae)=>(r(),n("div",{key:ae},[t("div",{innerHTML:T.name,class:"info-header"},null,8,Yr),t("div",{innerHTML:T.description,class:"info-text"},null,8,zr)]))),128))])]),default:w(()=>[i.popoverToggle?h("",!0):(r(),n("img",Jr)),i.popoverToggle?(r(),n("img",qr)):h("",!0)]),_:1},8,["onPopoverToggle"])])]),i.paginatedTeamMembers.length>0&&!i.loaderStatus?(r(),n("div",Wr,[t("table",Gr,[t("thead",null,[t("tr",null,[t("th",{class:"pl-15",onClick:s[2]||(s[2]=T=>a.setSortBy("name"))},[b(" Member "),t("span",{class:g(["sort-key",a.getSortKey("name")])},null,2)]),t("th",{onClick:s[3]||(s[3]=T=>a.setSortBy("email"))},[b(" Email "),t("span",{class:g(["sort-key",a.getSortKey("email")])},null,2)]),t("th",{onClick:s[4]||(s[4]=T=>a.setSortBy("role"))},[b(" Role "),t("span",{class:g(["sort-key",a.getSortKey("role")])},null,2)]),t("th",{onClick:s[5]||(s[5]=T=>a.setSortBy("status"))},[b(" Confirmation Status "),t("span",{class:g(["sort-key",a.getSortKey("status")])},null,2)])])]),t("tbody",null,[(r(!0),n(R,null,j(i.paginatedTeamMembers.slice(i.low,i.upper),T=>(r(),n("tr",{key:T.id},[t("td",Kr,y(T.name),1),t("td",null,y(T.email),1),t("td",null,y(T.role),1),t("td",null,y(T.status),1),a.isAccountAdmin&&T.id!==i.loggedInUser.id&&T.account_status==="Active"?(r(),n("td",Qr,[t("div",Zr,[t("div",Xr,[el,t("div",tl,[t("div",{class:"menu-action-container p-15",onClick:ae=>a.openRbacPage(T)},al,8,sl),t("div",{class:"menu-action-container p-15",onClick:ae=>a.showRemoveTeam(T)},cl,8,rl)])])])])):h("",!0)]))),128))])])])):i.loaderStatus?h("",!0):(r(),n("div",dl,ml)),t("div",hl,[i.paginatedTeamMembers.length?(r(),I(v,{key:0,totalPages:a.totalPages,total:i.paginatedTeamMembers.length,perPage:i.perPage,currentPage:i.currentPage,onPagechanged:a.onPageChanged},null,8,["totalPages","total","perPage","currentPage","onPagechanged"])):h("",!0)])])])):h("",!0),i.screen.addTeam?(r(),I(u,{key:1,roles:i.roles,roleId:o.roleId,onCancelAddTeam:a.cancelAddTeam,onGetTeamMembers:a.getTeamMembers,onInviteSent:a.showInviteSent},null,8,["roles","roleId","onCancelAddTeam","onGetTeamMembers","onInviteSent"])):h("",!0),i.screen.editTeam?(r(),I(k,{key:2,roles:i.roles,member:i.selectedMember,onCancelAddTeam:a.cancelAddTeam,onGetTeamMembers:a.refreshTeamMembers},null,8,["roles","member","onCancelAddTeam","onGetTeamMembers"])):h("",!0),t("div",pl,[t("div",_l,[t("div",gl,[fl,t("div",vl,[bl,t("p",yl,y(i.selectedMember.first_name+" "+i.selectedMember.last_name),1)]),t("div",wl,[kl,t("button",{type:"button",class:"btn save-button btn-width-confirm",onClick:s[6]||(s[6]=T=>a.removeTeamMember(i.selectedMember))}," Yes ")]),p(H,{loadingStatus:i.removeloaderStatus},null,8,["loadingStatus"])])])]),i.screen.offerHome?(r(),I(Z,{key:3,onAddNew:a.showAddTeam,onShowScreen:a.showScreen},null,8,["onAddNew","onShowScreen"])):h("",!0),i.screen.inviteSent?(r(),I(Ye,{key:4,onGetTeamMembers:a.refreshTeamMembers},null,8,["onGetTeamMembers"])):h("",!0),p(H,{loadingStatus:i.loaderStatus},null,8,["loadingStatus"])])}const Sl=x($r,[["render",xl],["__scopeId","data-v-a9c5163f"]]),Il={components:{Loader:E,OpusTabs:$e,OpusTable:Ot},props:["roleId"],data(){return{selectedTab:"viewAll",loaderStatus:!1,tabs:[],items:[],types:{trainings:["TRAINING","INSTRUCTOR_TRAINING","QNA_CONSULTING","INSTRUCTOR_PRE_RECORDED_TRAINING"],documents:["DOCUMENTS"],tools:["TOOLS"],consulting:["CONSULTING"]},fields:[{key:"plan_name",label:"Name",sortable:!0},{key:"plan_type",label:"Service Type",sortable:!0},{key:"purchase_date",label:"Purchase",sortable:!0},{key:"activation_date",label:"Activation",sortable:!0},{key:"expiry_date",label:"Expiry",sortable:!0},{key:"payment_mode",label:"Payment Mode",sortable:!0},{key:"price",label:"Price"}],filteredList:[],perPage:200,currentPage:1,totalPages:0,totalItems:0}},watch:{selectedTab:{handler(){this.getFilteredList(),this.pageNo=1}}},async created(){this.loaderStatus=!0,this.resetTabs(),await this.getUserPurchaseDetails(),this.setTabCount(),this.setDateFormat(),this.loaderStatus=!1},methods:{setDateFormat(){this.filteredList=this.items,this.filteredList=this.items.map(e=>{let s,o,l,i=e.price;if(!e.price>0?i="N/A":i=`$${e.price}`,e.activation_date!==null){const a=`${e.activation_date[0]} ${e.activation_date[1]} ${e.activation_date[2]}`,c=`${e.purchase_date[0]} ${e.purchase_date[1]} ${e.purchase_date[2]}`,_=e.expiry_date?`${e.expiry_date[0]} ${e.expiry_date[1]} ${e.expiry_date[2]}`:"";e.expired?(e.plan_type==="CONSULTING"?(l="<p class='text-disabled'>N/A</p>",e.price===0&&(i="<p class='text-disabled'>N/A</p>")):(l="<p class='orange-bg3 table-expiry-box text-disabled'>Expired</p>",!e.price>0?i="<p class='text-disabled'>N/A</p>":i=`<p class='text-disabled'>$${e.price}</p>`),s=`<p class='text-disabled'>${S(a).format("DD MMM YYYY")}</p>`,o=`<p class='text-disabled'>${S(c).format("DD MMM YYYY")}</p>`,e.payment_mode=`<p class='text-disabled'>${e.payment_mode}</p>`,e.plan_type=`<p class='text-disabled'>${e.plan_type}</p>`,e.plan_name=`<p class='text-disabled'>${e.plan_name}</p>`):(e.expiry_days>90?l=_?S(_).format("DD MMM YYYY"):"N/A":e.expiry_days<=90&&e.expiry_days>10?l=`<p class='orange-bg2 table-expiry-box'>${e.expiry_days} days</p>`:e.expiry_days<=10&&e.expiry_days>1?l=`<p class='red-bg1 white-1 table-expiry-box'>${e.expiry_days} days</p>`:e.expiry_days===1&&(l=`<p class='red-bg1 white-1 table-expiry-box'>${e.expiry_days} day</p>`),s=S(a).format("DD MMM YYYY"),o=S(c).format("DD MMM YYYY"))}else{s="-",l="-";const a=`${e.purchase_date[0]} ${e.purchase_date[1]} ${e.purchase_date[2]}`;o=S(a).format("DD MMM YYYY")}return{...e,activation_date:s,purchase_date:o,expiry_date:l,price:i}})},sortDateEvent(e){e.sortBy==="purchase_date"&&e.sortDesc===!0?this.filteredList.sort((s,o)=>new Date(o.purchase_date)-new Date(s.purchase_date)):e.sortBy==="purchase_date"&&e.sortDesc===!1&&this.filteredList.sort((s,o)=>new Date(s.purchase_date)-new Date(o.purchase_date)),e.sortBy==="activation_date"&&e.sortDesc===!0?this.filteredList.sort((s,o)=>new Date(o.activation_date)-new Date(s.activation_date)):e.sortBy==="activation_date"&&e.sortDesc===!1&&this.filteredList.sort((s,o)=>new Date(s.activation_date)-new Date(o.activation_date))},async getUserPurchaseDetails(){const e=await ye();this.items=e.data,this.emitter.emit("purchaseHistoryDetailsData",this.items.length)},async getFilteredList(){if(this.selectedTab==="viewAll")this.setDateFormat();else{const e=await ye();this.items=e.data;const s=this.items.filter(o=>this.types[this.selectedTab].includes(o.plan_type));this.filteredList=s.map(o=>{let l,i,a,c=o.price;if(!o.price>0?c="N/A":c=`$${o.price}`,o.activation_date!==null){const _=`${o.activation_date[0]} ${o.activation_date[1]} ${o.activation_date[2]}`,d=`${o.purchase_date[0]} ${o.purchase_date[1]} ${o.purchase_date[2]}`,v=o.expiry_date?`${o.expiry_date[0]} ${o.expiry_date[1]} ${o.expiry_date[2]}`:"";o.expired?(o.plan_type==="CONSULTING"?(a="<p class='text-disabled'>N/A</p>",o.price===0&&(c="<p class='text-disabled'>N/A</p>")):(a="<p class='orange-bg3 table-expiry-box text-disabled'>Expired</p>",!o.price>0?c="<p class='text-disabled'>N/A</p>":c=`<p class='text-disabled'>$${o.price}</p>`),l=`<p class='text-disabled'>${S(_).format("DD MMM YYYY")}</p>`,i=`<p class='text-disabled'>${S(d).format("DD MMM YYYY")}</p>`,o.payment_mode=`<p class='text-disabled'>${o.payment_mode}</p>`,o.plan_type=`<p class='text-disabled'>${o.plan_type}</p>`,o.plan_name=`<p class='text-disabled'>${o.plan_name}</p>`):(o.expiry_days>90?a=v?S(v).format("DD MMM YYYY"):"N/A":o.expiry_days<=90&&o.expiry_days>10?a=`<p class='orange-bg2 table-expiry-box'>${o.expiry_days} days</p>`:o.expiry_days<=10&&o.expiry_days>1?a=`<p class='red-bg1 white-1 table-expiry-box'>${o.expiry_days} days</p>`:o.expiry_days===1&&(a=`<p class='red-bg1 white-1 table-expiry-box'>${o.expiry_days} day</p>`),l=S(_).format("DD MMM YYYY"),i=S(d).format("DD MMM YYYY"))}else{l="-",a="-";const _=`${o.purchase_date[0]} ${o.purchase_date[1]} ${o.purchase_date[2]}`;i=S(_).format("DD MMM YYYY")}return{...o,activation_date:l,purchase_date:i,expiry_date:a,price:c}})}},resetTabs(){this.tabs=[{name:"View All",key:"viewAll",count:0},{name:"Trainings",key:"trainings",count:0},{name:"Documents",key:"documents",count:0},{name:"Tools",key:"tools",count:0},{name:"Consulting",key:"consulting",count:0}]},setTabCount(){this.tabs[0].count=this.items.length,this.items.forEach(e=>{Object.keys(this.types).forEach(s=>{if(this.types[s].includes(e.plan_type)){const o=this.tabs.findIndex(l=>l.key===s);o!==-1&&(this.tabs[o].count+=1)}})})}}},Cl=e=>(C("data-v-dd2175a0"),e=e(),P(),e),Pl={class:"row"},Tl={class:"col-sm-12 col-xs-12 col-md-12"},$l=Cl(()=>t("span",null,"No data found!",-1));function Ll(e,s,o,l,i,a){const c=m("OpusTabs"),_=m("OpusTable"),d=m("loader");return r(),n("div",Pl,[t("div",Tl,[p(c,{tabs:i.tabs,showTabCount:"",modelValue:i.selectedTab,"onUpdate:modelValue":s[0]||(s[0]=v=>i.selectedTab=v),class:"pl-20"},null,8,["tabs","modelValue"]),p(_,{id:"hfe-user-list",class:"users-table responsive",items:i.filteredList,fields:i.fields,currentPage:i.currentPage,onSortChanged:a.sortDateEvent},{empty:w(()=>[$l]),_:1},8,["items","fields","currentPage","onSortChanged"])]),p(d,{loadingStatus:i.loaderStatus},null,8,["loadingStatus"])])}const Dl=x(Il,[["render",Ll],["__scopeId","data-v-dd2175a0"]]),Ml={props:["subheader","header","breadcrumb","displaySubheader","roleId","displayDownloadBtn"],data(){return{loaderStatus:!1,subPagesList:["notifications"],subPage:"",purchaseHistory:!1}},components:{Loader:E},mounted(){this.emitter.on("purchaseHistoryDetailsData",async e=>{e>0?this.purchaseHistory=!0:this.purchaseHistory=!1})},methods:{changePage(){this.$emit("changePage",this.subPage)},capitalize(e){return e?e.toString().charAt(0).toUpperCase()+e.toString().slice(1):""},async getDownloadFile(){if(this.loaderStatus=!0,this.purchaseHistory){const e=await Qe(),s=Bt(e,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"),o=S().format("DD_MMM_YYYY");Ze.saveAs(s,`${o}_PurchaseHistory.xlsx`)}this.loaderStatus=!1}},watch:{subheader(){this.subPage=this.subheader}}},te=e=>(C("data-v-bb2ac941"),e=e(),P(),e),El={class:"right-header"},Al={key:0,class:"col-sm-12 col-xs-12 col-md-12"},Ul={class:"text-h4 pt-20 black-2 first-lette-cap pl-5"},Nl={class:"mr-20 text-subtitle-1 blue-3 download-list-btn float-right d-flex"},Ol={key:0},Bl=te(()=>t("img",{class:"pr-10",src:Ft},null,-1)),Fl=te(()=>t("span",{class:"pr-20"},"Download Full List",-1)),Rl=[Bl,Fl],jl=te(()=>t("hr",null,null,-1)),Hl={key:1,class:"col-sm-12 col-xs-12 col-md-12"},Vl={class:"header-team first-lette-cap"},Yl={class:"hide_xs"},zl={class:"first-lette-cap"},Jl=te(()=>t("img",{src:Rt,class:"hide_xs",width:"24px",height:"24px"},null,-1));function ql(e,s,o,l,i,a){const c=m("loader");return r(),n("div",El,[o.breadcrumb?(r(),n("div",Hl,[t("div",Vl,[t("span",Yl,y(o.subheader),1),t("span",zl,[Jl,b(" "+y(o.breadcrumb),1)]),t("i",{class:"el-icon-close icon-close",onClick:s[2]||(s[2]=_=>e.$emit("emit-close-event"))})])])):(r(),n("div",Al,[t("div",Ul,[b(y(o.subheader)+" ",1),t("div",Nl,[o.subheader==="Purchase History"?(r(),n("div",Ol,[o.displayDownloadBtn?(r(),n("p",{key:0,class:g([i.purchaseHistory?"":"text-disabled download-disabled","mt-5 cursor-pointer"]),onClick:s[0]||(s[0]=(..._)=>a.getDownloadFile&&a.getDownloadFile(..._))},Rl,2)):h("",!0)])):h("",!0),t("img",{class:"pl-10 cursor-pointer",src:X,onClick:s[1]||(s[1]=_=>e.$emit("closepopup","closeBasePopup"))})])]),jl])),p(c,{loadingStatus:i.loaderStatus},null,8,["loadingStatus"])])}const Wl=x(Ml,[["render",ql],["__scopeId","data-v-bb2ac941"]]),Gl="/static/images/icons/lms/State%201.svg",Kl={props:{regWatchprefTab:String,userAction:String,roleId:Number,account_id:Number},components:{Loader:E,ProfileMenu:li,ProfilePopup:Co,ViewAllProgressVerticalCommon:Cs,Team:Sl,PurchaseHistory:Dl,CommonHeader:Wl,VirtualTour:Uo},data(){return{holdRoute:"",profileMenuClicked:"",header:"",subheader:"",breadcrumb:"",activeTab:"",closeSubPage:"",displaySubheader:!0,displayDownloadBtn:!1,loaderStatus:!1,dashboardCustomizable:null,isDashboardCustomizable:!1,selectedViewAllList:[],selectedCardType:"",selectedLatesActivity:"",iltProgress:{},iltLatestActivity:null,userId:"",ilts:{purchased:[],available:[]},eLearningLatesActivity:null,eLearningProgress:{},purchasedELearnings:[],eLearningSelectedLatesActivity:[],eLearningViewAllList:{}}},async created(){this.userId=JSON.parse(localStorage.getItem("userId"))},async mounted(){await this.getAllTrainigsData(),this.emitter.on("selectedMenu",e=>{this.menuClicked(e)}),this.emitter.on("menuSelected",e=>{this.menuClicked(e)}),f("#basePopup").on("hidden.bs.modal",()=>{f(".modal-backdrop").remove()}),this.viewAllProgress()},watch:{userAction(){this.userAction&&this.menuClicked(this.userAction)}},methods:{redirectProfile(e){e==="closeBasePopup"?this.reset():this.redirectRoute(this.holdRoute)},validateConfirmPopUp(){return!(this.activeTab==="profile"&&!this.$refs.profilePopUp.disableButtonForProfile)},reset(){this.holdRoute="",this.activeTab="",this.profileMenuClicked=!1,this.$emit("popUpClosed"),f("#basePopup").modal("hide")},closepopup(e){this.validateConfirmPopUp()?(this.$route.path==="/projectplans"&&(this.reset(),this.$router.go()),this.reset()):this.$refs.profilePopUp.toggleConfirmPopUp(e)},async menuClicked(e){await this.getAllTrainigsData(),this.viewAllProgress(),this.holdRoute=e,this.validateConfirmPopUp()?this.redirectRoute(e):this.$refs.profilePopUp.toggleConfirmPopUp()},redirectRoute(e){this.activeTab=e,this.profileMenuClicked=e,e==="team"&&this.emitter.emit("resetTeams"),e==="Purchase History"&&(this.displayDownloadBtn=!0),this.validateLogout(e)&&(this.validateHeader(e),this.updateBreadCrumb(!1))},validateHeader(e){this.header=e,this.subheader=e,e!=="profile"&&e!=="tour"?(this.header="Account Settings",this.displaySubheader=!0):e==="tour"?(this.header="Virtual Tour",this.displaySubheader=!1):this.displaySubheader=!1},updateBreadCrumb(e){this.breadcrumb=e,this.closeSubPage=""},validateLogout(e){return e==="logout"?(this.loaderStatus=!0,this.$emit("logoutUser"),!1):!0},closePage(){this.closeSubPage="close"},getPageName(e){this.menuClicked(e)},async getAllTrainigsData(){this.loaderStatus=!0,await Promise.all([this.getELearnings(),this.getiltLatestActivity()]),this.loaderStatus=!1},async getELearnings(){const e=await at();this.eLearningProgress=e.lms_course_progress,this.eLearningLatesActivity=this.eLearningProgress.latest_activity,this.purchasedELearnings=e.lms_user_course_list.filter(s=>s.course_status!=="Not Enrolled")},async getiltLatestActivity(){const[e,s]=await Promise.all([rt(this.userId),lt()]),o=[...e.online_ilt,...e.pre_recorded_il_t];this.ilts.purchased=o.filter(l=>l.enrolled),this.ilts.available=o.filter(l=>!l.enrolled),this.iltProgress=s,this.iltLatestActivity=s.latest_activity},viewAllProgress(){this.eLearningViewAllList=this.eLearningProgress.all_course_progress,this.eLearningSelectedLatesActivity=this.eLearningLatesActivity,this.selectedViewAllList=this.iltProgress.all_course_progress,this.selectedLatesActivity=this.iltLatestActivity}}},Ql={id:"basePopup",class:"modal fade",role:"dialog"},Zl={class:"modal-dialog modal-lg custom-modal-class"},Xl={class:"modal-content"},en={class:"modal-body"},tn={class:"pop_wrapper"},sn={id:"left"},on={id:"right"},an={key:2,class:"trainings-acc-popup d-flex"},rn={key:0,class:"ml-20 text-h4"},ln=q('<div class="d-flex" data-v-cf03b391><img class="no-learnings-image" src="'+Gl+'" alt="" data-v-cf03b391><div class="purchased-text mt-20" data-v-cf03b391> Earn certificates in HF for Medical Technology <div class="mt-10" data-v-cf03b391><span class="black-3 font-14" data-v-cf03b391> Take our <a href="/market-place/training" data-v-cf03b391>training courses</a> and work your way to a certification in <br data-v-cf03b391>applying HF to Medical technology. </span></div></div></div>',1),nn=[ln];function cn(e,s,o,l,i,a){const c=m("profile-menu"),_=m("common-header"),d=m("profile-popup"),v=m("ViewAllProgressVerticalCommon"),u=m("team"),k=m("virtual-tour"),H=m("purchase-history"),Z=m("loader");return r(),n("div",null,[t("div",Ql,[t("div",Zl,[t("div",Xl,[t("div",en,[t("div",tn,[t("div",sn,[p(c,{roleId:o.roleId,onMenuClicked:a.menuClicked,activeTab:i.activeTab,isDashboardCustomizable:i.isDashboardCustomizable},null,8,["roleId","onMenuClicked","activeTab","isDashboardCustomizable"])]),t("div",on,[i.profileMenuClicked!=="logout"?(r(),I(_,{key:0,onClosepopup:a.closepopup,onEmitCloseEvent:a.closePage,onChangePage:a.getPageName,roleId:o.roleId,displaySubheader:i.displaySubheader,displayDownloadBtn:i.displayDownloadBtn,header:i.header,subheader:i.subheader,breadcrumb:i.breadcrumb,isDashboardCustomizable:i.isDashboardCustomizable},null,8,["onClosepopup","onEmitCloseEvent","onChangePage","roleId","displaySubheader","displayDownloadBtn","header","subheader","breadcrumb","isDashboardCustomizable"])):h("",!0),i.profileMenuClicked=="profile"?(r(),I(d,{key:1,ref:"profilePopUp",onClosedConfirmPopup:a.redirectProfile,onClosepopup:a.closepopup,onEmitBreadCrumb:a.updateBreadCrumb,closeSubPage:i.closeSubPage},null,8,["onClosedConfirmPopup","onClosepopup","onEmitBreadCrumb","closeSubPage"])):h("",!0),i.profileMenuClicked=="trainings"?(r(),n("div",an,[i.eLearningSelectedLatesActivity?(r(),I(v,{key:1,viewAllProgressList:i.eLearningViewAllList,selectedCardType:"eLearning",latestActivity:i.eLearningSelectedLatesActivity},null,8,["viewAllProgressList","latestActivity"])):(r(),n("div",rn,nn))])):h("",!0),i.profileMenuClicked=="team"?(r(),I(u,{key:3,onClosepopup:a.closepopup,onEmitBreadCrumb:a.updateBreadCrumb,roleId:o.roleId,closeSubPage:i.closeSubPage},null,8,["onClosepopup","onEmitBreadCrumb","roleId","closeSubPage"])):h("",!0),i.profileMenuClicked=="tour"?(r(),I(k,{key:4,onClosepopup:a.closepopup,roleId:o.roleId},null,8,["onClosepopup","roleId"])):h("",!0),i.profileMenuClicked=="Purchase History"?(r(),I(H,{key:5,onClosepopup:a.closepopup,roleId:o.roleId},null,8,["onClosepopup","roleId"])):h("",!0)])])])]),p(Z,{loadingStatus:i.loaderStatus},null,8,["loadingStatus"])])])])}const dn=x(Kl,[["render",cn],["__scopeId","data-v-cf03b391"]]);async function un(e){let s;return await O.post("https://backend.opus.emergobyul.com/services/user/addHfeQuestion",e).then(o=>{s=o.data}).catch(o=>{console.log("askUsHFE java api error",o)}),s}const se="/static/images/icons/modal_close.svg",mn={data(){return{askSubject:"",askMessage:"",loaderStatus:!1}},components:{Loader:E,BaseButton:L},methods:{closeAskUs(){this.resetForm(),f("#ask-us-modal").modal("hide")},resetForm(){this.askSubject="",this.askMessage=""},async askHfeQuestion(){this.loaderStatus=!0;const e={subject:this.askSubject,detail_description:this.askMessage},s=await un(e);if(s){const o=JSON.parse(localStorage.getItem("userData")),l={first_name:o.first_name,last_name:o.last_name,email:o.email,company:o.company,unstandardized_country:o.country,Last_Interest:"Human Factors Research & Design",page_urlextended:window.location.href,page_urlreferral_extended:document.referrer,o_psinquiry_type:"Sales",form_control:"Contact",form_control_details:"Ask us an HFE question",customer_comments:`Subject: ${e.subject}; Comments: ${e.detail_description}`};pe(l),this.$notify({type:"success",title:"Success",text:s.data}),this.closeAskUs()}else s===void 0?this.$notify({type:"error",title:"Error",text:"Subject/Message should not be null"}):this.$notify({type:"error",title:"Error",text:s.data});this.loaderStatus=!1}}},G=e=>(C("data-v-34715bab"),e=e(),P(),e),hn={id:"ask-us-modal",class:"modal",role:"dialog"},pn={class:"modal-dialog modal-lg custom-modal-class"},_n={class:"modal-content col-xs-12 p-20"},gn={class:"modal-header"},fn={class:"col-xs-12 p-0 mb-10"},vn=G(()=>t("span",{class:"ask-us-header"}," Ask us an HFE question! ",-1)),bn={class:"row mb-20 mt-10"},yn=G(()=>t("div",{class:"col-xs-12 mb-10"},[t("p",{class:"ask-us-sub-header"},"Provide us more details"),t("p",{class:"ask-us-text"}," We are here to help any time you need a little extra HFE input or support. We are pleased to answer your technical HFE questions or help you navigate an HFE challenge. "),t("p",{class:"ask-us-text"}," You’ll receive an email response from one of our HFE specialists within two business days. ")],-1)),wn={class:"col-xs-12 mb-10"},kn=G(()=>t("label",null,"Subject",-1)),xn=G(()=>t("span",{style:{color:"red"}},"*",-1)),Sn={class:"form-group"},In={class:"col-xs-12 mb-10"},Cn=G(()=>t("label",null,"Message",-1)),Pn=G(()=>t("span",{style:{color:"red"}},"*",-1)),Tn={class:"col-xs-12 p-0"},$n={class:"footer col-xs-12 flex-wrapper align-items-center xs-flex-column col-gap-20"};function Ln(e,s,o,l,i,a){const c=m("BaseButton"),_=m("loader");return r(),n("div",null,[t("div",hn,[t("div",pn,[t("div",_n,[t("div",gn,[t("div",fn,[vn,t("img",{class:"cursor-pointer close-modal",onClick:s[0]||(s[0]=(...d)=>a.closeAskUs&&a.closeAskUs(...d)),src:se,alt:""})])]),t("div",bn,[yn,t("div",wn,[kn,xn,t("div",Sn,[M(t("input",{type:"text",class:"form-control common-input",maxlength:"249",placeholder:"Subject","onUpdate:modelValue":s[1]||(s[1]=d=>i.askSubject=d)},null,512),[[F,i.askSubject]])])]),t("div",In,[Cn,Pn,t("div",Tn,[M(t("textarea",{class:"form-control",style:{resize:"none"},rows:"4",cols:"20",maxlength:"2000",placeholder:"Tell us more about your HFE question...","onUpdate:modelValue":s[2]||(s[2]=d=>i.askMessage=d)},null,512),[[F,i.askMessage]])])])]),t("div",$n,[p(c,{onClick:a.closeAskUs,variant:"secondary",size:"lg"},{default:w(()=>[b(" Cancel ")]),_:1},8,["onClick"]),t("div",null,[p(c,{size:"lg",onClick:s[3]||(s[3]=d=>a.askHfeQuestion())},{default:w(()=>[b(" Submit ")]),_:1})])])]),p(_,{loadingStatus:i.loaderStatus},null,8,["loadingStatus"])])])])}const Dn=x(mn,[["render",Ln],["__scopeId","data-v-34715bab"]]),Ne="/static/images/icons/chevron_up.svg",fe="/static/images/icons/askus_hfe.svg",Mn="/static/images/logos/line.png",Oe="/static/images/icons/profile_icon.svg",Be="/static/images/icons/settings_icon.svg",En="/static/images/icons/virtual_tour.svg",Fe="/static/images/icons/logout_icon.svg",An={components:{BasePopup:dn,askUsModal:Dn,Loader:E},props:{accountsList:Array,roleId:Number,displaySide:Boolean,account_id:Number},data(){return{regWatchprefTab:"",userAction:"",loggedInUser:{},errors:[],loggedInInitials:"",imageData:"",loggedInInitialsFlag:!1,activeMenuTitle:"",isDashboardCustomizable:!1,loggedInUserTitle:"",loaderStatus:!1,isAskUs:!0,phpData:{}}},watch:{displaySide(e){f(document.body).addClass("disableBodyScroll"),e||(f(document.body).removeClass("disableBodyScroll"),f("#userProfileSettings").hasClass("collapsed")||f("#userProfileSettings").trigger("click"))},async $route(){this.$route.name==="Dashboard"&&await this.checkDashboardCustomizable(),this.isAskUs=!0}},methods:{async addLogoutLog(){const e=await Le();e?this.$notify({type:"success",title:"Success",text:e.data}):this.$notify({type:"error",title:"Error",text:e.data})},openAskUsModal(){f("#ask-us-modal").modal("show")},async checkDashboardCustomizable(){this.isDashboardCustomizable=await No(JSON.parse(localStorage.getItem("userData")).account_id,JSON.parse(localStorage.getItem("userData")).role_id)},popUpClosed(){this.userAction==="profile"&&this.emitter.emit("updateProfile",!0),this.userAction="",f("#basePopup").modal("hide")},openPopup(e){this.regWatchprefTab="",this.userAction=e,e==="tour"&&this.$emit("mobilesidebar"),f("#basePopup").modal({backdrop:"static",keyboard:!1})},async logout(){this.loaderStatus=!0,await this.addLogoutLog(),this.finalLogout(),this.loaderStatus=!1},goToReleaseNotes(){this.$router.push({name:"ReleaseNotes"})},finalLogout(){document.cookie="Authorization=;expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/",document.cookie="redirect_url=;expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/",localStorage.clear(),this.$router.push("/login")},getInitials(e,s){return`${e?e.charAt(0).toUpperCase():""}${s?s.charAt(0).toUpperCase():""}`},loadProfile(){this.loggedInUser=JSON.parse(localStorage.getItem("userData")),this.imageData=this.loggedInUser.user_image,this.imageData===""||this.imageData===null?this.loggedInInitialsFlag=!0:this.loggedInInitialsFlag=!1,this.loggedInInitials=this.loggedInUser?this.getInitials(this.loggedInUser.first_name,this.loggedInUser.last_name):"",this.setupLoggedInUserTitle(),this.emitter.emit("getProfileDetails",this.loggedInUser)},setupLoggedInUserTitle(){let e="",s=15;window.innerWidth<1230?s=8:window.innerWidth<1441?s=11:window.innerWidth<1700?s=12:window.innerWidth<2160&&(s=14),this.loggedInUser.first_name.length>16?e=`${this.loggedInUser.first_name.substr(0,s)}..`:e=this.loggedInUser.first_name,this.loggedInUser.last_name.length>16?e+=` ${this.loggedInUser.last_name.substr(0,s)}..`:e+=` ${this.loggedInUser.last_name}`,this.loggedInUserTitle=e},logoutUser(){this.logout()},storageEventListener(){localStorage.getItem("reLoad")&&localStorage.getItem("reLoad")==="true"&&(window.location.href=`${window.location.origin}/home`),localStorage.length<=0&&this.$router.push("/login")},openAskUsRedirect(){this.isAskUs=!0,this.phpData.message==="hf-validation-test-report-template"?this.$router.push("/schedule-consulting/conduct-hf-validation-test?consultingId=19"):this.phpData.message==="hf-validation-test-protocol-template"?this.$router.push("/schedule-consulting/review-and-provide-feedback-on-hf-validation-test-protocol?consultingId=17"):this.phpData.message==="formative-usability-test-protocol-template"&&this.$router.push("/schedule-consulting/conduct-formative-usability-test?consultingId=14")},async handleMessageEvent(e){return e.origin!=="https://opusprodphp.opus.emergobyul.com"||(this.phpData=JSON.parse(e.data),this.phpData&&(this.phpData.message==="hf-validation-test-report-template"||this.phpData.message==="formative-usability-test-protocol-template"||this.phpData.message==="hf-validation-test-protocol-template")?this.isAskUs=!1:this.isAskUs=!0),null}},computed:{customMessage(){if(this.phpData.message==="hf-validation-test-report-template")return"validation";if(this.phpData.message==="formative-usability-test-protocol-template")return"formative";if(this.phpData.message==="hf-validation-test-protocol-template")return"protocol"}},async created(){const e=document.cookie.replace(/(?:(?:^|.*;\s*)RequestedPath\s*\=\s*([^;]*).*$)|^.*$/,"$1");e!=null&&e.length>0&&(document.cookie="RequestedPath=; expires=Thu, 01 Jan 1970 00:00:00 GMT",this.$router.push(e)),this.emitter.on("activeMenuTitle",s=>{this.activeMenuTitle=s}),this.activeMenuTitle=this.$route.meta.title,this.emitter.on("updateProfile",()=>{this.loadProfile()}),this.emitter.on("openAccountSettingsPopup",s=>{this.openPopup(s)}),await this.checkDashboardCustomizable()},mounted(){this.loadProfile(),window.addEventListener("storage",this.storageEventListener,!1),this.emitter.on("notificationSettings",e=>{this.regWatchprefTab="RegWatch",this.userAction=e,f("#basePopup").modal({backdrop:"static",keyboard:!1})}),window.addEventListener("resize",this.setupLoggedInUserTitle),window.addEventListener("message",this.handleMessageEvent,!1)},unmounted(){window.removeEventListener("message",this.handleMessageEvent)},beforeDestroy(){window.removeEventListener("resize",this.setupLoggedInUserTitle),window.removeEventListener("storage",this.storageEventListener)}},$=e=>(C("data-v-85793be2"),e=e(),P(),e),Un={class:"content-ht"},Nn={class:"main-header"},On={class:"media-sidebar"},Bn={class:"page-description txt-alg-rt mr-tp-10"},Fn={class:"mobile-user-info txt-alg-rt mr-tp-10"},Rn={class:"userProfileDropDownMobile collapsed parentCollapse",id:"userProfileSettings",href:"#settingsDropDown","data-toggle":"collapse"},jn=$(()=>t("img",{src:Ne,class:"downCarret mr-lt-4"},null,-1)),Hn=$(()=>t("img",{src:Ne,class:"upCarret mr-lt-4"},null,-1)),Vn=["src"],Yn={key:1,class:"profilePicMobile profilePicTitle"},zn=q('<img src="'+fe+'" data-v-85793be2><li class="li-askus" data-v-85793be2>Ask us an HFE question!</li><li class="li-askus d-none" data-v-85793be2><p class="li-askus-text" data-v-85793be2>Ask us an HFE question!<span class="li-askus-subtext" data-v-85793be2>Explore protocol support options in Consulting</span></p></li>',3),Jn=[zn],qn={class:"logo_wrapper text-center"},Wn=$(()=>t("svg",{width:"28",height:"20",viewBox:"0 0 28 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("line",{x1:"1",y1:"1",x2:"27",y2:"1",stroke:"#0B3C61","stroke-width":"2","stroke-linecap":"round"}),t("line",{x1:"1",y1:"10",x2:"27",y2:"10",stroke:"#0B3C61","stroke-width":"2","stroke-linecap":"round"}),t("line",{x1:"1",y1:"19",x2:"27",y2:"19",stroke:"#0B3C61","stroke-width":"2","stroke-linecap":"round"})],-1)),Gn=[Wn],Kn={key:0},Qn=$(()=>t("img",{class:"logo-img",src:Pe},null,-1)),Zn={key:1,class:"logo-mobile-alignment"},Xn=$(()=>t("img",{class:"logo-img",src:Pe},null,-1)),ec={class:"body-wrapper d-flex justify-content-between"},tc={class:"col-lg-7 col-md-7 col-sm-6",style:{"padding-left":"0px"}},sc=$(()=>t("div",{class:"col-md-1 col-sm-1 separator-line"},[t("img",{src:Mn,alt:""})],-1)),ic={class:"col-md-11 col-sm-11 company_title"},oc={class:"page-description pd-lt-20"},ac={class:"page-subheading pd-lt-20"},rc={class:"col-lg-8 col-md-8 col-sm-8"},lc={class:"help-support"},nc={key:0,class:"section-support-info"},cc=$(()=>t("img",{src:fe},null,-1)),dc=$(()=>t("li",{class:"li-askus"},"Ask us an HFE question!",-1)),uc=[cc,dc],mc=$(()=>t("img",{src:fe},null,-1)),hc={class:"li-askus"},pc={class:"li-askus-text"},_c={class:"li-askus-subtext"},gc={class:"userProfileDropDown"},fc={class:"dropdown dropdown-export openOnHover mr-lt-4"},vc=$(()=>t("div",{class:"dropdown-toggle upanddown-arrow",id:"menu0","data-toggle":"dropdown"},null,-1)),bc={class:"dropdown-menu dropdown-menu-right dropdown-settings notify"},yc=q('<a class="flex" data-v-85793be2><div class="inline-flex" data-v-85793be2><img class="img-size" src="'+Oe+'" alt data-v-85793be2></div><div class="settings-title" data-v-85793be2><div class="li-title" data-v-85793be2>Profile</div></div></a>',1),wc=[yc],kc=q('<a class="flex" data-v-85793be2><div class="inline-flex" data-v-85793be2><img class="img-size" src="'+Be+'" alt="settings-icon" data-v-85793be2></div><div class="settings-title" data-v-85793be2><div class="li-title" data-v-85793be2>Account Settings</div></div></a>',1),xc=[kc],Sc=q('<a class="flex" data-v-85793be2><div class="inline-flex" data-v-85793be2><img class="img-size" src="'+En+'" alt data-v-85793be2></div><div class="settings-title" data-v-85793be2><div class="li-title" data-v-85793be2>Virtual Tour</div></div></a>',1),Ic=[Sc],Cc=q('<a class="flex" data-v-85793be2><div class="inline-flex" data-v-85793be2><img class="img-size" src="'+Ht+'" alt data-v-85793be2></div><div class="settings-title" data-v-85793be2><div class="li-title" data-v-85793be2>Release Notes</div></div></a>',1),Pc=[Cc],Tc=$(()=>t("div",{class:"inline-flex"},[t("img",{class:"img-size",src:Fe,alt:""})],-1)),$c=$(()=>t("div",{class:"settings-title"},[t("div",{class:"li-title"},"Logout")],-1)),Lc=[Tc,$c],Dc={key:1,class:"profile-pic profile-pic-title"},Mc={key:1,class:"section-support-info"},Ec=$(()=>t("ul",{class:"admin-title"},[t("li",{class:"admin-circle"}),t("li",null,"Admin")],-1)),Ac=[Ec],Uc={class:"mobileProfileSettings collapse",id:"settingsDropDown"},Nc={key:0,class:"mobileProfileSettingsDropDown border-bottom-property"},Oc=$(()=>t("img",{class:"img-size",src:Oe,alt:""},null,-1)),Bc=$(()=>t("span",{class:"mobilePrfSettingsTxt"},"Profile",-1)),Fc=[Oc,Bc],Rc={key:1,class:"mobileProfileSettingsDropDown border-bottom-property"},jc=$(()=>t("img",{class:"img-size",src:Be,alt:"settings-icon"},null,-1)),Hc=$(()=>t("span",{class:"mobilePrfSettingsTxt"},"Account Settings",-1)),Vc=[jc,Hc],Yc={class:"mobileProfileSettingsDropDown"},zc=$(()=>t("img",{class:"img-size",src:Fe,alt:""},null,-1)),Jc=$(()=>t("span",{class:"mobilePrfSettingsTxt"},"Logout",-1)),qc=[zc,Jc];function Wc(e,s,o,l,i,a){const c=m("router-link"),_=m("base-popup"),d=m("ask-us-modal"),v=m("loader");return r(),n("div",Un,[t("nav",Nn,[t("div",{class:g(["mobileHeader",{displayBlock:o.displaySide}])},[t("div",On,[t("div",Bn,y(i.loggedInUser.company),1),t("div",Fn,[t("span",Rn,[b(y(i.loggedInUser.first_name+" "+i.loggedInUser.last_name)+" ",1),jn,Hn]),i.loggedInInitialsFlag?h("",!0):(r(),n("img",{key:0,class:"profilePicMobile",src:i.imageData},null,8,Vn)),i.loggedInInitialsFlag?(r(),n("span",Yn,y(i.loggedInInitials),1)):h("",!0)]),o.roleId===1||o.roleId===12?(r(),n("ul",{key:0,class:"user-question-title",onClick:s[0]||(s[0]=(...u)=>a.openAskUsModal&&a.openAskUsModal(...u))},Jn)):h("",!0)])],2),t("div",qn,[t("span",{class:"burger-toggle",onClick:s[1]||(s[1]=u=>e.$emit("mobilesidebar"))},Gn),o.roleId===13?(r(),n("div",Kn,[p(c,{to:"/compliancewire-marketplace"},{default:w(()=>[Qn]),_:1})])):(r(),n("div",Zn,[p(c,{to:"/home"},{default:w(()=>[Xn]),_:1})]))]),t("div",ec,[t("div",tc,[sc,t("div",ic,[t("div",oc,y(i.loggedInUser.company),1),t("div",ac,y(i.activeMenuTitle),1)])]),t("div",rc,[t("div",lc,[o.roleId===1||o.roleId===12?(r(),n("div",nc,[i.isAskUs?(r(),n("ul",{key:0,class:"user-question-title",onClick:s[2]||(s[2]=(...u)=>a.openAskUsModal&&a.openAskUsModal(...u))},uc)):(r(),n("ul",{key:1,class:"user-question-title",onClick:s[3]||(s[3]=(...u)=>a.openAskUsRedirect&&a.openAskUsRedirect(...u))},[mc,t("li",hc,[t("p",pc,[b("Ask us an HFE question!"),t("span",_c,"Explore "+y(a.customMessage)+" support options in Consulting",1)])])]))])):h("",!0),t("div",{class:g(["section-support-info",{"margin-neg-4":o.roleId!==13}])},[t("ul",{class:g(["pd-lt-0",{"mt-7":o.roleId===5||o.roleId===7||o.roleId===11}])},[t("li",gc,[b(y(i.loggedInUserTitle)+" ",1),t("div",fc,[vc,t("ul",bc,[o.roleId!=10?(r(),n("li",{key:0,onClick:s[4]||(s[4]=u=>a.openPopup("profile"))},wc)):h("",!0),o.roleId!==4&&o.roleId!==10&&o.roleId!==13?(r(),n("li",{key:1,onClick:s[5]||(s[5]=u=>a.openPopup("team"))},xc)):h("",!0),o.roleId!==13?(r(),n("li",{key:2,onClick:s[6]||(s[6]=u=>a.openPopup("tour"))},Ic)):h("",!0),o.roleId!==13?(r(),n("li",{key:3,onClick:s[7]||(s[7]=(...u)=>a.goToReleaseNotes&&a.goToReleaseNotes(...u))},Pc)):h("",!0),t("li",null,[t("a",{class:"flex",onClick:s[8]||(s[8]=(...u)=>a.logout&&a.logout(...u))},Lc)])])])]),i.loggedInInitialsFlag?h("",!0):(r(),n("li",{key:0,class:"profile-pic avatar-background",style:ne({backgroundImage:"url("+i.imageData+")"})},null,4)),i.loggedInInitialsFlag?(r(),n("li",Dc,y(i.loggedInInitials),1)):h("",!0)],2)],2),o.roleId===5||o.roleId===7||o.roleId===11?(r(),n("div",Mc,Ac)):h("",!0)])])])]),t("div",Uc,[o.roleId!=10?(r(),n("div",Nc,[t("span",{onClick:s[9]||(s[9]=u=>a.openPopup("profile")),class:"cursor_pointer"},Fc)])):h("",!0),o.roleId!==4&&o.roleId!==10&&o.roleId!==12?(r(),n("div",Rc,[t("span",{onClick:s[10]||(s[10]=u=>a.openPopup("notifications")),class:"cursor_pointer"},Vc)])):h("",!0),t("div",Yc,[t("span",{onClick:s[11]||(s[11]=(...u)=>a.logout&&a.logout(...u)),class:"cursor_pointer"},qc)])]),p(_,{regWatchprefTab:i.regWatchprefTab,userAction:i.userAction,onPopUpClosed:a.popUpClosed,onLogoutUser:a.logoutUser,account_id:o.account_id,roleId:o.roleId},null,8,["regWatchprefTab","userAction","onPopUpClosed","onLogoutUser","account_id","roleId"]),p(d),p(v,{loadingStatus:i.loaderStatus},null,8,["loadingStatus"])])}const Gc=x(An,[["render",Wc],["__scopeId","data-v-85793be2"]]),Re="/static/images/dashboard/logo_tour.png",Kc={props:["displaySide","currentTour"],components:{BaseButton:L},data(){return{userData:{}}},methods:{emitEvent(){this.emitter.emit("tourStart")},async startTour(){f("#modal_welcome").modal("hide"),f("#modal_dashboard").modal({backdrop:"static",keyboard:!1}),await this.stopTour(),this.emitter.emit("highlightNav",this.currentTour.url)},async stopTour(){const e=JSON.parse(localStorage.getItem("userId")),o={id:JSON.parse(localStorage.getItem("tourId")),new_user:!1,user_id:e};await Jt(o),this.emitter.emit("highlightNav",this.$route.path)},async setupUserData(){this.userData=localStorage.getItem("userData")?JSON.parse(localStorage.getItem("userData")):await J()}},computed:{userName(){let e=this.userData.first_name,s=this.userData.last_name;return e&&e.length>16&&(e=`${e.substr(0,15)}..`),s&&s.length>16&&(s=`${s.substr(0,15)}..`),`${e} ${s}`}},mounted(){this.emitter.on("updateProfile",this.setupUserData),this.setupUserData()},beforeDestroy(){V.$off("updateProfile",this.setupUserData)}},ve=e=>(C("data-v-ab9cb88a"),e=e(),P(),e),Qc={class:"tour-popup"},Zc={class:"modal-dialog modal-md"},Xc={class:"modal-content"},ed={class:"modal-header"},td=ve(()=>t("img",{class:"img-responsive logo-rams",src:Re,alt:"rams-logo"},null,-1)),sd={class:"modal-body"},id={class:"body-txt"},od=ve(()=>t("p",{class:"body-txt sub-text"}," Walk through each feature using our guided tour. ",-1)),ad={class:"text-center"},rd=ve(()=>t("div",{class:"modal-footer"},null,-1));function ld(e,s,o,l,i,a){const c=m("router-link"),_=m("BaseButton");return r(),n("div",Qc,[t("div",{id:"modal_welcome",class:g(["modal welcome-modal",{displayBlock:o.displaySide}]),"data-backdrop":"static",role:"dialog"},[t("div",Zc,[t("div",Xc,[t("div",ed,[t("img",{src:se,class:"close-btn cursor-pointer","data-dismiss":"modal",onClick:s[0]||(s[0]=d=>a.stopTour())}),td]),t("div",sd,[t("p",id,"Welcome "+y(a.userName)+"!",1),od]),t("div",ad,[t("div",null,[p(c,{to:"/home"}),p(_,{type:"button",class:"mt-15",onClick:s[1]||(s[1]=d=>{a.startTour(),a.emitEvent()})},{default:w(()=>[b(" Start Tour ")]),_:1})]),t("div",null,[t("button",{type:"button",class:"btn btn-link skip-link","data-dismiss":"modal",onClick:s[2]||(s[2]=d=>a.stopTour())}," Skip Tour ")])]),rd])])],2)])}const nd=x(Kc,[["render",ld],["__scopeId","data-v-ab9cb88a"]]),cd={data(){return{currentOffset:null}},components:{BaseButton:L},props:["roleId","displayRep","currentTour","playNextTour","previousTour","showSElink","tourObjectLength","tourIndex"],watch:{currentTour(e){e.type==="Documents"&&this.emitter.emit("contentTypeChanged"),e.type==="Training"&&this.emitter.emit("contentTypeChangedBack");const s=f(".menu_item.active-icon.active");this.currentOffset=s.offset().top}},methods:{closePopup(){this.emitter.emit("tourEnd"),this.emitter.emit("highlightNav",this.$route.path)}},computed:{getModalContentPosition(){const e={Consulting:30,Notifications:-120,Marketplace:-120,"Contact Us":-80};return e[this.currentTour.type]?{bottom:`${e[this.currentTour.type]}px`}:{}}}},dd=e=>(C("data-v-055082d0"),e=e(),P(),e),ud={class:"tour-popup"},md={id:"modal_dashboard",class:"modal left modal-dashbrd",role:"dialog"},hd={class:"modal-dialog modal-md"},pd={class:"modal-body"},_d={class:"modal-header"},gd={class:"dashboard-heading"},fd=["src"],vd={key:0},bd=dd(()=>t("div",{src:"/static/images/dashboard/tour_banner.png",class:"header-swoop"},null,-1)),yd=["innerHTML"],wd=["innerHTML"],kd={class:"btn-next-div"},xd={class:"modal-footer"},Sd={class:"row tour-status"};function Id(e,s,o,l,i,a){const c=m("BaseButton");return r(),n("div",ud,[t("div",md,[t("div",hd,[t("div",{class:"modal-content",style:ne(a.getModalContentPosition)},[t("div",pd,[t("div",_d,[t("img",{src:se,class:"close-btn","data-dismiss":"modal",onClick:s[0]||(s[0]=(..._)=>a.closePopup&&a.closePopup(..._))}),t("div",gd,[t("img",{src:o.currentTour.image,alt:"",class:"tour-icon"},null,8,fd),o.currentTour.image?(r(),n("span",vd,y(o.currentTour.type),1)):h("",!0)]),bd]),t("div",null,[t("p",{class:"dashbrd-txt",innerHTML:o.currentTour.title},null,8,yd)]),t("div",{class:"list-item",innerHTML:o.currentTour.content},null,8,wd),t("div",kd,[t("div",{class:"modal-arrow",style:ne([{"border-color":`${o.currentTour.key===9?"transparent #4c9e45 transparent transparent":""}`,top:`${o.currentTour.key===0?10:i.currentOffset-85}px`}])},null,4),o.currentTour.key>=0?(r(),I(c,{key:0,variant:"secondary",size:"lg",class:"mr-16",onClick:s[1]||(s[1]=_=>o.previousTour())},{default:w(()=>[b(" Back ")]),_:1})):h("",!0),p(c,{size:"lg",onClick:s[2]||(s[2]=_=>o.playNextTour())},{default:w(()=>[b(" Next ")]),_:1})])]),t("div",xd,[t("div",Sd,[(r(!0),n(R,null,j(o.tourObjectLength,_=>(r(),n("span",{key:_,class:g(o.tourIndex===_-1?"active-round-button":"round-button")},null,2))),128))])])],4)])])])}const Cd=x(cd,[["render",Id],["__scopeId","data-v-055082d0"]]),Pd={props:["displaySide"],components:{BaseButton:L},data(){return{userData:{}}},methods:{endTour(){this.emitter.emit("tourEnd"),this.emitter.emit("highlightNav",this.$route.path)}}},be=e=>(C("data-v-c68feb02"),e=e(),P(),e),Td={class:"tour-popup"},$d={class:"modal-dialog modal-md"},Ld={class:"modal-content"},Dd={class:"modal-header"},Md=be(()=>t("img",{class:"img-responsive logo-rams",src:Re,alt:"rams-logo"},null,-1)),Ed=be(()=>t("div",{class:"modal-body"},[t("p",{class:"body-txt"},"Congratulations!"),t("p",{class:"body-txt sub-text"}," The tour is complete and you’re ready to take your HFE work to the next level. "),t("p",{class:"body-txt sub-text"}," Take this tour again any time by clicking on arrow next to your name in the upper right. ")],-1)),Ad={class:"text-center"},Ud=be(()=>t("div",{class:"modal-footer"},null,-1));function Nd(e,s,o,l,i,a){const c=m("BaseButton");return r(),n("div",Td,[t("div",{id:"modal_endtour",class:g(["modal welcome-modal",{displayBlock:o.displaySide}]),"data-backdrop":"static",role:"dialog"},[t("div",$d,[t("div",Ld,[t("div",Dd,[t("img",{src:se,class:"close-btn cursor-pointer","data-dismiss":"modal",onClick:s[0]||(s[0]=(..._)=>a.endTour&&a.endTour(..._))}),Md]),Ed,t("div",Ad,[p(c,{class:"mb-10","data-dismiss":"modal",onClick:s[1]||(s[1]=_=>a.endTour())},{default:w(()=>[b(" Close Tour ")]),_:1})]),Ud])])],2)])}const Od=x(Pd,[["render",Nd],["__scopeId","data-v-c68feb02"]]),Bd={components:{WelcomePopup:nd,RenderPopup:Cd,SuccessPopup:Od},props:["displayRep","showSElink"],data(){return{roleId:0,tourIndex:0,displayTour:!1,currentTour:{},tourObject:[{key:0,type:"Dashboard",title:"Central hub to access top resources",content:'<ul class="item-container"><li>View the latest HFE news and insights</li><li>View your progress on Training courses and certificate </li><li>Jump to a specific step in the HFE Process</li></ul>',url:"/home",image:"/static/images/icons/side-bar/dashboard.svg",clickValue:12},{key:1,type:"HFE Process",title:"Your guide through the six steps of the HFE process",content:"<ul><li>View an overview of each step and an explanation of why the step is required by regulators </li><li>Explore a list of all recommended tasks and deliverables for each step </li><li>Access resources that help you complete each task, including training, tools, documents, and readings</li></ul>",url:"/opusprocess",clickValue:67,image:"/static/images/icons/side-bar/hfe_process.svg"},{key:2,type:"Project Plans",title:"Track your progress on projects you’ve added to OPUS",content:"<ul><li>Check off completed tasks and deliverables (see Example Project to give it a try)</li><li>View a summary of your progress or download a PDF to share with your project team </li><li>Access guidance on how to complete each task and deliverable expected by regulators </li></ul>",url:"/projectplans",clickValue:125,image:"/static/images/icons/side-bar/project_plans.svg"},{key:3,type:"Training",title:"Deepen knowledge on essential HFE activities",content:"<ul><li>Take 8 courses on foundational topics, like use-related risk analysis and usability testing</li><li>Earn a Certificate in Applying HFE to Medical Technology</li><li>Take 10 courses on advanced HFE methods</li></ul>",url:"/trainings",clickValue:182,image:"/static/images/icons/side-bar/training.svg"},{key:4,type:"Documents",title:"Produce high-quality HFE documentation efficiently",content:"<ul><li>Access templates for pivotal HFE documents, such as the HF Validation Test Protocol and HFE Report </li><li>Access complete user profiles, use environment descriptions, URRAs, KPAs, and IFUs </li><li>Ensure your documentation aligns with the latest regulatory expectations and industry best practices </li></ul>",url:"/documents",clickValue:240,image:"/static/images/icons/side-bar/documents.svg"},{key:5,type:"Tools",title:"Accelerate HFE decisions with productivity tools",content:"<ul><li>Identify and document a root cause</li><li>Determine the right scope for an HFE project or usability test</li><li>Evaluate a user interface and discover design recommendations</li></ul>",url:"/tools",clickValue:298,image:"/static/images/icons/side-bar/tools.svg"},{key:6,type:"Consulting",title:"Learn about consulting and coaching services",content:"<ul><li>Access coaching on specific HFE activities, like moderating usability tests and analyzing root causes</li><li>Solve a design challenge with our user interface designers</li><li>Identify opportunities to improve the application of HFE across your organization </li></ul>",url:"/consulting",clickValue:353,image:"/static/images/icons/side-bar/consultings.svg"},{key:7,type:"Notifications",title:"View messages about your activity",content:"<ul><li>Receive confirmation when a purchase is processed</li><li>Receive confirmation when a project is created</li><li>Receive messages about changes to your account</li></ul>",url:"/notifications",clickValue:410,image:"/static/images/icons/side-bar/notification.svg"},{key:8,type:"Marketplace",title:"Purchase premium resources and subscriptions",content:"<ul><li>Request a quote for an individual, team, or enterprise subscription</li><li>Purchase premium training courses</li><li>Purchase premium tools and documents</li></ul>",url:"/market-place/add-service/0",clickValue:468,image:"/static/images/newMarketplace/basket.svg"},{key:9,type:"Contact Us",title:"Get in touch with our team. We’re eager to hear from you!",content:"<ul><li>Let us know if you encounter a problem using OPUS or to share feedback on your experience </li><li>Ask us questions about HFE and applying it to your company’s product development efforts </li><li>Learn more about how our HFE consulting team can support you </li></ul>",url:"/contact",clickValue:526,image:"/static/images/icons/side-bar/contact.svg"}]}},methods:{openWelcomePopup(){this.tourIndex=0,f("#modal_welcome").modal({backdrop:"static",keyboard:!1,show:!0}),this.currentTour=this.tourObject[this.tourIndex]},endTour(){f("#modal_accounts").modal("hide"),this.emitter.emit("closeDrpDwnAccount"),f("#modal_endtour").modal({backdrop:"static",keyboard:!1})},playNextTour(){this.tourIndex===this.tourObject.length-1?(f("#modal_dashboard").modal("hide"),this.currentTour={},this.emitter.emit("openDrpDwnAccount"),f("#modal_accounts").modal({backdrop:"static",keyboard:!1}),this.endTour()):(this.tourIndex+=1,this.currentTour=this.tourObject[this.tourIndex],this.emitter.emit("highlightNav",this.currentTour.url))},previousTour(){this.tourIndex===0||this.tourIndex===-1?(f("#modal_dashboard").modal("hide"),this.currentTour={},this.emitter.emit("closeMobileSideBar"),this.openWelcomePopup()):this.tourIndex===this.tourObject.length?(f("#modal_dashboard").modal({backdrop:"static",keyboard:!1}),f("#modal_accounts").modal("hide"),this.emitter.emit("closeDrpDwnAccount")):(this.tourIndex-=1,this.currentTour=this.tourObject[this.tourIndex],this.emitter.emit("highlightNav",this.currentTour.url))}},async mounted(){this.roleId=JSON.parse(localStorage.getItem("roleId"));const e=JSON.parse(localStorage.getItem("userId")),s=await qt(e);s&&(localStorage.setItem("tourId",JSON.stringify(s.id)),s.new_user===!0?this.displayTour=!0:this.displayTour=!1),this.emitter.on("displayTour",()=>{this.openWelcomePopup()}),this.displayTour&&this.openWelcomePopup(),this.emitter.on("openRender",()=>{this.tourIndex=this.tourObject.length-1,this.currentTour=this.tourObject[this.tourIndex],f("#modal_dashboard").modal({backdrop:"static",keyboard:!1}),f("#modal_accounts").modal("hide"),this.emitter.emit("closeDrpDwnAccount")})}};function Fd(e,s,o,l,i,a){const c=m("welcome-popup"),_=m("render-popup"),d=m("success-popup");return r(),n("div",null,[t("span",{onClick:s[0]||(s[0]=v=>a.openWelcomePopup()),class:"cursor-pointer"}),p(c,{currentTour:i.currentTour},null,8,["currentTour"]),p(_,{roleId:i.roleId,displayRep:o.displayRep,playNextTour:a.playNextTour,previousTour:a.previousTour,currentTour:i.currentTour,showSElink:o.showSElink,tourObjectLength:i.tourObject.length,tourIndex:i.tourIndex},null,8,["roleId","displayRep","playNextTour","previousTour","currentTour","showSElink","tourObjectLength","tourIndex"]),p(d)])}const Rd=x(Bd,[["render",Fd]]),jd={name:"UserConsentPopup",props:["optInType","showUserConsentNeverBtn","userId"],components:{Loader:E,BaseButton:L,OpusCheckbox:De,OpusLink:Me},data(){return{emailOptin:!1,dataConsent:!1,loading:!1,loaderStatus:!1,labels:{single:`By submitting this form, I agree to <a href="https://www.ul.com/resources/online-policies" target="_blank">Emergo by UL's Online Policies</a> and agree to receive periodic emails from Emergo by UL containing best practices, education, industry research, news, updates and promotions related to Emergo by UL's products and services. I understand that I can unsubscribe at any time by visiting our <a href="https://www.emergobyul.com/preference-center" target="_blank">Preference Center</a>.`,pipl1:`By clicking this checkbox, I agree to <a href="https://www.ul.com/resources/online-policies" target="_blank">Emergo by UL's Online Policies</a> and agree to receive periodic emails from Emergo by UL containing best practices, education, industry research, news, updates and promotions related to Emergo by UL's products and services. I understand that I can unsubscribe at any time by visiting our <a href="https://www.emergobyul.com/preference-center" target="_blank">Preference Center</a>.`,pipl2:`By clicking this checkbox, I agree Emergo by UL may process my personal information in accordance with the <a href="https://www.ul.com/resources/online-policies" target="_blank">Emergo by UL's Online Policies</a> and to the cross-border transfer of my personal information to the United States.`,double:`By submitting this form, I agree to <a href="https://www.ul.com/resources/online-policies" target="_blank">Emergo by UL's Online Policies</a>.`,double2:`I would like to receive periodic emails from Emergo by UL containing best practices, education, industry research, news, updates and promotions related to Emergo by UL's products and services. I understand that I can unsubscribe at any time by visiting our <a href="https://www.emergobyul.com/preference-center" target="_blank">Preference Center</a >.`}}},computed:{disableSubmit(){return(this.optInType==="single"||this.optInType==="double")&&!this.emailOptin||this.optInType==="pipl"&&!this.dataConsent}},methods:{successNotification:Xe,errorNotification:et,hideConsentPopup(){f("#user-consent").modal("hide")},async updateConsent(e){this.loaderStatus=!0;const s=await St(e);if(this.loaderStatus=!1,s&&s.message==="success"){if(this.optInType==="pipl"){this.successNotification("Email preference updated");const a={user_id:JSON.parse(localStorage.getItem("userId")),china_consent:!0};await It(a)}const o=JSON.parse(localStorage.getItem("userData")),l={first_name:o.first_name,last_name:o.last_name,email:o.email,company:o.company,unstandardized_country:o.country,page_urlextended:window.location.href,page_urlreferral_extended:document.referrer,Last_Interest:"Human Factors Research & Design",form_control:"Subscribe"};e==="Y"?(l.form_control_details="Emergo Talking Points",l.o_ps_newsletter_name="Emergo Talking Points",l.email_optin=!0):e==="N"?l.form_control_details="Never":e==="P"&&(l.form_control_details="Remind me later"),pe(l)}else this.errorNotification("We have a problem updating your preferences. Please try again later.");this.hideConsentPopup()}}},je=e=>(C("data-v-2fdddab0"),e=e(),P(),e),Hd={id:"user-consent",class:"modal",role:"dialog"},Vd={class:"modal-dialog modal-md"},Yd={class:"modal-content"},zd={class:"modal-header p-0"},Jd={class:"view-header"},qd={key:0,class:"text-h3"},Wd={key:1,class:"text-h3"},Gd=je(()=>t("hr",{style:{width:"96%"},class:"mx-auto"},null,-1)),Kd={class:"consent-title blue-1 text-h5"},Qd={key:0},Zd={key:1},Xd=["innerHTML"],eu=je(()=>t("hr",{style:{width:"96%"},class:"mx-auto m-0"},null,-1)),tu={class:"d-flex flex-column justify-content-center align-items-center footer"};function su(e,s,o,l,i,a){const c=m("OpusCheckbox"),_=m("BaseButton"),d=m("OpusLink"),v=m("loader");return r(),n("div",Hd,[t("div",Vd,[t("div",Yd,[t("div",zd,[t("div",Jd,[o.optInType==="pipl"?(r(),n("span",qd,"Terms and Conditions")):(r(),n("span",Wd,"Email Preferences")),o.optInType!=="pipl"?(r(),n("img",{key:2,"data-dismiss":"modal",class:"cursor-pointer close-icon pt-20",src:X,alt:"Close modal",onClick:s[0]||(s[0]=u=>a.updateConsent("P"))})):h("",!0)])]),Gd,t("template",null,[t("div",Kd,[o.optInType==="pipl"?(r(),n("span",Qd,"Please review and agree with the mandatory policies, terms and conditions added below to use the application further.")):(r(),n("span",Zd," Please update your email preferences below. Email communication helps us keep you informed. "))]),o.optInType==="single"?(r(),I(c,{key:0,modelValue:i.emailOptin,"onUpdate:modelValue":s[1]||(s[1]=u=>i.emailOptin=u),class:"consent-content text-regular-large black-2",html:i.labels.single},null,8,["modelValue","html"])):o.optInType==="pipl"?(r(),I(c,{key:1,modelValue:i.dataConsent,"onUpdate:modelValue":s[2]||(s[2]=u=>i.dataConsent=u),class:"consent-content text-regular-large black-2",html:i.labels.pipl2},null,8,["modelValue","html"])):o.optInType==="double"?(r(),n(R,{key:2},[t("div",{class:"consent-content text-regular-large black-2",innerHTML:i.labels.double},null,8,Xd),p(c,{modelValue:i.emailOptin,"onUpdate:modelValue":s[3]||(s[3]=u=>i.emailOptin=u),class:"consent-content text-regular-large black-2",html:i.labels.double2},null,8,["modelValue","html"])],64)):h("",!0),eu]),t("template",null,[t("div",tu,[p(_,{onClick:s[4]||(s[4]=u=>a.updateConsent("Y")),disabled:a.disableSubmit},{default:w(()=>[b("Submit ")]),_:1},8,["disabled"]),p(d,{size:"sm",class:g({"d-none":o.optInType==="pipl"}),onClick:s[5]||(s[5]=u=>a.updateConsent("P"))},{default:w(()=>[b("Skip for now")]),_:1},8,["class"])])])])]),p(v,{loadingStatus:i.loaderStatus},null,8,["loadingStatus"])])}const iu=x(jd,[["render",su],["__scopeId","data-v-2fdddab0"]]);async function ou(e){let s={};return await O.get(`https://backend.opus.emergobyul.com/services/userConsent/cosent/type/${e}`).then(o=>{o.status===200&&o.data&&(s=o.data.data)}).catch(o=>console.log("get user consent java api error",o)),s}async function He(){let e={};return await O.get("https://backend.opus.emergobyul.com/services/userSurvey/user").then(s=>{s.status===200&&s.data&&(e=s.data.data)}).catch(s=>console.log("get survey java api error",s)),e}async function au(e){let s={};return await O.post("https://backend.opus.emergobyul.com/services/userConsent/cosent",e).then(o=>{o.status===200&&o.data&&(s=o.data.data)}).catch(o=>console.log("get user consent java api error",o)),s}async function ru(e){const s=e[0],o=e[1];let l=null;return await O.put(`https://backend.opus.emergobyul.com/services/userSurvey/${s}`,o).then(i=>{i.status===200&&i.data&&(l=i.data)}).catch(i=>console.log("put user survey consent java api error",i)),l}async function lu(e){let s=null;return await O.put("https://backend.opus.emergobyul.com/services/userConsent/update",e).then(o=>{o.status===200&&o.data&&(s=o.data)}).catch(o=>console.log("put user consent java api error",o)),s}const nu={components:{Loader:E,OpusCheckbox:De,OpusLink:Me,BaseButton:L},props:["consentType","showUserConsentNeverBtnChina"],data(){return{emailOptin:!1,optInType:null,dataConsent:!1,loaderStatus:!1,labels:{single:'By clicking this checkbox, I agree to <a class="term-priv" href="https://www.ul.com/resources/online-policies" target="_blank" >Emergo by UL’s Online Policies </a> and agree to receive periodic emails from Emergo by UL Solutions containing best practices, education, industry research, news, updates and promotions related to Emergo by UL’s products and services. I understand that I can unsubscribe at any time by visiting our <a class="term-priv" href="https://www.emergobyul.com/preference-center" target="_blank" >Preference Center.</a>',double:'By clicking this checkbox, I agree Emergo by UL may process my personal information in accordance with the <a class="term-priv" href="https://www.ul.com/resources/online-policies" target="_blank" >Emergo by UL’s Online Policies </a> and to the cross-border transfer of my personal information to the United States.'}}},computed:{disableSubmit(){return!this.emailOptin||!this.dataConsent}},methods:{async updateConsent(e){this.loaderStatus=!0;const s={consent_type_id:this.consentType.id,consent:e},o=await lu(s);this.loaderStatus=!1,o&&o.status_code===200&&o.message==="success"?(this.clearNotifications(),this.$notify({type:"success",title:"Success",text:"Terms and conditions accepted.",group:"custom-notification"}),f("#chinaUserConsentPopup").modal("hide")):(this.clearNotifications(),this.$notify({type:"error",title:"Error",text:"We had a problem updating your consent. Please try again.",group:"custom-notification"}))},clearNotifications(){this.$notify({clear:!0,group:"custom-notification"})}}},ie=e=>(C("data-v-1aceb301"),e=e(),P(),e),cu={id:"chinaUserConsentPopup",class:"modal",role:"dialog"},du={class:"modal-dialog modal-md"},uu={class:"modal-content"},mu={class:"modal-header p-0"},hu={class:"view-header"},pu=ie(()=>t("span",{class:"text-h3"},"Email Preferences",-1)),_u=ie(()=>t("hr",{style:{width:"96%"},class:"mx-auto"},null,-1)),gu=ie(()=>t("div",{class:"consent-title blue-1 text-h5"},[t("span",null," Please update your email preferences below. Email communication helps us keep you informed. ")],-1)),fu=ie(()=>t("hr",{style:{width:"96%"},class:"mx-auto m-0"},null,-1)),vu={class:"d-flex flex-column justify-content-center align-items-center footer"};function bu(e,s,o,l,i,a){const c=m("OpusCheckbox"),_=m("BaseButton"),d=m("OpusLink"),v=m("loader");return r(),n("div",cu,[t("div",du,[t("div",uu,[t("div",mu,[t("div",hu,[pu,t("img",{"data-dismiss":"modal",class:"cursor-pointer close-icon pt-20",src:X,alt:"Close modal",onClick:s[0]||(s[0]=u=>a.updateConsent("P"))})])]),_u,t("template",null,[gu,t("template",null,[p(c,{modelValue:i.emailOptin,"onUpdate:modelValue":s[1]||(s[1]=u=>i.emailOptin=u),class:"consent-content text-regular-large black-2",html:i.labels.single},null,8,["modelValue","html"])]),t("template",null,[p(c,{modelValue:i.dataConsent,"onUpdate:modelValue":s[2]||(s[2]=u=>i.dataConsent=u),class:"consent-content text-regular-large black-2",html:i.labels.double},null,8,["modelValue","html"])]),fu]),t("template",null,[t("div",vu,[p(_,{onClick:s[3]||(s[3]=u=>a.updateConsent("Y")),disabled:a.disableSubmit},{default:w(()=>[b("Submit ")]),_:1},8,["disabled"]),p(d,{size:"sm",onClick:s[4]||(s[4]=u=>a.updateConsent("P"))},{default:w(()=>[b("Skip for now")]),_:1})])])])]),p(v,{loadingStatus:i.loaderStatus},null,8,["loadingStatus"])])}const yu=x(nu,[["render",bu],["__scopeId","data-v-1aceb301"]]),wu={components:{Loader:E,BaseButton:L},data(){return{emailOptin:!1,optInType:null,dataConsent:!1,loaderStatus:!1,surveyList:[],selectedSurveyList:[]}},computed:{},async created(){await this.getSurveyList()},methods:{async getSurveyList(){const e=await He();this.surveyList=e.survey_product_dtolist},async updateSurveyConsent(){this.loaderStatus=!0;const e=await ru(["Y",this.selectedSurveyList]);this.loaderStatus=!1,e&&e.status_code===200&&e.message==="success"?(this.clearNotifications(),this.$notify({type:"success",title:"Success",text:"Terms and conditions accepted.",group:"custom-notification"}),f("#chinaUserConsentPopup").modal("hide")):(this.clearNotifications(),this.$notify({type:"error",title:"Error",text:"We had a problem updating your consent. Please try again.",group:"custom-notification"}))},clearNotifications(){this.$notify({clear:!0,group:"custom-notification"})}}},oe=e=>(C("data-v-07ea722a"),e=e(),P(),e),ku={id:"surveyConsentPopup",class:"modal",role:"dialog"},xu={class:"modal-dialog modal-md"},Su={class:"modal-content"},Iu=oe(()=>t("div",{class:"modal-header p-0"},[t("div",{class:"view-header"},[t("span",{class:"text-h3"},"What resource made you interested in joining OPUS?")])],-1)),Cu=oe(()=>t("hr",{style:{width:"96%"},class:"mx-auto"},null,-1)),Pu={class:"d-flex survey-content consent-title"},Tu={class:"select-box d-flex align-items-center"},$u={class:"checkbox"},Lu=["value"],Du=oe(()=>t("span",{class:"cr"},[t("i",{class:"cr-icon glyphicon glyphicon-ok"})],-1)),Mu={class:"pl-10"},Eu=oe(()=>t("hr",{style:{width:"96%"},class:"mx-auto m-0"},null,-1)),Au={class:"d-flex flex-column justify-content-center align-items-center footer"};function Uu(e,s,o,l,i,a){const c=m("BaseButton"),_=m("loader");return r(),n("div",ku,[t("div",xu,[t("div",Su,[Iu,Cu,t("template",null,[t("div",Pu,[(r(!0),n(R,null,j(i.surveyList,d=>(r(),n("div",{key:d.id,class:""},[t("div",Tu,[t("div",$u,[t("label",null,[M(t("input",{type:"checkbox",value:d.id,"onUpdate:modelValue":s[0]||(s[0]=v=>i.selectedSurveyList=v)},null,8,Lu),[[tt,i.selectedSurveyList]]),Du])]),t("span",Mu,y(d.product),1)])]))),128)),Eu])]),t("template",null,[t("div",Au,[p(c,{"data-dismiss":"modal",onClick:a.updateSurveyConsent,disabled:i.selectedSurveyList.length<=0},{default:w(()=>[b("Submit ")]),_:1},8,["onClick","disabled"])])])])]),p(_,{loadingStatus:i.loaderStatus},null,8,["loadingStatus"])])}const Nu=x(wu,[["render",Uu],["__scopeId","data-v-07ea722a"]]),Ou="/static/images/icons/side-bar/dashboard.svg",Bu="/static/images/icons/side-bar/hfe_process.svg",Fu="/static/images/icons/side-bar/project_plans.svg",Ru="/static/images/icons/side-bar/documents.svg",ke="/static/images/icons/side-bar/tools.svg",ju="/static/images/icons/side-bar/consultings.svg",xe="/static/images/icons/side-bar/contact_bold.svg",Hu="/static/images/icons/side-bar/launchpad.svg",Vu={components:{TemplatePopup:Rd,UserConsentPopup:iu,ChinaUserConsentPopup:yu,SurveyPopup:Nu},props:{roleId:Number,userCompany:String,userName:String,userEmail:String,accountId:Number,userId:Number,displaySide:Boolean,rep_client:Boolean,account_type_id:Number,showSEFlag:Boolean},data(){return{projectsIdList:{},activeMenu:this.$route.path,errors:[],userData:{},newNotificationsCount:"",newNotificationCountFlag:!1,newNotificationCountText:0,timer:"",notificationCount:null,premiumServices:[],addedServices:[],navigationList:{},cartDetails:{},showUserConsentNeverBtn:!1,showUserConsentNeverBtnChina:!1,optInType:null,consentType:"",callChinaConsent:!1,surveyData:{}}},computed:{displayRep(){return this.roleId===5||this.roleId===7||this.account_type_id===2||this.account_type_id===4},showSElink(){return this.account_type_id===1&&(this.roleId===5||this.roleId===11)?!0:this.account_type_id===2&&(this.roleId===9||this.roleId===3||this.roleId===8||this.roleId===10)?this.showSEFlag:!1}},mounted(){window.addEventListener("message",this.handleMessageEvent,!1)},unmounted(){window.removeEventListener("message",this.handleMessageEvent)},methods:{async getUserConsent(){const e=await Ct(),s=await Pt();if(s&&s.display_consent){const o=e.find(l=>l.countries.some(i=>i.toLowerCase()===this.userData.country.toLowerCase()));this.optInType=o?o.opt_in:"",this.optInType==="pipl"&&this.callChinaConsent?(f("#chinaUserConsentPopup").modal({backdrop:"static",keyboard:!1}),this.showUserConsentNeverBtnChina=s.display_never):(f("#user-consent").modal({backdrop:"static",keyboard:!1}),this.showUserConsentNeverBtn=s.display_never)}},async getSurveyConsent(){const e=await He();this.surveyData.display_survey=e.display_survey,this.surveyData.display_never=e.display_never,this.surveyData.display_survey&&f("#surveyConsentPopup").modal({backdrop:"static",keyboard:!1})},async getChinaConsent(){if(this.callChinaConsent){const s=JSON.parse(localStorage.getItem("countryList")).find(l=>l.country_name.toLowerCase()===this.userData.country.toLowerCase()).id;this.consentType=await ou(s),await au({consent_type_id:1})&&f("#chinaUserConsentPopup").modal({backdrop:"static",keyboard:!1})}},subStrName(e){return e.length>15?`${e.substr(0,12)}...`:e},redirectfullServices(e){window.open(e,"_blank")},emitEvent(){this.$emit("mobilesidebar"),this.setupCartList()},showAlertPage(e){this.newNotificationCountFlag=!1,this.redirect(e)},redirect(e,s=null){if(s){const o=f(`#test${s}`).hasClass("in");Object.keys(this.projectsIdList).forEach(l=>{o?this.projectsIdList[l]=!0:this.projectsIdList[l]=+l===s})}e!==this.$route.path&&(e==="/projectplans"&&this.navigationList.projects&&this.navigationList.projects.forEach(o=>{this.projectsIdList[o.id]=!0,f(`#test${o.id}`).collapse("hide")}),this.$router.push(e))},async getNavigationlist(){this.navigationList=await Vt(),this.$route.meta.title==="Project Plans"&&!this.$route.params.id&&this.navigationList.projects&&this.navigationList.projects.forEach(e=>{this.projectsIdList[e.id]=!0}),this.$route.meta.title==="Project Plans"&&this.$route.params.id&&setTimeout(()=>{this.navigationList.projects&&this.navigationList.projects.forEach(e=>{e.id===+this.$route.params.id?(this.showAccordian(e.id),f(`#test${e.id}`).collapse("show")):this.projectsIdList[e.id]=!1})},0)},async handleMessageEvent(e){if(e.origin!=="https://opusprodphp.opus.emergobyul.com")return null;const s=JSON.parse(e.data);return s.channel==="hfe"&&s.event==="cart-items-updated"&&await this.setupCartList(),null},async setupCartList(){this.cartDetails=await _e(this.userId)},async getNotificationCount(){const e=await zt(this.userId);this.notificationCount=e.count},showAccordian(e){this.projectsIdList[e]=!0,this.$forceUpdate()}},async created(){const e=await Tt();this.callChinaConsent=e.china_consent,this.userData=localStorage.getItem("userData")?JSON.parse(localStorage.getItem("userData")):await J(),this.getChinaConsent(),this.emitter.on("cart-items-updated",this.setupCartList),this.emitter.on("get-notification-count",this.getNotificationCount),this.emitter.on("highlightNav",s=>{this.activeMenu=s}),await Promise.all([this.getNavigationlist(),this.setupCartList()]),this.$route.meta.title==="Project Plans"&&f("#collapseOne").collapse("show"),this.emitter.on("fetchCartList",async()=>{await this.setupCartList()}),await this.getUserConsent(),await this.getSurveyConsent(),await this.getNotificationCount(),this.emitter.on("tourStart",()=>{document.querySelector("#accordion").scrollBy(0,-500)}),this.emitter.on("contentTypeChanged",()=>{document.querySelector("#accordion").scrollBy(0,500)}),this.emitter.on("contentTypeChangedBack",()=>{document.querySelector("#accordion").scrollBy(0,-500)}),this.emitter.on("tourEnd",()=>{document.querySelector("#accordion").scrollBy(0,-500)})},watch:{$route(e){this.activeMenu=e.path,this.emitter.emit("activeMenuTitle",e.meta.title)},activeMenu(){this.getNotificationCount(),this.emitter.on("highlightNav",e=>{this.activeMenu=e}),this.$route.meta.title==="Project Plans"?f("#collapseOne").collapse("show"):(f("#collapseOne").collapse("hide"),Object.keys(this.projectsIdList).forEach(e=>{f(`#test${e}`).collapse("hide"),this.showAccordian(e)}))}},beforeDestroy(){clearInterval(this.timer),V.$off("cart-items-updated",this.setupCartList)}},A=e=>(C("data-v-abdf34c3"),e=e(),P(),e),Yu={class:"row"},zu={class:"col-sm-3 col-md-3 sidebar-content"},Ju=A(()=>t("a",{href:"javascript:void(0);"},[t("span",{class:"content"},"Dashboard")],-1)),qu=A(()=>t("a",{href:"javascript:void(0);"},[t("span",{class:"content"},"HFE Process")],-1)),Wu={id:"accordion",style:{"margin-top":"1px"}},Gu=A(()=>t("span",{class:"content ml-20 main-list-header project-plan-text"},"Project Plans",-1)),Ku={id:"collapseOne",class:"panel-collaspse collapse col-xs-12 p-0","data-parent":"#accordion"},Qu={class:"accordian",id:"accordion-two"},Zu=["data-target"],Xu={key:0},em=["onClick"],tm=["id"],sm={class:"card-body"},im=["onClick"],om={class:"col-xs-12 p-0 flex-wrapper"},am=["src"],rm={class:"pl-20"},lm=A(()=>t("a",{href:"javascript:void(0);"},[t("span",{class:"content"},"Training")],-1)),nm=A(()=>t("a",{href:"javascript:void(0);"},[t("span",{class:"content"},"Documents")],-1)),cm=A(()=>t("a",{href:"javascript:void(0);"},[t("span",{class:"content"},"Tools")],-1)),dm=A(()=>t("a",{href:"javascript:void(0);"},[t("span",{class:"content"},"KPA")],-1)),um=A(()=>t("a",{href:"javascript:void(0);"},[t("span",{class:"content"},"Consulting")],-1)),mm={key:0,class:"notification-count"},hm={href:"javascript:void(0);"},pm={class:"p-relative"},_m={key:0,class:"cart-count"},gm=A(()=>t("a",{href:"javascript:void(0);"},[t("span",{class:"content"},"Marketplace")],-1)),fm=A(()=>t("a",{href:"javascript:void(0);"},[t("span",{class:"content"},"Contact Us")],-1)),vm={key:1,class:"menu mt-25"},bm=A(()=>t("li",null,[t("h5",{class:"main-content-service mb-10"},"Admin")],-1)),ym=A(()=>t("a",{href:"javascript:void(0);"},[t("span",{class:"content"},"Launch pad")],-1)),wm={key:2,class:"menu mt-25"},km=A(()=>t("a",{href:"javascript:void(0);"},[t("span",{class:"content"},"Market Place")],-1)),xm=A(()=>t("a",{href:"javascript:void(0);"},[t("span",{class:"content"},"Contact Us")],-1));function Sm(e,s,o,l,i,a){const c=m("UserConsentPopup"),_=m("template-popup"),d=m("china-user-consent-popup"),v=m("survey-popup");return r(),n("div",null,[t("nav",{class:g(["navbar nav-bar-class",{displayNav:!o.displaySide}])},[t("div",null,[t("aside",null,[t("section",null,[t("div",Yu,[t("div",zu,[t("div",{class:g(["sidebar-col",{displaySide:o.displaySide,"theme-admin":o.roleId===5||o.roleId===7||o.roleId===11}])},[o.roleId&&o.roleId!=4&&o.roleId!=10&&o.roleId!=13?(r(),n("ul",{key:0,class:g([[5,7,11].includes(o.roleId)?"primary-list-admin":"primary-list"]),id:"accordion",style:{"margin-top":"15px"}},[t("li",{class:g(["menu_item active-icon",{active:i.activeMenu.indexOf("home")!=-1}]),onClick:s[0]||(s[0]=u=>{a.redirect("/home"),a.emitEvent()})},[t("img",{class:g(["img-24",{"invert-img":i.activeMenu.indexOf("home")==-1}]),src:Ou,alt:""},null,2),Ju],2),t("li",{class:g(["menu_item active-icon",{active:i.activeMenu.indexOf("opusprocess")!=-1}]),onClick:s[1]||(s[1]=u=>{a.redirect("/opusprocess"),a.emitEvent()})},[t("img",{class:g(["img-24",{"invert-img":i.activeMenu.indexOf("opusprocess")==-1}]),src:Bu,alt:""},null,2),qu],2),t("li",null,[t("ul",Wu,[t("li",{class:g(["p-relative panel main-content menu_item active-icon has-sub-list",{active:i.activeMenu==="/projectplans","font-600":i.activeMenu.indexOf("/projectplans")!=-1}]),"data-toggle":"collapse",href:"#collapseOne","aria-expanded":"false",onClick:s[2]||(s[2]=u=>a.redirect("/projectplans"))},[t("img",{class:g(["img-24",{"invert-img":i.activeMenu.indexOf("/projectplans")==-1}]),src:Fu,alt:""},null,2),Gu],2),t("div",Ku,[t("div",Qu,[(r(!0),n(R,null,j(i.navigationList.projects,u=>(r(),n("div",{class:"panel main-content-list accordion-menu col-xs-12 p-0 font-14 collapsed",key:u.id,"data-toggle":"collapse","data-target":"#test"+u.id},[i.projectsIdList[`${u.id}`]?(r(),n("div",Xu,[t("div",{class:g(["accordian-tab cursor-pointer",{"tab-active":i.activeMenu==="/projectplans/"+u.id,"font-600":i.activeMenu.indexOf("/projectplans/"+u.id)!=-1}]),onClick:k=>{a.redirect("/projectplans/"+u.id,u.id),a.emitEvent()}},y(a.subStrName(u.name)),11,em)])):h("",!0),t("div",{id:"test"+u.id,class:"collapse pl-0","aria-labelledby":"headingOne","data-parent":"#accordion-two"},[t("div",sm,[(r(!0),n(R,null,j(u.includedMod,(k,H)=>(r(),n("ul",{class:"sub_menu_list",key:H},[t("li",{class:g(["col-xs-12 main-content-list active-icon project-sub-list",{"tab-active":i.activeMenu.indexOf("/projectplans/"+u.id+"/"+k.name.toLowerCase())!=-1}]),onClick:st(Z=>{a.redirect("/projectplans/"+u.id+"/"+k.name.toLowerCase()),a.emitEvent()},["stop"])},[t("div",om,[t("img",{class:"img-24",src:"/static/images/icons/side-bar/"+k.name.toLowerCase()+".svg",alt:""},null,8,am),t("span",rm,y(a.subStrName(k.name)),1)])],10,im)]))),128))])],8,tm)],8,Zu))),128))])])])]),t("li",{class:g(["menu_item active-icon",{active:i.activeMenu.indexOf("trainings")!=-1}]),onClick:s[3]||(s[3]=u=>{a.redirect("/trainings"),a.emitEvent()})},[t("img",{class:g(["img-24",{"invert-img":i.activeMenu.indexOf("trainings")==-1}]),src:Ee,alt:""},null,2),lm],2),t("li",{class:g(["menu_item active-icon",{active:i.activeMenu.indexOf("documents")!=-1}]),onClick:s[4]||(s[4]=u=>{a.redirect("/documents"),a.emitEvent()})},[t("img",{class:g(["img-24",{"invert-img":i.activeMenu.indexOf("documents")==-1}]),src:Ru,alt:""},null,2),nm],2),t("li",{class:g(["menu_item active-icon",{active:i.activeMenu.indexOf("tools")!=-1}]),onClick:s[5]||(s[5]=u=>{a.redirect("/tools"),a.emitEvent()})},[t("img",{class:g(["img-24",{"invert-img":i.activeMenu.indexOf("/tools")==-1}]),src:ke,alt:""},null,2),cm],2),t("li",{class:g(["menu_item active-icon",{active:i.activeMenu.indexOf("kpa")!=-1}]),onClick:s[6]||(s[6]=u=>{a.redirect("/known-problem-analysis-wizard"),a.emitEvent()})},[t("img",{class:g(["img-24",{"invert-img":i.activeMenu.indexOf("/kpa")==-1}]),src:ke,alt:""},null,2),dm],2),t("li",{class:g(["menu_item active-icon",{active:i.activeMenu==="/consulting"||i.activeMenu.includes("/schedule-consulting")}]),onClick:s[7]||(s[7]=u=>{a.redirect("/consulting"),a.emitEvent()})},[t("img",{class:g(["img-24",{"invert-img":i.activeMenu.indexOf("layout/consulting")==-1}]),src:ju,alt:""},null,2),um],2),t("li",{class:g(["menu_item active-icon",{active:i.activeMenu.indexOf("notifications")!=-1}]),onClick:s[8]||(s[8]=u=>{a.showAlertPage("/notifications"),a.emitEvent()})},[t("img",{class:g(["img-24",{"invert-img":i.activeMenu.indexOf("notifications")==-1}]),src:Yt,alt:""},null,2),i.notificationCount>0?(r(),n("span",mm,y(i.notificationCount),1)):h("",!0),t("a",hm,[t("span",{class:g(i.notificationCount>0?"notification-content":"content")},"Notifications",2)])],2),t("li",{class:g(["menu_item active-icon",{active:i.activeMenu.indexOf("market-place")!=-1}]),onClick:s[9]||(s[9]=u=>{a.redirect("/market-place"),a.emitEvent()})},[t("div",pm,[t("img",{class:g(["img-24",{"invert-img":i.activeMenu.indexOf("market-place")==-1}]),src:ce,alt:""},null,2),i.cartDetails.total_items?(r(),n("span",_m,y(i.cartDetails.total_items),1)):h("",!0)]),gm],2),t("li",{class:g(["menu_item active-icon",{active:i.activeMenu.indexOf("/contact")!=-1}]),onClick:s[10]||(s[10]=u=>{a.redirect("/contact"),a.emitEvent()})},[t("img",{class:g(["img-24",{"invert-img":i.activeMenu.indexOf("/contact")==-1}]),src:xe,alt:""},null,2),fm],2)],2)):h("",!0),o.roleId===5||o.roleId===7||o.roleId===11?(r(),n("ul",vm,[bm,o.roleId===5||o.roleId===11?(r(),n("li",{key:0,class:g(["menu_item active-icon",{active:i.activeMenu.indexOf("launchpad")!==-1}]),onClick:s[11]||(s[11]=u=>a.redirect("/launchpad"))},[t("img",{class:g(["img-24",{"invert-img":i.activeMenu.indexOf("launchpad")===-1}]),src:Hu,alt:""},null,2),ym],2)):h("",!0)])):h("",!0),o.roleId===13?(r(),n("ul",wm,[o.roleId===13?(r(),n("li",{key:0,class:g(["menu_item active-icon",{active:i.activeMenu.indexOf("compliancewire-marketplace")!==-1}]),onClick:s[12]||(s[12]=u=>a.redirect("/compliancewire-marketplace"))},[t("img",{class:g(["img-24",{"invert-img":i.activeMenu.indexOf("compliancewire-marketplace")===-1}]),src:ce,alt:""},null,2),km],2)):h("",!0),t("li",{class:g(["menu_item active-icon",{active:i.activeMenu.indexOf("/contact")!=-1}]),onClick:s[13]||(s[13]=u=>{a.redirect("/contact"),a.emitEvent()})},[t("img",{class:g(["img-24",{"invert-img":i.activeMenu.indexOf("/contact")==-1}]),src:xe,alt:""},null,2),xm],2)])):h("",!0)],2)])])])])])],2),o.roleId!==13?(r(),I(c,{key:0,optInType:i.optInType,showUserConsentNeverBtn:i.showUserConsentNeverBtn},null,8,["optInType","showUserConsentNeverBtn"])):h("",!0),o.roleId!==13?(r(),I(_,{key:1,displayRep:a.displayRep,showSElink:a.showSElink},null,8,["displayRep","showSElink"])):h("",!0),o.roleId!==13&&i.consentType&&i.consentType.id?(r(),I(d,{key:2,consentType:i.consentType,showUserConsentNeverBtnChina:i.showUserConsentNeverBtnChina},null,8,["consentType","showUserConsentNeverBtnChina"])):h("",!0),o.roleId!==13&&i.surveyData.display_survey!==!1?(r(),I(v,{key:3})):h("",!0)])}const Im=x(Vu,[["render",Sm],["__scopeId","data-v-abdf34c3"]]),Cm={data(){return{path:"",loaderStatus:!1,cartDetails:{},userId:""}},components:{Loader:E,BaseButton:L},async created(){this.userId=JSON.parse(localStorage.getItem("userId")),this.isCartPath=this.$route.path,await this.getCartList()},mounted(){this.emitter.on("fetchCartList",()=>{this.getCartList()}),this.emitter.on("getDynimicCartdetails",()=>{this.getCartList()}),window.addEventListener("message",this.handleMessageEvent,!1)},unmounted(){window.removeEventListener("message",this.handleMessageEvent)},watch:{async $route(){this.isCartPath=this.$route.path,await this.getCartList()}},methods:{navigateToCart(){this.$router.push("/market-place/cart")},async handleMessageEvent(e){if(e.origin!=="https://opusprodphp.opus.emergobyul.com")return null;const s=JSON.parse(e.data);return s.channel==="hfe"&&s.event==="cart-items-updated"&&await this.getCartList(),null},checkIsResourcesExist(){this.$route.params.id&&![1,2,3].includes(+this.$route.params.id)&&this.navigateToMarketplace()},async getCartList(){this.loaderStatus=!0,this.cartDetails=await _e(this.userId),this.loaderStatus=!1},navigateToMarketplace(){this.$router.push("/market-place"),this.emitter.emit("fetchCartList")}},beforeDestroy(){V.$off("fetchCartList")}},Pm=e=>(C("data-v-02b63be3"),e=e(),P(),e),Tm={key:0,class:"col-xs-12 pl-30 pr-30 cart-section d-flex justify-content-between"},$m={class:"d-flex col-gap-30"},Lm={class:"p-relative"},Dm=Pm(()=>t("img",{src:ce,alt:""},null,-1)),Mm={class:"cart-count"},Em={class:"cart-items"},Am={key:0,class:"d-flex col-gap-30 align-items-center"},Um={class:"d-flex cart-items"},Nm={class:"pl-10"},Om={key:1,class:"d-flex col-gap-30 align-items-center"},Bm={class:"cart-items"};function Fm(e,s,o,l,i,a){const c=m("BaseButton"),_=m("loader");return r(),n("div",{class:g(["content-wrappper",{"pb-custom":i.cartDetails.cart_items&&i.cartDetails.cart_items.length}])},[!i.loaderStatus&&i.cartDetails.cart_items&&i.cartDetails.cart_items.length?(r(),n("div",Tm,[t("div",$m,[t("div",Lm,[Dm,t("span",Mm,y(i.cartDetails.total_items),1)]),t("div",Em,y(i.cartDetails.total_items)+" Item(s)",1)]),e.isCartPath==="/market-place/cart"?(r(),n("div",Am,[t("div",Um,[b(" Total "),t("span",Nm,"$"+y(i.cartDetails.total_price),1)]),t("img",{onClick:s[0]||(s[0]=(...d)=>a.navigateToMarketplace&&a.navigateToMarketplace(...d)),class:"img-20 cursor-pointer",src:X,alt:""})])):(r(),n("div",Om,[t("div",Bm,"$"+y(i.cartDetails.total_price),1),p(c,{onClick:a.navigateToCart},{default:w(()=>[b("View Cart")]),_:1},8,["onClick"])]))])):h("",!0),t("div",{class:g(["col-xs-12 pl-0 pr-0",{"pt-62":i.cartDetails.cart_items&&i.cartDetails.cart_items.length}])},null,2),p(_,{loadingStatus:i.loaderStatus},null,8,["loadingStatus"])],2)}const Rm=x(Cm,[["render",Fm],["__scopeId","data-v-02b63be3"]]),jm={data(){return{isExpiringResources:!0,expiryCount:null,expiryList:{},expiryListObj:{},loaderStatus:!1,addedToCart:!1,cartList:{},arePlanIdsPresent:null,expiryIds:[],cartIds:[],cartInfo:{},updatedCartList:[]}},components:{Loader:E,BaseButton:L,AddRemoveCartPopup:Zt},async created(){this.userId=JSON.parse(localStorage.getItem("userId")),await this.allList()},filters:{getPurchaseStatus(e){switch(e){case"yes":return"Included In Trial";default:return"Price"}},formatPurchaseDate(e){if(e){const s=[e[0],e[1]-1,e[2]];return Qt(s).format("D MMM YYYY")}return""}},methods:{async allList(){this.cartList=await _e(this.userId),await this.getExpiryList(),this.getCommonList()},async addToCartAfterExpiry(e){this.cartInfo=e;const s={user_id:this.userId,plan_id:e.plan_id},o=await Wt(s);o.data&&o.data.status_code===200&&f("#addRemoveCartPopup").modal({backdrop:"static",keyboard:!1})},async closeAddRemoveCart(){f("#addRemoveCartPopup").modal("hide"),await this.allList()},getCommonList(){this.cartIds=this.cartList.cart_items.map(e=>e.plan_id),this.expiryIds=Object.values(this.expiryList.expiry_dash_board_map).flat().map(e=>e.plan_id)},getImageUrl(e){const s=e.image_path;return s?`https://opusjavaprodstorage.blob.core.windows.net${s}`:null},async renewServices(){const l=Object.keys(this.expiryList.expiry_dash_board_map).flatMap(a=>this.expiryList.expiry_dash_board_map[a].map(c=>({category:a,...c}))).filter(a=>!this.cartIds.includes(a.plan_id)).filter(a=>!a.expired).map(a=>({user_id:this.userId,plan_id:a.plan_id,is_for_renew:!0,ilt_slot_id:0})),i=await Gt(l);i.data&&i.data.status_code===200&&(this.addedToCart=!0,this.$router.push("/market-place/cart"),V.$emit("cart-items-updated"))},async goToCart(){this.$router.push("/market-place/cart")},async getExpiryList(){this.loaderStatus=!0,this.expiryList=await Kt(),this.expiryCount=this.expiryList.expiry_notification_count,this.expiryListObj=this.expiryList.expiry_dash_board_map,this.updatedCartList=this.cartList.cart_items.map(e=>e.plan_id),this.loaderStatus=!1}}},Ve=e=>(C("data-v-4153c081"),e=e(),P(),e),Hm={key:0,class:"content-wrappper mt-10"},Vm={class:"release-note-container"},Ym={class:"release-note-heading"},zm={class:"expiry-list-title-container cursor-pointer collapsed","data-toggle":"collapse","data-target":"#expiry-list"},Jm={class:"text-button-label black-2 opus-error-light-bg pt-5 pb-10 mb-0 pl-10"},qm={id:"expiry-list",class:"release-note-collapse collapse"},Wm={class:"text-h4 text-primary pb-10"},Gm={class:"col-xs-12 col-sm-12 col-md-5 p-0 d-flex align-items-center name-container"},Km={key:0,class:"training-img",src:Xt,alt:"Tools"},Qm=["src","alt"],Zm={class:"col-xs-12 col-sm-12 flex-direction-column training-title"},Xm={class:"text-regular-large text-primary mb-5"},eh={class:"text-subtitle-1 text-primary mb-5 white-space"},th={class:"training-detail-actions"},sh={class:"col-xs-12 col-sm-12 col-md-12"},ih={key:0},oh=Ve(()=>t("div",{class:"pl-15"},[t("p",{class:"text-regular-large red-bg1 white-1 expiry-box text-center"}," Expired ")],-1)),ah=[oh],rh={key:1},lh={key:0,class:"pl-15"},nh={class:"text-regular-large"},ch={key:1,class:"pl-15"},dh={class:"text-regular-large orange-bg2 expiry-box"},uh={key:2,class:"pl-15"},mh={class:"text-regular-large red-bg1 expiry-box white-1"},hh={key:3,class:"pr-15 pb-10"},ph={class:"text-regular-large red-bg1 expiry-box white-1"},_h=Ve(()=>t("img",{src:es,alt:"",class:"preview-svg"},null,-1));function gh(e,s,o,l,i,a){const c=m("BaseButton"),_=m("add-remove-cart-popup"),d=m("loader");return i.expiryCount>0?(r(),n("div",Hm,[t("div",Vm,[t("div",Ym,[t("div",zm,[t("p",Jm,y(i.expiryCount)+" Resources expiring soon ",1)])]),t("div",qm,[(r(!0),n(R,null,j(i.expiryListObj,(v,u)=>(r(),n("div",{class:"expiry-body",key:u},[t("div",Wm,y(u),1),(r(!0),n(R,null,j(v,k=>(r(),n("div",{class:"list-container justify-content-between col-xs-12 p-10",key:k.plan_id},[t("div",Gm,[k.plan_type==="Tool"?(r(),n("img",Km)):(r(),n("img",{key:1,class:"training-img",src:a.getImageUrl(k),alt:k.plan_type},null,8,Qm)),t("div",Zm,[t("div",Xm,y(k.plan_type),1),t("div",eh,[t("span",null,y(k.plan_name),1)])])]),t("div",th,[t("div",sh,[t("div",null,[k.expired?(r(),n("div",ih,ah)):(r(),n("div",rh,[t("div",null,[k.expiry_in_days>90?(r(),n("div",lh,[t("p",nh," Expires: "+y(k.expiry_date_time|e.formatPurchaseDate),1)])):k.expiry_in_days<=90&&k.expiry_in_days>10?(r(),n("div",ch,[t("p",dh," Expires: "+y(k.expiry_in_days)+" days ",1)])):k.expiry_in_days<=10&&k.expiry_in_days>1?(r(),n("div",uh,[t("p",mh," Expires: "+y(k.expiry_in_days)+" days ",1)])):k.expiry_in_days==1?(r(),n("div",hh,[t("p",ph," Expires: "+y(k.expiry_in_days)+" day ",1)])):h("",!0)])])),k.expired&&!i.cartIds.includes(k.plan_id)?(r(),I(c,{key:2,variant:"primary",class:"float-r",onClick:H=>a.addToCartAfterExpiry(k)},{default:w(()=>[b(" Add to cart ")]),_:2},1032,["onClick"])):i.cartIds.includes(k.plan_id)?(r(),I(c,{key:4,variant:"tertiary",class:"float-r",onClick:a.goToCart,"has-icon":""},{default:w(()=>[_h,b(" Go To Cart ")]),_:1},8,["onClick"])):(r(),I(c,{key:3,variant:"primary",class:"float-r",onClick:a.renewServices},{default:w(()=>[b(" Renew ")]),_:1},8,["onClick"]))])])])]))),128))]))),128))])]),p(_,{onCloseAddRemoveCart:a.closeAddRemoveCart,cartInfo:i.cartInfo,isRenew:!0},null,8,["onCloseAddRemoveCart","cartInfo"]),p(d,{loadingStatus:i.loaderStatus},null,8,["loadingStatus"])])):h("",!0)}const fh=x(jm,[["render",gh],["__scopeId","data-v-4153c081"]]),vh={components:{BaseButton:L},data(){return{gettime:30,warningOut:1}},methods:{makeTimeOut(){this.gettime=30,clearInterval(this.warningOut),clearTimeout(this.warningOut),this.warningOut=setInterval(this.warningTime,1e3)},warningTime(){this.gettime>0&&(this.gettime-=1)},async addLogoutLog(){const e=await Le();e?this.$notify({type:"success",title:"Success",text:e.data}):this.$notify({type:"error",title:"Error",text:e.data})},loadLogOut(){document.cookie="Authorization=;expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/",document.cookie="redirect_url=;expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/",localStorage.clear(),this.addLogoutLog(),this.$router.push("/login")},loadAgain(){clearInterval(this.warningOut)}},mounted(){f("#warningTimeout").on("show.bs.modal",this.makeTimeOut),f("#warningTimeout").on("hidden.bs.modal",()=>{f(".modal-backdrop").remove()})},watch:{gettime(){this.gettime===0&&this.loadLogOut()}},beforeDestroy(){clearInterval(this.warningOut),setTimeout(this.makeTimeOut,2e3)}},bh={id:"warningTimeout",class:"modal fade custom",role:"dialog"},yh={class:"modal-dialog modal-lg"},wh={class:"modal-content"},kh=t("div",{class:"modal-header"},[t("h4",{class:"modal-title"},"Your Session is about to expire...")],-1),xh={style:{position:"relative",display:"table","overflow-y":"auto","overflow-x":"auto",width:"auto","min-width":"300px"}},Sh={class:"col-md-12",style:{padding:"10px 10px 10px 10px"}},Ih=t("br",null,null,-1),Ch=t("br",null,null,-1),Ph={class:"modal-footer d-flex justify-content-center col-gap-15 p-10"},Th=t("i",{class:"glyphicon glyphicon-log-out"},null,-1);function $h(e,s,o,l,i,a){const c=m("BaseButton");return r(),n("div",null,[t("div",bh,[t("div",yh,[t("div",wh,[kh,t("div",xh,[t("div",Sh,[b(" You will be logged out of OPUS in "),t("strong",null,y(i.gettime)+" seconds",1),Ih,Ch,b("Do you want to stay logged in? ")])]),t("div",Ph,[p(c,{variant:"secondary","data-dismiss":"modal",onClick:a.loadLogOut},{default:w(()=>[Th,b(" No, log me out ")]),_:1},8,["onClick"]),p(c,{"data-dismiss":"modal",onClick:a.loadAgain,"data-toggle":"tab"},{default:w(()=>[b("Yes, keep me logged in")]),_:1},8,["onClick"])])])])])])}const Lh=x(vh,[["render",$h]]);S.extend(Ie);const Dh={data(){return{accountsList:[],userCompany:"",userName:"",userEmail:"",roleId:"",userId:"",progressStatus:!1,percentage:0,errors:[],progressTitle:"",progressTitleStatus:"",showHelp:!1,account_id:"",countryList:[],displaySide:!1,rep_client:"",refreshTokenInterval:"",rep_client_services:[1,2,4],timeoutID:null,mappingPlansIds:[],account_type_id:null,showSEFlag:!1,isHome:!1}},components:{TimeoutWarning:Lh,HeaderNav:Gc,HeaderMenu:Im,ViewCartWrapper:Rm,PurchaseExpiry:fh},methods:{async getAccountsList(){const e=await jt();e.status_code===200?this.accountsList=e.data.accounts.filter(s=>s.account_id!==this.account_id):(this.$notify({clean:!0}),this.$notify({type:"error",title:"Error",text:"Unable to fetch accounts",duration:-1,closeOnClick:!0}))},mobilesidebar(){this.displaySide=!this.displaySide},b64toBlob(e,s="",o=512){const l=atob(e),i=[];for(let c=0;c<l.length;c+=o){const _=l.slice(c,c+o),d=new Array(_.length);for(let u=0;u<_.length;u+=1)d[u]=_.charCodeAt(u);const v=new Uint8Array(d);i.push(v)}return new Blob(i,{type:s})},updateProgressStatus(){this.progressStatus=!1},async getUserRole(){this.loaderStatus=!0;const e=await J(),s=JSON.parse(localStorage.getItem("utm_codes"));e&&(this.roleId=e.role_id,this.userId=e.id,this.account_id=e.account_id,this.rep_client=e.rep_client,this.account_type_id=e.account_type_id,localStorage.setItem("userId",e.id),localStorage.setItem("userData",JSON.stringify(e)),this.roleId===4&&!this.$route.path.includes("/report")&&!this.$route.path.includes("/market-place/service/1")&&!this.$route.path.includes("/PermissionAccess")&&(window.location.href="/report/summary"));const o={first_name:e.first_name,last_name:e.last_name,email:e.email,company:e.company,unstandardized_country:e.country,Last_Interest:"Human Factors Research & Design",page_urlextended:window.location.href,page_urlreferral_extended:document.referrer?document.referrer:window.location.href,form_control:"Log in"};s&&(o.gAKeyword=s.keyword,o.utmcampaign=s.utm_campaign,o.utmcontent=s.utm_content,o.utmmedium=s.utm_medium,o.utmmktoadid=s.utm_mktoadid,o.utmmktocampaign=s.utm_mktocampaign,o.utmsource=s.utm_source,o.utmterm=s.utm_term),pe(o)},async getAndAddServices(){if(this.rep_client){const e=await de(this.account_id);await this.validateNAddServices(e)}},async validateNAddServices(e){let s=[];const o=await it();e.forEach(i=>{const a=this.mappingPlansIds.find(c=>c.plan_id===i.id);a&&(s=[...new Set(s.concat(a.service_id))])});const l=S.utc().add("years",1).subtract(1,"days");this.rep_client_services.forEach(async i=>{if(!s.some(a=>a===i)){const a=[],c=o.find(d=>d.id===i);c.id===1&&(a.push({account:!1,active:!0,id:2,price:0,valid_from:S.utc(),valid_until:l,volume:2097152}),a.push({account:!1,active:!0,id:3,price:0,valid_from:S.utc(),valid_until:l,volume:250}));const _={account_id:this.account_id,active:!0,add_on:a,operation:6,payment_mode:4,plan_id:c.id,plan_price:0,service_type:"premium",total_amount:0,valid_from:S.utc(),valid_until:l};await wa(_)}})},async checkTeamMemberRestriction(){if(this.account_type_id!==1||this.account_type_id!==5){const e=await $t({is_rep:this.account_type_id===2||this.account_type_id===4?1:0});e.status_code===200&&e.restrict_user&&f("#teamMemberRestrictionPopup").modal({backdrop:"static",keyboard:!1})}},idleTimer(){window.addEventListener("mousemove",this.resetTimer,!1),window.addEventListener("mousedown",this.resetTimer,!1),window.addEventListener("keypress",this.resetTimer,!1),window.addEventListener("click",this.resetTimer,!1),window.addEventListener("scroll",this.resetTimer,!1),window.addEventListener("keydown",this.resetTimer,!1)},resetTimer(){clearTimeout(this.timeoutID),this.timeoutID=setTimeout(()=>{f("#warningTimeout").modal({backdrop:"static",keyboard:!1})},9e5)}},watch:{$route(){this.$route.path==="/home"?this.isHome=!0:this.isHome=!1}},async created(){this.$route.path==="/home"?this.isHome=!0:this.isHome=!1,[this.countryList]=await Promise.all([ts(),le(),this.checkTeamMemberRestriction(),this.getAccountsList()]),this.idleTimer(),await le();const e=Ce("Authorization").split("Bearer ")[1];this.showSEFlag=await ot(e),await this.getUserRole(),this.mappingPlansIds=await ue(),await this.getAndAddServices(),this.emitter.on("getProfileDetails",s=>{this.userCompany=s.company,this.userName=`${s.first_name} ${s.last_name}`,this.userEmail=s.email}),this.emitter.on("tourStart",()=>{this.tourStatus=!0,f(window).scrollTop(0),f(".sidebar-col").scrollTop(0),f("body").addClass("hide_scroll"),this.mobilesidebar()}),this.emitter.on("tourEnd",()=>{this.tourStatus=!1,f("body").removeClass("hide_scroll")}),this.refreshTokenInterval=setInterval(le,168e4),await this.getAccountsList()},beforeDestroy(){clearInterval(this.refreshTokenInterval),window.removeEventListener("mousemove",this.resetTimer),window.removeEventListener("mousedown",this.resetTimer),window.removeEventListener("keypress",this.resetTimer),window.removeEventListener("click",this.resetTimer),window.removeEventListener("scroll",this.resetTimer),window.removeEventListener("keydown",this.resetTimer),clearTimeout(this.timeoutID),V.$off()}};function Mh(e,s,o,l,i,a){const c=m("header-nav"),_=m("header-menu"),d=m("view-cart-wrapper"),v=m("purchase-expiry"),u=m("router-view"),k=m("timeout-warning");return r(),n("div",{class:g(["content",{"theme-red":i.roleId===5||i.roleId===11}])},[t("div",{class:g(["mobile-overlay",[{"display-Block":i.displaySide,"display-none":!i.displaySide}]]),onClick:s[0]||(s[0]=H=>i.displaySide=!1)},null,2),i.roleId?(r(),I(c,{key:0,accountsList:i.accountsList,roleId:i.roleId,onMobilesidebar:a.mobilesidebar,displaySide:i.displaySide,account_id:i.account_id},null,8,["accountsList","roleId","onMobilesidebar","displaySide","account_id"])):h("",!0),i.roleId?(r(),I(_,{key:1,rep_client:i.rep_client,roleId:i.roleId,userId:i.userId,onMobilesidebar:a.mobilesidebar,userCompany:i.userCompany,userName:i.userName,userEmail:i.userEmail,accountId:i.account_id,account_type_id:i.account_type_id,displaySide:i.displaySide,showSEFlag:i.showSEFlag},null,8,["rep_client","roleId","userId","onMobilesidebar","userCompany","userName","userEmail","accountId","account_type_id","displaySide","showSEFlag"])):h("",!0),p(d),i.isHome?(r(),I(v,{key:2})):h("",!0),i.roleId?(r(),I(u,{key:3,roleId:i.roleId,account_id:i.account_id,userId:i.userId},null,8,["roleId","account_id","userId"])):h("",!0),p(k)],2)}const Eh=x(Dh,[["render",Mh],["__scopeId","data-v-cb629b21"]]),Ah={data(){return{loadPage:!1}},components:{DashboardContent:Eh},beforeDestroy(){V.$off(),f(".modal-backdrop").remove()},created(){localStorage.removeItem("reLoad"),Ce("Authorization")?this.loadPage=!0:(document.cookie=`redirect_url = ${window.location.href}; path=/;`,window.location.href="/login",this.loadPage=!1)}},Uh={class:"wrapper"},Nh={key:0,class:"main-panel"};function Oh(e,s,o,l,i,a){const c=m("dashboard-content");return r(),n("div",Uh,[i.loadPage?(r(),n("div",Nh,[p(c)])):h("",!0)])}const Lp=x(Ah,[["render",Oh]]);export{Lp as default};
