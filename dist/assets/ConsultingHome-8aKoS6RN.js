import{_ as f,d as w,o as c,c as r,a as o,b as d,F as v,n as h,k as y,m as S,r as u,p as x,f as b,$ as C,I as k,l as q}from"./index-BlMJxPGQ.js";import{L as T}from"./Loader-DR0R9oEF.js";import{O as L}from"./OpusSelect-BRceMwA4.js";import{C as V,M as I}from"./MarketplaceConsultings-BWEJkhAI.js";import{_ as R}from"./single_document-D27k7af0.js";import{R as D,a as O}from"./RequestQuote-CSWNwCnw.js";import"./cloneDeep-ldw2ZiUo.js";import"./_baseAssignValue-BD6sbZ4C.js";import"./OpusCheckbox-DmKgoiup.js";import"./chevron_down_new-ByXOiGKT.js";import"./clock-Bt2qCWrf.js";import"./purchased_resources-Dm7E7KcS.js";import"./index.es-Cl9EeDOg.js";import"./index-CWzxsAm4.js";import"./close_icon_white-5NpTKSBQ.js";const Q={name:"PurchasedConsultings",components:{Consulting:V,OpusSelect:L},props:{account_id:{type:[String,Number],default:""},userId:{type:[String,Number],default:""},consultings:{type:Array,default:()=>[]}},data(){return{activeConsultingTab:{name:"View all",length:0},activeTabName:{name:"View all",length:0},consultingTabs:{Research:"Research",Analyze:"Analyze",Design:"Design",Evaluate:"Evaluate",Validate:"Validate",Submit:"Submit"},consultingTabCount:{"View all":0,Research:0,Analyze:0,Design:0,Evaluate:0,Validate:0,Submit:0},consultingCategories:{},activeConsultingList:[],consultingCategoriesData:[],sortingType:"name",sortingOrder:"asc"}},mounted(){this.buildConsultingCategories(),this.setActiveConsultingList()},watch:{activeConsultingTab(){this.setActiveConsultingList()},consultings(){this.buildConsultingCategories(),this.setActiveConsultingList()}},methods:{setTab(t){this.activeConsultingTab=t},setSorting(t){const s={asc:"desc",desc:"asc"};this.sortingType===t?this.sortingOrder=s[this.sortingOrder]:(this.sortingType=t,this.sortingOrder="asc"),this.setActiveConsultingList()},buildConsultingCategories(){const t={"View all":0},s={"View all":0};Object.keys(this.consultingTabs).forEach(n=>{t[n]=[],s[n]=0}),this.consultings.forEach(n=>{let e="";n.consulting_basic_details_dto?e=n.consulting_basic_details_dto.consulting_type:e=n.consulting_type,e&&t[e]&&t[e].push(n)});let l=[];Object.keys(t).forEach(n=>{this.consultingTabCount[n]=t[n].length,l.push({name:n,length:n==="View all"?this.consultings.length:t[n].length})}),this.consultingCategoriesData=l,l=[],t["View all"]=this.consultings,this.consultingCategories=t,s["View all"]=this.consultings.length,this.consultingTabCount=s},setActiveConsultingList(){let t=[];t=this.consultingCategories[this.activeConsultingTab.name],t=JSON.parse(JSON.stringify(t)),t.sort((s,l)=>this.compareConsultings(s,l,this.sortingType)),this.sortingOrder==="desc"&&t.reverse(),this.activeConsultingList=t,this.activeConsultingTab.length=this.activeConsultingList.length},compareConsultings(t,s,l="name"){if(!t||!s)return 0;switch(l){case"status":{if(!t.consulting_status||!s.consulting_status)return-1;if(t.consulting_status===s.consulting_status)return 0;const n={Requested:1,Inprogress:2,Completed:3};return n[t.consulting_status]<n[s.consulting_status]?-1:1}case"requested_date":return!t.modified_date||!s.modified_date?0:w(t.modified_date).isBefore(s.modified_date)?-1:1;default:return(t.consulting_name||"").toLowerCase().localeCompare((s.consulting_name||"").toLowerCase())}},navigateToMarketPlace(){this.$router.push("/layout/market-place")},customLabel(t){return`${t.name} (${t.length})`}}},_=t=>(x("data-v-894a401a"),t=t(),b(),t),A={class:"col-xs-12 mb-30 mt-30 pl-0"},E={class:"header--container d-flex justify-content-between align-items-center mb-30"},M=_(()=>o("span",{class:"font-32 fw-400"},"Purchased",-1)),P={class:"col-xs-12 d-flex sorting-container mb-20 mt-10"},j={class:"col-xs-6 col-sm-6 col-md-6 p-0 xs-flex-column d-flex align-items-center flex-wrap name--filter"},F=["src"],B={class:"col-xs-2 col-sm-2 col-md-2 p-0 xs-flex-column d-flex align-items-center status--filter"},H=["src"],z={class:"col-xs-4 p-0 xs-flex-column d-flex align-items-center date--filter justify-end"},N=["src"],$={class:"col-xs-12 p-0"},J={key:1,class:"col-xs-12 d-flex flex-wrap col-gap-20 align-items-center text-justify mt-20"},U=_(()=>o("img",{src:R},null,-1)),G=_(()=>o("div",null,[o("div",{class:"not-purchased no-data-color"}," Collaborate with our HFE experts "),o("div",{class:"mt-5"},[o("span",{class:"no-data-color"},"Track your current and past consulting requests")])],-1)),W=[U,G];function Y(t,s,l,n,e,a){const g=u("opusSelect"),m=u("consulting");return c(),r("div",A,[o("div",E,[M,d(g,{style:{width:"327px"},modelValue:e.activeConsultingTab,"onUpdate:modelValue":s[0]||(s[0]=i=>e.activeConsultingTab=i),options:e.consultingCategoriesData,trackBy:"name","custom-label":a.customLabel},null,8,["modelValue","options","custom-label"])]),e.activeConsultingList.length>0?(c(),r(v,{key:0},[o("div",P,[o("div",j,[o("span",{class:"text-primary cursor-pointer pr-10",onClick:s[1]||(s[1]=i=>a.setSorting("name"))}," Name "),o("img",{onClick:s[2]||(s[2]=i=>a.setSorting("name")),class:h([{desc:e.sortingOrder==="desc"&&e.sortingType==="name"},"sorting-icon cursor-pointer"]),src:e.sortingType==="name"?"/static/images/icons/caret_up.svg":"/static/images/icons/caret_up_light.svg",alt:""},null,10,F)]),o("div",B,[o("span",{class:"text-primary cursor-pointer pr-10",onClick:s[3]||(s[3]=i=>a.setSorting("status"))}," Status "),o("img",{class:h([{desc:e.sortingOrder==="desc"&&e.sortingType==="status"},"sorting-icon cursor-pointer"]),src:e.sortingType==="status"?"/static/images/icons/caret_up.svg":"/static/images/icons/caret_up_light.svg",alt:"",onClick:s[4]||(s[4]=i=>a.setSorting("status"))},null,10,H)]),o("div",z,[o("span",{class:"text-primary cursor-pointer pr-10",onClick:s[5]||(s[5]=i=>a.setSorting("requested_date"))}," Requested date "),e.activeConsultingList.length>1?(c(),r("img",{key:0,class:h([{desc:e.sortingOrder==="desc"&&e.sortingType==="requested_date"},"sorting-icon cursor-pointer"]),src:e.sortingType==="requested_date"?"/static/images/icons/caret_up.svg":"/static/images/icons/caret_up_light.svg",alt:"",onClick:s[6]||(s[6]=i=>a.setSorting("requested_date"))},null,10,N)):y("",!0)])]),o("div",$,[(c(!0),r(v,null,S(e.activeConsultingList,(i,p)=>(c(),r("div",{key:p+"_"+i.title+"_"+i.project_name,class:"col-xs-12 p-0 mt-10"},[d(m,{consulting:i,onRequestQuote:mt=>t.$emit("request-quote",i)},null,8,["consulting","onRequestQuote"])]))),128))])],64)):(c(),r("div",J,W))])}const K=f(Q,[["render",Y],["__scopeId","data-v-894a401a"]]),X="/static/images/icons/consultings_header.svg",Z={props:["account_id","userId"],data(){return{loaderStatus:!1,purchasedConsultings:[],isModalActive:!1,modalComponent:null,modalData:null}},components:{Loader:T,RequestQuote:D,PurchasedConsultings:K,MarketplaceConsultings:I},async created(){await this.getAllConsultingsData()},methods:{async getAllConsultingsData(){this.loaderStatus=!0,await this.getPurchasedConsultings(),this.loaderStatus=!1},async getPurchasedConsultings(){this.purchasedConsultings=await O({userId:this.userId})},requestQuote(t){this.openModal("requestQuote",{consulting:t})},openModal(t,s){this.modalData=s,this.modalComponent=t,C("#consulting_page_modal").modal("show")},closeModal(){this.modalComponent="",C("#consulting_page_modal").modal("hide")},handleQuoteSubmit(){this.closeModal(),this.getAllConsultingsData(),this.$refs.marketPlaceConsultings.setupMarketPlaceConsultings(),this.$notify({type:"success",title:"Success",text:"Your request has been successfully sent"})}}},tt=t=>(x("data-v-d1c017d2"),t=t(),b(),t),st={class:"content-wrappper training-main"},et={class:"col-xs-12 mt-20 mb-20"},ot=tt(()=>o("div",{class:"col-xs-12 pl-10 catalog-header fw-300"}," Explore our consulting services ",-1)),nt={class:"col-xs-12 pl-0 d-flex",style:{"flex-wrap":"wrap"}},it=q('<div class="col-xs-12 col-sm-7 col-md-7 pl-0" data-v-d1c017d2><div class="col-xs-12 mt-15 fw-300 text-light-black catalog-description" data-v-d1c017d2> Emergo by UL’s Human Factors Research &amp; Design is a highly experienced HF consulting team that specializes in user research, usability testing, and product and user interface design for medical technology. We would be pleased to support your HFE project or provide personalized coaching to advance your team’s HFE skills. </div><div class="col-xs-12 mt-20 fw-300 text-light-black catalog-description" data-v-d1c017d2> Browse our top services below to learn more about how we can collaborate with your team at each step of the HFE process. Get in touch with our consulting team by selecting “Request quote” and completing the form. </div></div><div class="col-xs-12 col-sm-5 col-md-5 pl-0 d-flex align-items-center justify-content-center mb-30" data-v-d1c017d2><img src="'+X+'" data-v-d1c017d2></div>',2),at={class:"col-xs-12 pl-10"},lt={class:"col-xs-12 pl-10 mt-30"},ct={id:"consulting_page_modal",class:"modal",role:"dialog"},rt={class:"modal-dialog"},ut={class:"modal-content p-0"},dt={class:"content"};function gt(t,s,l,n,e,a){const g=u("purchased-consultings"),m=u("marketplace-consultings"),i=u("request-quote"),p=u("loader");return c(),r("div",st,[o("div",et,[ot,o("div",nt,[it,o("div",at,[d(g,{consultings:e.purchasedConsultings,onRequestQuote:a.requestQuote},null,8,["consultings","onRequestQuote"])]),o("div",lt,[d(m,{ref:"marketPlaceConsultings",userId:l.userId,onRequestQuote:a.requestQuote},null,8,["userId","onRequestQuote"])])])]),o("div",ct,[o("div",rt,[o("div",ut,[o("div",dt,[e.modalComponent==="requestQuote"?(c(),k(i,{key:0,onClose:a.closeModal,consulting:e.modalData.consulting,onSubmit:a.handleQuoteSubmit},null,8,["onClose","consulting","onSubmit"])):y("",!0)])])])]),d(p,{loadingStatus:e.loaderStatus},null,8,["loadingStatus"])])}const Vt=f(Z,[["render",gt],["__scopeId","data-v-d1c017d2"]]);export{Vt as default};
