import{c as w,r as m,s as f}from"./index-CWzxsAm4.js";import{r as k,v as g}from"./passwords-hrBXkaP1.js";import{_ as $,P as b,c as o,a as e,i as y,j as l,v as h,n as c,k as a,e as p,q as T,t as v,b as V,o as t,p as P,f as S,r as B}from"./index-BlMJxPGQ.js";import{I as M}from"./InvalidTokenMessage-CKY0-tCT.js";const x=w.regex("passwordValidation",b),C={data(){return{data:{password:"",confirm_password:"",terms_conditions:!1},errorMessage:"",isTokenValid:!1,linkExpired:!1,disableButton:!1,ButtonText:"Change Password"}},components:{InvalidTokenMessage:M},validations:{data:{password:{required:m,passwordValidation:x},confirm_password:{required:m,sameAsPassword:f(function(){return this.data.password})},terms_conditions:{checked(s){return s}}}},async created(){await this.validateToken()},methods:{async resetPassword(){if(this.$v.$touch(),!this.$v.$invalid){this.disableButton=!0,this.ButtonText="Submitting...";const s=await k(this.data,this.$route.params.token);this.disableButton=!1,this.ButtonText="Change Password",s.token&&s.token==="invalid"?(this.isTokenValid=!1,this.linkExpired=!0):s.status?this.$router.push({name:"login",params:{successMessage:s.message}}):s.status||(this.errorMessage=s.message)}},async validateToken(){(await g(this.$route.params.token)).token!=="valid"?(this.isTokenValid=!1,this.linkExpired=!0):(this.isTokenValid=!0,this.linkExpired=!1)}}},n=s=>(P("data-v-ca532058"),s=s(),S(),s),I={class:"row"},q={class:"col-lg-12 col-md-12 col-sm-12 col-xs-12 txt-alg-ctr"},A={key:0,class:"login-whitebox landinglayout_box_wrapper"},E=n(()=>e("h1",null,"Change your password",-1)),N={class:"login-container"},U={class:"login-input"},z=n(()=>e("i",{class:"fa fa-lock"},null,-1)),D={key:0,class:"error_text"},O={key:0},R={key:1},Y=n(()=>e("br",null,null,-1)),j={class:"login-container"},Z={class:"login-input"},F=n(()=>e("i",{class:"fa fa-lock"},null,-1)),G={key:0,class:"error_text"},H={key:0},J={key:1},K=n(()=>e("span",{class:"terms-conditions"},[p(" I acknowledge that I have read and agree to the "),e("span",{class:"term-priv"},[e("a",{href:"/terms-of-service",target:"_blank"},"OPUS Software-as-a-Service Agreement")])],-1)),L={key:0,class:"error_text"},Q={key:0},W={key:0,class:"error-msg-holder"},X={class:"error-message"},ss=n(()=>e("br",null,null,-1)),es=["disabled"],os={key:1};function ts(s,r,as,rs,i,u){const _=B("invalid-token-message");return t(),o("div",{class:c(["container-fluid password-container",{hide_banner:!i.isTokenValid}])},[e("div",I,[e("div",q,[i.isTokenValid?(t(),o("div",A,[E,e("form",{onSubmit:r[3]||(r[3]=y((...d)=>u.resetPassword&&u.resetPassword(...d),["prevent"]))},[e("div",N,[e("div",U,[l(e("input",{class:c(["login-input-box landing-input-field",{field_error:s.$v.data.password.$error}]),"onUpdate:modelValue":r[0]||(r[0]=d=>s.$v.data.password.$model=d),type:"password",name:"password",placeholder:"New password"},null,2),[[h,s.$v.data.password.$model,void 0,{trim:!0}]]),z]),s.$v.data.password.$error?(t(),o("div",D,[s.$v.data.password.required?a("",!0):(t(),o("div",O," Password is required. ")),s.$v.data.password.required&&!s.$v.data.password.passwordValidation?(t(),o("div",R,[p(" Password must include at least 10 characters "),Y,p("Your password must meet 3 of these 4 criteria: 1 capital letter (A-Z), 1 lowercase letter (a-z), 1 number (1-9), and one special character (!@#$.,+=( )_%^&*) ")])):a("",!0)])):a("",!0)]),e("div",j,[e("div",Z,[l(e("input",{class:c(["login-input-box landing-input-field",{field_error:s.$v.data.confirm_password.$error}]),"onUpdate:modelValue":r[1]||(r[1]=d=>s.$v.data.confirm_password.$model=d),type:"password",name:"confirm_password",placeholder:"Confirm new password"},null,2),[[h,s.$v.data.confirm_password.$model,void 0,{trim:!0}]]),F]),s.$v.data.confirm_password.$error?(t(),o("div",G,[s.$v.data.confirm_password.required?a("",!0):(t(),o("div",H," Please confirm your password ")),s.$v.data.confirm_password.required&&!s.$v.data.confirm_password.sameAsPassword?(t(),o("div",J," The password doesn't match the password above ")):a("",!0)])):a("",!0)]),e("div",null,[l(e("input",{type:"checkbox",value:"true","onUpdate:modelValue":r[2]||(r[2]=d=>s.$v.data.terms_conditions.$model=d)},null,512),[[T,s.$v.data.terms_conditions.$model,void 0,{trim:!0}]]),K,s.$v.data.terms_conditions.$error?(t(),o("div",L,[s.$v.data.terms_conditions.checked?a("",!0):(t(),o("div",Q," You must accept the OPUS SaaS Agreement to proceed "))])):a("",!0)]),i.errorMessage?(t(),o("div",W,[e("span",X,v(i.errorMessage),1),ss])):a("",!0),e("button",{class:"btn btn-modal-footer submit-btn",type:"submit",disabled:i.disableButton},v(i.ButtonText),9,es)],32)])):a("",!0),i.linkExpired?(t(),o("div",os,[V(_,{page:"resetpassword"})])):a("",!0)])])],2)}const cs=$(C,[["render",ts],["__scopeId","data-v-ca532058"]]);export{cs as default};
