import{i as k}from"./index.es-Cl9EeDOg.js";import{L as w}from"./Loader-DR0R9oEF.js";import{g as _,_ as C,B as Y,o as n,c as l,a,j as v,v as D,n as m,k as u,b as f,t as S,w as y,e as c,r as g,p as q,f as j}from"./index-BlMJxPGQ.js";import{r as h}from"./index-CWzxsAm4.js";import{_ as E}from"./close_icon_white-5NpTKSBQ.js";async function be({userId:e}){let t;return await _.get(`https://backend.opus.emergobyul.com/services/consulting/requestQuoteList?userId=${e}`).then(s=>{s.status===200&&s.data&&(t=s.data.data)}).catch(s=>{console.log("Opus Consultings Error",s)}),t}async function $e({userId:e}){let t;return await _.get(`https://backend.opus.emergobyul.com/services/consulting/courseList?userId=${e}`).then(s=>{s.status===200&&s.data&&(t=s.data.data)}).catch(s=>{console.log("Opus Consultings Error",s)}),t}async function ye({userId:e,courseId:t}){let s;return await _.get(`https://backend.opus.emergobyul.com/services/consulting/courseDetailsList?userId=${e}&courseId=${t}`).then(d=>{d.status===200&&d.data&&(s=d.data.data)}).catch(d=>{console.log("Opus Consultings Error",d)}),s}async function O(e){let t;return await _.post("https://backend.opus.emergobyul.com/services/consulting/requestAQuoteForConsulting",e).then(s=>{s.status===200&&s.data&&(t=s.data)}).catch(s=>{console.log("Opus Consultings Error",s)}),t}async function Me(e){let t;return await _.post("https://backend.opus.emergobyul.com/services/consulting/contactus",e).then(s=>{s.status===200&&s.data&&(t=s.data)}).catch(s=>{console.log("Opus Consultings Error",s)}),t}const x="/static/images/icons/consulting_item.svg";function V(e){return/^$|^(\+\d{1,2}\s?)?1?\-?\.?\s?\(?\d{3}\)?[\s.-]?\d{3}[\s.-]?\d{4}$/.test(e)}const I={project_name:{required:h},device_type:{required:h},phone_number:{required:h,isPhoneValidOrEmpty:V},start_date:{required:h},end_date:{required:h},other_details:{required:h}},P={name:"RequestQuote",props:{consulting:{type:Object,default:()=>({})}},components:{DatePicker:k,Loader:w,BaseButton:Y},validations:{formData:I},data(){return{formData:{device_type:null,project_name:null,end_date:null,start_date:null,other_details:"",phone_number:null},startDate:null,endDate:null,deviceType:null,phoneNumber:"",projectName:null,otherDetails:"",errorMessage:"",loadingStatus:!1,submitErrorMessge:"",quoteDataCharLimit:{other_details:2e3},defaultMaxCharLength:65}},computed:{isUserDataValid(){return Object.values(this.formData).every(e=>!!e)&&this.isNumber(this.formData.phone_number)}},beforeMount(){this.resetFields()},methods:{resetFields(){this.$v.$reset(),this.formData={device_type:null,project_name:null,end_date:null,start_date:null,other_details:"",phone_number:null},this.errorMessage=""},isNumber(e){return e?/^(\+\d{1,2}\s?)?1?\-?\.?\s?\(?\d{3}\)?[\s.-]?\d{3}[\s.-]?\d{4}$/.test(e):!1},disabledStartDate(e){return e&&new Date().valueOf()>=e.valueOf()},disabledEndDate(e){return this.formData.start_date?new Date(this.formatDMYToYMD(this.formData.start_date)).valueOf()>=e.valueOf():!0},close(){this.resetFields(),this.$emit("close")},handleStartDateChange(){this.formData.end_date&&(!this.formData.start_date||new Date(this.formData.start_date).valueOf()>=new Date(this.formData.end_date).valueOf())&&(this.formData.end_date=null)},handleQuoteDataLength(e){this.formData[e]&&(this.formData[e]=this.formData[e].substr(0,this.quoteDataCharLimit[e]||this.defaultMaxCharLength))},formatDMYToYMD(e){const[t,s,d]=e.split("-");return`${d}-${t}-${s}`},buildPayload(){const e=new Date(`${this.formatDMYToYMD(this.formData.start_date)} 12:00:00`).toISOString(),t=new Date(`${this.formatDMYToYMD(this.formData.end_date)} 12:00:00`).toISOString();return{...this.formData,end_date:t,start_date:e,consulting_basic_dto:{consulting_id:this.consulting.consulting_id},consulting_status:{status_id:0}}},validateQuoteData(){return this.errorMessage="",this.isUserDataValid?!0:(this.errorMessage="Please fill all the fields",!1)},async handleSubmit(){if(this.$v.$touch(),this.validateQuoteData()){this.loadingStatus=!0;const e=await O(this.buildPayload());e&&e.status_code===200?this.$emit("submit"):(this.submitErrorMessge=e&&(e.data||e.message)||"Something went wrong",setTimeout(()=>{this.submitErrorMessge=""},5e3)),this.loadingStatus=!1}}}},i=e=>(q("data-v-729a76f1"),e=e(),j(),e),T={class:"col-xs-12 p-0 quote-request-container"},L={class:"col-xs-12 p-0 pr-15 pl-15 header d-flex align-items-center justify-content-between"},B=i(()=>a("div",{class:"header-text d-flex align-items-center"},[a("img",{src:x,class:"header-icon"}),a("p",{class:"header-icon-text"},"Consulting Request")],-1)),Q={class:"col-xs-12 p-0 pl-30 content mt-30"},U=i(()=>a("div",null,[a("span",{class:"content-title"},"Provide us more details")],-1)),R=i(()=>a("div",null,[a("p",{class:"content-desciption"}," To provide resources of the best skill set for your needs, let us know a few more details about your project. ")],-1)),F={class:"form-group"},N=i(()=>a("label",null,[c("Project name"),a("span",{class:"mandatory-field-indicator"},"*")],-1)),z={key:0,class:"custom-error-class"},A={class:"form-group"},G=i(()=>a("label",null,[c("Device Type"),a("span",{class:"mandatory-field-indicator"},"*")],-1)),H={key:0,class:"custom-error-class"},J={class:"form-group"},K=i(()=>a("label",null,[c("Phone"),a("span",{class:"mandatory-field-indicator"},"*")],-1)),W={key:0,class:"custom-error-class"},X={key:0},Z={key:1},ee={class:"row-gap-30 col-gap-30 d-flex flex-wrap"},te={class:"col-xs-12 col-sm-5 col-md-3 p-0"},ae={class:"form-group"},se=i(()=>a("label",null,[c("Preferred start date"),a("span",{class:"mandatory-field-indicator"},"*")],-1)),oe={key:0,class:"custom-error-class"},re={class:"col-xs-12 col-sm-5 col-md-3 p-0"},ne={class:"form-group"},le=i(()=>a("label",null,[c("End date"),a("span",{class:"mandatory-field-indicator"},"*")],-1)),ie={key:0,class:"custom-error-class"},de=i(()=>a("label",null,[c("Other details"),a("span",{class:"mandatory-field-indicator"},"*")],-1)),ue={key:0,class:"custom-error-class custom-error-textarea"},ce=i(()=>a("div",null,[a("p",{class:"mt-10"}," Your message will be sent to our consulting team, who will be in touch within two business days. ")],-1)),me={key:0,class:"error-message text-center"},he={class:"col-xs-12 p-0 pl-15 pt-10 footer d-flex flex-wrap align-items-center justify-content-end"};function pe(e,t,s,d,p,r){const b=g("date-picker"),$=g("BaseButton"),M=g("loader");return n(),l("div",T,[a("div",L,[B,a("span",null,[a("img",{class:"close-icon cursor-pointer",src:E,onClick:t[0]||(t[0]=(...o)=>r.close&&r.close(...o))})])]),a("div",Q,[U,R,a("div",null,[a("div",F,[N,v(a("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>e.$v.formData.project_name.$model=o),class:m([{error:e.$v.formData.project_name.$error},"project-name form-control"]),placeholder:"Enter Project name",onInput:t[2]||(t[2]=o=>r.handleQuoteDataLength("project_name"))},null,34),[[D,e.$v.formData.project_name.$model,void 0,{trim:!0}]]),e.$v.formData.project_name.$error?(n(),l("div",z," Project name is required ")):u("",!0)])]),a("div",null,[a("div",A,[G,v(a("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=o=>e.$v.formData.device_type.$model=o),class:m([{error:e.$v.formData.device_type.$error},"device-type form-control"]),placeholder:"Enter Device Type",onInput:t[4]||(t[4]=o=>r.handleQuoteDataLength("device_type"))},null,34),[[D,e.$v.formData.device_type.$model,void 0,{trim:!0}]]),e.$v.formData.device_type.$error?(n(),l("div",H," Device type is required ")):u("",!0)])]),a("div",null,[a("div",J,[K,v(a("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>e.$v.formData.phone_number.$model=o),class:m([{error:e.$v.formData.phone_number.$error},"device-type form-control"]),type:"phone_number",placeholder:"xxx xxx xxxx"},null,2),[[D,e.$v.formData.phone_number.$model,void 0,{trim:!0}]]),e.$v.formData.phone_number.$error?(n(),l("div",W,[e.$v.formData.phone_number.required?e.$v.formData.phone_number.isPhoneValidOrEmpty?u("",!0):(n(),l("div",Z," Please enter valid phone number ")):(n(),l("div",X," Phone number is required "))])):u("",!0)])]),a("div",ee,[a("div",te,[a("div",ae,[se,f(b,{type:"date",format:"MM-DD-YYYY",class:m(["quote-date-picker",{error:e.$v.formData.start_date.$error}]),valueType:"format",lang:"en",editable:!1,placeholder:"DD-MM-YYYY",modelValue:e.$v.formData.start_date.$model,"onUpdate:modelValue":t[6]||(t[6]=o=>e.$v.formData.start_date.$model=o),modelModifiers:{trim:!0},"disabled-date":r.disabledStartDate,onInput:r.handleStartDateChange},null,8,["modelValue","class","disabled-date","onInput"]),e.$v.formData.start_date.$error?(n(),l("div",oe," Start date is required ")):u("",!0)])]),a("div",re,[a("div",ne,[le,f(b,{type:"date",format:"MM-DD-YYYY",class:m(["quote-date-picker",{error:e.$v.formData.end_date.$error}]),valueType:"format",lang:"en",editable:!1,placeholder:"DD-MM-YYYY",modelValue:e.$v.formData.end_date.$model,"onUpdate:modelValue":t[7]||(t[7]=o=>e.$v.formData.end_date.$model=o),modelModifiers:{trim:!0},disabled:!p.formData.start_date,"disabled-date":r.disabledEndDate},null,8,["modelValue","class","disabled","disabled-date"]),e.$v.formData.end_date.$error?(n(),l("div",ie," End date is required ")):u("",!0)])])]),a("div",null,[de,v(a("textarea",{"onUpdate:modelValue":t[8]||(t[8]=o=>e.$v.formData.other_details.$model=o),class:m([{error:e.$v.formData.other_details.$error},"other-details textarea p-10"]),rows:"5",placeholder:"Tell us more....",onInput:t[9]||(t[9]=o=>r.handleQuoteDataLength("other_details"))},null,34),[[D,e.$v.formData.other_details.$model,void 0,{trim:!0}]]),e.$v.formData.other_details.$error?(n(),l("div",ue," Other details is required ")):u("",!0)]),ce]),p.submitErrorMessge?(n(),l("p",me,S(p.submitErrorMessge),1)):u("",!0),a("div",he,[f($,{variant:"secondary",onClick:r.close},{default:y(()=>[c("Cancel")]),_:1},8,["onClick"]),f($,{disabled:p.loadingStatus,class:"ml-10",onClick:r.handleSubmit},{default:y(()=>[c("Request a quote")]),_:1},8,["disabled","onClick"])]),f(M,{loadingStatus:p.loadingStatus},null,8,["loadingStatus"])])}const ke=C(P,[["render",pe],["__scopeId","data-v-729a76f1"]]);export{ke as R,x as _,be as a,ye as b,Me as c,$e as f};
