import{_ as U,s as $,B as N,$ as _,r as u,o as n,c as d,a as e,O as M,j as w,v as D,b as r,w as b,e as c,p as k,f as L,t as v,Z,n as R,F as O,m as j,k as h,I as T,Y as G}from"./index-BlMJxPGQ.js";import{o as J,_ as Q}from"./edit_icon_new-D9iwJqyt.js";import{O as W}from"./OpusTabs-CHfUVHKr.js";import{L as V}from"./Loader-DR0R9oEF.js";import"./event-bus-DYoA24Gz.js";import{g as F,a as P,b as Y,u as X,c as ee,d as te,e as se,U as oe,D as le,f as ae,h as ie,i as re,j as ne}from"./uirlAdmin-Bdxu67zl.js";import{c as B}from"./cloneDeep-ldw2ZiUo.js";import{O as z}from"./OpusEditor-Cn6yaL1S.js";import{P as de}from"./Pagination-BZVaeVs8.js";import{_ as ce}from"./more-horizontal-YxyMY0P_.js";import{_ as ue}from"./delete_icon-WtjTFUCM.js";import{_ as me}from"./back_arrow-DlGi0Dam.js";import{_ as H}from"./plus_icon_blue-MdAOVTYS.js";import"./_baseAssignValue-BD6sbZ4C.js";import"./chevron_right-Bv87NFTl.js";const ge={components:{Multiselect:$,Loader:V,BaseButton:N,OpusEditor:z},props:["editDetails"],data(){return{allCategoryList:[],tagsList:[],loaderStatus:!1,selectedSubCategoryTags:[],selectedAddCategory:null,categoryName:null,getSubCategoryById:null,UpdateNewCategoryNew:null,getAllSubCategories:[],formDetails:{active:!0,id:null,requirement_content:"",requirement_title:"",subcategory_ids:[]},errorTxt:"",maxlength:{title:256,content:1e4}}},async created(){this.emitter.on("getAllSubCategories",async()=>{await this.getSubCategories()}),await this.getSubCategories(),_("#edit-rec").on("shown.bs.modal",()=>{this.formDetails=B(this.editDetails)})},watch:{editDetails:{handler(o){o&&(this.formDetails=B(o)),this.selectedSubCategoryTags=this.formDetails.subcategory_ids.map(t=>t.id)},immediate:!0}},computed:{canSave(){return this.formDetails.requirement_title&&this.formDetails.requirement_title.length<=this.maxlength.title&&this.formDetails.requirement_content&&this.formDetails.requirement_number&&this.formDetails.requirement_content.length<=this.maxlength.content&&this.errorTxt===""&&this.selectedSubCategoryTags.length>0}},methods:{getSubCategoryNames(o){const t=this.getAllSubCategories.find(y=>y.id===o);return t?t.sub_category_name:""},async getSubCategories(){this.getAllSubCategories=await F(),this.getAllSubCategories=this.getAllSubCategories.filter(o=>o.active===!0)},async getAllCategoryData(){const o=await P();this.allCategoryList=o.filter(t=>t.active===!0)},async getSubCategoriesById(o){this.loaderStatus=!0,this.UpdateNewCategoryNew="",this.getSubCategoryById=await Y(o),this.loaderStatus=!1},closeAddNewContentPopUp(){this.setDefaultValues(),_("#edit-rec").modal("hide")},setDefaultValues(){this.formDetails={id:null,requirement_content:"",requirement_title:"",category_id:"",subcategory_ids:[]},_("#edit-rec").modal("hide")},async editRecommendation(){this.loaderStatus=!0,this.formDetails.active=!0,this.formDetails.date_modified==="null"&&(this.formDetails.date_modified=""),this.formDetails.subcategory_ids=this.getAllSubCategories.filter(y=>this.selectedSubCategoryTags.includes(y.id));const o=B(this.formDetails),t=await X(o);t?(t.status_code===500?(this.$notify({type:"error",title:"Error",text:t.message}),this.categoryName=""):(this.$notify({type:"success",title:"Success",text:t.data}),this.setDefaultValues()),this.emitter.emit("getRecommendations")):t===void 0?this.$notify({type:"error",title:"Error",text:"Please enter all fields"}):this.$notify({type:"error",title:"Error",text:t.data}),this.loaderStatus=!1}}},C=o=>(k("data-v-dd9e74c1"),o=o(),L(),o),he={id:"edit-rec",class:"modal fade",role:"dialog"},_e={class:"modal-dialog modal-lg"},pe={class:"modal-content p-10"},ye={class:"modal-header"},be={class:"col-xs-12 p-0 flex-between"},fe=C(()=>e("div",{class:"top-header"},"Edit Requirement",-1)),Ce=C(()=>e("hr",{class:"mr-15 ml-15 my-0"},null,-1)),Se={class:"modal-body"},ve={class:"row mb-20"},we={class:"col-xs-3 mb-10"},xe=C(()=>e("label",null,"Number",-1)),De=C(()=>e("span",{class:"text-required"}," *",-1)),Ue={class:"form-group"},Ae=["maxlength"],Ne={class:"col-xs-9 mb-10"},ke=C(()=>e("label",null,"Title",-1)),Le=C(()=>e("span",{class:"text-required"}," *",-1)),qe={class:"form-group"},Ie=["maxlength"],Re={class:"col-xs-12 mb-10"},Ve=C(()=>e("label",null,"Requirement Content",-1)),Be=C(()=>e("span",{class:"text-required"}," *",-1)),$e={class:"col-xs-12 p-0"},Pe={class:"col-xs-12 mt-20 select"},Ee=C(()=>e("label",null,"Sub Categories",-1)),Te=C(()=>e("span",{class:"text-required"}," *",-1)),Me=C(()=>e("hr",null,null,-1)),Oe={class:"d-flex justify-content-end col-gap-20"};function je(o,t,y,A,s,a){const g=u("OpusEditor"),p=u("multiselect"),f=u("BaseButton"),l=u("loader");return n(),d("div",he,[e("div",_e,[e("div",pe,[e("div",ye,[e("div",be,[fe,e("div",null,[e("img",{src:M,alt:"",class:"cursor-pointer",onClick:t[0]||(t[0]=(...i)=>a.closeAddNewContentPopUp&&a.closeAddNewContentPopUp(...i))})])])]),Ce,e("div",Se,[e("div",ve,[e("div",we,[xe,De,e("div",Ue,[w(e("input",{"onUpdate:modelValue":t[1]||(t[1]=i=>s.formDetails.requirement_number=i),type:"text",class:"form-control common-input gray-out",maxlength:s.maxlength.title,placeholder:"Add Requirement number",disabled:!0},null,8,Ae),[[D,s.formDetails.requirement_number]])])]),e("div",Ne,[ke,Le,e("div",qe,[w(e("input",{"onUpdate:modelValue":t[2]||(t[2]=i=>s.formDetails.requirement_title=i),type:"text",class:"form-control common-input",maxlength:s.maxlength.title},null,8,Ie),[[D,s.formDetails.requirement_title]])])]),e("div",Re,[Ve,Be,e("div",$e,[r(g,{id:"edit-rec-content",modelValue:s.formDetails.requirement_content,"onUpdate:modelValue":t[3]||(t[3]=i=>s.formDetails.requirement_content=i),placeholder:"Add Requirement content",maxlength:s.maxlength.content,required:""},null,8,["modelValue","maxlength"])])]),e("div",Pe,[Ee,Te,r(p,{showLabels:!1,"close-on-select":!0,"allow-empty":!0,class:"multiselect-single-dropdown multiple",searchable:!0,multiple:!0,options:s.getAllSubCategories.map(i=>i.id),"custom-label":a.getSubCategoryNames,modelValue:s.selectedSubCategoryTags,"onUpdate:modelValue":t[4]||(t[4]=i=>s.selectedSubCategoryTags=i),"open-direction":"top",placeholder:"Select Sub Category"},null,8,["options","custom-label","modelValue"])])]),Me,e("div",Oe,[r(f,{variant:"secondary",onClick:a.closeAddNewContentPopUp},{default:b(()=>[c("Cancel")]),_:1},8,["onClick"]),r(f,{onClick:a.editRecommendation,disabled:!a.canSave},{default:b(()=>[c("Save")]),_:1},8,["onClick","disabled"])])])])]),r(l,{loadingStatus:s.loaderStatus},null,8,["loadingStatus"])])}const Fe=U(ge,[["render",je],["__scopeId","data-v-dd9e74c1"]]),He={props:["rec"],components:{BaseButton:N}},K=o=>(k("data-v-0b5ad6cd"),o=o(),L(),o),Ke={id:"delete_drl",class:"modal",role:"dialog"},Ge={class:"modal-dialog"},Ye={class:"modal-content"},ze=K(()=>e("div",{class:"modal-header"},[e("div",{class:"d-flex justify-content-between float-right"},[e("img",{"data-dismiss":"modal",class:"cursor-pointer",src:M,alt:""})])],-1)),Ze={class:"modal-body"},Je={class:"center center-block w-80"},Qe=K(()=>e("span",{class:"text-h4 pr-20 pl-20"},"Are you sure you want to delete this User Interface Requirement?",-1)),We={class:"text-subtitle-1 pt-20 pb-20"},Xe=K(()=>e("p",{class:"text-regular-large pt-20"}," Deleting will remove this permanently from the database. ",-1)),et={class:"d-flex justify-content-center p-0 mt-20 col-gap-10 mb-20"};function tt(o,t,y,A,s,a){const g=u("BaseButton");return n(),d("div",null,[e("div",Ke,[e("div",Ge,[e("div",Ye,[ze,e("div",Ze,[e("div",Je,[Qe,e("div",We,v(y.rec.recommendation_title),1),Xe]),e("div",et,[r(g,{"data-dismiss":"modal",variant:"secondary"},{default:b(()=>[c("Cancel")]),_:1}),r(g,{variant:"error",onClick:t[0]||(t[0]=p=>o.$emit("delete"))},{default:b(()=>[c("Yes, Delete")]),_:1})])])])])])])}const st=U(He,[["render",tt],["__scopeId","data-v-0b5ad6cd"]]),ot={components:{OpusTabs:W,Loader:V,EditUIRLModal:Fe,DeleteUIRLModal:st,Pagination:de},async created(){this.emitter.on("getRecommendations",async()=>{await this.getRecommendationsData()}),await this.getRecommendationsData(),this.setSortBy("id")},data(){return{recommendations:[],tabActiveName:"viewall",UIRLTabs:[{name:"View All",key:"viewall"},{name:"Hardware",key:"Hardware & On-Device Markings"},{name:"Software",key:"Software"},{name:"Packaging & Labelling",key:"Packaging & Labelling"},{name:"Instructions",key:"Instructions"},{name:"Training",key:"Training"}],changeClass:!1,selectedItem:{},editDetails:null,filteredList:[],loaderStatus:!1,totalPages:1,total:0,perPage:20,currentPage:1,maxVisiblePages:4,sortingType:"name",sortingOrder:"asc",sortIcon:"asc",sortOptions:{id:1,requirement_title:-1,date_created:-1,date_modified:-1}}},watch:{async tabActiveName(){await this.getRecommendationsData()}},methods:{getDateFormat:Z,async pagechanged(o){o&&(this.currentPage=o),await this.getRecommendationsData()},async getRecommendationsData(){const o={pagination:{current_page:this.currentPage,result_per_page:this.perPage},search:this.tabActiveName!=="viewall"?this.tabActiveName:""};this.loaderStatus=!0;const t=await ee(o);t&&(this.filteredList=t.result_data,this.total=t.total_records_count,this.totalRecordsCount=this.total>this.totalRecordsCount?this.total:this.totalRecordsCount,this.totalPages=Math.ceil(this.total/this.perPage)),this.loaderStatus=!1},deleteDRL(o){this.selectedItem=o,_("#delete_drl").modal({backdrop:"static",keyboard:!1})},async deleteRecommendation(o){this.loaderStatus=!0;const t=await te(o);t.message==="success"?this.$notify({type:"success",title:"Success",text:t.data}):this.$notify({type:"error",title:"Error",text:t.data}),_("#delete_drl").modal("hide"),await this.getRecommendationsData(),this.filteredList.length===0&&this.currentPage>1&&(this.currentPage-=1,await this.getRecommendationsData()),this.loaderStatus=!1},openEditPopup(o){this.editDetails=o,this.openAddNewContentPopup()},openAddNewContentPopup(){_("#edit-rec").modal({backdrop:"static",keyboard:!1})},menuDropdown(o){this.changeClass=!1,o.screenY>window.innerHeight-150?this.changeClass=!0:this.changeClass=!1},getSortKey(o){let t="";return t+=this.sortOptions[o]>0?"asc":"desc",t+=this.sortingType===o?" active":" ",t},setSortBy(o){this.sortingType=o,this.sortOptions[o]*=-1;const t=this.sortOptions[o]>0?"desc":"asc";this.sortIcon=t,this.filteredList=J(this.filteredList,o,t)}}},q=o=>(k("data-v-66eae311"),o=o(),L(),o),lt={class:"col-md-12 col-lg-12 col-sm-12 pl-20 pr-20 xs-pr-0 mt-20"},at={class:"text-subtitle-2"},it={class:"pagination-wrapper pt-20"},rt={key:0,class:"projects-table"},nt={class:"table-data-fixed-width"},dt={class:"pl-15"},ct={class:"table-data-fixed-width"},ut={class:"table-data-fixed-width"},mt={class:"d-flex align-items-center justify-content-between"},gt={class:"dropdown pr-20 pl-20"},ht=q(()=>e("img",{src:ce,"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},null,-1)),_t={class:"dropdown-menu dropdown-menu-right pb-10 pt-10"},pt=["onClick"],yt=q(()=>e("img",{src:Q,class:"preview-svg"},null,-1)),bt=q(()=>e("span",{class:"ml-10 project-menu-action"},"Edit",-1)),ft=[yt,bt],Ct=["onClick"],St=q(()=>e("img",{src:ue,class:"preview-svg"},null,-1)),vt=q(()=>e("span",{class:"ml-10 project-menu-action delete"},"Delete",-1)),wt=[St,vt],xt={key:0,class:"norecords_wrapper"},Dt=q(()=>e("div",{class:"mt-50 no-records-found"},"No requirements found!",-1)),Ut=[Dt];function At(o,t,y,A,s,a){const g=u("OpusTabs"),p=u("Pagination"),f=u("EditUIRLModal"),l=u("DeleteUIRLModal"),i=u("loader");return n(),d("div",lt,[e("span",at,v(s.filteredList.length)+" items",1),e("div",it,[r(g,{tabs:s.UIRLTabs,modelValue:s.tabActiveName,"onUpdate:modelValue":t[0]||(t[0]=m=>s.tabActiveName=m)},null,8,["tabs","modelValue"]),s.filteredList.length>0?(n(),d("table",rt,[e("thead",null,[e("tr",null,[e("th",{onClick:t[1]||(t[1]=m=>a.setSortBy("id"))},[c(" Number "),e("span",{class:R(["sort-key",a.getSortKey("requirement_number")])},null,2)]),e("th",{class:"pl-15",onClick:t[2]||(t[2]=m=>a.setSortBy("requirement_title"))},[c(" Title "),e("span",{class:R(["sort-key",a.getSortKey("requirement_title")])},null,2)]),e("th",{onClick:t[3]||(t[3]=m=>a.setSortBy("date_created"))},[c(" Added Date "),e("span",{class:R(["sort-key",a.getSortKey("date_created")])},null,2)]),e("th",{onClick:t[4]||(t[4]=m=>a.setSortBy("date_modified"))},[c(" Last modified "),e("span",{class:R(["sort-key",a.getSortKey("date_modified")])},null,2)])])]),e("tbody",null,[(n(!0),d(O,null,j(s.filteredList,m=>(n(),d("tr",{key:m.id},[e("td",nt,v(m.requirement_number),1),e("td",dt,v(m.requirement_title),1),e("td",ct,v(a.getDateFormat(m.date_created)),1),e("td",ut,[e("div",mt,[c(v(a.getDateFormat(m.date_modified)||" ")+" ",1),e("div",gt,[ht,e("div",_t,[e("div",{class:"project-menu-action-container p-15",onClick:E=>a.openEditPopup(m)},ft,8,pt),e("div",{class:"project-menu-action-container p-15",onClick:E=>a.deleteDRL(m)},wt,8,Ct)])])])])]))),128))])])):h("",!0),s.total?(n(),T(p,{key:1,totalPages:s.totalPages,maxVisibleButtons:s.maxVisiblePages,total:s.total,perPage:s.perPage,currentPage:s.currentPage,onPagechanged:a.pagechanged},null,8,["totalPages","maxVisibleButtons","total","perPage","currentPage","onPagechanged"])):h("",!0)]),s.filteredList.length===0?(n(),d("div",xt,Ut)):h("",!0),r(f,{editDetails:s.editDetails},null,8,["editDetails"]),r(l,{rec:s.selectedItem,onDelete:t[5]||(t[5]=m=>a.deleteRecommendation(s.selectedItem.id))},null,8,["rec"]),r(i,{loadingStatus:s.loaderStatus},null,8,["loadingStatus"])])}const Nt=U(ot,[["render",At],["__scopeId","data-v-66eae311"]]),kt={components:{Loader:V,Multiselect:$,BaseButton:N},data(){return{categoryName:"",categoryActionSelect:["Add","Update","Delete"],actionSelected:"",allCategoryList:[],loaderStatus:!1,selectedUpdateCategory:null,selectedDeleteCategory:null,UpdateCategoryNew:""}},async created(){await this.getAllCategoryData()},computed:{canSave(){return this.actionSelected==="Add"&&this.categoryName!==""||this.actionSelected==="Update"&&this.UpdateCategoryNew&&this.selectedUpdateCategory||this.actionSelected==="Delete"&&this.selectedDeleteCategory}},methods:{async getCategoryData(){this.loaderStatus=!0,this.categoryName="",this.selectedUpdateCategory=null,this.UpdateCategoryNew="",this.selectedDeleteCategory=null,await this.getAllCategoryData(),this.loaderStatus=!1},async getAllCategoryData(){const o=await P();this.allCategoryList=o.filter(t=>t.active===!0)},cancelPermissions(){this.categoryName="",this.selectedUpdateCategory=null,this.UpdateCategoryNew="",this.selectedDeleteCategory=null,this.actionSelected="",_("#drl-cat").modal("hide")},async addCategory(){if(this.loaderStatus=!0,this.actionSelected==="Add"){const o={category_name:this.categoryName},t=await se(o);t?t.message==="Category name already exist"?(this.$notify({type:"error",title:"Error",text:t.message}),this.categoryName=""):(this.$notify({type:"success",title:"Success",text:t.data}),this.categoryName="",this.actionSelected="",_("#drl-cat").modal("hide"),this.emitter.emit("getAllCategories")):t===void 0?this.$notify({type:"error",title:"Error",text:"Category name should not be null"}):this.$notify({type:"error",title:"Error",text:t.data})}else if(this.actionSelected==="Update"){const o={category_name:this.UpdateCategoryNew,category_id:this.selectedUpdateCategory},t=await oe(o);t?t.message==="Category name already exist"?(this.$notify({type:"error",title:"Error",text:t.message}),this.UpdateCategoryNew=""):(this.$notify({type:"success",title:"Success",text:t.data}),this.selectedUpdateCategory=null,this.UpdateCategoryNew="",this.actionSelected="",_("#drl-cat").modal("hide"),this.emitter.emit("getAllCategories")):t===void 0?this.$notify({type:"error",title:"error",text:"Category name should not be null"}):this.$notify({type:"error",title:"Error",text:t.data})}else if(this.actionSelected==="Delete"){const o=this.selectedDeleteCategory,t=await le(o);t?(this.$notify({type:"success",title:"Success",text:t.data}),this.selectedDeleteCategory=null,this.actionSelected="",_("#drl-cat").modal("hide"),this.emitter.emit("getAllCategories")):t===void 0?this.$notify({type:"error",title:"error",text:"Category name should not be null"}):this.$notify({type:"error",title:"Error",text:t.data}),this.emitter.emit("getAllSubCategories")}this.loaderStatus=!1}}},I=o=>(k("data-v-b00f8d26"),o=o(),L(),o),Lt={id:"drl-cat",class:"modal fade",role:"dialog"},qt={class:"modal-dialog"},It={class:"modal-content first-modal-content"},Rt={class:"modal-header modal-bgcolor"},Vt=I(()=>e("div",{class:"text-h5 blue-1"},"Category",-1)),Bt=I(()=>e("hr",null,null,-1)),$t={class:"modal-body"},Pt={class:"col-xs-12 col-sm-12 add-role mb-10"},Et=I(()=>e("p",{class:"search-label sub-heading"},[c(" Actions "),e("span",{style:{color:"red"}},"*")],-1)),Tt=["value"],Mt={class:"pl-5"},Ot={key:0,class:"col-xs-12 col-sm-12 add-role"},jt={class:"row mr-bt-5p"},Ft=I(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[c(" Category Name "),e("span",{style:{color:"red"}},"*")],-1)),Ht={class:"col-xs-12 col-sm-6"},Kt={key:1,class:"col-xs-12 col-sm-12 add-role"},Gt={class:"row mr-bt-5p"},Yt=I(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[c(" Category Name "),e("span",{style:{color:"red"}},"*")],-1)),zt={class:"col-xs-12 col-sm-6"},Zt={key:2,class:"col-xs-12 col-sm-12 add-role"},Jt={class:"row mr-bt-5p"},Qt=I(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[c(" Category Name "),e("span",{style:{color:"red"}},"*")],-1)),Wt={class:"col-xs-12 col-sm-6"},Xt={key:0,class:"col-sm-12 col-xs-12 col-md-12 footer remove_button_padding"},es={class:"d-flex justify-content-end col-gap-15"};function ts(o,t,y,A,s,a){const g=u("multiselect"),p=u("BaseButton"),f=u("loader");return n(),d("div",Lt,[e("div",qt,[e("div",It,[e("div",Rt,[e("button",{type:"button",class:"close",onClick:t[0]||(t[0]=(...l)=>a.cancelPermissions&&a.cancelPermissions(...l))}," × "),Vt,Bt]),e("div",$t,[e("div",Pt,[Et,(n(!0),d(O,null,j(s.categoryActionSelect,(l,i)=>(n(),d("div",{class:"col-xs-12 col-md-4",key:i},[w(e("input",{type:"radio",name:"optradio",value:l,"onUpdate:modelValue":t[1]||(t[1]=m=>s.actionSelected=m),onClick:t[2]||(t[2]=(...m)=>a.getCategoryData&&a.getCategoryData(...m))},null,8,Tt),[[G,s.actionSelected]]),e("label",Mt,v(l),1)]))),128))]),s.actionSelected==="Add"?(n(),d("div",Ot,[e("div",jt,[Ft,e("div",Ht,[w(e("input",{type:"text",placeholder:"Add New Category",class:"form-control",maxlength:"56","onUpdate:modelValue":t[3]||(t[3]=l=>s.categoryName=l)},null,512),[[D,s.categoryName]])])])])):h("",!0),s.actionSelected==="Update"?(n(),d("div",Kt,[e("div",Gt,[Yt,e("div",zt,[r(g,{showLabels:!1,"close-on-select":!0,"allow-empty":!1,class:"multiselect-single-dropdown",searchable:!0,options:s.allCategoryList.map(l=>l.id),"custom-label":l=>s.allCategoryList.find(i=>i.id==l).category_name,modelValue:s.selectedUpdateCategory,"onUpdate:modelValue":t[4]||(t[4]=l=>s.selectedUpdateCategory=l),"open-direction":"bottom",placeholder:"Select Category"},null,8,["options","custom-label","modelValue"]),s.selectedUpdateCategory?w((n(),d("input",{key:0,type:"text",placeholder:"Update Category",class:"form-control mt-10",maxlength:"56","onUpdate:modelValue":t[5]||(t[5]=l=>s.UpdateCategoryNew=l)},null,512)),[[D,s.UpdateCategoryNew]]):h("",!0)])])])):h("",!0),s.actionSelected==="Delete"?(n(),d("div",Zt,[e("div",Jt,[Qt,e("div",Wt,[r(g,{showLabels:!1,"close-on-select":!0,"allow-empty":!1,class:"multiselect-single-dropdown",searchable:!0,options:s.allCategoryList.map(l=>l.id),"custom-label":l=>s.allCategoryList.find(i=>i.id==l).category_name,modelValue:s.selectedDeleteCategory,"onUpdate:modelValue":t[6]||(t[6]=l=>s.selectedDeleteCategory=l),"open-direction":"bottom",placeholder:"Select Category",value:"Select Category"},null,8,["options","custom-label","modelValue"])])])])):h("",!0)]),s.actionSelected==="Add"||s.actionSelected==="Update"||s.actionSelected==="Delete"?(n(),d("div",Xt,[e("div",es,[r(p,{variant:"secondary",onClick:a.cancelPermissions},{default:b(()=>[c(" Cancel ")]),_:1},8,["onClick"]),r(p,{variant:s.actionSelected!=="Delete"?"primary":"error",onClick:a.addCategory,disabled:!a.canSave},{default:b(()=>[c(v(s.actionSelected!=="Delete"?"Save":"Delete"),1)]),_:1},8,["variant","onClick","disabled"])])])):h("",!0)]),r(f,{loadingStatus:s.loaderStatus},null,8,["loadingStatus"])])])}const ss=U(kt,[["render",ts],["__scopeId","data-v-b00f8d26"]]),os={components:{Loader:V,Multiselect:$,BaseButton:N},data(){return{categoryName:"",categoryActionSelect:["Add","Update","Delete"],serviceSelected:{},actionSelected:"",allCategoryList:[],loaderStatus:!1,selectedAddCategory:null,selectedUpdateCategory:null,selectedDeleteCategory:null,selectedDeleteSubCategory:null,getSelectedSubCategory:null,UpdateNewCategoryNew:null,updateSubcategory:null,getSubCategoryById:null}},async created(){this.emitter.on("getAllCategories",async()=>{this.getAllCategoryData()}),await this.getAllCategoryData()},methods:{clearAllFields(){this.loaderStatus=!0,this.selectedAddCategory=null,this.categoryName="",this.selectedUpdateCategory=null,this.UpdateNewCategoryNew=null,this.updateSubcategory="",this.selectedDeleteCategory=null,this.selectedDeleteSubCategory=null,this.loaderStatus=!1},async getAllCategoryData(){this.loaderStatus=!0;const o=await P();this.allCategoryList=o.filter(t=>t.active===!0),this.loaderStatus=!1},async getSubCategoriesById(o){this.loaderStatus=!0,this.getSubCategoryById=await Y(o),this.getSubCategoryById=this.getSubCategoryById.filter(t=>t.active===!0),this.loaderStatus=!1},async getSubCategoriesList(){this.loaderStatus=!0;const o=await F();this.getSelectedSubCategory=o.filter(t=>t.id===this.selectedDeleteCategory),this.loaderStatus=!1},async addCategory(){if(this.loaderStatus=!0,this.actionSelected==="Add"){const o={category_id:this.selectedAddCategory,sub_category_name:this.categoryName},t=await ae(o);t?t.message==="Subcategory name already exist"?(this.$notify({type:"error",title:"Error",text:t.message}),this.categoryName=""):(this.$notify({type:"success",title:"Success",text:t.data}),this.selectedAddCategory=null,this.categoryName="",this.actionSelected="",_("#drl-subcat").modal("hide"),this.emitter.emit("getAllSubCategories")):t===void 0?this.$notify({type:"error",title:"Error",text:"Category/Sub Category name should not be null"}):this.$notify({type:"error",title:"Error",text:t.data})}else if(this.actionSelected==="Update"){const o={sub_category_name:this.updateSubcategory,id:this.UpdateNewCategoryNew},t=await ie(o);t?t.message==="Subcategory name already exist"?(this.$notify({type:"error",title:"Error",text:t.message}),this.categoryName=""):(this.$notify({type:"success",title:"Success",text:t.data}),this.selectedUpdateCategory=null,this.UpdateNewCategoryNew=null,this.updateSubcategory="",this.actionSelected="",_("#drl-subcat").modal("hide"),this.emitter.emit("getAllSubCategories")):t===void 0?this.$notify({type:"error",title:"Error",text:"Category/Sub Category name should not be null"}):this.$notify({type:"error",title:"Error",text:t.data})}else if(this.actionSelected==="Delete"){const o=this.selectedDeleteSubCategory,t=await re(o);t?(this.$notify({type:"success",title:"Success",text:t.data}),this.selectedDeleteCategory=null,this.selectedDeleteSubCategory=null,this.actionSelected="",_("#drl-subcat").modal("hide"),this.emitter.emit("getAllSubCategories")):t===void 0?this.$notify({type:"error",title:"Error",text:"Category/Sub Category name should not be null"}):this.$notify({type:"error",title:"Error",text:t.data})}this.loaderStatus=!1},cancelPermissions(){this.actionSelected="",this.clearAllFields(),_("#drl-subcat").modal("hide")}}},x=o=>(k("data-v-31063e92"),o=o(),L(),o),ls={id:"drl-subcat",class:"modal fade",role:"dialog"},as={class:"modal-dialog"},is={class:"modal-content first-modal-content"},rs={class:"modal-header modal-bgcolor"},ns=x(()=>e("div",{class:"text-h5 blue-1"},"Subcategory",-1)),ds=x(()=>e("hr",null,null,-1)),cs={class:"modal-body"},us={class:"col-xs-12 col-sm-12 add-role mb-10"},ms=x(()=>e("p",{class:"search-label sub-heading"},[c(" Actions "),e("span",{class:"text-required"}," *")],-1)),gs=["value"],hs={class:"pl-5"},_s={key:0,class:"col-xs-12 col-sm-12 add-role"},ps={class:"row mr-bt-5p"},ys=x(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[c(" Category Name "),e("span",{class:"text-required"}," *")],-1)),bs={class:"col-xs-12 col-sm-6"},fs={key:0,class:"col-sm-12 col-xs-12 col-md-12 mb-5"},Cs=x(()=>e("span",{class:"text-required"}," *",-1)),Ss={class:"col-xs-12 col-sm-6"},vs={key:1,class:"col-xs-12 col-sm-12 add-role"},ws={class:"row mr-bt-5p"},xs=x(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[c(" Category Name "),e("span",{class:"text-required"}," *")],-1)),Ds={class:"col-xs-12 col-sm-6"},Us={key:0,class:"col-sm-12 col-xs-12 col-md-12 mb-5"},As=x(()=>e("span",{class:"text-required"}," *",-1)),Ns={class:"col-xs-12 col-sm-6"},ks={key:2,class:"col-xs-12 col-sm-12 add-role"},Ls={class:"row mr-bt-5p"},qs=x(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[c(" Category Name "),e("span",{class:"text-required"}," *")],-1)),Is={class:"col-xs-12 col-sm-6"},Rs={key:0,class:"col-sm-12 col-xs-12 col-md-12 mb-5"},Vs=x(()=>e("span",{class:"text-required"}," *",-1)),Bs={class:"col-xs-12 col-sm-6"},$s={key:0,class:"col-sm-12 col-xs-12 col-md-12 footer remove_button_padding"},Ps={class:"d-flex justify-content-end col-gap-15"};function Es(o,t,y,A,s,a){const g=u("multiselect"),p=u("BaseButton"),f=u("loader");return n(),d("div",ls,[e("div",as,[e("div",is,[e("div",rs,[e("button",{type:"button",class:"close",onClick:t[0]||(t[0]=(...l)=>a.cancelPermissions&&a.cancelPermissions(...l))}," × "),ns,ds]),e("div",cs,[e("div",us,[ms,(n(!0),d(O,null,j(s.categoryActionSelect,(l,i)=>(n(),d("div",{class:"col-xs-12 col-md-4",key:i},[w(e("input",{type:"radio",name:"optradio",value:l,"onUpdate:modelValue":t[1]||(t[1]=m=>s.actionSelected=m),onClick:t[2]||(t[2]=(...m)=>a.clearAllFields&&a.clearAllFields(...m))},null,8,gs),[[G,s.actionSelected]]),e("label",hs,v(l),1)]))),128))]),s.actionSelected==="Add"?(n(),d("div",_s,[e("div",ps,[ys,e("div",bs,[r(g,{showLabels:!1,"close-on-select":!0,"allow-empty":!1,class:"multiselect-single-dropdown",searchable:!0,options:s.allCategoryList.map(l=>l.id),"custom-label":l=>s.allCategoryList.find(i=>i.id==l).category_name,modelValue:s.selectedAddCategory,"onUpdate:modelValue":t[3]||(t[3]=l=>s.selectedAddCategory=l),"open-direction":"bottom",placeholder:"Select Category"},null,8,["options","custom-label","modelValue"])]),s.selectedAddCategory?(n(),d("div",fs,[c(" Sub Category Name "),Cs])):h("",!0),e("div",Ss,[s.selectedAddCategory?w((n(),d("input",{key:0,type:"text",placeholder:"Add New Sub Category",class:"form-control",maxlength:"56","onUpdate:modelValue":t[4]||(t[4]=l=>s.categoryName=l)},null,512)),[[D,s.categoryName]]):h("",!0)])])])):h("",!0),s.actionSelected==="Update"?(n(),d("div",vs,[e("div",ws,[xs,e("div",Ds,[r(g,{showLabels:!1,"close-on-select":!0,"allow-empty":!1,class:"multiselect-single-dropdown",searchable:!0,options:s.allCategoryList.map(l=>l.id),"custom-label":l=>s.allCategoryList.find(i=>i.id==l).category_name,modelValue:s.selectedUpdateCategory,"onUpdate:modelValue":t[5]||(t[5]=l=>s.selectedUpdateCategory=l),placeholder:"Select Category","open-direction":"bottom",onSelect:a.getSubCategoriesById},null,8,["options","custom-label","modelValue","onSelect"])]),s.selectedUpdateCategory?(n(),d("div",Us,[c(" Sub Category Name "),As])):h("",!0),e("div",Ns,[s.selectedUpdateCategory?(n(),T(g,{key:0,showLabels:!1,"close-on-select":!0,"allow-empty":!1,class:"multiselect-single-dropdown",searchable:!0,options:s.getSubCategoryById.map(l=>l.id),"custom-label":l=>s.getSubCategoryById.find(i=>i.id==l).sub_category_name,modelValue:s.UpdateNewCategoryNew,"onUpdate:modelValue":t[6]||(t[6]=l=>s.UpdateNewCategoryNew=l),"open-direction":"bottom",placeholder:"Select Sub Category"},null,8,["options","custom-label","modelValue"])):h("",!0),s.UpdateNewCategoryNew?w((n(),d("input",{key:1,type:"text",placeholder:"Update Sub Category",maxlength:"56",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=l=>s.updateSubcategory=l)},null,512)),[[D,s.updateSubcategory]]):h("",!0)])])])):h("",!0),s.actionSelected==="Delete"?(n(),d("div",ks,[e("div",Ls,[qs,e("div",Is,[r(g,{showLabels:!1,"close-on-select":!0,"allow-empty":!1,class:"multiselect-single-dropdown",searchable:!0,options:s.allCategoryList.map(l=>l.id),"custom-label":l=>s.allCategoryList.find(i=>i.id==l).category_name,modelValue:s.selectedDeleteCategory,"onUpdate:modelValue":t[8]||(t[8]=l=>s.selectedDeleteCategory=l),"open-direction":"bottom",placeholder:"Select Category",onSelect:a.getSubCategoriesById},null,8,["options","custom-label","modelValue","onSelect"])]),s.selectedDeleteCategory?(n(),d("div",Rs,[c(" Sub Category Name "),Vs])):h("",!0),e("div",Bs,[s.selectedDeleteCategory?(n(),T(g,{key:0,showLabels:!1,"close-on-select":!0,"allow-empty":!1,class:"multiselect-single-dropdown",searchable:!0,options:s.getSubCategoryById.map(l=>l.id),"custom-label":l=>s.getSubCategoryById.find(i=>i.id==l).sub_category_name,modelValue:s.selectedDeleteSubCategory,"onUpdate:modelValue":t[9]||(t[9]=l=>s.selectedDeleteSubCategory=l),"open-direction":"bottom",placeholder:"Select Sub Category"},null,8,["options","custom-label","modelValue"])):h("",!0)])])])):h("",!0)]),s.actionSelected==="Add"||s.actionSelected==="Update"||s.actionSelected==="Delete"?(n(),d("div",$s,[e("div",Ps,[r(p,{variant:"secondary",onClick:a.cancelPermissions},{default:b(()=>[c(" Cancel ")]),_:1},8,["onClick"]),r(p,{variant:s.actionSelected!=="Delete"?"primary":"error",onClick:a.addCategory},{default:b(()=>[c(v(s.actionSelected!=="Delete"?"Save":"Delete"),1)]),_:1},8,["variant","onClick"])])])):h("",!0)]),r(f,{loadingStatus:s.loaderStatus},null,8,["loadingStatus"])])])}const Ts=U(os,[["render",Es],["__scopeId","data-v-31063e92"]]),Ms={components:{Multiselect:$,Loader:V,BaseButton:N,OpusEditor:z},props:{allCategoryList:{type:Array,default:()=>[]},getAvailableTags:{type:Array,default:()=>[]}},data(){return{categoriesList:[],countriesList:[],tagsList:[],loaderStatus:!1,selectedAddCategory:null,categoryName:null,getSubCategoryById:null,UpdateNewCategoryNew:[],getAllSubCategories:[],subCategoriesPayload:[],formDetails:{active:!0,id:0,subcategory_ids:[],requirement_number:null,requirement_content:"",requirement_title:"",recommendation_image_path:""},formDetailsCopy:null,previewCode:null,maxlength:{title:256,content:1e4}}},async created(){this.emitter.on("getAllSubCategories",async()=>{await this.getSubCategories()}),await this.getSubCategories()},computed:{canUpload(){return this.formDetails.requirement_title&&this.formDetails.requirement_title.length<=this.maxlength.title&&this.formDetails.requirement_content&&this.formDetails.requirement_number&&this.formDetails.requirement_content.length<=this.maxlength.content&&this.UpdateNewCategoryNew.length>0}},methods:{getSubCategoryNames(o){const t=this.getAllSubCategories.find(y=>y.id===o);return t?t.sub_category_name:""},async getSubCategories(){this.getAllSubCategories=await F(),this.getAllSubCategories=this.getAllSubCategories.filter(o=>o.active===!0)},closeAddNewContentPopUp(){this.setDefaultValues(),_("#add-new-rec").modal("hide")},setDefaultValues(){this.UpdateNewCategoryNew=[],this.tagsList=[],this.formDetails={active:!0,id:0,subcategory_ids:[],requirement_content:"",requirement_title:"",requirement_number:""}},async saveRecommendation(){this.loaderStatus=!0,this.formDetails.subcategory_ids=this.getAllSubCategories.filter(y=>this.UpdateNewCategoryNew.includes(y.id));const o=B(this.formDetails),t=await ne(o);t?t.status_code===500?(this.$notify({type:"error",title:"Error",text:t.message}),this.categoryName=""):(this.$notify({type:"success",title:"Success",text:t.data}),this.setDefaultValues(),_("#add-new-rec").modal("hide")):t===void 0?this.$notify({type:"error",title:"Error",text:"Please enter all fields"}):this.$notify({type:"error",title:"Error",text:t.data}),this.emitter.emit("getRecommendations"),this.loaderStatus=!1}}},S=o=>(k("data-v-fa00071d"),o=o(),L(),o),Os={id:"add-new-rec",class:"modal fade",role:"dialog"},js={class:"modal-dialog modal-lg"},Fs={class:"modal-content p-10"},Hs={class:"modal-header"},Ks={class:"col-xs-12 p-0 flex-between"},Gs=S(()=>e("div",{class:"top-header"},"Add Requirement",-1)),Ys=S(()=>e("hr",{class:"mr-15 ml-15 my-0"},null,-1)),zs={class:"modal-body"},Zs={class:"row mb-20"},Js={class:"col-xs-3 mb-10"},Qs=S(()=>e("label",null,"Number",-1)),Ws=S(()=>e("span",{class:"text-required"}," *",-1)),Xs={class:"form-group"},eo=["maxlength"],to={class:"col-xs-9 mb-10"},so=S(()=>e("label",null,"Title",-1)),oo=S(()=>e("span",{class:"text-required"}," *",-1)),lo={class:"form-group"},ao=["maxlength"],io={class:"col-xs-12 mb-10"},ro=S(()=>e("label",null,"Requirement Content",-1)),no=S(()=>e("span",{class:"text-required"}," *",-1)),co={class:"col-xs-12 p-0"},uo={class:"col-xs-12"},mo=S(()=>e("label",null,"Sub Category Name",-1)),go=S(()=>e("span",{class:"text-required"}," *",-1)),ho=S(()=>e("hr",null,null,-1)),_o={class:"d-flex justify-content-end col-gap-10"};function po(o,t,y,A,s,a){const g=u("OpusEditor"),p=u("multiselect"),f=u("BaseButton"),l=u("loader");return n(),d("div",Os,[e("div",js,[e("div",Fs,[e("div",Hs,[e("div",Ks,[Gs,e("div",null,[e("img",{src:M,alt:"",class:"cursor-pointer",onClick:t[0]||(t[0]=(...i)=>a.closeAddNewContentPopUp&&a.closeAddNewContentPopUp(...i))})])])]),Ys,e("div",zs,[e("div",Zs,[e("div",Js,[Qs,Ws,e("div",Xs,[w(e("input",{"onUpdate:modelValue":t[1]||(t[1]=i=>s.formDetails.requirement_number=i),type:"text",class:"form-control common-input",maxlength:s.maxlength.title,placeholder:"Add Requirement number"},null,8,eo),[[D,s.formDetails.requirement_number]])])]),e("div",to,[so,oo,e("div",lo,[w(e("input",{"onUpdate:modelValue":t[2]||(t[2]=i=>s.formDetails.requirement_title=i),type:"text",class:"form-control common-input",maxlength:s.maxlength.title,placeholder:"Add Requirement title"},null,8,ao),[[D,s.formDetails.requirement_title]])])]),e("div",io,[ro,no,e("div",co,[r(g,{id:"add-rec-content",modelValue:s.formDetails.requirement_content,"onUpdate:modelValue":t[3]||(t[3]=i=>s.formDetails.requirement_content=i),modelModifiers:{trim:!0},placeholder:"Add Requirement content",maxlength:s.maxlength.content,required:""},null,8,["modelValue","maxlength"])])]),e("div",uo,[mo,go,r(p,{showLabels:!1,"close-on-select":!0,"allow-empty":!0,class:R([[s.UpdateNewCategoryNew.length?"has-values":"no-values"],"multiselect-single-dropdown multiple"]),searchable:!0,multiple:!0,options:s.getAllSubCategories.map(i=>i.id),"custom-label":a.getSubCategoryNames,modelValue:s.UpdateNewCategoryNew,"onUpdate:modelValue":t[4]||(t[4]=i=>s.UpdateNewCategoryNew=i),"open-direction":"top",placeholder:"Select Sub Category"},null,8,["class","options","custom-label","modelValue"])])]),ho,e("div",_o,[r(f,{variant:"secondary",onClick:a.closeAddNewContentPopUp},{default:b(()=>[c("Cancel")]),_:1},8,["onClick"]),r(f,{disabled:!a.canUpload,onClick:a.saveRecommendation},{default:b(()=>[c("Save")]),_:1},8,["disabled","onClick"])])])])]),r(l,{loadingStatus:s.loaderStatus},null,8,["loadingStatus"])])}const yo=U(Ms,[["render",po],["__scopeId","data-v-fa00071d"]]),bo={name:"AdminUIRLHome",components:{UIRLGrid:Nt,UIRLCategoryModal:ss,UIRLSubCategoryModal:Ts,AddUIRLModal:yo,BaseButton:N},data(){return{allCategoryList:[],getAvailableTags:[]}},async created(){this.emitter.on("getAllSubCategories",async()=>{await this.getAllCategoriesData()}),await this.getAllCategoriesData()},methods:{async getAllCategoriesData(){const o=await P();this.allCategoryList=o.filter(t=>t.active===!0)},addCategory(){this.type="new_role",this.header="Category",_("#drl-cat").modal({backdrop:"static",keyboard:!1})},addSubCategory(){this.type="new_role",this.header="Sub Category",_("#drl-subcat").modal({backdrop:"static",keyboard:!1})},addRecommendation(){_("#add-new-rec").modal({backdrop:"static",keyboard:!1})},navigateToLaunchPad(){this.$router.push("/launchpad")}}},fo={class:"content-wrappper"},Co={class:"row m-0"},So={class:"mt-20 pr-20 pl-20"},vo={class:"col-xs-12 mb-10 d-flex align-items-center col-gap-10 mb-20 p-0"},wo=e("div",{class:"text-h3"},"User Interface Requirements Library",-1),xo={class:"d-flex justify-content-end col-gap-15 row-gap-10 flex-wrap"},Do=e("img",{src:H,alt:"Add Category",class:"preview-svg"},null,-1),Uo=e("span",null,"Categories",-1),Ao=e("img",{src:H,alt:"Add Subcategory",class:"preview-svg"},null,-1),No=e("span",null,"Sub categories",-1),ko=e("img",{src:H,alt:"Add Requirement",class:"preview-svg"},null,-1),Lo=e("span",null,"Add Requirement",-1);function qo(o,t,y,A,s,a){const g=u("router-link"),p=u("BaseButton"),f=u("UIRLGrid"),l=u("UIRLCategoryModal"),i=u("UIRLSubCategoryModal"),m=u("AddUIRLModal");return n(),d("div",null,[e("div",fo,[e("div",Co,[e("div",So,[e("div",vo,[e("img",{onClick:t[0]||(t[0]=(...E)=>a.navigateToLaunchPad&&a.navigateToLaunchPad(...E)),class:"back-img cursor-pointer",src:me,alt:""}),r(g,{class:"text-subtitle-2 blue-1",to:"/launchpad"},{default:b(()=>[c("Launchpad")]),_:1})]),wo,e("div",xo,[r(p,{variant:"secondary","has-icon":"",onClick:a.addCategory},{default:b(()=>[Do,Uo]),_:1},8,["onClick"]),r(p,{variant:"secondary","has-icon":"",onClick:a.addSubCategory},{default:b(()=>[Ao,No]),_:1},8,["onClick"]),r(p,{variant:"secondary","has-icon":"",onClick:a.addRecommendation},{default:b(()=>[ko,Lo]),_:1},8,["onClick"])])]),r(f)]),r(l),r(i),r(m,{allCategoryList:s.allCategoryList,getAvailableTags:s.getAvailableTags},null,8,["allCategoryList","getAvailableTags"])])])}const Yo=U(bo,[["render",qo]]);export{Yo as default};
