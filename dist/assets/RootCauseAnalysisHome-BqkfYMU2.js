import{_ as E,s as ee,B as U,d as te,N as z,$ as g,o as r,c as n,a as e,b as h,w as R,e as v,F as A,m as T,n as C,i as B,t as d,j as w,q as L,v as M,b2 as Y,k as p,I as K,r as m,p as V,f as O,O as se}from"./index-BlMJxPGQ.js";import{L as $}from"./Loader-DR0R9oEF.js";import{R as oe,b as k,_ as ae,a as le,c as re,d as ie,e as ne}from"./tools_freeversion_lock-Bg4t4mT5.js";import{g as ce,a as de,b as J,c as ue,d as W,s as he,e as _e}from"./rootCauseAnalysis-B4qBXXV_.js";import{g as Z}from"./designRecommendationLibrary-Bji3wddo.js";import{c as Q}from"./marketPlaceResources-hux66PHi.js";import{P as pe}from"./Pagination-BZVaeVs8.js";import{m as me}from"./marketPlaceTools-GTlmHJkh.js";import{p as P}from"./marketo-zx_g1DXt.js";import{_ as q}from"./search_icon-C65g3Q5L.js";import{_ as fe}from"./danger_close_icon-CkTgh2bE.js";import{h as ge}from"./moment-Cl4UOzQZ.js";import{c as ye}from"./constants-DZfa7LnM.js";import{a as ve,r as Ce}from"./cart-QHhiBhPv.js";import{E as xe}from"./event-bus-DYoA24Gz.js";import{_ as be}from"./info-modal-training-icon-Dm7yAfS1.js";import{_ as Ie}from"./play-D7l_pjgS.js";import{_ as we}from"./goto_arrow-zLb6UYwr.js";import{_ as Re}from"./trash-D7-advNl.js";import{r as j,m as G}from"./index-CWzxsAm4.js";import{u as Se}from"./index-tvgxpbll.js";import{g as De}from"./lmsTraining-BNcLeb-5.js";import{A as ke}from"./AddRemoveCartPopup-CqkASo7c.js";import{_ as Pe}from"./chevron_left_white-D3IwzB1n.js";import{_ as Fe,a as Ae}from"./document_white-DjZrF9BV.js";import"./DocumentsMoreInfo-CaOFYwEb.js";import"./tool_available-BYBTocPu.js";import"./close_icon_white-5NpTKSBQ.js";import"./chevron_right-Bv87NFTl.js";import"./cloneDeep-ldw2ZiUo.js";import"./_baseAssignValue-BD6sbZ4C.js";import"./OpusSelect-BRceMwA4.js";import"./OpusCheckbox-DmKgoiup.js";import"./chevron_down_new-ByXOiGKT.js";import"./documentsMixin-Bh1uCigM.js";import"./documents-CP6oEKge.js";const Te="/static/images/icons/learn-more-filters.svg",Me={props:["userId"],data(){return{loaderStatus:!1,selectAllFiles:!1,selectedFiles:[],rootCauseInfo:{},rootCauseFilters:{},selectedFilterId:[],rootCauseModalInfo:{},enteredTag:"",totalPages:1,total:0,perPage:20,fromRecords:1,currentPage:1,maxVisiblePages:4,rootCauseTags:[],copiedData:[],finalData:[],response:{},toolsData:{},isPurchased:1,isEmpty:!1,rcaIndex:-1,totalCurrentRecords:"",searchText:"",isActive:!1,hasExpand:!0,placeholder:"Search",selectedAllFilesIndeterminate:!1}},components:{Multiselect:ee,Loader:$,RootCauseInfoModal:oe,Pagination:pe,marketPlaceTools:me,BaseButton:U},async created(){this.loaderStatus=!0,await Promise.all([this.getRootCauseFilters(),this.getList()]),this.loaderStatus=!1},watch:{enteredTag(t,s){this.selectedFilterId=this.selectedFilterId.filter(_=>!s.includes(_));const l=[...this.selectedFilterId,...this.enteredTag];this.selectedFilterId=[...new Set(l)]},selectAllFiles(){this.selectAllFiles?(this.selectedFiles=this.rootCauseInfo.map(t=>t.id),this.selectedAllFilesIndeterminate=!1):this.selectedAllFilesIndeterminate===!1&&(this.selectedAllFilesIndeterminate=!1,this.selectedFiles=[])},selectedFiles(){this.selectedFiles.length===this.rootCauseInfo.length&&this.rootCauseInfo.length!==0?this.selectAllFiles=!0:(this.selectedAllFilesIndeterminate=!0,this.selectAllFiles=!1)}},methods:{makeBarExpand(){this.isActive=!this.isActive,this.clear()},async search(){this.searchText!==""&&this.searchRootCause(this.searchText),this.setSelectionsAsEmpty(),this.isEmpty=!1,this.selectedFilterId=[],this.rootCauseInfo=[],this.enteredTag=[]},clear(){this.searchText=""},async viewPdf(){this.loaderStatus=!0;const t=await ce();this.loaderStatus=!1,this.$router.push({name:"RootCausePdfViewer",params:{pdfPath:t,pdfName:"RCA Wizard â€“ Learn About Filters",id:2}})},async searchRootCause(t){const s={pagination:{current_page:this.fromRecords,result_per_page:this.perPage},search:t};this.loaderStatus=!0;const l=await de(s);this.rootCauseInfo=l.data.result_data,l&&(this.total=l.data.total_records_count,this.totalRecordsCount=this.total>this.totalRecordsCount?this.total:this.totalRecordsCount,this.totalPages=Math.ceil(this.total/this.perPage)),this.loaderStatus=!1},EmitNextRootCause(){this.rcaIndex+=1,this.rcaIndex===this.rootCauseInfo.length&&(this.rcaIndex=0),this.rootCauseModalInfo=this.rootCauseInfo[this.rcaIndex]},EmitPreviousRootCause(){this.rcaIndex-=1,this.rcaIndex===-1&&(this.rcaIndex=this.rootCauseInfo.length-1),this.rootCauseModalInfo=this.rootCauseInfo[this.rcaIndex]},async getList(){this.loaderStatus=!0;const[t,s]=await Promise.all([Z(+this.userId),Q(1,this.userId)]);this.toolsData=s,this.isPurchased=t[1].enrolled,this.loaderStatus=!1},async selectedFilesRca(){this.loaderStatus=!0,this.finalData=[],this.copiedData=[],this.response=await J(this.selectedFiles);for(let t=0;t<this.response.length;t+=1){const s=`${this.response[t].title}
`,l=`${this.response[t].commentary}

`;this.copiedData.push(s),this.copiedData.push(l),this.finalData=[...this.copiedData].join("")}if(this.finalData.length>0){this.$copyText(this.finalData).then(()=>{this.$notify({type:"success",title:"Success",text:"Copied successfully!"})},()=>{this.$notify({type:"error",title:"Error",text:"Copy failed!"})});const t={email:JSON.parse(localStorage.getItem("userData")).email,Last_Interest:"Human Factors Research & Design",page_urlextended:window.location.href,page_urlreferral_extended:document.referrer,form_control:"Copy",form_control_details:"Root Causes"};P(t)}else this.$notify({type:"error",title:"Error",text:"Select atleast one root cause to copy!"});this.loaderStatus=!1},async downloadRootCause(){this.loaderStatus=!0,this.finalData=[],this.copiedData=[];const t=await J(this.selectedFiles);for(let l=0;l<t.length;l+=1){const _=new k.Paragraph({text:`${t[l].title.trim()}`,style:"default-paragraph"}),o=new k.Paragraph({text:`${t[l].commentary}`,style:"default-paragraph"}),i=new k.Paragraph("");this.copiedData.push(_),this.copiedData.push(o),this.copiedData.push(i)}this.finalData=[...this.copiedData];const s=te().format("MMDDYYYY");if(this.finalData.length>0){const l=new k.Document({styles:{paragraphStyles:[{id:"default-paragraph",name:"Default Paragraph",run:{font:"Calibri"}}]},sections:[{properties:{},children:[...this.finalData]}]});this.selectedFiles.length>1?k.Packer.toBlob(l).then(o=>{z.saveAs(o,`RCA_${s}.docx`)}):k.Packer.toBlob(l).then(o=>{z.saveAs(o,`${t[0].title}_${s}.docx`)});const _={email:JSON.parse(localStorage.getItem("userData")).email,Last_Interest:"Human Factors Research & Design",page_urlextended:window.location.href,page_urlreferral_extended:document.referrer,form_control:"Download",form_control_details:"Root Causes"};P(_)}else this.$notify({type:"error",title:"Error",text:"Select atleast one root cause to download!"});this.loaderStatus=!1},async getRootCauseFilters(){const t=await ue(),s=t.filters;this.rootCauseFilters=s.filter(l=>l.active===!0),this.rootCauseTags=t.tags},async pagechanged(t){t&&(this.currentPage=t),this.fromRecords=this.currentPage,this.setSelectionsAsEmpty(),await this.getRCADataPagination(this.selectedFilterId)},async pushTags(t){const s=this.rootCauseTags.filter(l=>l.id===t);this.rootCauseFilterTags=s},addListFilters(t){this.selectedFilterId.push(t)},openInfoModal(t,s){this.rootCauseModalInfo=t,this.rcaIndex=s,g("#root-cause-info").modal("show")},getFormData(){const t={pagination:{current_page:this.fromRecords,result_per_page:this.perPage},sub_category_ids:this.selectedFilterId};return this.searchText=this.searchText?t.search=this.searchText.trim():"",this.filterObj=Object.keys(this.filterObj).length!==0?t.filter=this.filterObj:{},t},async getRCAData(t){this.isActive=!1,this.setSelectionsAsEmpty(),this.currentPage=1;const s={pagination:{current_page:1,result_per_page:this.perPage},sub_category_ids:t};this.loaderStatus=!0;const l=await W(s);this.isPurchased?(this.rootCauseInfo=l.data.result_data,this.rootCauseInfo.length>0?this.isEmpty=!1:this.isEmpty=!0,l&&(this.total=l.data.total_records_count,this.totalRecordsCount=this.total>this.totalRecordsCount?this.total:this.totalRecordsCount,this.totalPages=Math.ceil(this.total/this.perPage))):this.rootCauseInfo=l.data.result_data.slice(0,5);const _={email:JSON.parse(localStorage.getItem("userData")).email,Last_Interest:"Human Factors Research & Design",page_urlextended:window.location.href,page_urlreferral_extended:document.referrer,form_control:"Apply RCA Filter",form_control_details:t.join(", ")};P(_),this.loaderStatus=!1},async getRCADataPagination(t){const s={pagination:{current_page:this.fromRecords,result_per_page:this.perPage},sub_category_ids:t};this.loaderStatus=!0;const l=await W(s);this.rootCauseInfo=l.data.result_data,l&&(this.total=l.data.total_records_count,this.totalRecordsCount=this.total>this.totalRecordsCount?this.total:this.totalRecordsCount,this.totalPages=Math.ceil(this.total/this.perPage)),this.loaderStatus=!1},resetFilters(){this.setSelectionsAsEmpty(),this.isEmpty=!1,this.selectedFilterId=[],this.rootCauseInfo=[],this.enteredTag=[],this.isActive=!1},setSelectionsAsEmpty(){this.selectAllFiles=!1,this.selectedFiles=[]}}},u=t=>(V("data-v-2503632b"),t=t(),O(),t),Ee={class:"root-cause-main-content"},Ve={class:"row"},Oe={class:"col-sm-4 col-md-3 filters-main p-0 view-filters-main"},$e={class:"pt-20 filters-select-card pl-10 pb-10"},Ne=u(()=>e("div",{class:"flex pl-10"},[e("p",{class:"step-common step-style"},[e("span",{class:"number"},"1")]),e("p",{class:"filter-text pr-10"},"Select Filters")],-1)),Be={class:"d-flex flex-wrap justify-content-center col-gap-15 pt-10 pb-10"},Le={class:"panel-group",id:"accordion0",role:"tablist","aria-multiselectable":"true"},je={key:0,class:"panel-heading",role:"tab",id:"headingTwo"},Ue=["href","aria-controls"],He={class:"main-list-header"},ze={key:1,class:"panel-heading",role:"tab",id:"headingTwo"},Ye={class:"panel-title"},Je=["href","aria-controls"],We={class:"main-list-header"},qe=["id"],Ge={class:"row"},Ke={class:"select-box"},Ze={class:"checkbox"},Qe=["value","disabled"],Xe=u(()=>e("span",{class:"cr"},[e("i",{class:"cr-icon glyphicon glyphicon-ok"})],-1)),et={class:"pl-20"},tt={class:"tags"},st=u(()=>e("label",null,"Tags",-1)),ot={class:"learn-more-main"},at=u(()=>e("img",{class:"new_member_img",src:Te},null,-1)),lt=u(()=>e("p",{class:"learn-filters"},"Learn about filters",-1)),rt=[at,lt],it={class:"pt-20 pl-10 pb-10"},nt={class:"flex justify-content-between align-items-center"},ct={class:"flex pl-10"},dt={key:0,class:"step-common step-no-style"},ut={key:1,class:"step-common step-style"},ht=u(()=>e("p",{class:"filter-text pr-10"},"View Results",-1)),_t={key:0,class:"mr-10 custom-width"},pt=["placeholder"],mt={key:1,class:"search-container-expand pl-10 pr-10 cursor-pointer"},ft=["placeholder"],gt={class:"d-flex align-items-center justify-content-end pt-20 pb-10 pr-15"},yt={key:0,class:"pl-10 margin-right-auto"},vt={class:"d-flex col-gap-10"},Ct=u(()=>e("img",{src:ae,class:"preview-svg"},null,-1)),xt=u(()=>e("span",null,"Copy",-1)),bt=u(()=>e("img",{src:le,class:"preview-svg"},null,-1)),It=u(()=>e("span",null,"Download",-1)),wt={class:"col-xs-12 mt-20 table-wrapper"},Rt={class:"table"},St={style:{width:"40px !important"}},Dt={key:0,class:"select-box"},kt={class:"checkbox"},Pt=u(()=>e("span",{class:"cr"},[e("i",{class:"cr-icon glyphicon glyphicon-ok"})],-1)),Ft=u(()=>e("th",{class:"root-heading"},"Root cause title",-1)),At=u(()=>e("th",{class:"root-heading"},"Sample use error title",-1)),Tt={key:0},Mt={class:"pl-15",style:{width:"40px !important"}},Et={class:"select-box"},Vt={class:"checkbox"},Ot=["value","disabled"],$t=u(()=>e("span",{class:"cr"},[e("i",{class:"cr-icon glyphicon glyphicon-ok"})],-1)),Nt=["onClick"],Bt={class:"root-error"},Lt=u(()=>e("img",{class:"new_member_img",src:re},null,-1)),jt=u(()=>e("h3",{class:"select-filter-text text-color"},[v(" Select and apply filters to "),e("br"),v(" view matching root causes ")],-1)),Ut=u(()=>e("p",{class:"text-color ft-18"}," Select additional filters to view more results ",-1)),Ht=[Lt,jt,Ut],zt=u(()=>e("img",{class:"new_member_img",src:ie},null,-1)),Yt=u(()=>e("h3",{class:"select-filter-text text-color"}," Sorry, no results found ",-1)),Jt=u(()=>e("p",{class:"text-color ft-18"}," Try again by adjusting your filters for different results ",-1)),Wt=[zt,Yt,Jt],qt={key:0,class:"pagination-wrapper"},Gt={key:1,class:"col-xs-12 mt-20 center tool-freeversion-image"},Kt=u(()=>e("img",{class:"new_member_img",src:ne},null,-1)),Zt=u(()=>e("h3",{class:"tool-free-text"},[v(" To access all results and use all "),e("br"),v(" filters, purchase RCA Wizard ")],-1));function Qt(t,s,l,_,o,i){const y=m("BaseButton"),x=m("multiselect"),a=m("pagination"),S=m("market-place-tools"),F=m("root-cause-info-modal"),b=m("loader");return r(),n("div",Ee,[e("div",Ve,[e("div",Oe,[e("div",$e,[Ne,e("div",Be,[e("button",{class:"btn btn-light reset-text",onClick:s[0]||(s[0]=(...c)=>i.resetFilters&&i.resetFilters(...c))}," Reset all "),h(y,{disabled:!o.selectedFilterId.length,onClick:s[1]||(s[1]=c=>i.getRCAData(o.selectedFilterId))},{default:R(()=>[v("Apply")]),_:1},8,["disabled"])])]),e("div",null,[e("div",Le,[(r(!0),n(A,null,T(o.rootCauseFilters,(c,f)=>(r(),n("div",{class:"panel panel-default",key:f},[o.isPurchased?(r(),n("div",ze,[e("h4",Ye,[e("a",{class:"collapsed",role:"button","data-toggle":"collapse","data-parent":"#accordion",href:"#collapse"+f,"aria-controls":"#collapse"+c,onClick:s[3]||(s[3]=B(()=>{},["prevent"]))},[e("span",We,d(c.filter_name),1)],8,Je)])])):(r(),n("div",je,[e("h4",{class:C(["panel-title",f===0?"not-disable-filters":"disable-filters"])},[e("a",{class:"collapsed",role:"button","data-toggle":"collapse","data-parent":"#accordion",href:"#collapse"+f,"aria-controls":"#collapse"+c,onClick:s[2]||(s[2]=B(()=>{},["prevent"]))},[e("span",He,d(c.filter_name),1)],8,Ue)],2)])),e("div",{id:"collapse"+f,class:"panel-collapse collapse",role:"tabpanel","aria-labelledby":"headingTwo"},[(r(!0),n(A,null,T(c.sub_categories,I=>(r(),n("div",{class:"pt-10",key:I.id},[e("div",Ge,[e("div",{class:C(["pl-40 flex",!o.isPurchased&&!["Software","Hardware"].includes(I.sub_category_name)?"disable-filters":"not-disable-filters"])},[e("div",Ke,[e("div",Ze,[e("label",null,[w(e("input",{type:"checkbox",value:I.id,"onUpdate:modelValue":s[4]||(s[4]=X=>o.selectedFilterId=X),disabled:!o.isPurchased&&!["Software","Hardware"].includes(I.sub_category_name)},null,8,Qe),[[L,o.selectedFilterId]]),Xe])])]),e("p",et,d(I.sub_category_name),1)],2)])]))),128))],8,qe)]))),128))])]),e("div",tt,[e("div",{id:"tagDropdown",class:C(["col-xs-12 pb-20",o.isPurchased?"not-disable-filters":"disable-filters"])},[st,h(x,{"close-on-select":!1,"allow-empty":!0,searchable:!0,multiple:!0,class:C([[o.enteredTag.length?"has-values":"no-values"],"multiselect-single-dropdown"]),modelValue:o.enteredTag,"onUpdate:modelValue":s[5]||(s[5]=c=>o.enteredTag=c),placeholder:"Select Tags",options:o.rootCauseTags.map(c=>c.id),"custom-label":c=>o.rootCauseTags.find(f=>f.id===c).sub_category_name,"show-labels":!1,"open-direction":"top",onSelect:i.pushTags,disabled:!o.isPurchased},null,8,["class","modelValue","options","custom-label","onSelect","disabled"])],2)]),e("div",ot,[e("div",{class:"col-xs-12 pb-20 d-flex learn-more",onClick:s[6]||(s[6]=(...c)=>i.viewPdf&&i.viewPdf(...c))},rt)])]),e("div",{class:C(["col-sm-8 col-md-9 p-0",{"view-results-main":o.rootCauseInfo.length>0}])},[e("div",it,[e("div",nt,[e("div",ct,[o.rootCauseInfo.length?(r(),n("span",ut,"2")):(r(),n("span",dt,"2")),ht]),o.isPurchased?(r(),n("div",_t,[e("div",null,[o.hasExpand?(r(),n("div",{key:0,class:C(["cursor-pointer",o.isActive?"search-container-expand":"search-container"])},[e("img",{class:"image-search",src:q,alt:"Search",onClick:s[7]||(s[7]=(...c)=>i.makeBarExpand&&i.makeBarExpand(...c))}),o.isActive?w((r(),n("input",{key:0,type:"text",class:"search-bar p-10",placeholder:o.placeholder,"onUpdate:modelValue":s[8]||(s[8]=c=>o.searchText=c),onKeydown:s[9]||(s[9]=Y((...c)=>i.search&&i.search(...c),["enter"]))},null,40,pt)),[[M,o.searchText]]):p("",!0)],2)):(r(),n("div",mt,[e("img",{class:"image-search",src:q,onClick:s[10]||(s[10]=(...c)=>i.search&&i.search(...c)),alt:"Search"}),w(e("input",{type:"text",class:"search-bar p-10",placeholder:o.placeholder,"onUpdate:modelValue":s[11]||(s[11]=c=>o.searchText=c),onKeydown:s[12]||(s[12]=Y((...c)=>i.search&&i.search(...c),["enter"]))},null,40,ft),[[M,o.searchText]]),o.searchText?(r(),n("img",{key:0,onClick:s[13]||(s[13]=(...c)=>i.clear&&i.clear(...c)),src:fe,alt:"Clear search query"})):p("",!0)]))])])):p("",!0)]),e("div",gt,[o.rootCauseInfo.length>0?(r(),n("span",yt,d(o.rootCauseInfo.length)+" items",1)):p("",!0),e("div",vt,[h(y,{variant:"secondary","has-icon":"",class:"",disabled:!o.rootCauseInfo.length,onClick:i.selectedFilesRca},{default:R(()=>[Ct,xt]),_:1},8,["disabled","onClick"]),h(y,{"has-icon":"",disabled:!o.rootCauseInfo.length,onClick:i.downloadRootCause},{default:R(()=>[bt,It]),_:1},8,["disabled","onClick"])])])]),e("div",wt,[e("table",Rt,[e("thead",null,[e("tr",null,[e("th",St,[o.rootCauseInfo.length>0?(r(),n("div",Dt,[e("div",kt,[e("label",null,[w(e("input",{type:"checkbox",id:"select_all",class:"form-control","onUpdate:modelValue":s[14]||(s[14]=c=>o.selectAllFiles=c)},null,512),[[L,o.selectAllFiles]]),Pt])])])):p("",!0)]),Ft,At])]),o.rootCauseInfo.length>0?(r(),n("tbody",Tt,[(r(!0),n(A,null,T(o.rootCauseInfo,(c,f)=>(r(),n("tr",{key:f,class:C(!o.isPurchased&&f>=5?"disable-filters":"not-disable-filters")},[e("td",Mt,[e("div",Et,[e("div",Vt,[e("label",null,[w(e("input",{type:"checkbox",id:"select_all",class:"form-control","onUpdate:modelValue":s[15]||(s[15]=I=>o.selectedFiles=I),value:c.id,disabled:o.isPurchased===1&&f>=5},null,8,Ot),[[L,o.selectedFiles]]),$t])])])]),e("td",{class:"root-title",onClick:B(I=>i.openInfoModal(c,f),["stop"])},d(c.rca_title),9,Nt),e("td",Bt,d(c.sample_error),1)],2))),128))])):(r(),n("div",{key:1,class:C(["col-xs-12 mt-20 no-data center",o.isEmpty?"display-none":"display-block"])},Ht,2)),o.rootCauseInfo.length===0?(r(),n("div",{key:2,class:C(["col-xs-12 mt-20 no-data center",o.isEmpty?"display-block":"display-none"])},Wt,2)):p("",!0)]),o.rootCauseInfo.length>0?(r(),n("div",qt,[o.total?(r(),K(a,{key:0,totalPages:o.totalPages,maxVisibleButtons:o.maxVisiblePages,total:o.total,perPage:o.perPage,currentPage:o.currentPage,onPagechanged:i.pagechanged},null,8,["totalPages","maxVisibleButtons","total","perPage","currentPage","onPagechanged"])):p("",!0)])):p("",!0),!o.isPurchased&&o.rootCauseInfo.length>0?(r(),n("div",Gt,[Kt,Zt,h(S,{loader:o.loaderStatus,userId:l.userId,toolName:"Root Cause Analysis Wizard"},null,8,["loader","userId"])])):p("",!0)])],2)]),h(F,{rootCauseModalInfo:o.rootCauseModalInfo,index:o.rcaIndex,onEmitNextRootCause:i.EmitNextRootCause,onEmitPreviousRootCause:i.EmitPreviousRootCause,totalCurrentRecords:o.rootCauseInfo.length},null,8,["rootCauseModalInfo","index","onEmitNextRootCause","onEmitPreviousRootCause","totalCurrentRecords"]),h(b,{loadingStatus:o.loaderStatus},null,8,["loadingStatus"])])}const Xt=E(Me,[["render",Qt],["__scopeId","data-v-2503632b"]]),es={props:["trainingInfo","userId","accountId","loader","loaderPopup"],data(){return{displayData:null,paramId:"",cartStatus:ye,loaderStatus:!1}},components:{Loader:$,BaseButton:U},watch:{trainingInfo(){this.displayData=this.trainingInfo}},filters:{getPurchaseStatus(t){switch(t){case"yes":return"Included In Trial";default:return"Price"}},formatPurchaseDate(t){if(t){const s=[t[0],t[1]-1,t[2]];return ge(s).format("D MMM YYYY")}return""}},methods:{async addRemoveCart(t,s){if(t.purchase_status==="ADD_TO_CART"){this.loaderStatus=!0;const l={user_id:this.userId,plan_id:s},_=await ve(l);if(this.loaderStatus=!1,_.data&&_.data.status_code===200){const o={type:"add",body:""};this.$emit("setCartInfo",{cartInfo:o,item:this.trainingInfo[0]}),xe.$emit("cart-items-updated")}}else if(t.purchase_status==="REMOVE_FROM_CART"){const l={type:"remove",body:"Are you sure you want to remove this item?"};this.$emit("setCartInfo",{cartInfo:l,item:this.trainingInfo[0]})}else t.purchase_status==="GO_TO_CART"&&this.$router.push("/market-place/cart")},playTraining(t){t.deep_link&&window.open(t.deep_link,"_blank"),this.reset()},reset(){g("#modal_video").modal("hide")}}},H=t=>(V("data-v-d4b3149e"),t=t(),O(),t),ts={id:"modal_video",class:"modal",role:"dialog"},ss={class:"modal-dialog modal-lg request-modal"},os=H(()=>e("div",{class:"modal-header"},[e("div",{class:"col-xs-12 p-0 text-start header d-flex align-items-center col-gap-26"},[e("img",{src:be,class:"lms-training-icon"}),e("span",null,"Training")])],-1)),as={class:"modal-body col-xs-12 text-start"},ls={class:"col-xs-12 p-0 training-type mb-5"},rs={class:"col-xs-8 p-0"},is={class:"col-xs-12 p-0 training-title mb-5"},ns={class:"col-xs-11 p-0 font-14 mb-10"},cs={class:"fw-700 font-14 validity-text text-secondary pr-15"},ds={key:0,class:"col-xs-4 p-0"},us={class:"col-xs-12 course-contents p-0"},hs={class:"col-xs-12 p-0 mt-10"},_s={key:1,class:"col-xs-12 p-0 mt-15"},ps={class:"col-xs-12 p-0 course-contents mt-15"},ms={class:"col-xs-12 p-0 course-contents pt-10"},fs={key:0},gs={key:1},ys={class:"col-xs-12 pr-0 purchase-info-main mt-10"},vs={class:"d-flex justify-content-between"},Cs={class:"d-flex"},xs={class:"purchase-info p-0 font-18 font-bold pr-10"},bs={key:0,class:"pl-15 pb-15"},Is={class:"text-regular-large orange-bg2 expiry-box"},ws={key:1,class:"pl-15 pb-15"},Rs={class:"text-regular-large"},Ss={key:2,class:"pl-15 pb-15"},Ds={class:"text-regular-large orange-bg2 expiry-box"},ks={key:3,class:"pl-15 pb-15"},Ps={class:"text-regular-large red-bg1 expiry-box white-1"},Fs={key:4,class:"pr-15 pb-15"},As={class:"text-regular-large red-bg1 expiry-box white-1"},Ts={class:"col-xs-2 font-18 font-bold text-right p-0 pr-10"},Ms={class:"col-xs-12 p-0"},Es={class:"footer col-xs-12 flex-wrapper align-items-center xs-flex-column col-gap-20"},Vs={key:0},Os=H(()=>e("img",{class:"preview-svg",src:Ie,alt:""},null,-1)),$s=H(()=>e("span",null,"Play course",-1)),Ns={key:2},Bs={key:0,src:we,alt:"",class:"preview-svg"},Ls={key:1,src:Re,alt:"Remove from cart",class:"preview-svg"};function js(t,s,l,_,o,i){const y=m("loader"),x=m("BaseButton");return r(),n("div",null,[e("div",ts,[e("div",ss,[(r(!0),n(A,null,T(o.displayData,a=>(r(),n("div",{class:"modal-content col-xs-12 p-20",key:a.plan_id},[os,e("div",as,[e("div",ls,d(a.training_type),1),e("div",rs,[e("div",is,d(a.title),1),e("div",ns,d(a.description),1),e("div",cs," Validity - "+d(a.validity_months)+" days access ",1)]),a.training_type!=="Consulting"?(r(),n("div",ds,[e("div",us,d(a.training_type==="Certificate"?"Courses":"Contents"),1),e("div",hs,[e("ul",null,[(r(!0),n(A,null,T(a.content_list,(S,F)=>(r(),n("li",{class:"font-14",key:F},d(S),1))),128))])])])):p("",!0),a.training_type!=="Consulting"?(r(),n("div",_s,[e("div",ps,d(a.course_count)+" "+d(a.course_count>1?"courses":"course"),1),e("div",ms,[a.training_type==="Certificate"?(r(),n("div",fs,d(a.duration_minutes/60)+" hours ",1)):(r(),n("div",gs,d(a.duration_minutes)+" minutes",1))]),e("div",ys,[e("div",vs,[e("div",Cs,[e("div",xs,d(a.included|t.getPurchaseStatus),1),a.previous_purchase_date?(r(),n("div",bs,[e("p",Is," Previously purchased: "+d(a.previous_purchase_date|t.formatPurchaseDate),1)])):p("",!0),a.expiry_days>90?(r(),n("div",ws,[e("p",Rs," Expires: "+d(a.expiry_date|t.formatPurchaseDate),1)])):a.expiry_days<=90&&a.expiry_days>10?(r(),n("div",Ss,[e("p",Ds," Expires: "+d(a.expiry_days)+" days ",1)])):a.expiry_days<=10&&a.expiry_days>1?(r(),n("div",ks,[e("p",Ps," Expires: "+d(a.expiry_days)+" days ",1)])):a.expiry_days==1?(r(),n("div",Fs,[e("p",As,"Expires: "+d(a.expiry_days)+" day",1)])):p("",!0)]),e("div",Ts," $"+d(a.price),1)])])])):p("",!0),e("div",Ms,[h(y,{loadingStatus:o.loaderStatus},null,8,["loadingStatus"])])]),e("div",Es,[h(x,{"data-dismiss":"modal",variant:"secondary"},{default:R(()=>[v(" Cancel ")]),_:1}),a.training_type==="Certificate"&&a.enrolled?(r(),n("div",Vs)):a.enrolled?(r(),K(x,{key:1,"has-icon":"",onClick:S=>i.playTraining(a)},{default:R(()=>[Os,$s]),_:2},1032,["onClick"])):(r(),n("div",Ns,[h(x,{class:C(["br-20",{primary:a.cart_status.purchase_status==="ADD_TO_CART",secondary:a.cart_status.purchase_status==="REMOVE_FROM_CART",tertiary:a.cart_status.purchase_status==="GO_TO_CART"}]),"has-icon":a.cart_status.purchase_status==="REMOVE_FROM_CART",onClick:S=>i.addRemoveCart(a.cart_status,a.plan_id),disabled:a.disable_as_bundle_added_to_cart},{default:R(()=>[a.cart_status.purchase_status==="GO_TO_CART"?(r(),n("img",Bs)):p("",!0),a.cart_status.purchase_status==="REMOVE_FROM_CART"?(r(),n("img",Ls)):p("",!0),v(" "+d(o.cartStatus[a.cart_status.purchase_status]),1)]),_:2},1032,["class","has-icon","onClick","disabled"])]))])]))),128)),h(y,{loadingStatus:o.loaderStatus||l.loaderPopup},null,8,["loadingStatus"])])])])}const Us=E(es,[["render",js],["__scopeId","data-v-d4b3149e"]]);function Hs(t){return/^([a-zA-Z0-9_\-\+\.]+)@([a-zA-Z-0-9-]+)((\.([a-zA-Z0-9-]){2,63}){1,3})$/.test(t)}const zs={userName:{required:j,minLength:G(2)},emailAddress:{required:j,isValidMail:Hs},detailMessage:{required:j,minLength:G(6)}},Ys={props:["rootCauseModalInfo"],data(){return{formDetails:{},userName:null,emailAddress:null,detailMessage:null,loaderStatus:!1,formData:{userName:"",emailAddress:"",detailMessage:""},userData:{}}},components:{Loader:$,BaseButton:U},setup(){return{$v:Se()}},validations:{formData:zs},mounted(){this.getUserData()},methods:{getUserData(){this.userData=localStorage.getItem("userData")?JSON.parse(localStorage.getItem("userData")):{},this.formData.emailAddress=this.userData.email,this.formData.userName=`${this.userData.first_name} ${this.userData.last_name}`},closeRootCauseInfo(){this.resetForm(),g("#suggest-root-cause").modal("hide")},resetForm(){this.formData.detailMessage="",this.getUserData()},async suggestRootCause(){this.loaderStatus=!0;const t={first_name:this.userData.first_name,last_name:this.userData.last_name,unstandardized_name:this.formData.userName,email:this.userData.email,alternative_email:this.formData.emailAddress,Last_Interest:"Human Factors Research & Design",page_urlextended:window.location.href,page_urlreferral_extended:document.referrer,form_control:"Contact",form_control_details:"Suggest a RCA",customer_comments:this.formData.detailMessage};P(t);const s={detail_suggest:this.formData.detailMessage,email_address:this.formData.emailAddress,name:this.formData.userName},l=await he(s);l?(this.$notify({type:"success",title:"Success",text:l.data}),this.closeRootCauseInfo()):l===void 0?this.$notify({type:"error",title:"error",text:"Message should not be null"}):this.$notify({type:"error",title:"Error",text:l.data}),this.loaderStatus=!1}}},N=t=>(V("data-v-8b9ab5bb"),t=t(),O(),t),Js={id:"suggest-root-cause",class:"modal",role:"dialog"},Ws={class:"modal-dialog modal-lg custom-modal-class"},qs={class:"modal-content col-xs-12 p-20"},Gs={class:"modal-header"},Ks={class:"col-xs-12 p-0 mb-10"},Zs=N(()=>e("span",{class:"modal-title"}," Suggest a root cause ",-1)),Qs={class:"row mb-20 mt-10"},Xs={class:"col-xs-12 mb-10"},eo=N(()=>e("label",null,"Name (optional)",-1)),to={class:"form-group"},so={class:"col-xs-12 mb-10"},oo=N(()=>e("label",null,"Email (optional)",-1)),ao={class:"form-group"},lo={class:"col-xs-12 mb-10"},ro=N(()=>e("label",null,[v("Tell us more about the root cause you would like to see added to the library"),e("span",{style:{color:"red"}},"*")],-1)),io={class:"col-xs-12 p-0"},no={class:"footer col-xs-12 mt-10 p-0 d-flex justify-content-end col-gap-15"};function co(t,s,l,_,o,i){const y=m("BaseButton"),x=m("loader");return r(),n("div",null,[e("div",Js,[e("div",Ws,[e("div",qs,[e("div",Gs,[e("div",Ks,[Zs,e("img",{class:"cursor-pointer close-modal",onClick:s[0]||(s[0]=(...a)=>i.closeRootCauseInfo&&i.closeRootCauseInfo(...a)),src:se,alt:""})])]),e("div",Qs,[e("div",Xs,[eo,e("div",to,[w(e("input",{type:"text",class:"form-control common-input",maxlength:"150",placeholder:"Enter Name","onUpdate:modelValue":s[1]||(s[1]=a=>o.formData.userName=a)},null,512),[[M,o.formData.userName]])])]),e("div",so,[oo,e("div",ao,[w(e("input",{type:"text",class:"form-control common-input",maxlength:"150",placeholder:"Enter Email","onUpdate:modelValue":s[2]||(s[2]=a=>_.$v.formData.emailAddress.$model=a)},null,512),[[M,_.$v.formData.emailAddress.$model,void 0,{trim:!0}]])])]),e("div",lo,[ro,e("div",io,[w(e("textarea",{class:"form-control",style:{resize:"none"},rows:"4",cols:"20",maxlength:"2000",placeholder:"Tell us more about the root cause you would like to see added to the library","onUpdate:modelValue":s[3]||(s[3]=a=>o.formData.detailMessage=a)},null,512),[[M,o.formData.detailMessage]])])])]),e("div",no,[h(y,{onClick:i.closeRootCauseInfo,variant:"secondary"},{default:R(()=>[v(" Cancel ")]),_:1},8,["onClick"]),h(y,{onClick:i.suggestRootCause},{default:R(()=>[v(" Submit ")]),_:1},8,["onClick"])])]),h(x,{loadingStatus:o.loaderStatus},null,8,["loadingStatus"])])])])}const uo=E(Ys,[["render",co],["__scopeId","data-v-8b9ab5bb"]]),ho="/static/images/icons/edit.svg",_o={props:["userId"],data(){return{loaderStatus:!1,trainingInfo:null,cartInfo:{},isPurchased:1}},components:{Loader:$,RootCauseContent:Xt,RCAPerformModal:Us,SuggestRootCauseModal:uo,AddRemoveCartPopup:ke},async created(){await Promise.all([this.getToolData(),this.getTrainings()])},methods:{async getTrainings(){this.loaderStatus=!0;const t=await De();this.trainingList=t.lms_user_course_list.filter(s=>s.course_id===7),this.loaderStatus=!1},async getToolData(){const[t,s]=await Promise.all([Z(+this.userId),Q(1,this.userId)]);this.toolsData=s,this.isPurchased=t[1].enrolled},closeAddRemoveCart(){g("#addRemoveCartPopup").modal("hide"),this.getTrainings()},setCartInfo(t){this.cartInfo={...t.cartInfo},this.selectedCartItem=t.item,g("#modal_video").hasClass("in")&&this.cartInfo.type==="add"&&g("#modal_video").modal("hide"),g("#addRemoveCartPopup").modal({backdrop:"static",keyboard:!1})},async removeFromCart(){g("#addRemoveCartPopup").modal("hide"),this.loaderStatus=!0;const t=await Ce(this.selectedCartItem.cart_status.cart_id);this.loaderStatus=!1,t.data&&t.data.status_code===200&&(g("#modal_video").hasClass("in")&&g("#modal_video").modal("hide"),this.$notify({type:t.data.message,title:"Success",text:t.data.data}),this.getTrainings(),this.emitter.emit("cart-items-updated"))},navigateToTools(){this.$router.push("/tools")},navigateToContactUs(){this.$router.push("/contact")},openPerformModal(){this.trainingInfo=this.trainingList;const t=this.trainingInfo.map(l=>(l.cart_status&&l.cart_status.purchase_status==="REMOVE_FROM_CART"&&(l.cart_status.purchase_status="GO_TO_CART"),l));this.trainingInfo=t;const s={email:JSON.parse(localStorage.getItem("userData")).email,Last_Interest:"Human Factors Research & Design",page_urlextended:window.location.href,page_urlreferral_extended:document.referrer,form_control:"View",form_control_details:"How to perform RCA"};P(s),g("#modal_video").modal("show")},async openRCAExampleModal(){this.loaderStatus=!0;const t=await _e();this.loaderStatus=!1;const s={email:JSON.parse(localStorage.getItem("userData")).email,Last_Interest:"Human Factors Research & Design",page_urlextended:window.location.href,page_urlreferral_extended:document.referrer,form_control:"View",form_control_details:"View Sample RCA Writeup"};P(s),this.$router.push({name:"RootCausePdfViewer",params:{pdfPath:t,pdfName:"View example RCA write up",id:1}})},openSuggestModal(){g("#suggest-root-cause").modal("show")}}},D=t=>(V("data-v-08913d97"),t=t(),O(),t),po={class:"content-wrappper"},mo={class:"row welcome-banner mr-0"},fo={class:"col-xs-12 col-sm-8 col-md-8 col-lg-9 p-0"},go={class:"col-xs-12 d-flex align-items-center mb-10 p-0"},yo={class:"welcome-common-header pl-25 fw-300"},vo={key:0,class:"free-button"},Co=D(()=>e("div",{class:"col-xs-12 pl-40"},[e("div",{class:"col-xs-12 col-md-10 col-lg-10 pl-0 font-18 fw-700 mb-5"}," Identify potential root causes for usability test findings "),e("div",{class:"col-xs-12 pl-0 col-md-10 col-lg-7 font-14"}," Apply filters to view matching root causes, review the results, then copy or download the root cause text for use as a starting point in your report. ")],-1)),xo={class:"col-xs-12 col-sm-4 col-md-4 col-lg-3 p-0 mt-10 xs-pl-40 md-pl-40 action-options"},bo=D(()=>e("img",{src:Fe,alt:""},null,-1)),Io=D(()=>e("span",{class:"pl-15"},"How to perform RCA?",-1)),wo=[bo,Io],Ro=D(()=>e("img",{src:Ae,alt:""},null,-1)),So=D(()=>e("span",{class:"pl-15"},"View example RCA write up",-1)),Do=[Ro,So],ko=D(()=>e("img",{src:ho,alt:""},null,-1)),Po=D(()=>e("span",{class:"pl-15"},"Suggest a root cause",-1)),Fo=[ko,Po],Ao={class:"col-xs-12 pt-0 pl-20 pr-20"};function To(t,s,l,_,o,i){const y=m("Root-cause-content"),x=m("RCAPerformModal"),a=m("SuggestRootCauseModal"),S=m("add-remove-cart-popup"),F=m("loader");return r(),n("div",po,[e("div",mo,[e("div",fo,[e("div",go,[e("img",{onClick:s[0]||(s[0]=(...b)=>i.navigateToTools&&i.navigateToTools(...b)),class:"cursor-pointer",src:Pe,alt:""}),e("div",yo,[v(" Root Cause Analysis (RCA) Wizard"),o.isPurchased?p("",!0):(r(),n("span",vo,"Free version"))])]),Co]),e("div",xo,[e("div",{class:"col-xs-12 mb-15 d-flex align-items-center p-0 cursor-pointer",onClick:s[1]||(s[1]=(...b)=>i.openPerformModal&&i.openPerformModal(...b))},wo),e("div",{class:"col-xs-12 mb-15 d-flex align-items-center p-0 cursor-pointer",onClick:s[2]||(s[2]=(...b)=>i.openRCAExampleModal&&i.openRCAExampleModal(...b))},Do),e("div",{class:"col-xs-12 mb-15 d-flex align-items-center p-0 cursor-pointer",onClick:s[3]||(s[3]=(...b)=>i.openSuggestModal&&i.openSuggestModal(...b))},Fo)])]),e("div",Ao,[h(y,{userId:l.userId},null,8,["userId"])]),h(x,{trainingInfo:o.trainingInfo,userId:l.userId,onSetCartInfo:i.setCartInfo,loaderPopup:o.loaderStatus},null,8,["trainingInfo","userId","onSetCartInfo","loaderPopup"]),h(a),h(S,{onCloseAddRemoveCart:i.closeAddRemoveCart,cartInfo:o.cartInfo,onRemoveFromCart:i.removeFromCart},null,8,["onCloseAddRemoveCart","cartInfo","onRemoveFromCart"]),h(F,{loadingStatus:o.loaderStatus},null,8,["loadingStatus"])])}const ma=E(_o,[["render",To],["__scopeId","data-v-08913d97"]]);export{ma as default};
