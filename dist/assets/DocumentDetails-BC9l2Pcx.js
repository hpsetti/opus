import{h as D}from"./moment-Cl4UOzQZ.js";import{c as p}from"./constants-DZfa7LnM.js";import{L as b}from"./Loader-DR0R9oEF.js";import{a as w}from"./cart-QHhiBhPv.js";import{d as v}from"./documentsMixin-Bh1uCigM.js";import{_ as k,B as C,r as h,o,c as n,a as e,n as x,t as i,k as c,b as m,w as f,p as R,f as T}from"./index-BlMJxPGQ.js";import"./event-bus-DYoA24Gz.js";import{_ as I}from"./doc_preview-KlbfcfdS.js";import{_ as M}from"./goto_arrow-zLb6UYwr.js";import{_ as O}from"./trash-D7-advNl.js";import{_ as A}from"./download_icon_white-BHO_3GTH.js";const j={mixins:[v],props:{documentDetails:{type:Object,default:()=>{}},userId:{type:Number,required:!0}},data(){return{loaderStatus:!1,cartStatus:p}},components:{Loader:b,BaseButton:C},filters:{formatPurchaseDate(s){if(s){const a=[s[0],s[1]-1,s[2]];return D(a).format("D MMM YYYY")}return""}},methods:{getImageUrl(s){return s?`https://opusjavaprodstorage.blob.core.windows.net${s}`:null},navigateToPreview(){const s=this.getQueryType();this.$router.push({path:`/documents/${this.documentDetails.document_id}`,query:{docType:s}})},getQueryType(){switch(this.documentDetails.display_plan_type){case"Use Environment Descriptions":return 3;case"User Profiles":return 2;case"Design Documents":return 5;case"Use-Related Risk Analyses":return 6;case"Known Problems Analyses":return 7;case"Product Packages":return 8;default:return 1}},async addRemoveCart(s){const a=s.document_id,{purchase_status:t}=s.cart_status;if(t==="GO_TO_CART")this.$router.push("/market-place/cart");else if(t==="REMOVE_FROM_CART"){const _={type:"remove",body:"Are you sure you want to remove this item?"};this.$emit("setCartInfo",{cartInfo:_,item:s})}else if(t==="ADD_TO_CART"){this.loaderStatus=!0,window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"add_to_cart_button_click",add_to_cart_type:s.display_plan_type,add_to_cart_title:s.name});const _={user_id:this.userId,plan_id:a},r=await w(_);if(this.loaderStatus=!1,r.data&&r.data.status_code===200){const d={type:"add",body:""};this.$emit("setCartInfo",{cartInfo:d,item:s}),this.emitter.emit("cart-items-updated")}}},downLoadDocument(s,a){this.downloadZipFile(s),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"download_button_click",download_type:a.display_plan_type,download_title:a.name})},openMoreInfo(){this.$emit("showMoreInfo",this.documentDetails)}}},u=s=>(R("data-v-b9bdde01"),s=s(),T(),s),E={class:"details-wrapper col-xs-12 p-10 mb-10 d-flex xs-flex-column-650"},S={class:"col-xs-12 p-0 d-flex col-gap-24 align-items-center"},B=["src"],L={class:"d-flex flex-direction-column col-xs-12 p-0"},P={class:"text-regular-large blue-1 mb-5 d-flex justify-content-between xs-flex-column"},V={class:"black-2 lg-hide-650 ml-10 text-center"},F={class:"text-subtitle-1 blue-1 mb-10 d-flex justify-content-between xs-flex-column"},U=u(()=>e("img",{class:"pr-10",src:I,alt:""},null,-1)),N=u(()=>e("span",{class:"text-button-label blue-3"},"Preview",-1)),Y=[U,N],G={key:1,class:"lg-hide-650 text-regular-large blue-1 mr-15"},q={class:"col-xs-12 p-0 d-flex flex-direction-column justify-content-center"},Q={key:0,class:"d-flex justify-content-between xs-justify-end-650"},Z={class:"xs-hide-content-650 document-category text-primary d-flex justify-content-center mr-15"},z={class:"d-flex expiry-card"},K={key:0,class:"xs-hide-content-650"},H={class:"text-regular-large"},J={key:1,class:"xs-hide-content-650"},W={class:"text-regular-large orange-bg2 expiry-box"},X={key:2,class:"xs-hide-content-650"},$={class:"text-regular-large red-bg1 expiry-box white-1"},tt={key:3,class:"xs-hide-content-650"},et={class:"text-regular-large red-bg1 expiry-box white-1"},st={class:"document-purchasedDate xs-hide-content-650 w-120"},at={key:1,class:"col-xs-12 p-0"},ot={class:"d-flex justify-content-between align-items-center xs-justify-end-650 mb-10"},nt={key:0,class:"xs-hide-content-650 text-regular-large blue-1 mr-15"},it={class:"d-flex pl-0 justify-end col-gap-20 flex-grow xs-flex-grow-unset-650"},dt=u(()=>e("span",{class:"text-subtitle-1 black-2"},"Price",-1)),ct={class:"price-text"},lt={class:"d-flex pl-0 justify-end col-gap-24 align-items-center price"},rt={key:0,src:M,alt:"",class:"preview-svg"},ut={key:1,src:O,alt:"",class:"preview-svg"},_t={key:2,class:"col-xs-12 p-0 d-flex col-gap-24 justify-content-end align-items-center"},mt=u(()=>e("img",{src:A,alt:""},null,-1)),yt=u(()=>e("span",{class:"pl-10"},"Download",-1));function ht(s,a,t,_,r,d){const y=h("BaseButton"),g=h("loader");return o(),n("div",E,[e("div",S,[e("img",{class:"training-img",src:d.getImageUrl(t.documentDetails.icon),alt:""},null,8,B),e("div",L,[e("div",P,[e("div",{class:x([{"flex-50":t.documentDetails.category&&!t.documentDetails.is_bundle},"d-flex justify-content-between"])},[e("span",null,i(t.documentDetails.display_plan_type),1),e("span",V,i(t.documentDetails.formattedDate),1)],2)]),e("div",F,[e("div",null,i(t.documentDetails.name),1)]),!t.documentDetails.enrolled&&!t.documentDetails.is_bundle?(o(),n("div",{key:0,class:"d-flex align-items-center cursor-pointer",onClick:a[0]||(a[0]=l=>d.navigateToPreview())},Y)):c("",!0),t.documentDetails.category&&!t.documentDetails.is_bundle?(o(),n("div",G,i(t.documentDetails.category),1)):c("",!0)])]),e("div",q,[t.documentDetails.is_purchased?(o(),n("div",Q,[e("div",Z,i(t.documentDetails.category),1),e("div",z,[t.documentDetails.expiry_days>90?(o(),n("div",K,[e("p",H,"Expires: "+i(t.documentDetails.expiry_date_time|s.formatPurchaseDate),1)])):t.documentDetails.expiry_days<=90&&t.documentDetails.expiry_days>10?(o(),n("div",J,[e("p",W,"Expires: "+i(t.documentDetails.expiry_days)+" days",1)])):t.documentDetails.expiry_days<=10&&t.documentDetails.expiry_days>1?(o(),n("div",X,[e("p",$,"Expires: "+i(t.documentDetails.expiry_days)+" days",1)])):t.documentDetails.expiry_days==1?(o(),n("div",tt,[e("p",et,"Expires: "+i(t.documentDetails.expiry_days)+" day",1)])):c("",!0),e("div",st,i(t.documentDetails.formattedDate),1)])])):c("",!0),t.documentDetails.is_purchased?t.documentDetails.is_purchased?(o(),n("div",_t,[e("span",{class:"cursor-pointer text-button-label blue-3",onClick:a[3]||(a[3]=(...l)=>d.openMoreInfo&&d.openMoreInfo(...l))},"View Details"),m(y,{onClick:a[4]||(a[4]=l=>d.downLoadDocument(t.documentDetails.document_path,t.documentDetails)),"has-icon":"",variant:"tertiary"},{default:f(()=>[mt,yt]),_:1})])):c("",!0):(o(),n("div",at,[e("div",ot,[t.documentDetails.category&&!t.documentDetails.is_bundle?(o(),n("div",nt,i(t.documentDetails.category),1)):c("",!0),e("div",it,[dt,e("span",ct,"$"+i(t.documentDetails.price),1)])]),e("div",lt,[e("span",{class:"cursor-pointer text-button-label blue-3",onClick:a[1]||(a[1]=(...l)=>d.openMoreInfo&&d.openMoreInfo(...l))},"View Details"),m(y,{onClick:a[2]||(a[2]=l=>d.addRemoveCart(t.documentDetails)),class:x(["br-20 d-flex align-items-center",{"gray-out":t.documentDetails&&t.documentDetails.disable_as_bundle_added_to_cart,primary:t.documentDetails.cart_status.purchase_status==="ADD_TO_CART",secondary:t.documentDetails.cart_status.purchase_status==="REMOVE_FROM_CART",tertiary:t.documentDetails.cart_status.purchase_status==="GO_TO_CART"}]),"has-icon":t.documentDetails.cart_status.purchase_status==="REMOVE_FROM_CART"},{default:f(()=>[t.documentDetails.cart_status.purchase_status==="GO_TO_CART"?(o(),n("img",rt)):c("",!0),t.documentDetails.cart_status.purchase_status==="REMOVE_FROM_CART"?(o(),n("img",ut)):c("",!0),e("span",null,i(r.cartStatus[t.documentDetails.cart_status.purchase_status]),1)]),_:1},8,["has-icon","class"])])]))]),m(g,{loadingStatus:r.loaderStatus},null,8,["loadingStatus"])])}const Tt=k(j,[["render",ht],["__scopeId","data-v-b9bdde01"]]);export{Tt as D};
