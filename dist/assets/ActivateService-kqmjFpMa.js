import{_ as E,d as B,o as i,c as o,a as e,O as V,b as k,r as w,p as C,f as W,t as d,F as b,m as g,e as D,l as Q,s as z,$ as I,w as G,j as f,v as A,k as p,n as S,Y as T,q as K}from"./index-BlMJxPGQ.js";import{l as H}from"./lodash-DhCEjwN-.js";import{L as J}from"./Loader-DR0R9oEF.js";import{D as X,_ as Z}from"./new_search-CVeFIShG.js";import{i as $}from"./index.es-Cl9EeDOg.js";import{d as ee,a as te,g as se,b as le,c as ie,e as oe,f as q,h as O,i as j,j as ae,k as re}from"./activateService-D7pxPSN8.js";import{_ as ce}from"./chevron_left_icon-6Fqv5UkY.js";import{_ as ne}from"./danger_close_icon-CkTgh2bE.js";const de={props:{},components:{DatePicker:$},data(){return{expiryDate:"",testDate:""}},methods:{dateConfirmed(){this.$emit("activateServiceDateExpiry",this.dateModifier),this.expiryDate=""},dateNotUpdated(){this.$emit("activateServiceDateExpiryNotUpdated",!1),this.expiryDate=""},disabledBefore(l){return l=l<=B().subtract(0,"days"),l}},computed:{dateModifier(){return B(this.expiryDate).utc(!0).format()}}},F=l=>(C("data-v-1fe57b7b"),l=l(),W(),l),ue={class:"activateServiceDateExpiryPopup modal",id:"activateServiceDateExpiryPopup",role:"dialog"},pe={class:"modal-dialog modal-md request-modal"},_e={class:"modal-content col-xs-12"},he={class:"modal-header pl-0 pb-10 mb-10"},me={class:"d-flex justify-content-between"},ve=F(()=>e("div",{class:"font-32 title"},"Update Expiry Date",-1)),ye={class:"modal-body col-xs-12 mb-20 font-18 text-start d-flex justify-content-center flex-direction-column"},fe=F(()=>e("p",null,"Set the Date of Expiry for",-1)),xe={class:"footer col-xs-12 mb-30"},De={"data-dismiss":"modal",class:"col-xs-12 p-0 d-flex justify-content-end col-gap-15"},be=["disabled"];function ge(l,s,_,x,t,r){const m=w("date-picker");return i(),o("div",ue,[e("div",pe,[e("div",_e,[e("div",he,[e("div",me,[ve,e("img",{"data-dismiss":"modal",class:"cursor-pointer",src:V,alt:"",onClick:s[0]||(s[0]=(...v)=>r.dateNotUpdated&&r.dateNotUpdated(...v))})])]),e("div",ye,[fe,k(m,{type:"date",lang:"en",modelValue:t.expiryDate,"onUpdate:modelValue":s[1]||(s[1]=v=>t.expiryDate=v),valueType:"format",format:"DD-MMM-YYYY",placeholder:"xx/xx/xxxx","disabled-date":r.disabledBefore},null,8,["modelValue","disabled-date"])]),e("div",xe,[e("div",De,[e("button",{class:"emergo-white-button",onClick:s[2]||(s[2]=(...v)=>r.dateNotUpdated&&r.dateNotUpdated(...v))},"Cancel"),e("button",{class:"emergo-green-button",onClick:s[3]||(s[3]=(...v)=>r.dateConfirmed&&r.dateConfirmed(...v)),disabled:!t.expiryDate}," Save ",8,be)])])])])])}const Ae=E(de,[["render",ge],["__scopeId","data-v-1fe57b7b"]]),Se={props:{formDetails:{type:Object,default:()=>{}}},data(){return{}},methods:{}},U=l=>(C("data-v-b64f6214"),l=l(),W(),l),ke={id:"alreadyActivatedPlans",class:"modal",role:"dialog"},we={class:"modal-dialog modal-lg request-modal"},Pe={class:"modal-content col-xs-12"},Le=U(()=>e("div",{class:"modal-header pl-0 pb-10 mb-10"},[e("div",{class:"justify-content-between"},[e("img",{"data-dismiss":"modal",class:"cursor-pointer float-right",src:V,alt:""})])],-1)),Ie={class:"modal-body col-xs-12 mb-20 font-18 text-start justify-content-center"},Te={class:"text-h4-bold"},Ue=U(()=>e("hr",null,null,-1)),qe={class:"pt-10 pl-10 text-h4"},Ee=U(()=>e("b",null,"User -",-1)),Ce={class:"pl-30"},We=U(()=>e("hr",null,null,-1)),Be=U(()=>e("div",{class:"footer col-xs-12 mb-30"},[e("div",{class:"col-xs-12 p-0 d-flex justify-content-end col-gap-15"},[e("button",{"data-dismiss":"modal",class:"emergo-white-button"},"Ok")])],-1));function Ve(l,s,_,x,t,r){return i(),o("div",ke,[e("div",we,[e("div",Pe,[Le,e("div",Ie,[e("div",Te,d(_.formDetails.message)+"/s",1),Ue,(i(!0),o(b,null,g(_.formDetails.already_purchased_plans,m=>(i(),o("div",{class:"pb-10",key:m.user_id},[e("p",qe,[Ee,D(" "+d(m.email),1)]),e("div",Ce,[(i(!0),o(b,null,g(m.plan_names,(v,P)=>(i(),o("ul",{class:"pl-10",key:P},[e("li",null,d(v),1)]))),128))]),We]))),128))]),Be])])])}const Ke=E(Se,[["render",Ve],["__scopeId","data-v-b64f6214"]]),Oe={props:{userDetails:{type:Object,default:()=>{}}},data(){return{}},methods:{deactivateAccount(){this.$emit("deActivateUserAccount")}}},je=l=>(C("data-v-57f062ac"),l=l(),W(),l),Fe={id:"deactivateAccountPopup",class:"modal",role:"dialog"},Ne={class:"modal-dialog modal-md request-modal"},Me={class:"modal-content col-xs-12"},Re=Q('<div class="modal-header pl-0 pb-10 mb-10" data-v-57f062ac><div class="d-flex justify-content-between" data-v-57f062ac><div class="font-32 title" data-v-57f062ac>Deactivate Account</div><img data-dismiss="modal" class="cursor-pointer" src="'+V+'" alt="" data-v-57f062ac></div></div><div class="modal-body col-xs-12 mb-20 font-18 text-start d-flex justify-content-center" data-v-57f062ac> Are you sure you want to Deactivate the Account and all the users linked to this account? </div>',2),Ye={class:"footer col-xs-12 mb-30"},Qe={class:"col-xs-12 p-0 d-flex justify-content-end col-gap-15"},ze=je(()=>e("button",{"data-dismiss":"modal",class:"emergo-white-button"},"No",-1));function Ge(l,s,_,x,t,r){return i(),o("div",Fe,[e("div",Ne,[e("div",Me,[Re,e("div",Ye,[e("div",Qe,[ze,e("button",{class:"emergo-green-button",onClick:s[0]||(s[0]=(...m)=>r.deactivateAccount&&r.deactivateAccount(...m))}," Yes ")])])])])])}const He=E(Oe,[["render",Ge],["__scopeId","data-v-57f062ac"]]),Je={data(){return{isIltWithoutDates:!1,loaderStatus:!1,searchBy:"",searchKeyword:"",plansList:{},requestList:{},usersList:[],usersListByAccount:[],qnaList:{},userDetails:{},selectedUser:null,isUsersListEmpty:!1,isSelectAll:!1,selectedPlanIdsWithType:{},planSelected:"",requestedPlan:"",requestedPlanSelected:"",availableActions:{plans:"Available plans"},requestedActions:{requests:"Requested plans"},expiryDateSet:!1,iltExpiryDate:null,currentILTCourseIDSelected:"",currentILTCourseSelected:"",formDetails:{account_owner_id:"",comments:"",invoice:"",purchase_order:"",payment_mode:null,plan_price:0,trn_order_id:""},multiActivationResponse:{},isAccount:!1,searchByOptions:[{id:1,name:"Account",value:"Account ID"},{id:2,name:"User",value:"User ID"}],paymentOptions:[{id:2,name:"Invoice"},{id:3,name:"Purchase Order"},{id:4,name:"Others"}],setPlanidToExpiryDate:{}}},components:{DeactivateUserPopup:X,DeactivateAccountPopup:He,Loader:J,Multiselect:z,AlreadyActivatedPlansPopup:Ke,ActivateServiceDateExpiryPopup:Ae},computed:{isDisabled(){let l=!1;this.planSelected==="plans"?l=Object.values(this.selectedPlanIdsWithType).some(_=>!!_.length):this.planSelected==="requests"&&(this.formDetails.trn_order_id?l=!0:l=!1);const{payment_mode:s}=this.formDetails;return this.searchBy==="Account"&&!this.userDetails.user_ids||!l||!s||!this.planSelected||s===2&&!this.formDetails.invoice||s===3&&!this.formDetails.purchase_order}},watch:{planSelected(){this.planSelected==="requests"&&this.resetPlans()},searchKeyword(){this.searchKeyword.length<2&&this.usersList.length&&(this.usersList=[])},setPlanidToExpiryDate(){this.setPlanidToExpiryDate[this.currentILTCourseIDSelected]=this.iltExpiryDate}},methods:{resetSearchParent(){this.searchKeyword="",this.userDetails={}},resetSearchKeyword(){this.searchKeyword=""},dateFormat(l){const s=`${l[0]} ${l[1]} ${l[2]}`;return B(s).format("DD MMM YYYY")},navigateToLaunchPad(){this.$router.push("/launchpad")},async deactivateUser(){I("#deactivateUserPopup").modal("hide"),this.loaderStatus=!0;const l=await ee(this.userDetails.account_id,this.userDetails.user_id);this.loaderStatus=!1,this.showToaster(l)},async deactivateAccount(){I("#deactivateAccountPopup").modal("hide"),this.loaderStatus=!0;const l=await te(this.userDetails.account_id);this.loaderStatus=!1,this.showToaster(l)},showToaster(l){l.status_code===200?(this.$notify({type:"success",title:"Success",text:l.data,duration:15e3}),this.userDetails={},this.resetAll()):this.$notify({type:"error",title:"Error",text:l.message||"Please try again later"})},showBulkToaster(l){l.status_code===200?l.data.services_activated?(this.$notify({type:"success",title:"Success",text:l.data.message,duration:15e3}),this.userDetails={},this.resetAll()):(this.multiActivationResponse=l.data,this.openAlreadyActivatedPlansPopup()):this.$notify({type:"error",title:"Error",text:l.message||"Please try again later"})},openAlreadyActivatedPlansPopup(){I("#alreadyActivatedPlans").modal({backdrop:"static",keyboard:!1})},openActiveServiceDateExpiryPopup(l){l.target.checked?(l.target.classList[0]==="ilt-input"||l.target.classList[0]==="ilt-all")&&(I("#activateServiceDateExpiryPopup").modal({backdrop:"static",keyboard:!1}),this.currentILTCourseIDSelected=l.target.value):(delete this.setPlanidToExpiryDate[l.srcElement.value],l.target.classList[0]==="ilt-all"&&(this.loaderStatus=!0,this.plansList.ILT.map(s=>{delete this.setPlanidToExpiryDate[s.plan_id]}),this.loaderStatus=!1))},async setDateToILTPlanID(l){l?(this.expiryDateSet=!0,this.iltExpiryDate=l,this.loaderStatus=!0,this.setPlanidToExpiryDate[this.currentILTCourseIDSelected]=await this.iltExpiryDate,this.loaderStatus=!1,Object.keys(this.setPlanidToExpiryDate)[0]==="on"&&(this.loaderStatus=!0,this.plansList.ILT.map(s=>{this.setPlanidToExpiryDate[s.plan_id]=l}),this.loaderStatus=!1)):(this.expiryDateSet=!1,this.iltExpiryDate=null)},uncheckILTCourse(){const l=document.querySelector(".ilt-all");l.checked===!0?(this.loaderStatus=!0,this.selectedPlanIdsWithType.ILT=[],this.loaderStatus=!1,l.checked=!1,l.value="",this.isSelectAll=!1):(this.selectedPlanIdsWithType.ILT.pop(),this.setPlanidToExpiryDate.pop())},openDeActiveUserPopup(){I("#deactivateUserPopup").modal({backdrop:"static",keyboard:!1})},openDeActiveAccountPopup(){I("#deactivateAccountPopup").modal({backdrop:"static",keyboard:!1})},async completeQnA(){this.loaderStatus=!0;const l=await se(this.userDetails.user_id);l.status_code===200?this.$notify({type:"success",title:"Success",text:`${l.data}`}):this.$notify({type:"error",title:"Error",text:`${l.message}`}),await this.getAvailableServiceForUserAFterComplete(),this.loaderStatus=!1},async activateServices(){this.loaderStatus=!0;const l=this.getSlotTimeWithPlanIds();let s=[];this.planSelected==="requests"?s=this.requestList.find(m=>m.trn_order_id===this.formDetails.trn_order_id).plan_details.map(m=>({plan_id:m.id})):s=Object.keys(this.selectedPlanIdsWithType).reduce((t,r)=>{if(this.selectedPlanIdsWithType[r].length){if(r==="ILT"){const v=this.selectedPlanIdsWithType[r].map(P=>({plan_id:P,ilt_slot_id:l[P],date_expiry:this.setPlanidToExpiryDate[P]}));return t=[...t,...v],t}const m=this.selectedPlanIdsWithType[r].map(v=>({plan_id:v}));return t=[...t,...m],t}return t},[]);const _={...this.formDetails,account_owner_id:this.formDetails.account_id,plan_price:+this.formDetails.plan_price,plan_info_list:s,account_id:this.userDetails.account_id,user_id:this.userDetails.user_id,user_ids:this.userDetails.user_ids};let x={};this.planSelected==="requests"?(_.trn_order_id=this.formDetails.trn_order_id,x=await le(_)):(this.searchBy==="Account"?x=await ie(_):x=await oe(_),_.trn_order_id=""),this.loaderStatus=!1,this.searchBy==="Account"?this.showBulkToaster(x):this.showToaster(x)},getSlotTimeWithPlanIds(){var l,s;return(l=this.selectedPlanIdsWithType.ILT)!=null&&l.length?(s=this.plansList)==null?void 0:s.ILT.reduce((_,x)=>(x.available_time_slot&&(_[x.plan_id]=x.available_time_slot.slot_id),_),{}):{}},async setAccountFieldValues(l){this.searchKeyword=l.user_id,this.usersList=[],this.selectedUser=l,this.isUsersListEmpty=!1,this.getAvailableServiceForUser()},onSelectAll(l,s=[]){this.isSelectAll?this.selectedPlanIdsWithType[l]=s.map(_=>_.plan_id):this.selectedPlanIdsWithType[l]=[]},onPlanChange(l,s=[]){l==="ILT"&&(this.isSelectAll=this.selectedPlanIdsWithType[l].length===s.length)},resetPlans(){this.requestedPlan="",this.requestedPlanSelected="",this.isSelectAll=!1,this.formDetails={account_owner_id:"",comments:"",invoice:"",purchase_order:"",payment_mode:null,plan_price:0,trn_order_id:""},this.setPlanIdWithTypes()},resetAll(){this.planSelected="",this.requestedPlan="",this.requestedPlanSelected="",this.isSelectAll=!1,this.searchKeyword="",this.selectedUser=null,this.formDetails={account_owner_id:"",comments:"",invoice:"",purchase_order:"",payment_mode:null,plan_price:0,trn_order_id:""},this.setPlanIdWithTypes()},async getAvailableServiceForUser(){var l;this.loaderStatus=!0,this.searchBy==="Account"?this.plansList=await q(0):this.plansList=await q(this.selectedUser.user_id),delete this.plansList.Documents,this.qnaList=await O(this.selectedUser.user_id),this.requestList=await j(this.selectedUser.user_id),this.isIltWithoutDates=(l=this.plansList.ILT)==null?void 0:l.find(s=>!s.available_time_slot&&s.training_type!=="Pre-recorded course"),this.setPlanIdWithTypes(),this.userDetails=this.selectedUser,this.resetAll(),this.loaderStatus=!1},async getAvailableServiceForUserAFterComplete(){var l;this.loaderStatus=!0,this.searchBy==="Account"?this.plansList=await q(0):this.plansList=await q(this.userDetails.user_id),delete this.plansList.Documents,this.requestList=await j(this.userDetails.user_id),this.isIltWithoutDates=(l=this.plansList.ILT)==null?void 0:l.find(s=>!s.available_time_slot&&s.training_type!=="Pre-recorded course"),this.setPlanIdWithTypes(),this.resetAll(),this.qnaList=await O(this.userDetails.user_id),this.loaderStatus=!1},setPlanIdWithTypes(){this.selectedPlanIdsWithType=Object.keys(this.plansList).reduce((l,s)=>(l[s]=[],l),{})},getAccountsListForAccountSearch:H.debounce(async function(){this.searchKeyword.length>1&&(this.selectedUser&&(this.selectedUser=null),this.searchBy==="Account"?(this.usersList=await ae(this.searchKeyword),this.usersListByAccount=this.usersList):this.usersList=await re(this.searchKeyword),this.isUsersListEmpty=!this.usersList.length)},200)}},c=l=>(C("data-v-2b6db65c"),l=l(),W(),l),Xe={class:"content-wrappper"},Ze={class:"col-xs-12 mt-20 p-0 search-wrapper"},$e={class:"col-xs-12 search-header"},et={class:"col-xs-12 mb-10 d-flex align-items-center col-gap-10 mb-20"},tt=c(()=>e("div",{class:"col-xs-12 text-primary fw-300 header-text mb-10"}," Locate OPUS User by searching the User ID or Email ID ",-1)),st={class:"col-xs-12 mt-20 mb-10"},lt=c(()=>e("div",{class:"col-xs-12 p-0 font-18 fw-700 text-primary"},[D(" Search By "),e("span",{class:"required-asterisk"},"*")],-1)),it={class:"radio"},ot=["value"],at=c(()=>e("div",{class:"radio__radio"},null,-1)),rt={class:"font-18 text-primary"},ct={key:0,class:"col-xs-12"},nt={class:"col-xs-12 col-sm-5 p-0"},dt=c(()=>e("span",{class:"vertical-line"},null,-1)),ut=c(()=>e("img",{src:Z,alt:"search-icon"},null,-1)),pt=[ut],_t={key:2,class:"col-xs-12 no-data-text font-18 fw-700"},ht={key:3,class:"col-xs-12 no-data-text font-18 fw-700"},mt={key:4,class:"col-xs-12 p-0 custom-col-search"},vt=["onClick"],yt={key:0,class:"col-xs-12 p-0 no-data-text font-18 fw-700 text-center"},ft={key:0},xt={key:1},Dt={key:0,class:"col-xs-12 mt-20"},bt={class:"col-xs-12"},gt=c(()=>e("h4",{class:"fw-700 font-18 text-primary"},"User Details",-1)),At={class:"ml-30 mr-30"},St={class:"col-xs-12"},kt=c(()=>e("span",{class:"fw-600"},"User Name: ",-1)),wt={class:"col-xs-12"},Pt=c(()=>e("span",{class:"fw-600"},"User Id: ",-1)),Lt={class:"col-xs-12"},It=c(()=>e("span",{class:"fw-600"},"Email: ",-1)),Tt={class:"col-xs-12"},Ut=c(()=>e("span",{class:"fw-600"},"Account Id: ",-1)),qt={key:0,class:"col-xs-12"},Et=c(()=>e("span",{class:"fw-600"},"Role: ",-1)),Ct={key:1,class:"col-xs-12 d-flex"},Wt=c(()=>e("span",{class:"fw-600"},"Account status: ",-1)),Bt=c(()=>e("p",{class:"green-main pl-10"},"Active",-1)),Vt=[Wt,Bt],Kt={key:2,class:"col-xs-12 d-flex"},Ot=c(()=>e("span",{class:"fw-600"},"Account status: ",-1)),jt=c(()=>e("p",{class:"red-1 pl-10"},"InActive",-1)),Ft=[Ot,jt],Nt={key:3,class:"col-xs-4 mt-20"},Mt={key:4,class:"col-xs-8 mt-20"},Rt=c(()=>e("p",{class:"text-regular-xsmall red-1"}," This will deactivate all the Account owners and Team Members linked to this account. ",-1)),Yt={class:"col-xs-12"},Qt=c(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[e("h4",{class:"fw-700 font-18 text-primary"},"Q&A session")],-1)),zt={class:"col-xs-8"},Gt=["disabled"],Ht={key:0,class:"text-regular-xsmall red-1"},Jt={key:1,class:"text-regular-xsmall red-1"},Xt={key:0},Zt=c(()=>e("div",{class:"col-sm-12 col-xs-12 col-md-12 mb-5"},[D(" User List "),e("span",{style:{color:"red"}},"*")],-1)),$t={class:"col-xs-12 col-md-8 col-lg-8 select-parent"},es={key:1},ts={class:"col-xs-12 p-0"},ss={class:"radio"},ls=["value"],is=c(()=>e("div",{class:"radio__radio"},null,-1)),os={class:"fw-700 font-18 text-primary"},as={key:0,class:"required-asterisk"},rs={key:0,class:"d-flex flex-direction-column plans-wrapper"},cs={class:"panel-group",id:"plans-accordion"},ns={class:"panel-heading"},ds=["data-target"],us=["id"],ps={class:"panel-body"},_s={key:0,class:"col-xs-12"},hs={key:0,class:"col-xs-12 d-flex align-items-center col-gap-10"},ms={class:"select-box"},vs=["disabled","onChange"],ys=c(()=>e("span",{class:"cr"},[e("i",{class:"cr-icon glyphicon glyphicon-ok"})],-1)),fs={key:0,class:"tooltiptext"},xs={class:"select-box"},Ds=["disabled","value","onUpdate:modelValue","onChange"],bs=c(()=>e("span",{class:"cr"},[e("i",{class:"cr-icon glyphicon glyphicon-ok"})],-1)),gs={key:0,class:"tooltiptext"},As={key:1,class:"col-xs-12 p-0 no-data-text font-18 fw-700 text-center"},Ss={key:0},ks={class:"col-xs-12 p-0"},ws={class:"radio"},Ps=["value"],Ls=c(()=>e("div",{class:"radio__radio"},null,-1)),Is={class:"fw-700 font-18 text-primary"},Ts={key:0,class:"required-asterisk"},Us={key:0,class:"d-flex flex-direction-column plans-wrapper"},qs={class:"panel-group",id:"plans-accordion"},Es={class:"panel-heading d-flex"},Cs={class:"radio requested-label"},Ws=["value"],Bs=c(()=>e("div",{class:"radio__radio"},null,-1)),Vs=["data-target"],Ks={class:"black-3 text-regular-small ml-20"},Os=["id"],js={class:"panel-body"},Fs={key:0,class:"col-xs-12"},Ns={key:1,class:"col-xs-12 p-0 no-data-text font-18 fw-700 text-center"},Ms={key:1,class:"col-xs-12 col-sm-4 pl-30 mb-20 mt-20"},Rs=c(()=>e("label",null,"Trn Order ID",-1)),Ys=c(()=>e("span",{class:"required-asterisk"},"*",-1)),Qs={class:"col-xs-12 mt-20 mb-10"},zs=c(()=>e("div",{class:"col-xs-12 p-0 font-18 fw-700 text-primary"},[D(" Payment Options "),e("span",{class:"required-asterisk"},"*")],-1)),Gs={class:"radio"},Hs=["value"],Js=c(()=>e("div",{class:"radio__radio"},null,-1)),Xs={class:"font-18 text-primary"},Zs={key:2,class:"col-xs-12 col-sm-4 pl-30 mb-20"},$s=c(()=>e("label",null,"Invoice Details",-1)),el=c(()=>e("span",{class:"required-asterisk"},"*",-1)),tl={key:3,class:"col-xs-12 col-sm-4 pl-30 mb-20"},sl=c(()=>e("label",null,"Purchase Order Details",-1)),ll=c(()=>e("span",{class:"required-asterisk"},"*",-1)),il={class:"col-xs-12"},ol={class:"col-xs-12 col-sm-4"},al=c(()=>e("label",null,"Comments",-1)),rl={class:"col-xs-12"},cl={key:0,class:"col-xs-12 col-sm-4 mt-20 font-18 fw-700 text-primary"},nl=c(()=>e("label",null,"Total Price",-1)),dl={key:1,class:"col-xs-12 col-sm-4 mt-20 font-18 fw-700 text-primary"},ul=c(()=>e("label",null,"Total Price",-1)),pl={class:"col-xs-12 mt-20 pl-30 mb-30"},_l=["disabled"];function hl(l,s,_,x,t,r){const m=w("router-link"),v=w("multiselect"),P=w("loader"),N=w("deactivate-account-popup"),M=w("deactivate-user-popup"),R=w("already-activated-plans-popup"),Y=w("activate-service-date-expiry-popup");return i(),o("div",Xe,[e("div",Ze,[e("div",$e,[e("div",et,[e("img",{onClick:s[0]||(s[0]=(...a)=>r.navigateToLaunchPad&&r.navigateToLaunchPad(...a)),class:"back-img cursor-pointer",src:ce,alt:""}),k(m,{class:"tools-text font-18",to:"/launchpad"},{default:G(()=>[D("Service Activation")]),_:1})]),tt,e("div",st,[lt,(i(!0),o(b,null,g(t.searchByOptions,a=>(i(),o("div",{class:"col-xs-12 col-sm-3",key:a.name},[e("label",it,[f(e("input",{type:"radio",class:"radio__input",value:a.name,"onUpdate:modelValue":s[1]||(s[1]=h=>t.searchBy=h),onClick:s[2]||(s[2]=(...h)=>r.resetSearchParent&&r.resetSearchParent(...h))},null,8,ot),[[T,t.searchBy]]),at,e("div",rt,d(a.value),1)])]))),128))]),t.searchBy?(i(),o("div",ct,[e("div",nt,[t.searchBy==="Account"?f((i(),o("input",{key:0,class:"search-box form-control mb-20 font-16",type:"number","onUpdate:modelValue":s[3]||(s[3]=a=>t.searchKeyword=a),placeholder:"Search by Account ID",onKeyup:s[4]||(s[4]=(...a)=>r.getAccountsListForAccountSearch&&r.getAccountsListForAccountSearch(...a))},null,544)),[[A,t.searchKeyword,void 0,{trim:!0}]]):f((i(),o("input",{key:1,class:"search-box form-control mb-20 font-16",type:"text","onUpdate:modelValue":s[5]||(s[5]=a=>t.searchKeyword=a),placeholder:"Search",onKeyup:s[6]||(s[6]=(...a)=>r.getAccountsListForAccountSearch&&r.getAccountsListForAccountSearch(...a))},null,544)),[[A,t.searchKeyword,void 0,{trim:!0}]]),e("div",null,[t.searchKeyword?(i(),o("img",{key:0,onClick:s[7]||(s[7]=(...a)=>r.resetSearchKeyword&&r.resetSearchKeyword(...a)),src:ne,alt:"close-icon",class:"cursor-pointer search-reset"})):p("",!0),dt,e("span",{onClick:s[8]||(s[8]=a=>r.getAvailableServiceForUser()),class:S(["search-icon cursor-pointer",{"events-none":!t.selectedUser}])},pt,2)]),t.searchKeyword&&t.searchKeyword.length<2?(i(),o("div",_t," Please enter at least 2 characters ")):t.isUsersListEmpty&&t.searchKeyword.length>=2?(i(),o("div",ht," No Users Found ")):t.usersList.length?(i(),o("div",mt,[e("ul",null,[(i(!0),o(b,null,g(t.usersList,(a,h)=>(i(),o("li",{key:h,onClick:y=>r.setAccountFieldValues(a)},d(a.user_name)+" - ID "+d(a.user_id),9,vt))),128))])])):p("",!0)]),!Object.keys(t.userDetails).length&&!t.searchKeyword?(i(),o("div",yt,[t.searchBy==="Account"?(i(),o("p",ft," Please search by entering the Account ID Only ")):(i(),o("p",xt," Please search the user by entering the username or user id "))])):p("",!0)])):p("",!0)]),Object.keys(t.userDetails).length?(i(),o("div",Dt,[e("div",bt,[gt,e("div",At,[e("div",St,[kt,D(d(t.userDetails.user_name),1)]),e("div",wt,[Pt,D(d(t.userDetails.user_id),1)]),e("div",Lt,[It,D(d(t.userDetails.email),1)]),e("div",Tt,[Ut,D(d(t.userDetails.account_id),1)]),t.userDetails.active?(i(),o("div",qt,[Et,D(" "+d(t.userDetails.role_name),1)])):p("",!0),t.userDetails.active?(i(),o("div",Ct,Vt)):(i(),o("div",Kt,Ft)),t.userDetails.active?(i(),o("div",Nt,[e("button",{class:"emergo-green-button",onClick:s[9]||(s[9]=(...a)=>r.openDeActiveUserPopup&&r.openDeActiveUserPopup(...a))}," Deactivate User ")])):p("",!0),t.userDetails.active?(i(),o("div",Mt,[e("button",{class:"emergo-green-button",onClick:s[10]||(s[10]=(...a)=>r.openDeActiveAccountPopup&&r.openDeActiveAccountPopup(...a))}," Deactivate Account "),Rt])):p("",!0)])]),e("div",Yt,[Qt,e("div",zt,[e("button",{class:"emergo-green-button",disabled:!t.qnaList.enrolled,onClick:s[11]||(s[11]=(...a)=>r.completeQnA&&r.completeQnA(...a))}," Mark Complete ",8,Gt),t.qnaList.enrolled?(i(),o("p",Ht," This will make Q&A session complete and will be available for re-purchase for the user. ")):(i(),o("p",Jt," The Q&A session is completed/expired. "))])]),t.searchBy==="Account"?(i(),o("div",Xt,[Zt,e("div",$t,[k(v,{showLabels:!1,multiple:!0,"close-on-select":!1,"allow-empty":!1,class:"multiselect-single-dropdown",searchable:!0,max:15,options:t.usersListByAccount.map(a=>a.user_id),"custom-label":a=>t.usersListByAccount.find(h=>h.user_id==a).email,modelValue:t.userDetails.user_ids,"onUpdate:modelValue":s[12]||(s[12]=a=>t.userDetails.user_ids=a),"open-direction":"bottom",placeholder:"Select users"},null,8,["options","custom-label","modelValue"])])])):p("",!0),t.userDetails.active?(i(),o("div",es,[(i(!0),o(b,null,g(t.availableActions,(a,h)=>(i(),o("div",{class:"col-xs-12 mt-30",key:h},[e("div",ts,[e("label",ss,[f(e("input",{type:"radio",class:"radio__input",value:h,"onUpdate:modelValue":s[13]||(s[13]=y=>t.planSelected=y)},null,8,ls),[[T,t.planSelected]]),is,e("div",os,[D(d(a)+" ",1),a==="Available plans"?(i(),o("span",as,"*")):p("",!0)])])]),t.planSelected==="plans"&&h==="plans"?(i(),o("div",rs,[e("div",cs,[(i(!0),o(b,null,g(t.plansList,(y,u)=>(i(),o("div",{class:"panel wrapper-panel",key:u},[e("div",ns,[e("div",{class:"panel-title cursor-pointer collapsed","data-toggle":"collapse","data-parent":"#plans-accordion","data-target":`#plan${u.replaceAll(" ","-")}`},d(u),9,ds)]),e("div",{id:`plan${u.replaceAll(" ","-")}`,class:"panel-collapse collapse"},[e("div",ps,[y&&y.length?(i(),o("div",_s,[u==="ILT"?(i(),o("div",hs,[e("div",ms,[e("div",{class:S(["checkbox",{"tooltip-for-slot":!!t.isIltWithoutDates}])},[e("label",null,[f(e("input",{class:S([{"events-none":!!t.isIltWithoutDates},"ilt-all"]),onClick:s[14]||(s[14]=(...n)=>r.openActiveServiceDateExpiryPopup&&r.openActiveServiceDateExpiryPopup(...n)),disabled:!!t.isIltWithoutDates,type:"checkbox","onUpdate:modelValue":s[15]||(s[15]=n=>t.isSelectAll=n),onChange:n=>r.onSelectAll(u,y)},null,42,vs),[[K,t.isSelectAll]]),ys]),t.isIltWithoutDates?(i(),o("span",fs,"No slots available for few")):p("",!0)],2)]),e("div",{class:S(["text-primary",{"fw-700":t.isSelectAll}])}," Select All ",2)])):p("",!0),(i(!0),o(b,null,g(y,n=>(i(),o("div",{class:"col-xs-12 d-flex align-items-center col-gap-10",key:n.plan_id},[e("div",xs,[e("div",{class:S(["checkbox",{"tooltip-for-slot ilt-here":!n.available_time_slot&&u==="ILT"}])},[e("label",null,[f(e("input",{class:S({"events-none":!n.available_time_slot&&u==="ILT"&&n.training_type!=="Pre-recorded course","ilt-input":u==="ILT"}),onClick:s[16]||(s[16]=(...L)=>r.openActiveServiceDateExpiryPopup&&r.openActiveServiceDateExpiryPopup(...L)),ref_for:!0,ref:"iltPlanCheckbox",disabled:!n.available_time_slot&&u==="ILT"&&n.training_type!=="Pre-recorded course",type:"checkbox",value:n.plan_id,"onUpdate:modelValue":L=>t.selectedPlanIdsWithType[u]=L,onChange:L=>r.onPlanChange(u,y)},null,42,Ds),[[K,t.selectedPlanIdsWithType[u]]]),bs]),!n.available_time_slot&&u==="ILT"&&n.training_type!=="Pre-recorded course"?(i(),o("span",gs,"No slots available")):p("",!0)],2)]),e("div",{class:S(["text-primary",{"fw-700":t.selectedPlanIdsWithType[u].includes(n.plan_id)}])},d(n.item_name)+" "+d(t.setPlanidToExpiryDate[n.plan_id]?"- ("+(new Date(t.setPlanidToExpiryDate[n.plan_id]).getMonth()+1)+"-"+new Date(t.setPlanidToExpiryDate[n.plan_id]).getDate()+"-"+new Date(t.setPlanidToExpiryDate[n.plan_id]).getFullYear()+")":"")+" "+d(n.training_type==="Pre-recorded course"?"(Pre recorded course)":""),3)]))),128))])):(i(),o("div",As," User currently have full access to all available resources "))])],8,us)]))),128))])])):p("",!0)]))),128)),t.searchBy!="Account"?(i(),o("div",Ss,[(i(!0),o(b,null,g(t.requestedActions,(a,h)=>(i(),o("div",{class:"col-xs-12 mt-30",key:h},[e("div",ks,[e("label",ws,[f(e("input",{type:"radio",class:"radio__input",value:h,"onUpdate:modelValue":s[17]||(s[17]=y=>t.planSelected=y)},null,8,Ps),[[T,t.planSelected]]),Ls,e("div",Is,[D(d(a)+" ",1),a==="Requested plans"?(i(),o("span",Ts,"*")):p("",!0)])]),t.planSelected==="requests"&&h==="requests"?(i(),o("div",Us,[e("div",qs,[(i(!0),o(b,null,g(t.requestList,(y,u)=>(i(),o("div",{class:"panel wrapper-panel",key:u},[e("div",Es,[e("label",Cs,[f(e("input",{type:"radio",class:"radio__input",value:y.trn_order_id,"onUpdate:modelValue":s[18]||(s[18]=n=>t.formDetails.trn_order_id=n)},null,8,Ws),[[T,t.formDetails.trn_order_id]]),Bs]),e("div",{class:"panel-title cursor-pointer collapsed mt-5","data-toggle":"collapse","data-parent":"#plans-accordion","data-target":`#plan${u}`},[D(" Requested plan "+d(u+1)+" ",1),e("span",Ks,"On "+d(r.dateFormat(y.requested_date)||y.requested_date),1)],8,Vs)]),e("div",{id:`plan${u}`,class:"panel-collapse collapse"},[e("div",js,[t.requestList.length?(i(),o("div",Fs,[(i(!0),o(b,null,g(y.plan_details,(n,L)=>(i(),o("div",{class:"col-xs-12 d-flex align-items-center col-gap-10",key:L},[e("li",null,d(n.name)+" - "+d(n.plan_type),1)]))),128))])):(i(),o("div",Ns," User currently have not requested any services "))])],8,Os)]))),128))])])):p("",!0)])]))),128))])):p("",!0),t.planSelected==="requests"?(i(),o("div",Ms,[Rs,Ys,f(e("input",{maxlength:"65",class:"form-control",disabled:"true",type:"text","onUpdate:modelValue":s[19]||(s[19]=a=>t.formDetails.trn_order_id=a)},null,512),[[A,t.formDetails.trn_order_id,void 0,{trim:!0}]])])):p("",!0),e("div",Qs,[zs,(i(!0),o(b,null,g(t.paymentOptions,a=>(i(),o("div",{class:"col-xs-12 col-sm-3",key:a.id},[e("label",Gs,[f(e("input",{type:"radio",class:"radio__input",value:a.id,"onUpdate:modelValue":s[20]||(s[20]=h=>t.formDetails.payment_mode=h)},null,8,Hs),[[T,t.formDetails.payment_mode]]),Js,e("div",Xs,d(a.name),1)])]))),128))]),t.formDetails.payment_mode===2?(i(),o("div",Zs,[$s,el,f(e("input",{maxlength:"65",class:"form-control",type:"text","onUpdate:modelValue":s[21]||(s[21]=a=>t.formDetails.invoice=a)},null,512),[[A,t.formDetails.invoice,void 0,{trim:!0}]])])):t.formDetails.payment_mode===3?(i(),o("div",tl,[sl,ll,f(e("input",{maxlength:"65",class:"form-control",type:"text","onUpdate:modelValue":s[22]||(s[22]=a=>t.formDetails.purchase_order=a)},null,512),[[A,t.formDetails.purchase_order,void 0,{trim:!0}]])])):p("",!0),e("div",il,[e("div",ol,[al,f(e("textarea",{maxlength:"1500",type:"text",class:"form-control",rows:"5","onUpdate:modelValue":s[23]||(s[23]=a=>t.formDetails.comments=a)},null,512),[[A,t.formDetails.comments,void 0,{trim:!0}]])])]),e("div",rl,[t.searchBy==="Account"?(i(),o("div",cl,[nl,f(e("input",{class:"form-control",disabled:"true",type:"number","onUpdate:modelValue":s[24]||(s[24]=a=>t.formDetails.plan_price=a)},null,512),[[A,t.formDetails.plan_price,void 0,{trim:!0}]])])):(i(),o("div",dl,[ul,f(e("input",{class:"form-control",type:"number","onUpdate:modelValue":s[25]||(s[25]=a=>t.formDetails.plan_price=a)},null,512),[[A,t.formDetails.plan_price,void 0,{trim:!0}]])]))]),e("div",pl,[e("button",{onClick:s[26]||(s[26]=(...a)=>r.activateServices&&r.activateServices(...a)),class:S([{"events-none":r.isDisabled},"emergo-green-button"]),disabled:r.isDisabled}," Activate Plans ",10,_l)])])):p("",!0)])):p("",!0),k(P,{loadingStatus:t.loaderStatus},null,8,["loadingStatus"]),k(N,{onDeActivateUserAccount:r.deactivateAccount},null,8,["onDeActivateUserAccount"]),k(M,{onDeActivateUser:r.deactivateUser},null,8,["onDeActivateUser"]),k(R,{formDetails:t.multiActivationResponse},null,8,["formDetails"]),k(Y,{onActivateServiceDateExpiry:r.setDateToILTPlanID,onActivateServiceDateExpiryNotUpdated:r.uncheckILTCourse},null,8,["onActivateServiceDateExpiry","onActivateServiceDateExpiryNotUpdated"])])])}const Al=E(Je,[["render",hl],["__scopeId","data-v-2b6db65c"]]);export{Al as default};
