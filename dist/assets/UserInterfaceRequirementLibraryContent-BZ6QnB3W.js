import{_ as O,B as N,d as j,N as P,$ as V,c as n,a as e,e as f,k as p,b as x,w as U,F as I,m as b,n as u,j as v,v as D,b2 as k,t as y,I as H,r as C,o as l,i as w,q as Y,p as J,f as K}from"./index-BlMJxPGQ.js";import{R as z,b as _,c as G,d as Q,e as W}from"./tools_freeversion_lock-Bg4t4mT5.js";import{L as X}from"./Loader-DR0R9oEF.js";import{a as Z,b as F,c as $,d as S}from"./userInterfaceRequirementLibrary-D8jjQb2D.js";import{c as ee}from"./marketPlaceResources-hux66PHi.js";import{P as te}from"./Pagination-BZVaeVs8.js";import{m as se}from"./marketPlaceTools-GTlmHJkh.js";import{p as R}from"./marketo-zx_g1DXt.js";import{k as T}from"./uirlAdmin-Bdxu67zl.js";import{_ as oe}from"./chevron_left_white-D3IwzB1n.js";import{_ as E}from"./search_icon-C65g3Q5L.js";import{_ as ae}from"./danger_close_icon-CkTgh2bE.js";import{_ as re}from"./caret_up-B2jHJbJA.js";import"./DocumentsMoreInfo-CaOFYwEb.js";import"./moment-Cl4UOzQZ.js";import"./constants-DZfa7LnM.js";import"./cart-QHhiBhPv.js";import"./event-bus-DYoA24Gz.js";import"./tool_available-BYBTocPu.js";import"./trash-D7-advNl.js";import"./goto_arrow-zLb6UYwr.js";import"./close_icon_white-5NpTKSBQ.js";import"./chevron_right-Bv87NFTl.js";import"./cloneDeep-ldw2ZiUo.js";import"./_baseAssignValue-BD6sbZ4C.js";import"./OpusSelect-BRceMwA4.js";import"./OpusCheckbox-DmKgoiup.js";import"./chevron_down_new-ByXOiGKT.js";import"./AddRemoveCartPopup-CqkASo7c.js";import"./documentsMixin-Bh1uCigM.js";import"./documents-CP6oEKge.js";const ie={props:["userId"],data(){return{loaderStatus:!1,selectAllFiles:!1,selectedFiles:[],rootCauseInfo:[],rootCauseFilters:{},selectedFilterId:[],rootCauseModalInfo:{},enteredTag:"",totalPages:1,total:0,perPage:20,fromRecords:1,currentPage:1,maxVisiblePages:4,rootCauseTags:[],copiedData:[],finalData:[],response:{},toolsData:{},isPurchased:0,isEmpty:!1,rcaIndex:-1,totalCurrentRecords:"",closeRecommendationId:{},dataOrder:"asc",isActive:!1,hasExpand:!0,placeholder:"Search",searchText:""}},components:{Loader:X,RootCauseInfoModal:z,Pagination:te,marketPlaceTools:se,BaseButton:N},async created(){if(await Promise.all([this.getuirlFilters(),this.getList()]),this.$route.query.id){const t=[...this.$route.query.id];await this.getPopularSearches(t)}},watch:{enteredTag(t,s){this.selectedFilterId=this.selectedFilterId.filter(c=>!s.includes(c));const a=[...this.selectedFilterId,...this.enteredTag];this.selectedFilterId=[...new Set(a)]},selectAllFiles(){this.selectAllFiles?this.selectedFiles=this.rootCauseInfo.map(t=>t.id):this.selectedFiles=[]}},methods:{makeBarExpand(){this.isActive=!this.isActive,this.clear()},clear(){this.searchText=""},async getPopularSearches(t){this.selectedFilterId=t,await this.getDRLData(t)},closeRecommendation(t){this.closeRecommendationId={...this.closeRecommendationId,[t]:!this.closeRecommendationId[t]}},sortTitle(){this.dataOrder==="asc"?(this.dataOrder="desc",this.rootCauseInfo.sort((t,s)=>s.requirement_title.localeCompare(t.requirement_title))):this.dataOrder==="desc"&&(this.dataOrder="asc",this.rootCauseInfo.sort((t,s)=>t.requirement_title.localeCompare(s.requirement_title)))},expandAllTitles(){const t={};this.rootCauseInfo.forEach(s=>{t[s.id]=!0}),this.closeRecommendationId={...t}},collapseAllTitles(){const t={};this.rootCauseInfo.forEach(s=>{t[s.id]=!1}),this.closeRecommendationId={...t}},getImageUrl(t){return t?`https://opusjavaprodstorage.blob.core.windows.net/${t}`:null},navigateToTools(){this.$router.go(-1)},EmitNextRootCause(){this.rcaIndex+=1,this.rcaIndex===this.rootCauseInfo.length&&(this.rcaIndex=0),this.rootCauseModalInfo=this.rootCauseInfo[this.rcaIndex]},EmitPreviousRootCause(){this.rcaIndex-=1,this.rcaIndex===-1&&(this.rcaIndex=this.rootCauseInfo.length-1),this.rootCauseModalInfo=this.rootCauseInfo[this.rcaIndex]},async getList(){this.loaderStatus=!0;const[t,s]=await Promise.all([Z(+this.userId),ee(1,this.userId)]);this.toolsData=s;const a=t.filter(c=>c.title==="User Interface Requirements Library");this.isPurchased=a[0].enrolled,this.loaderStatus=!1},async selectedFilesRca(){this.loaderStatus=!0,this.finalData=[],this.copiedData=[],this.response=await F(this.selectedFiles);for(let t=0;t<this.response.length;t+=1){const s=`${this.response[t].title}
`,a=`${this.response[t].commentary}

`;this.copiedData.push(s),this.copiedData.push(a),this.finalData=[...this.copiedData].join("")}if(this.finalData.length>0){this.$copyText(this.finalData).then(()=>{this.$notify({type:"success",title:"Success",text:"Copied successfully!"})},()=>{this.$notify({type:"error",title:"Error",text:"Copy failed!"})});const t={email:JSON.parse(localStorage.getItem("userData")).email,Last_Interest:"Human Factors Research & Design",page_urlextended:window.location.href,page_urlreferral_extended:document.referrer,form_control:"Copy",form_control_details:"Root Causes"};R(t)}else this.$notify({type:"error",title:"Error",text:"Select atleast one root cause to copy!"});this.loaderStatus=!1},async downloadRootCause(){this.loaderStatus=!0,this.finalData=[],this.copiedData=[];const t=await F(this.selectedFiles);for(let a=0;a<t.length;a+=1){const c=new _.Paragraph({text:`${t[a].title.trim()}`,style:"default-paragraph"}),o=new _.Paragraph({text:`${t[a].commentary}`,style:"default-paragraph"}),i=new _.Paragraph("");this.copiedData.push(c),this.copiedData.push(o),this.copiedData.push(i)}this.finalData=[...this.copiedData];const s=j().format("MMDDYYYY");if(this.finalData.length>0){const a=new _.Document({styles:{paragraphStyles:[{id:"default-paragraph",name:"Default Paragraph",run:{font:"Calibri"}}]},sections:[{properties:{},children:[...this.finalData]}]});this.selectedFiles.length>1?_.Packer.toBlob(a).then(o=>{P.saveAs(o,`RCA_${s}.docx`)}):_.Packer.toBlob(a).then(o=>{P.saveAs(o,`${t[0].title}_${s}.docx`)});const c={email:JSON.parse(localStorage.getItem("userData")).email,Last_Interest:"Human Factors Research & Design",page_urlextended:window.location.href,page_urlreferral_extended:document.referrer,form_control:"Download",form_control_details:"Root Causes"};R(c)}else this.$notify({type:"error",title:"Error",text:"Select atleast one root cause to download!"});this.loaderStatus=!1},async getuirlFilters(){const t=await $(),s=t.filters;this.rootCauseFilters=s.filter(a=>a.active===!0),this.rootCauseTags=t.tags},async pagechanged(t){t&&(this.currentPage=t),this.fromRecords=this.currentPage,this.setSelectionsAsEmpty(),await this.getDRLDataPagination(this.selectedFilterId)},async pushTags(t){const s=this.rootCauseTags.filter(a=>a.id===t);this.rootCauseFilterTags=s},addListFilters(t){this.selectedFilterId.push(t)},openInfoModal(t,s){this.rootCauseModalInfo=t,this.rcaIndex=s,V("#root-cause-info").modal("show")},getFormData(){const t={pagination:{current_page:this.fromRecords,result_per_page:this.perPage},sub_category_ids:this.selectedFilterId};return this.searchText=this.searchText?t.search=this.searchText.trim():"",this.filterObj=Object.keys(this.filterObj).length!==0?t.filter=this.filterObj:{},t},async search(){this.searchText!==""&&this.searchRootCause(this.searchText),this.setSelectionsAsEmpty(),this.isEmpty=!1,this.selectedFilterId=[],this.rootCauseInfo=[],this.enteredTag=[]},async searchRootCause(t){const s={pagination:{current_page:this.fromRecords,result_per_page:this.perPage},search:t};this.loaderStatus=!0;const a=await T(s);this.rootCauseInfo=a.result_data,a&&(this.total=a.total_records_count,this.totalRecordsCount=this.total>this.totalRecordsCount?this.total:this.totalRecordsCount,this.totalPages=Math.ceil(this.total/this.perPage)),this.loaderStatus=!1},async getDRLData(t){this.setSelectionsAsEmpty(),this.currentPage=1;const s={pagination:{current_page:1,result_per_page:this.perPage},sub_category_ids:t};this.loaderStatus=!0;const a=await S(s),c=a.data.result_data.filter(i=>i.active===!0);this.isPurchased?(this.rootCauseInfo=c,this.rootCauseInfo.sort((i,g)=>i.requirement_title.localeCompare(g.requirement_title)),this.rootCauseInfo.length>0?this.isEmpty=!1:this.isEmpty=!0,a&&(this.total=a.data.total_records_count,this.totalRecordsCount=this.total>this.totalRecordsCount?this.total:this.totalRecordsCount,this.totalPages=Math.ceil(this.total/this.perPage))):(this.rootCauseInfo=c.slice(0,5),this.rootCauseInfo.sort((i,g)=>i.requirement_title.localeCompare(g.requirement_title)));const o={email:JSON.parse(localStorage.getItem("userData")).email,Last_Interest:"Human Factors Research & Design",page_urlextended:window.location.href,page_urlreferral_extended:document.referrer,form_control:"Tools",form_control_details:"User Interface Requirement Library"};R(o),this.loaderStatus=!1},async getDRLDataPagination(t){if(this.loaderStatus=!0,this.searchText){const s={pagination:{current_page:this.fromRecords,result_per_page:this.perPage},search:this.searchText},a=await T(s);this.rootCauseInfo=a.result_data,a&&(this.total=a.total_records_count,this.totalRecordsCount=this.total>this.totalRecordsCount?this.total:this.totalRecordsCount,this.totalPages=Math.ceil(this.total/this.perPage))}else{const s={pagination:{current_page:this.fromRecords,result_per_page:this.perPage},sub_category_ids:t},a=await S(s);this.rootCauseInfo=a.data.result_data,this.rootCauseInfo.sort((c,o)=>c.requirement_title.localeCompare(o.requirement_title)),a&&(this.total=a.data.total_records_count,this.totalRecordsCount=this.total>this.totalRecordsCount?this.total:this.totalRecordsCount,this.totalPages=Math.ceil(this.total/this.perPage))}this.loaderStatus=!1},resetFilters(){this.setSelectionsAsEmpty(),this.isEmpty=!1,this.selectedFilterId=[],this.rootCauseInfo=[],this.enteredTag=[]},setSelectionsAsEmpty(){this.selectAllFiles=!1,this.selectedFiles=[]}}},d=t=>(J("data-v-e639f821"),t=t(),K(),t),le={class:"content-wrappper"},ne={class:"drl-welcome-banner mr-0"},ce={class:"col-xs-12 p-0"},de={class:"col-xs-12 d-flex align-items-center mb-10 p-0"},he={class:"welcome-common-header pl-25 fw-300"},ue={key:0,class:"free-button"},pe={class:""},me={class:"col-sm-4 col-md-3 filters-main p-0 view-filters-main"},_e={class:"pt-20 filters-select-card pl-10 pb-10"},fe=d(()=>e("div",{class:"flex pl-10"},[e("p",{class:"step-common step-style"},[e("span",{class:"number"},"1")]),e("p",{class:"filter-text pr-10"},"Select Filters")],-1)),ge={class:"d-flex flex-wrap justify-content-center col-gap-15 pt-10 pb-10"},ye={class:"panel-group",id:"accordion0",role:"tablist","aria-multiselectable":"true"},Ce={key:0,class:"panel-heading",role:"tab",id:"headingTwo"},xe=["href","aria-controls"],Ie={class:"main-list-header"},be={key:1,class:"panel-heading",role:"tab",id:"headingTwo"},ve={class:"panel-title"},we=["href","aria-controls"],Re={class:"main-list-header"},Pe=["id"],De={class:""},ke={class:"select-box"},Fe={class:"checkbox"},Se=["value","disabled"],Te=d(()=>e("span",{class:"cr"},[e("i",{class:"cr-icon glyphicon glyphicon-ok"})],-1)),Ee={class:"pl-20",style:{"max-width":"250px"}},Le={class:"pt-20 results-select-card pl-10 pb-10"},qe={class:"d-flex justify-content-between"},Me={class:"flex pl-10"},Ae={key:0,class:"step-common step-no-style"},Be={key:1,class:"step-common step-style"},Oe=d(()=>e("p",{class:"filter-text pr-10"},"View Results",-1)),Ne={key:0,class:"mr-10 custom-width"},je=["placeholder"],Ve={key:1,class:"search-container-expand pl-10 pr-10 cursor-pointer"},Ue=["placeholder"],He={class:"pl-20 text-subtitle-2 pt-30"},Ye={class:"col-xs-12 mt-20 table-wrapper"},Je={class:"table"},Ke={class:"recommendation-intro d-flex justify-content-between"},ze=d(()=>e("p",null,"Title",-1)),Ge=d(()=>e("div",{class:"root-heading col-xs-6"},[e("p",null,"Requirement")],-1)),Qe={key:0,class:"panel-group"},We={class:"panel panel-default",style:{"border-bottom":"1px solid rgba(11, 60, 97, 0.1) !important"}},Xe={class:"panel-heading"},Ze=["href","onClick"],$e={class:"recommendation-before-collapse d-flex col-xs-6"},et={class:"panel-body margin-nve-10"},tt={class:"text-regular-large black-2 drl-custom-ul"},st=["innerHTML"],ot=d(()=>e("img",{class:"new_member_img",src:G},null,-1)),at=d(()=>e("h3",{class:"select-filter-text text-color"},[f(" Select and apply filters to "),e("br"),f(" view matching User Interface Requirements ")],-1)),rt=d(()=>e("p",{class:"text-color ft-18"}," Select additional filters to view more results ",-1)),it=[ot,at,rt],lt=d(()=>e("img",{class:"new_member_img",src:Q},null,-1)),nt=d(()=>e("h3",{class:"select-filter-text text-color"}," Sorry, no results found ",-1)),ct=d(()=>e("p",{class:"text-color ft-18"}," Try again by adjusting your filters for different results ",-1)),dt=[lt,nt,ct],ht={key:0,class:"pagination-wrapper"},ut={key:1,class:"col-xs-12 mt-20 center tool-freeversion-image"},pt=d(()=>e("img",{class:"new_member_img",src:W},null,-1)),mt=d(()=>e("h3",{class:"tool-free-text"},[f(" To access all results and use all filters, purchase"),e("br"),f(" User Interface Requirement Library ")],-1));function _t(t,s,a,c,o,i){const g=C("BaseButton"),L=C("pagination"),q=C("market-place-tools"),M=C("root-cause-info-modal"),A=C("loader");return l(),n("div",le,[e("div",ne,[e("div",ce,[e("div",de,[e("img",{onClick:s[0]||(s[0]=(...r)=>i.navigateToTools&&i.navigateToTools(...r)),class:"cursor-pointer",src:oe,alt:""}),e("div",he,[f(" User Interface Requirement Library"),o.isPurchased?p("",!0):(l(),n("span",ue,"Free version"))])])])]),e("div",pe,[e("div",me,[e("div",_e,[fe,e("div",ge,[e("button",{class:"btn btn-light reset-text",onClick:s[1]||(s[1]=(...r)=>i.resetFilters&&i.resetFilters(...r))}," Reset all "),x(g,{disabled:!o.selectedFilterId.length,onClick:s[2]||(s[2]=r=>i.getDRLData(o.selectedFilterId))},{default:U(()=>[f("Apply")]),_:1},8,["disabled"])])]),e("div",null,[e("div",ye,[(l(!0),n(I,null,b(o.rootCauseFilters,(r,h)=>(l(),n("div",{class:"panel panel-default",key:h},[o.isPurchased?(l(),n("div",be,[e("h4",ve,[e("a",{class:"collapsed",role:"button","data-toggle":"collapse","data-parent":"#accordion",href:"#collapse"+h,"aria-controls":"#collapse"+r,onClick:s[4]||(s[4]=w(()=>{},["prevent"]))},[e("span",Re,y(r.filter_name),1)],8,we)])])):(l(),n("div",Ce,[e("h4",{class:u(["panel-title",h===0?"not-disable-filters":"disable-filters"])},[e("a",{class:"collapsed",role:"button","data-toggle":"collapse","data-parent":"#accordion",href:"#collapse"+h,"aria-controls":"#collapse"+r,onClick:s[3]||(s[3]=w(()=>{},["prevent"]))},[e("span",Ie,y(r.filter_name),1)],8,xe)],2)])),e("div",{id:"collapse"+h,class:"panel-collapse collapse",role:"tabpanel","aria-labelledby":"headingTwo"},[(l(!0),n(I,null,b(r.sub_categories,m=>(l(),n("div",{class:"pt-10",key:m.id},[e("div",De,[e("div",{class:u(["pl-40 flex",!o.isPurchased&&!["Software","Hardware & On-Device Markings"].includes(m.sub_category_name)?"disable-filters":"not-disable-filters"])},[e("div",ke,[e("div",Fe,[e("label",null,[v(e("input",{type:"checkbox",value:m.id,"onUpdate:modelValue":s[5]||(s[5]=B=>o.selectedFilterId=B),disabled:!o.isPurchased&&!["Software","Hardware & On-Device Markings"].includes(m.sub_category_name)},null,8,Se),[[Y,o.selectedFilterId]]),Te])])]),e("p",Ee,y(m.sub_category_name),1)],2)])]))),128))],8,Pe)]))),128))])])]),e("div",{class:u(["col-sm-8 col-md-9 p-0",{"view-results-main":o.rootCauseInfo.length>0}])},[e("div",Le,[e("div",qe,[e("div",Me,[o.rootCauseInfo.length?(l(),n("span",Be,"2")):(l(),n("span",Ae,"2")),Oe]),o.isPurchased?(l(),n("div",Ne,[e("div",null,[o.hasExpand?(l(),n("div",{key:0,class:u(["cursor-pointer",o.isActive?"search-container-expand":"search-container"])},[e("img",{class:"image-search",src:E,alt:"Search",onClick:s[6]||(s[6]=(...r)=>i.makeBarExpand&&i.makeBarExpand(...r))}),o.isActive?v((l(),n("input",{key:0,type:"text",class:"search-bar p-10",placeholder:o.placeholder,"onUpdate:modelValue":s[7]||(s[7]=r=>o.searchText=r),onKeydown:s[8]||(s[8]=k((...r)=>i.search&&i.search(...r),["enter"]))},null,40,je)),[[D,o.searchText]]):p("",!0)],2)):(l(),n("div",Ve,[e("img",{class:"image-search",src:E,onClick:s[9]||(s[9]=(...r)=>i.search&&i.search(...r)),alt:"Search"}),v(e("input",{type:"text",class:"search-bar p-10",placeholder:o.placeholder,"onUpdate:modelValue":s[10]||(s[10]=r=>o.searchText=r),onKeydown:s[11]||(s[11]=k((...r)=>i.search&&i.search(...r),["enter"]))},null,40,Ue),[[D,o.searchText]]),o.searchText?(l(),n("img",{key:0,onClick:s[12]||(s[12]=(...r)=>i.clear&&i.clear(...r)),src:ae,alt:"Clear search query"})):p("",!0)]))])])):p("",!0)]),e("div",He,y(o.rootCauseInfo?o.rootCauseInfo.length+" items":""),1)]),e("div",Ye,[e("div",Je,[e("div",Ke,[e("div",{class:"root-heading col-xs-6 d-flex align-items-center",onClick:s[13]||(s[13]=(...r)=>i.sortTitle&&i.sortTitle(...r))},[ze,e("img",{src:re,alt:"",class:u(["sorting-icon cursor-pointer pl-10",o.dataOrder==="desc"?"desc pr-10":""])},null,2)]),Ge]),o.rootCauseInfo.length>0?(l(),n("div",Qe,[(l(!0),n(I,null,b(o.rootCauseInfo,(r,h)=>(l(),n("div",{class:u(["panel-group",!o.isPurchased&&h>=5?"disable-filters":"not-disable-filters"]),id:"accordionrec",key:h},[e("div",We,[e("div",Xe,[e("div",{class:"panel-heading recommentation-arrow-container p-relative pb-0 d-flex justify-space-between","aria-expanded":"false","data-toggle":"collapse","data-parent":"#accordionrec",href:"#collapserecco"+h,onClick:w(m=>i.closeRecommendation(r.id),["prevent"])},[e("p",{class:u(["text-button-label blue-1 pr-20 col-xs-6",o.closeRecommendationId[r.id]?"desc":"asc"])},y(r.requirement_title),3),e("div",$e,[e("div",et,[e("div",tt,[e("p",{innerHTML:r.requirement_content},null,8,st)])])])],8,Ze)])])],2))),128))])):(l(),n("div",{key:1,class:u(["col-xs-12 mt-20 no-data center",o.isEmpty?"display-none":"display-block"])},it,2)),o.rootCauseInfo.length===0?(l(),n("div",{key:2,class:u(["col-xs-12 mt-20 no-data center",o.isEmpty?"display-block":"display-none"])},dt,2)):p("",!0)]),o.rootCauseInfo.length>0?(l(),n("div",ht,[o.total?(l(),H(L,{key:0,totalPages:o.totalPages,maxVisibleButtons:o.maxVisiblePages,total:o.total,perPage:o.perPage,currentPage:o.currentPage,onPagechanged:i.pagechanged},null,8,["totalPages","maxVisibleButtons","total","perPage","currentPage","onPagechanged"])):p("",!0)])):p("",!0),!o.isPurchased&&o.rootCauseInfo.length>0?(l(),n("div",ut,[pt,mt,x(q,{loader:o.loaderStatus,userId:a.userId,toolName:"User Interface Requirements Library"},null,8,["loader","userId"])])):p("",!0)])],2)]),x(M,{rootCauseModalInfo:o.rootCauseModalInfo,index:o.rcaIndex,onEmitNextRootCause:i.EmitNextRootCause,onEmitPreviousRootCause:i.EmitPreviousRootCause,totalCurrentRecords:o.rootCauseInfo.length},null,8,["rootCauseModalInfo","index","onEmitNextRootCause","onEmitPreviousRootCause","totalCurrentRecords"]),x(A,{loadingStatus:o.loaderStatus},null,8,["loadingStatus"])])}const zt=O(ie,[["render",_t],["__scopeId","data-v-e639f821"]]);export{zt as default};
