import{_ as S,$ as k,o as s,c as r,a as t,t as d,p as L,f as x,g as A,F as I,m as M,n as v,j as y,Y as W,e as _,k as i,b as h,r as p,v as g,B as G,d as z,I as V,w as C}from"./index-BlMJxPGQ.js";import"./event-bus-DYoA24Gz.js";import{I as Q,P as X,T as ee}from"./TrainingDetails-CIlmMz_H.js";import{A as te}from"./AddRemoveCartPopup-CqkASo7c.js";import{L as B}from"./Loader-DR0R9oEF.js";import{O as se}from"./OpusSelect-BRceMwA4.js";import{r as c,m as b}from"./index-CWzxsAm4.js";import{D as re}from"./DocumentsMoreInfo-CaOFYwEb.js";import{O as oe}from"./OpusPopoverToolTip-B6LSKCTN.js";import{g as ae}from"./countriesList-D77CXr4h.js";import{p as ie}from"./cart-QHhiBhPv.js";import{a as ne,b as le,u as de,p as ce}from"./lmsTraining-BNcLeb-5.js";import{s as ue}from"./shared-uD02DoJF.js";import{p as me}from"./marketo-zx_g1DXt.js";import{_ as _e}from"./circle_check-30p5k3cY.js";import"./moment-Cl4UOzQZ.js";import"./constants-DZfa7LnM.js";import"./info-modal-training-icon-Dm7yAfS1.js";import"./play-D7l_pjgS.js";import"./trash-D7-advNl.js";import"./goto_arrow-zLb6UYwr.js";import"./documentsMixin-Bh1uCigM.js";import"./documents-CP6oEKge.js";import"./clock-Bt2qCWrf.js";import"./calender-CCkx0mDr.js";import"./download_icon_white-BHO_3GTH.js";import"./cloneDeep-ldw2ZiUo.js";import"./_baseAssignValue-BD6sbZ4C.js";import"./OpusCheckbox-DmKgoiup.js";import"./chevron_down_new-ByXOiGKT.js";import"./tool_available-BYBTocPu.js";const pe="/static/images/icons/expiry.svg",he={props:["errorMessage"],data(){return{}},methods:{closePopup(){k("#ErrorMsgModal").modal("hide")}}},E=e=>(L("data-v-1640c508"),e=e(),x(),e),fe={class:"modal fade",id:"ErrorMsgModal","data-backdrop":"static"},ve={class:"modal-dialog error-modal-wrapper"},ye={class:"modal-content expiry-modal-content"},ge={class:"modal-header"},De={class:"card text-center"},be={class:"card-body"},Ie=E(()=>t("img",{src:pe,class:"expiry_logo card-img-top"},null,-1)),$e=E(()=>t("div",{class:"card-title"},[t("p",{class:"first-card-title update-failed"},"Update Failed")],-1)),Ce={class:"card-text"},ke={class:"error-message"},Se={class:"row"},we={class:"col-lg-12 ok-btn"};function Pe(e,a,n,D,o,m){return s(),r("div",fe,[t("div",ve,[t("div",ye,[t("div",ge,[t("div",De,[t("div",be,[Ie,$e,t("div",Ce,[t("p",ke,d(n.errorMessage),1)])]),t("div",Se,[t("div",we,[t("button",{class:"btn btn-primary btn-block stay-on-page",onClick:a[0]||(a[0]=(...u)=>m.closePopup&&m.closePopup(...u))}," OK ")])])])])])])])}const Me=S(he,[["render",Pe],["__scopeId","data-v-1640c508"]]);async function Le(e){let a;return await A.post("https://backend.opus.emergobyul.com/services/payment/init",e).then(n=>{a=n.data.data}).catch(n=>{console.log("chase uID java api error",n)}),a}async function xe(e){let a;return await A.post("https://backend.opus.emergobyul.com/services/payment/request",e).then(n=>{a=n.data.data}).catch(n=>{console.log("chase uID java api error",n)}),a}const Oe={props:["paymentModes","existingPayment","totalPrice"],data(){return{payment_option:"",uID:"",loadingStatus:!1,chaseurl:""}},components:{Loader:B},methods:{emitValues(){this.$emit("paymentOpts",this.payment_option)},async chaseuID(){const e={amount:this.totalPrice,form_type_id:0},a=await Le(e);this.uID=a.uid,this.$emit("uID",{id:a.id})}},watch:{existingPayment(){this.payment_option=this.existingPayment,this.emitValues()},async payment_option(){this.payment_option===1&&(this.loadingStatus=!0,await this.chaseuID(),this.loadingStatus=!1)}},created(){this.chaseurl="https://www.chasepaymentechhostedpay.com"},mounted(){}},qe={class:"payment_method_wrapper"},Te={class:"col-lg-12 col-md-12 col-sm-12 payment-container"},Ve={class:"row"},Be={class:"col-lg-6 col-md-6 col-sm-6"},ze=["id","value"],Ae=["for"],Ee={key:0},Ue={key:0,class:"pl-20"},Fe={id:"secureFrameWrapper"},je=["src"];function Ne(e,a,n,D,o,m){const u=p("loader");return s(),r("div",qe,[t("div",Te,[(s(!0),r(I,null,M(n.paymentModes,f=>(s(),r("div",{key:f.id},[f.display?(s(),r("div",{key:0,class:v(["col-lg-12 col-md-12 col-sm-12 box-border-wrapper mr-bt-10",{"selected-box":o.payment_option==f.id}])},[t("div",Ve,[t("div",Be,[y(t("input",{type:"radio",id:"payment-method_"+f.id,name:"payment-radio-group","onUpdate:modelValue":a[0]||(a[0]=l=>o.payment_option=l),onChange:a[1]||(a[1]=l=>m.emitValues()),value:f.id},null,40,ze),[[W,o.payment_option]]),t("label",{class:"default-label",for:"payment-method_"+f.id},[_(d(f.mode)+" ",1),f.id===1&&o.payment_option===1?(s(),r("span",Ee,"(Total Amount: $"+d(n.totalPrice)+")",1)):i("",!0)],8,Ae)])]),f.id===1&&o.payment_option===1?(s(),r("div",Ue,[t("div",Fe,[t("iframe",{id:"secureFrame",class:"secureFrame",style:{border:"none",backgroundcolor:"#f4f4f4"},height:"510px",width:"100%",src:`${o.chaseurl}/hpf/1_1/?uID=${o.uID}`},null,8,je)])])):i("",!0)],2)):i("",!0)]))),128))]),h(u,{loadingStatus:o.loadingStatus},null,8,["loadingStatus"])])}const Ye=S(Oe,[["render",Ne],["__scopeId","data-v-15618c1a"]]);function $(e){return/^[^*?<>!@#$“%^]*$/.test(e)}function U(e){return/^[\d\+\-\.\(\)\/\s]*$/.test(e)}function F(e){return e.length<=0?!0:/^\w{2,14}(?:[-\s]\w{2,5})?$/.test(e)}function j(e){return/^([a-zA-Z0-9_\-\+\.]+)@([a-zA-Z-0-9-]+)((\.([a-zA-Z0-9-]){2,63}){1,3})$/.test(e)}const Ze={first_name:{required:c,minLength:b(2)},last_name:{required:c,minLength:b(2)},email_address:{required:c,isValidMail:j},city:{required:c,minLength:b(3),isAllowedCharacters:$},state:{required:c,isAllowedCharacters:$},country:{required:c},phone_number:{required:c,isNumber:U},address:{required:c,isAllowedCharacters:$},zipcode:{required:c,minLength:b(2),isPostalCode:F}},He={first_name:{required:c,minLength:b(2)},last_name:{required:c,minLength:b(2)},email_address:{required:c,isValidMail:j},city:{required:c,minLength:b(3),isAllowedCharacters:$},state:{required:c,isAllowedCharacters:$},country:{required:c},phone_number:{required:c,isNumber:U},address:{required:c,isAllowedCharacters:$},zipcode:{required:c,minLength:b(2),isPostalCode:F},purchase_order:{required:c}},Re={props:["purchaseOrder","billingData","countriesList"],data(){return{loaderStatus:!1,userData:{first_name:"",last_name:"",email_address:"",country:"",phone_number:"",address:"",city:"",state:"",zipcode:"",purchase_order:""},validateFormSubmit:!1,specialCharacterErrMsg:"The following characters are not allowed: * ? < > ! # @ $ “ % ^",userDataCharLimit:{purchase_order:65,address:1e3,last_name:50}}},components:{loader:B,OpusSelect:se},validations(){return this.purchaseOrder?{userData:He}:{userData:Ze}},watch:{billingData:{deep:!0,handler(e){e&&Object.keys(e)&&(this.userData={...this.userData,...e})},immediate:!0}},methods:{resolvePaymentDataLength(e){this.userData[e]&&(this.userData[e]=this.userData[e].substr(0,this.userDataCharLimit[e]))}}},Je=e=>(L("data-v-3a660c16"),e=e(),x(),e),Ke={class:"col-xs-12 p-10 billing-wrapper"},We=Je(()=>t("div",{class:"col-xs-12 mb-10"},"Billing Contact’s Information",-1)),Ge={class:"col-xs-12 p-0"},Qe={class:"col-xs-12 col-sm-6"},Xe={class:"form-group"},et={for:"",class:"header-label"},tt={key:0,class:"required_astric"},st={key:0},rt={key:0,class:"custom-error-class text-center"},ot={key:1,class:"custom-error-class text-center"},at={class:"col-xs-12 col-sm-6"},it={class:"form-group"},nt={for:"",class:"header-label"},lt={key:0,class:"required_astric"},dt=["maxlength"],ct={key:0},ut={key:0,class:"custom-error-class text-center"},mt={key:1,class:"custom-error-class text-center"},_t={class:"col-xs-12 p-0"},pt={class:"col-xs-12 col-sm-6"},ht={class:"form-group"},ft={for:"",class:"header-label"},vt={key:0,class:"required_astric"},yt={key:0},gt={key:0,class:"custom-error-class text-center"},Dt={key:1,class:"custom-error-class text-center"},bt={class:"col-md-6 col-sm-6"},It={class:"form-group"},$t={for:"",class:"header-label"},Ct={key:0,class:"required_astric"},kt={key:0},St={key:0,class:"custom-error-class text-center"},wt={key:1,class:"custom-error-class text-center"},Pt={class:"col-xs-12 p-0"},Mt={class:"col-xs-12"},Lt={class:"form-group"},xt={for:"",class:"header-label"},Ot={key:0,class:"required_astric"},qt=["max-length"],Tt={key:0},Vt={key:0,class:"custom-error-class"},Bt={key:1,class:"custom-error-class"},zt={class:"col-xs-12 p-0"},At={class:"col-xs-12 col-sm-6"},Et={class:"form-group"},Ut={for:"",class:"header-label"},Ft={key:0,class:"required_astric"},jt={key:0},Nt={key:0,class:"custom-error-class"},Yt={key:1,class:"custom-error-class"},Zt={key:2,class:"custom-error-class"},Ht={class:"col-xs-12 col-sm-2"},Rt={class:"form-group"},Jt={for:"",class:"header-label"},Kt={key:0,class:"required_astric"},Wt={key:0},Gt={key:0,class:"custom-error-class"},Qt={key:1,class:"custom-error-class"},Xt={class:"col-xs-12 col-sm-4"},es={class:"form-group"},ts={class:"header-label"},ss={key:0,class:"required_astric"},rs={key:0},os={key:0,class:"custom-error-class"},as={key:1,class:"custom-error-class"},is={key:2,class:"custom-error-class"},ns={class:"col-xs-12 p-0"},ls={key:0,class:"col-xs-12 col-sm-6 col-md-6"},ds={class:"form-group"},cs={for:"",class:"header-label"},us={key:0,class:"required_astric"},ms=["maxLength"],_s={key:0},ps={key:0,class:"custom-error-class"},hs={class:"col-xs-12 col-sm-6"},fs={class:"form-group"},vs={class:"header-label"},ys={key:0,class:"required_astric"},gs={key:0,class:"custom-error-class"};function Ds(e,a,n,D,o,m){const u=p("OpusSelect"),f=p("loader");return s(),r("div",Ke,[We,t("div",Ge,[t("div",Qe,[t("div",Xe,[t("label",et,[_("First Name"),o.userData.first_name?i("",!0):(s(),r("span",tt,"*"))]),y(t("input",{class:v(["form-control",e.$v.userData.first_name.$error?"invalid":""]),"onUpdate:modelValue":a[0]||(a[0]=l=>e.$v.userData.first_name.$model=l),type:"text",placeholder:"First Name",maxlength:"65"},null,2),[[g,e.$v.userData.first_name.$model,void 0,{trim:!0}]]),e.$v.userData.first_name.$error?(s(),r("div",st,[e.$v.userData.first_name.required?e.$v.userData.first_name.minLength?i("",!0):(s(),r("div",ot," Minimum 2 characters required. ")):(s(),r("div",rt," Complete required field "))])):i("",!0)])]),t("div",at,[t("div",it,[t("label",nt,[_("Last Name"),o.userData.last_name?i("",!0):(s(),r("span",lt,"*"))]),y(t("input",{class:v(["form-control",e.$v.userData.last_name.$error?"invalid":""]),maxlength:o.userDataCharLimit.last_name,type:"text",placeholder:"Last Name","onUpdate:modelValue":a[1]||(a[1]=l=>e.$v.userData.last_name.$model=l),onInput:a[2]||(a[2]=l=>m.resolvePaymentDataLength("last_name"))},null,42,dt),[[g,e.$v.userData.last_name.$model,void 0,{trim:!0}]]),e.$v.userData.last_name.$error?(s(),r("div",ct,[e.$v.userData.last_name.required?e.$v.userData.last_name.minLength?i("",!0):(s(),r("div",mt," Minimum 2 characters required. ")):(s(),r("div",ut," Complete required field "))])):i("",!0)])])]),t("div",_t,[t("div",pt,[t("div",ht,[t("label",ft,[_("Email address"),o.userData.email_address?i("",!0):(s(),r("span",vt,"*"))]),y(t("input",{class:v(["form-control",e.$v.userData.email_address.$error?"invalid":""]),type:"text",placeholder:"Email","onUpdate:modelValue":a[3]||(a[3]=l=>e.$v.userData.email_address.$model=l),maxlength:"65"},null,2),[[g,e.$v.userData.email_address.$model,void 0,{trim:!0}]]),e.$v.userData.email_address.$error?(s(),r("div",yt,[e.$v.userData.email_address.required?e.$v.userData.email_address.isValidMail?i("",!0):(s(),r("div",Dt," Invalid email format. Valid entries include: someone@example.com. ")):(s(),r("div",gt," Complete required field "))])):i("",!0)])]),t("div",bt,[t("div",It,[t("label",$t,[_("Phone number"),o.userData.phone_number?i("",!0):(s(),r("span",Ct,"*"))]),y(t("input",{class:v(["form-control",e.$v.userData.phone_number.$error?"invalid":""]),type:"text",size:"15",maxlength:"30",placeholder:"Phone number","onUpdate:modelValue":a[4]||(a[4]=l=>e.$v.userData.phone_number.$model=l)},null,2),[[g,e.$v.userData.phone_number.$model,void 0,{trim:!0}]]),e.$v.userData.phone_number.$error?(s(),r("div",kt,[e.$v.userData.phone_number.required?i("",!0):(s(),r("div",St," Complete required field ")),e.$v.userData.phone_number.isNumber?i("",!0):(s(),r("div",wt," Please enter valid phone number "))])):i("",!0)])])]),t("div",Pt,[t("div",Mt,[t("div",Lt,[t("label",xt,[_("Address"),o.userData.address?i("",!0):(s(),r("span",Ot,"*"))]),y(t("input",{class:v(["form-control comn_border",e.$v.userData.address.$error?"invalid":""]),"max-length":o.userDataCharLimit.address,type:"text",size:"60",placeholder:"Street Address","onUpdate:modelValue":a[5]||(a[5]=l=>e.$v.userData.address.$model=l),onInput:a[6]||(a[6]=l=>m.resolvePaymentDataLength("address"))},null,42,qt),[[g,e.$v.userData.address.$model,void 0,{trim:!0}]]),e.$v.userData.address.$error?(s(),r("div",Tt,[e.$v.userData.address.required?i("",!0):(s(),r("div",Vt," Complete required field ")),e.$v.userData.address.isAllowedCharacters?i("",!0):(s(),r("div",Bt,d(o.specialCharacterErrMsg),1))])):i("",!0)])])]),t("div",zt,[t("div",At,[t("div",Et,[t("label",Ut,[_("City"),o.userData.city?i("",!0):(s(),r("span",Ft,"*"))]),y(t("input",{class:v(["form-control comn_border",e.$v.userData.city.$error?"invalid":""]),type:"text",size:"60",maxlength:"50",placeholder:"City","onUpdate:modelValue":a[7]||(a[7]=l=>e.$v.userData.city.$model=l)},null,2),[[g,e.$v.userData.city.$model,void 0,{trim:!0}]]),e.$v.userData.city.$error?(s(),r("div",jt,[e.$v.userData.city.required?i("",!0):(s(),r("div",Nt," Complete required field ")),e.$v.userData.city.minLength?e.$v.userData.city.isAllowedCharacters?i("",!0):(s(),r("div",Zt,d(o.specialCharacterErrMsg),1)):(s(),r("div",Yt," Minimum 3 characters required. "))])):i("",!0)])]),t("div",Ht,[t("div",Rt,[t("label",Jt,[_("State"),o.userData.state?i("",!0):(s(),r("span",Kt,"*"))]),y(t("input",{class:v(["form-control comn_border",e.$v.userData.state.$error?"invalid":""]),type:"text",size:"60",maxlength:"50",placeholder:"State","onUpdate:modelValue":a[8]||(a[8]=l=>e.$v.userData.state.$model=l)},null,2),[[g,e.$v.userData.state.$model,void 0,{trim:!0}]]),e.$v.userData.state.$error?(s(),r("div",Wt,[e.$v.userData.state.required?i("",!0):(s(),r("div",Gt," Complete required field ")),e.$v.userData.state.isAllowedCharacters?i("",!0):(s(),r("div",Qt,d(o.specialCharacterErrMsg),1))])):i("",!0)])]),t("div",Xt,[t("div",es,[t("label",ts,[_("Zip Code"),o.userData.zipcode?i("",!0):(s(),r("span",ss,"*"))]),y(t("input",{class:v(["form-control comn_border",e.$v.userData.zipcode.$error?"invalid":""]),type:"text",maxlength:"15",placeholder:"Zip / Postal code","onUpdate:modelValue":a[9]||(a[9]=l=>e.$v.userData.zipcode.$model=l)},null,2),[[g,e.$v.userData.zipcode.$model,void 0,{trim:!0}]]),e.$v.userData.zipcode.$error?(s(),r("div",rs,[e.$v.userData.zipcode.required?i("",!0):(s(),r("div",os," Complete required field ")),e.$v.userData.zipcode.minLength?!e.$v.userData.zipcode.isPostalCode&&o.userData.zipcode?(s(),r("div",is," Valid Zip/Postal Code Required ")):i("",!0):(s(),r("div",as," Minimum 2 characters required. "))])):i("",!0)])])]),t("div",ns,[n.purchaseOrder?(s(),r("div",ls,[t("div",ds,[t("label",cs,[_("Purchase Order"),o.userData.purchase_order?i("",!0):(s(),r("span",us,"*"))]),y(t("input",{class:v(["form-control comn_border",e.$v.userData.purchase_order.$error?"invalid":""]),maxLength:o.userDataCharLimit.purchase_order,type:"text",placeholder:"Purchase Order","onUpdate:modelValue":a[10]||(a[10]=l=>e.$v.userData.purchase_order.$model=l),onInput:a[11]||(a[11]=l=>m.resolvePaymentDataLength("purchase_order"))},null,42,ms),[[g,e.$v.userData.purchase_order.$model,void 0,{trim:!0}]]),e.$v.userData.purchase_order.$error?(s(),r("div",_s,[e.$v.userData.purchase_order.required?i("",!0):(s(),r("div",ps," Complete required field "))])):i("",!0)])])):i("",!0),t("div",hs,[t("div",fs,[t("label",vs,[_("Country"),o.userData.country?i("",!0):(s(),r("span",ys,"*"))]),h(u,{class:v(e.$v.userData.country.$error?"invalid":""),"allow-empty":!1,searchable:!0,placeholder:"Select a country",label:"country_name",modelValue:e.$v.userData.country.$model,"onUpdate:modelValue":a[12]||(a[12]=l=>e.$v.userData.country.$model=l),modelModifiers:{trim:!0},"show-labels":!1,options:n.countriesList.map(l=>l.country_name),"custom-label":l=>n.countriesList.find(q=>q.country_name===l).country_name},null,8,["class","modelValue","options","custom-label"]),!e.$v.userData.country.required&&e.$v.userData.country.$error?(s(),r("div",gs," Complete required field ")):i("",!0)])])]),h(f,{loadingStatus:o.loaderStatus},null,8,["loadingStatus"])])}const bs=S(Re,[["render",Ds],["__scopeId","data-v-3a660c16"]]),Is={props:["billingInfo","totalPrice","cartDetails","isCreditCardPurchase"],data(){return{}},computed:{isBillingInfoAvailable(){return!!(this.billingInfo&&Object.keys(this.billingInfo).length>0)}}},O=e=>(L("data-v-18a84e17"),e=e(),x(),e),$s={class:"col-xs-12"},Cs={class:"col-xs-12 pl-0 pr-0 pb-10 d-flex confirmation-header justify-content-between"},ks={class:"font-18 text-secondary"},Ss={class:"font-22 fw-700 pr-20"},ws={class:"col-sm-10 col-xs-12 p-0 d-flex flex-direction-column word-break"},Ps={class:"plan-name mb-5"},Ms=["innerHTML"],Ls={key:1},xs={class:"col-xs-12 col-sm-2 pr-20 d-flex flex-direction-column align-items-end"},Os=O(()=>t("div",{class:"mb-10"},"Price",-1)),qs=O(()=>t("div",{class:"col-xs-12 confirmation-message p-0 mt-15 pt-15 pb-15 font-18 font-bold text-emergo-green"}," Credit card payment successful! ",-1)),Ts=O(()=>t("div",{class:"col-xs-12 p-0 mt-20"},[t("div",{class:"col-xs-12 p-0 payment-info pb-10 d-flex justify-content-between font-18"},[t("div",{class:"font-bold"},"Payment Method"),t("div",null,"Credit Card")])],-1)),Vs=O(()=>t("div",{class:"col-xs-12 pl-0 mt-30 confirmation-header pb-10 font-18 text-secondary mb-10"}," Billing Info ",-1)),Bs={class:"pt-10 mt-10"},zs={class:"billing-address"};function As(e,a,n,D,o,m){return s(),r("div",$s,[n.cartDetails&&n.cartDetails.cart_items?(s(),r(I,{key:0},[t("div",Cs,[t("div",ks,d(n.isCreditCardPurchase?"Purchased":"Selected"),1),t("div",Ss," Total: $"+d(n.cartDetails.total_price),1)]),(s(!0),r(I,null,M(n.cartDetails.cart_items,u=>(s(),r("div",{class:"col-xs-12 p-0 mt-20",key:u.cart_id},[t("div",ws,[t("div",Ps,d(u.plan_name),1),u.is_documents||u.is_tools?(s(),r("div",{key:0,innerHTML:u[u.plan_type].description},null,8,Ms)):(s(),r("div",Ls,d(u[u.plan_type].description),1))]),t("div",xs,[Os,t("div",null,"$"+d(u.price),1)])]))),128))],64)):i("",!0),n.isCreditCardPurchase?(s(),r(I,{key:1},[qs,Ts],64)):i("",!0),m.isBillingInfoAvailable?(s(),r(I,{key:2},[Vs,t("p",Bs,d(n.billingInfo.first_name)+" "+d(n.billingInfo.last_name),1),t("p",null,d(n.billingInfo.email_address),1),t("p",null,d(n.billingInfo.phone_number),1),t("p",zs,d(decodeURIComponent(n.billingInfo.address)),1),t("p",null,d(n.billingInfo.state),1),t("p",null,d(n.billingInfo.country),1),t("p",null,d(n.billingInfo.zipcode),1)],64)):i("",!0)])}const Es=S(Is,[["render",As],["__scopeId","data-v-18a84e17"]]),Us={props:["cartDetails","accountId","userId"],mixins:[ue],data(){return{videoInfo:{},isCreditCardPurchase:!1,selectedDocument:{},selectedTraining:{},countriesList:[],billingData:{},errorMessage:"",cartInfo:{},cartListItems:[],selectedCartId:null,loaderStatus:!1,totalPrice:0,currentSlider:0,slidesInfo:[{title:"View your Cart"},{title:"Payment method"},{title:"Billing Info"},{title:"Confirmation"}],billingInfo:{},paymentModes:[{id:1,mode:"Credit",display:!0},{id:2,mode:"Invoice",display:!0},{id:3,mode:"Purchase Order",display:!0}],cwPaymentModes:[{id:1,mode:"Credit",display:!0},{id:2,mode:"Invoice",display:!1},{id:3,mode:"Purchase Order",display:!1}],payment_option:"",uIDVal:"",paymentStatus:!1,paymentId:"",orderId:"",txnId:"",userData:null,newOperation:null}},components:{AddRemoveCartPopup:te,BillingInfo:bs,Confirmation:Es,DocumentsInfo:re,ErrorModal:Me,Loader:B,InfoModal:Q,PaymentOptions:Ye,PreviewModal:X,trainingDetails:ee,BaseButton:G,OpusPopoverToolTip:oe},watch:{cartDetails:{handler(){this.cartListItems=this.cartDetails.cart_items,this.totalPrice=this.cartDetails.total_price},immediate:!0}},async created(){this.loaderStatus=!0;const e=await ne();this.billingData=e||{},this.countriesList=await ae(),this.userData=JSON.parse(localStorage.getItem("userData")),this.loaderStatus=!1,window.addEventListener("successClick",this.savePurchasedList),this.emitter.emit("fetchCartList")},methods:{async savePurchasedList(){window.removeEventListener("successClick",this.savePurchasedList),this.loaderStatus=!0,await this.getPaymentInfo(!0),this.errorMessage===""&&(await this.purchaseAllCartItems(!0),this.currentSlider+=2),this.loaderStatus=!1},async getPaymentInfo(e=!1){const a=await xe(this.uIDVal);this.paymentId=a.id,this.orderId=a.order_id,this.txnId=a.txn_ref,this.billingInfo=await le(a.order_id),this.paymentId&&a.customer_ref_num?(this.paymentStatus=!0,e||(this.currentSlider+=2),this.errorMessage=""):(this.errorMessage="Payment processing/failed with the selected method. Please wait or try again",k("#ErrorMsgModal").modal("show"))},paymentOptions(e){this.payment_option=e},uID(e){this.uIDVal=e},async navigateToNextSlide(){if(this.currentSlider===1&&!this.payment_option)this.errorMessage="Please select any payment method",k("#ErrorMsgModal").modal("show");else if(this.currentSlider===1&&this.payment_option===1)this.loaderStatus=!0,await this.getPaymentInfo(),this.loaderStatus=!1;else if(this.currentSlider===2){if(this.$refs.billingInfo.$v.$touch(),this.$refs.billingInfo.$v.$invalid)return;this.billingInfo={...this.$refs.billingInfo.$v.userData.$model},this.currentSlider+=1;const e={email:JSON.parse(localStorage.getItem("userData")).email,Last_Interest:"Human Factors Research & Design",page_urlextended:window.location.href,page_urlreferral_extended:document.referrer,form_control:"Purchase",customer_comments:this.cartListItems.map(a=>a.type?`${a.plan_type}:${a.type}:${a.plan_name}`:`${a.plan_type}:${a.plan_name}`).join("; ")};me(e)}else this.currentSlider===3?this.isCreditCardPurchase?this.navigateToMarketPlace():(this.loaderStatus=!0,await this.purchaseAllCartItems(),this.loaderStatus=!1):this.currentSlider+=1},navigateToMarketPlace(){this.$router.push("/market-place"),this.emitter.emit("fetchCartList")},async purchaseAllCartItems(e=!1){this.payment_option!==1&&await this.AddOrUpdateBillingInfo();const a=new Date;this.payment_option===2||this.payment_option===3?this.newOperation=5:this.newOperation=6;const n={account_id:this.accountId,operation:this.newOperation,order_id:this.orderId||"",payment_id:this.paymentId||"",payment_mode:this.payment_option,purchase_order:this.billingInfo.purchase_order||"",txn_ref:this.txnId||"",user_id:this.userId,valid_from:z(a).format("YYYY-MM-DDTHH:mm:ss.SSS[Z]"),valid_until:z(a).add("years",5).format("YYYY-MM-DDTHH:mm:ss.SSS[Z]")},D=await ie(n);D.status_code===200?(k("#custom-notification-bottom").addClass("custom-notification-bottom-80"),this.emitter.emit("cart-items-updated"),this.$notify({type:D.message,title:"Success",text:D.data}),this.isCreditCardPurchase=e,this.emitter.emit("get-notification-count"),setTimeout(()=>{k("#custom-notification-bottom").removeClass("custom-notification-bottom-80")},1e4),e||this.navigateToMarketPlace()):this.$notify({type:"error",title:"Error",text:"Please try again later!"})},async AddOrUpdateBillingInfo(){let e={};Object.keys(this.billingData).length?e=await de(this.billingInfo):e=await ce(this.billingInfo),e.status_code!==200&&this.$notify({type:"error",title:"Error",text:e.data})}},beforeDestroy(){window.removeEventListener("successClick",this.savePurchasedList)}},Fs=e=>(L("data-v-9f7c2990"),e=e(),x(),e),js={class:"col-xs-12 cart-wrapper"},Ns={class:"col-xs-12 plr-25 mb-30"},Ys={class:"crumb-trail"},Zs={class:"crumb"},Hs={key:0,src:_e,class:"breadcrumb-img"},Rs={class:"ml-5"},Js={key:0,class:"col-xs-12 p-0"},Ks={key:2,class:"col-xs-12"},Ws={key:1,class:"col-xs-12 text-center no-data-text font-22 fw-700 mt-20"},Gs={class:"row p-20 d-flex col-gap-10 justify-content-end cart-footer"},Qs={key:1},Xs=Fs(()=>t("p",{class:"mt-10 break-word"},[_(" Please scroll down on credit page and click on "),t("b",null,"COMPLETE"),_(" to complete the payment. ")],-1)),er={key:2};function tr(e,a,n,D,o,m){const u=p("training-details"),f=p("payment-options"),l=p("billing-info"),q=p("confirmation"),T=p("BaseButton"),N=p("OpusPopoverToolTip"),Y=p("info-modal"),Z=p("error-modal"),H=p("add-remove-cart-popup"),R=p("preview-modal"),J=p("documents-info"),K=p("loader");return s(),r("div",js,[t("div",Ns,[t("ul",Ys,[(s(!0),r(I,null,M(o.slidesInfo,(w,P)=>(s(),r("li",{class:v(["col-xs-3 p-0",{"is-active-slide":o.currentSlider===P,completed_slide:o.currentSlider>P}]),key:P},[t("div",Zs,[o.currentSlider>P?(s(),r("img",Hs)):i("",!0),t("span",Rs,d(w.title),1)])],2))),128))])]),n.cartDetails.cart_items&&n.cartDetails.cart_items.length?(s(),r("div",Js,[o.currentSlider===0?(s(!0),r(I,{key:0},M(n.cartDetails.cart_items,w=>(s(),r("div",{class:"col-xs-12",key:w.cart_id},[h(u,{type:"cart",onSetSelectedTrainingItem:e.setSelectedTrainingItem,trainingDetails:w,onSetCartInfo:e.setCartInfo},null,8,["onSetSelectedTrainingItem","trainingDetails","onSetCartInfo"])]))),128)):i("",!0),o.currentSlider===1?(s(),V(f,{key:1,paymentModes:o.userData.role_id===13?o.cwPaymentModes:o.paymentModes,onPaymentOpts:m.paymentOptions,totalPrice:o.totalPrice,onUID:m.uID},null,8,["paymentModes","onPaymentOpts","totalPrice","onUID"])):i("",!0),o.currentSlider===2?(s(),r("div",Ks,[h(l,{countriesList:o.countriesList,billingData:o.billingData,purchaseOrder:o.payment_option===3,ref:"billingInfo"},null,8,["countriesList","billingData","purchaseOrder"])])):i("",!0),o.currentSlider===3?(s(),V(q,{key:3,isCreditCardPurchase:o.isCreditCardPurchase,cartDetails:n.cartDetails,billingInfo:o.billingInfo,totalPrice:o.totalPrice},null,8,["isCreditCardPurchase","cartDetails","billingInfo","totalPrice"])):i("",!0)])):i("",!0),n.cartDetails.cart_items&&!n.cartDetails.cart_items.length&&!o.loaderStatus?(s(),r("div",Ws," Your cart is empty ")):i("",!0),t("div",Gs,[o.isCreditCardPurchase?i("",!0):(s(),V(T,{key:0,variant:"secondary",onClick:m.navigateToMarketPlace},{default:C(()=>[_("Cancel")]),_:1},8,["onClick"])),o.payment_option===1&&o.currentSlider===1?(s(),r("div",Qs,[h(N,{position:"left"},{content:C(()=>[Xs]),default:C(()=>[h(T,{disabled:!(n.cartDetails.cart_items&&n.cartDetails.cart_items.length)||o.payment_option===1&&o.currentSlider!==3,onClick:m.navigateToNextSlide},{default:C(()=>[_(d(o.currentSlider===3?"Complete":"Continue"),1)]),_:1},8,["disabled","onClick"])]),_:1})])):(s(),r("div",er,[h(T,{disabled:!(n.cartDetails.cart_items&&n.cartDetails.cart_items.length)||o.payment_option===1&&o.currentSlider!==3,onClick:m.navigateToNextSlide},{default:C(()=>[_(d(o.currentSlider===3?"Complete":"Continue"),1)]),_:1},8,["disabled","onClick"])]))]),h(Y,{loader:o.loaderStatus,trainingInfo:o.selectedTraining,userId:n.userId,accountId:n.accountId,onSetCartInfo:e.setCartInfo},null,8,["loader","trainingInfo","userId","accountId","onSetCartInfo"]),h(Z,{errorMessage:o.errorMessage},null,8,["errorMessage"]),h(H,{cartInfo:o.cartInfo,onRemoveFromCart:e.removeFromCart},null,8,["cartInfo","onRemoveFromCart"]),h(R,{trainingInfo:o.videoInfo},null,8,["trainingInfo"]),h(J,{loader:o.loaderStatus,templateInfo:o.selectedDocument,userId:n.userId,onSetCartInfo:e.setCartInfo},null,8,["loader","templateInfo","userId","onSetCartInfo"]),h(K,{loadingStatus:o.loaderStatus},null,8,["loadingStatus"])])}const qr=S(Us,[["render",tr],["__scopeId","data-v-9f7c2990"]]);export{qr as default};
