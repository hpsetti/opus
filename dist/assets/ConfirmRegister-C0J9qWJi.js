import{c as w,r as v,s as f}from"./index-CWzxsAm4.js";import{c as k,a as g}from"./passwords-hrBXkaP1.js";import{_ as b,P as $,c as o,a as e,i as y,j as l,v as c,n as u,k as i,e as m,q as T,t as _,b as V,o as t,p as P,f as B,r as A}from"./index-BlMJxPGQ.js";import{I as C}from"./InvalidTokenMessage-CKY0-tCT.js";const M=w.regex("passwordValidation",$),S={data(){return{data:{password:"",confirm_password:"",terms_conditions:""},errorMessage:"",isTokenValid:!0,disableButton:!1,ButtonText:"Confirm Account"}},components:{InvalidTokenMessage:C},validations:{data:{password:{required:v,passwordValidation:M},confirm_password:{required:v,sameAsPassword:f(function(){return this.data.password})},terms_conditions:{checked(s){return s}}}},async created(){await this.validateToken()},methods:{async confirmAccount(){if(this.$v.$touch(),!this.$v.$invalid){this.disableButton=!0,this.ButtonText="Submitting...";const s=await k(this.data,this.$route.params.token);this.disableButton=!0,this.ButtonText="Confirm Account",s.token&&s.token==="invalid"?this.isTokenValid=!1:s.status?this.$router.push({name:"login",params:{successMessage:s.message}}):s.status||(this.errorMessage=s.message)}},async validateToken(){(await g(this.$route.params.token)).token!=="valid"&&(this.isTokenValid=!1)}}},d=s=>(P("data-v-61db949d"),s=s(),B(),s),I={class:"row"},q={class:"col-lg-12 col-md-12 col-sm-12 col-xs-12 txt-alg-ctr"},N={key:0,class:"login-whitebox landinglayout_box_wrapper"},U=d(()=>e("h1",null,"Create an account",-1)),x=d(()=>e("p",{class:"mb-20"}," Please enter a password below to create your account. ",-1)),R={class:"login-container"},z={class:"login-input"},D=d(()=>e("i",{class:"fa fa-lock"},null,-1)),Y={key:0,class:"error_text"},j={key:0},E={key:1},O=d(()=>e("br",null,null,-1)),Z={class:"login-container"},F={class:"login-input"},G=d(()=>e("i",{class:"fa fa-lock"},null,-1)),H={key:0,class:"error_text"},J={key:0},K={key:1},L=d(()=>e("span",{class:"terms-conditions"},[m(" I acknowledge that I have read and agree to the "),e("span",{class:"term-priv"},[e("a",{href:"/terms-of-service",target:"_blank"},"OPUS Software-as-a-Service Agreement")])],-1)),Q={key:0,class:"error_text"},W={key:0},X={key:0,class:"error-msg-holder"},ss={class:"error-message"},es=d(()=>e("br",null,null,-1)),os=["disabled"],ts={key:1};function as(s,a,rs,is,n,p){const h=A("invalid-token-message");return t(),o("div",{class:u(["container-fluid password-container",{hide_banner:!n.isTokenValid}])},[e("div",I,[e("div",q,[n.isTokenValid?(t(),o("div",N,[U,e("form",{onSubmit:a[4]||(a[4]=y((...r)=>p.confirmAccount&&p.confirmAccount(...r),["prevent"]))},[x,e("div",R,[e("div",z,[l(e("input",{class:u(["login-input-box landing-input-field",{field_error:s.$v.data.password.$error}]),"onUpdate:modelValue":[a[0]||(a[0]=r=>s.$v.data.password.$model=r),a[1]||(a[1]=r=>n.data.password=r)],type:"password",name:"password",placeholder:"New password"},null,2),[[c,s.$v.data.password.$model,void 0,{trim:!0}],[c,n.data.password]]),D]),s.$v.data.password.$error?(t(),o("div",Y,[s.$v.data.password.required?i("",!0):(t(),o("div",j," Password is required. ")),s.$v.data.password.required&&!s.$v.data.password.passwordValidation?(t(),o("div",E,[m(" Password must include at least 10 characters "),O,m("Your password must meet 3 of these 4 criteria: 1 capital letter (A-Z), 1 lowercase letter (a-z), 1 number (1-9), and one special character (!@#$.,+=( )_%^&*) ")])):i("",!0)])):i("",!0)]),e("div",Z,[e("div",F,[l(e("input",{class:u(["login-input-box landing-input-field",{field_error:s.$v.data.confirm_password.$error}]),"onUpdate:modelValue":a[2]||(a[2]=r=>s.$v.data.confirm_password.$model=r),type:"password",name:"confirm_password",placeholder:"Confirm password"},null,2),[[c,s.$v.data.confirm_password.$model,void 0,{trim:!0}]]),G]),s.$v.data.confirm_password.$error?(t(),o("div",H,[s.$v.data.confirm_password.required?i("",!0):(t(),o("div",J," Please confirm your password ")),s.$v.data.confirm_password.required&&!s.$v.data.confirm_password.sameAsPassword?(t(),o("div",K," The password doesn't match the password above ")):i("",!0)])):i("",!0)]),e("div",null,[l(e("input",{type:"checkbox",value:"true","onUpdate:modelValue":a[3]||(a[3]=r=>s.$v.data.terms_conditions.$model=r)},null,512),[[T,s.$v.data.terms_conditions.$model,void 0,{trim:!0}]]),L,s.$v.data.terms_conditions.$error?(t(),o("div",Q,[s.$v.data.terms_conditions.checked?i("",!0):(t(),o("div",W," You must accept the Privacy and Cookie Policies to create an account "))])):i("",!0)]),n.errorMessage?(t(),o("div",X,[e("span",ss,_(n.errorMessage),1),es])):i("",!0),e("button",{class:"btn btn-modal-footer submit-btn",type:"submit",disabled:n.disableButton},_(n.ButtonText),9,os)],32)])):(t(),o("div",ts,[V(h,{page:"confirmregister"})]))])])],2)}const us=b(S,[["render",as],["__scopeId","data-v-61db949d"]]);export{us as default};
